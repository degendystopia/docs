/*! For license information please see vendors.db1d7ad3392e1dbdb814.bundle.js.LICENSE.txt */
(self.webpackChunkdegen_dystopia=self.webpackChunkdegen_dystopia||[]).push([[216],{3877:function(t,e,i){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(8677).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function l(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var a=t.charCodeAt(o)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===i)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,o=s%r,a=Math.min(s,s-o)+i,h=0,u=i;u<a;u+=r)h=l(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var c=1;for(h=l(t,u,t.length,e),u=0;u<o;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var l=1;l<r;l++){for(var u=h>>>26,c=67108863&h,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var p=l-f|0;u+=(o=(n=0|t.words[p])*(s=0|e.words[f])+c)/67108864|0,c=67108863&o}i.words[l]=0|c,h=0|u}return 0!==h?i.words[l]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<n|s)).toString(16);i=0!=(s=a>>>24-n&16777215)||o!==this.length-1?u[6-h.length]+h+i:h+i,(n+=2)>=26&&(n-=26,o--)}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(t);i=(p=p.idivn(f)).isZero()?g+i:u[l-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0"),this.strip();var o,a,h="le"===e,l=new t(s),u=this.clone();if(h){for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),l[a]=o;for(;a<s;a++)l[a]=0}else{for(a=0;a<s-n;a++)l[a]=0;for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),l[s-a-1]=o}return l},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,s,o=t.words,a=e.words,h=i.words,l=0,u=0|o[0],c=8191&u,d=u>>>13,f=0|o[1],p=8191&f,g=f>>>13,v=0|o[2],m=8191&v,y=v>>>13,x=0|o[3],b=8191&x,w=x>>>13,T=0|o[4],S=8191&T,E=T>>>13,C=0|o[5],_=8191&C,A=C>>>13,M=0|o[6],P=8191&M,k=M>>>13,O=0|o[7],R=8191&O,L=O>>>13,I=0|o[8],F=8191&I,D=I>>>13,B=0|o[9],N=8191&B,z=B>>>13,U=0|a[0],Y=8191&U,X=U>>>13,G=0|a[1],W=8191&G,V=G>>>13,j=0|a[2],H=8191&j,q=j>>>13,K=0|a[3],Z=8191&K,J=K>>>13,$=0|a[4],Q=8191&$,tt=$>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ht=8191&at,lt=at>>>13,ut=0|a[8],ct=8191&ut,dt=ut>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var vt=(l+(r=Math.imul(c,Y))|0)+((8191&(n=(n=Math.imul(c,X))+Math.imul(d,Y)|0))<<13)|0;l=((s=Math.imul(d,X))+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(p,Y),n=(n=Math.imul(p,X))+Math.imul(g,Y)|0,s=Math.imul(g,X);var mt=(l+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,V)|0)+Math.imul(d,W)|0))<<13)|0;l=((s=s+Math.imul(d,V)|0)+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,Y),n=(n=Math.imul(m,X))+Math.imul(y,Y)|0,s=Math.imul(y,X),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,V)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,V)|0;var yt=(l+(r=r+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(d,H)|0))<<13)|0;l=((s=s+Math.imul(d,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(b,Y),n=(n=Math.imul(b,X))+Math.imul(w,Y)|0,s=Math.imul(w,X),r=r+Math.imul(m,W)|0,n=(n=n+Math.imul(m,V)|0)+Math.imul(y,W)|0,s=s+Math.imul(y,V)|0,r=r+Math.imul(p,H)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,q)|0;var xt=(l+(r=r+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(d,Z)|0))<<13)|0;l=((s=s+Math.imul(d,J)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(S,Y),n=(n=Math.imul(S,X))+Math.imul(E,Y)|0,s=Math.imul(E,X),r=r+Math.imul(b,W)|0,n=(n=n+Math.imul(b,V)|0)+Math.imul(w,W)|0,s=s+Math.imul(w,V)|0,r=r+Math.imul(m,H)|0,n=(n=n+Math.imul(m,q)|0)+Math.imul(y,H)|0,s=s+Math.imul(y,q)|0,r=r+Math.imul(p,Z)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(g,Z)|0,s=s+Math.imul(g,J)|0;var bt=(l+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(d,Q)|0))<<13)|0;l=((s=s+Math.imul(d,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(_,Y),n=(n=Math.imul(_,X))+Math.imul(A,Y)|0,s=Math.imul(A,X),r=r+Math.imul(S,W)|0,n=(n=n+Math.imul(S,V)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,V)|0,r=r+Math.imul(b,H)|0,n=(n=n+Math.imul(b,q)|0)+Math.imul(w,H)|0,s=s+Math.imul(w,q)|0,r=r+Math.imul(m,Z)|0,n=(n=n+Math.imul(m,J)|0)+Math.imul(y,Z)|0,s=s+Math.imul(y,J)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,tt)|0;var wt=(l+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(d,it)|0))<<13)|0;l=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(P,Y),n=(n=Math.imul(P,X))+Math.imul(k,Y)|0,s=Math.imul(k,X),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,V)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,V)|0,r=r+Math.imul(S,H)|0,n=(n=n+Math.imul(S,q)|0)+Math.imul(E,H)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(w,Z)|0,s=s+Math.imul(w,J)|0,r=r+Math.imul(m,Q)|0,n=(n=n+Math.imul(m,tt)|0)+Math.imul(y,Q)|0,s=s+Math.imul(y,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(g,it)|0,s=s+Math.imul(g,rt)|0;var Tt=(l+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(d,st)|0))<<13)|0;l=((s=s+Math.imul(d,ot)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(R,Y),n=(n=Math.imul(R,X))+Math.imul(L,Y)|0,s=Math.imul(L,X),r=r+Math.imul(P,W)|0,n=(n=n+Math.imul(P,V)|0)+Math.imul(k,W)|0,s=s+Math.imul(k,V)|0,r=r+Math.imul(_,H)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(A,H)|0,s=s+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,n=(n=n+Math.imul(S,J)|0)+Math.imul(E,Z)|0,s=s+Math.imul(E,J)|0,r=r+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,tt)|0,r=r+Math.imul(m,it)|0,n=(n=n+Math.imul(m,rt)|0)+Math.imul(y,it)|0,s=s+Math.imul(y,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0;var St=(l+(r=r+Math.imul(c,ht)|0)|0)+((8191&(n=(n=n+Math.imul(c,lt)|0)+Math.imul(d,ht)|0))<<13)|0;l=((s=s+Math.imul(d,lt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(F,Y),n=(n=Math.imul(F,X))+Math.imul(D,Y)|0,s=Math.imul(D,X),r=r+Math.imul(R,W)|0,n=(n=n+Math.imul(R,V)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,V)|0,r=r+Math.imul(P,H)|0,n=(n=n+Math.imul(P,q)|0)+Math.imul(k,H)|0,s=s+Math.imul(k,q)|0,r=r+Math.imul(_,Z)|0,n=(n=n+Math.imul(_,J)|0)+Math.imul(A,Z)|0,s=s+Math.imul(A,J)|0,r=r+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,s=s+Math.imul(w,rt)|0,r=r+Math.imul(m,st)|0,n=(n=n+Math.imul(m,ot)|0)+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,r=r+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,lt)|0)+Math.imul(g,ht)|0,s=s+Math.imul(g,lt)|0;var Et=(l+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((s=s+Math.imul(d,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(N,Y),n=(n=Math.imul(N,X))+Math.imul(z,Y)|0,s=Math.imul(z,X),r=r+Math.imul(F,W)|0,n=(n=n+Math.imul(F,V)|0)+Math.imul(D,W)|0,s=s+Math.imul(D,V)|0,r=r+Math.imul(R,H)|0,n=(n=n+Math.imul(R,q)|0)+Math.imul(L,H)|0,s=s+Math.imul(L,q)|0,r=r+Math.imul(P,Z)|0,n=(n=n+Math.imul(P,J)|0)+Math.imul(k,Z)|0,s=s+Math.imul(k,J)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,n=(n=n+Math.imul(S,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(b,st)|0,n=(n=n+Math.imul(b,ot)|0)+Math.imul(w,st)|0,s=s+Math.imul(w,ot)|0,r=r+Math.imul(m,ht)|0,n=(n=n+Math.imul(m,lt)|0)+Math.imul(y,ht)|0,s=s+Math.imul(y,lt)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,dt)|0)+Math.imul(g,ct)|0,s=s+Math.imul(g,dt)|0;var Ct=(l+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,gt)|0)+Math.imul(d,pt)|0))<<13)|0;l=((s=s+Math.imul(d,gt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(N,W),n=(n=Math.imul(N,V))+Math.imul(z,W)|0,s=Math.imul(z,V),r=r+Math.imul(F,H)|0,n=(n=n+Math.imul(F,q)|0)+Math.imul(D,H)|0,s=s+Math.imul(D,q)|0,r=r+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,J)|0,r=r+Math.imul(P,Q)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(A,it)|0,s=s+Math.imul(A,rt)|0,r=r+Math.imul(S,st)|0,n=(n=n+Math.imul(S,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(b,ht)|0,n=(n=n+Math.imul(b,lt)|0)+Math.imul(w,ht)|0,s=s+Math.imul(w,lt)|0,r=r+Math.imul(m,ct)|0,n=(n=n+Math.imul(m,dt)|0)+Math.imul(y,ct)|0,s=s+Math.imul(y,dt)|0;var _t=(l+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;l=((s=s+Math.imul(g,gt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(N,H),n=(n=Math.imul(N,q))+Math.imul(z,H)|0,s=Math.imul(z,q),r=r+Math.imul(F,Z)|0,n=(n=n+Math.imul(F,J)|0)+Math.imul(D,Z)|0,s=s+Math.imul(D,J)|0,r=r+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,tt)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,tt)|0,r=r+Math.imul(P,it)|0,n=(n=n+Math.imul(P,rt)|0)+Math.imul(k,it)|0,s=s+Math.imul(k,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(A,st)|0,s=s+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,n=(n=n+Math.imul(S,lt)|0)+Math.imul(E,ht)|0,s=s+Math.imul(E,lt)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,ct)|0,s=s+Math.imul(w,dt)|0;var At=(l+(r=r+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,gt)|0)+Math.imul(y,pt)|0))<<13)|0;l=((s=s+Math.imul(y,gt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,Z),n=(n=Math.imul(N,J))+Math.imul(z,Z)|0,s=Math.imul(z,J),r=r+Math.imul(F,Q)|0,n=(n=n+Math.imul(F,tt)|0)+Math.imul(D,Q)|0,s=s+Math.imul(D,tt)|0,r=r+Math.imul(R,it)|0,n=(n=n+Math.imul(R,rt)|0)+Math.imul(L,it)|0,s=s+Math.imul(L,rt)|0,r=r+Math.imul(P,st)|0,n=(n=n+Math.imul(P,ot)|0)+Math.imul(k,st)|0,s=s+Math.imul(k,ot)|0,r=r+Math.imul(_,ht)|0,n=(n=n+Math.imul(_,lt)|0)+Math.imul(A,ht)|0,s=s+Math.imul(A,lt)|0,r=r+Math.imul(S,ct)|0,n=(n=n+Math.imul(S,dt)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,dt)|0;var Mt=(l+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,gt)|0)+Math.imul(w,pt)|0))<<13)|0;l=((s=s+Math.imul(w,gt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(N,Q),n=(n=Math.imul(N,tt))+Math.imul(z,Q)|0,s=Math.imul(z,tt),r=r+Math.imul(F,it)|0,n=(n=n+Math.imul(F,rt)|0)+Math.imul(D,it)|0,s=s+Math.imul(D,rt)|0,r=r+Math.imul(R,st)|0,n=(n=n+Math.imul(R,ot)|0)+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,r=r+Math.imul(P,ht)|0,n=(n=n+Math.imul(P,lt)|0)+Math.imul(k,ht)|0,s=s+Math.imul(k,lt)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,dt)|0)+Math.imul(A,ct)|0,s=s+Math.imul(A,dt)|0;var Pt=(l+(r=r+Math.imul(S,pt)|0)|0)+((8191&(n=(n=n+Math.imul(S,gt)|0)+Math.imul(E,pt)|0))<<13)|0;l=((s=s+Math.imul(E,gt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(N,it),n=(n=Math.imul(N,rt))+Math.imul(z,it)|0,s=Math.imul(z,rt),r=r+Math.imul(F,st)|0,n=(n=n+Math.imul(F,ot)|0)+Math.imul(D,st)|0,s=s+Math.imul(D,ot)|0,r=r+Math.imul(R,ht)|0,n=(n=n+Math.imul(R,lt)|0)+Math.imul(L,ht)|0,s=s+Math.imul(L,lt)|0,r=r+Math.imul(P,ct)|0,n=(n=n+Math.imul(P,dt)|0)+Math.imul(k,ct)|0,s=s+Math.imul(k,dt)|0;var kt=(l+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,gt)|0)+Math.imul(A,pt)|0))<<13)|0;l=((s=s+Math.imul(A,gt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(N,st),n=(n=Math.imul(N,ot))+Math.imul(z,st)|0,s=Math.imul(z,ot),r=r+Math.imul(F,ht)|0,n=(n=n+Math.imul(F,lt)|0)+Math.imul(D,ht)|0,s=s+Math.imul(D,lt)|0,r=r+Math.imul(R,ct)|0,n=(n=n+Math.imul(R,dt)|0)+Math.imul(L,ct)|0,s=s+Math.imul(L,dt)|0;var Ot=(l+(r=r+Math.imul(P,pt)|0)|0)+((8191&(n=(n=n+Math.imul(P,gt)|0)+Math.imul(k,pt)|0))<<13)|0;l=((s=s+Math.imul(k,gt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(N,ht),n=(n=Math.imul(N,lt))+Math.imul(z,ht)|0,s=Math.imul(z,lt),r=r+Math.imul(F,ct)|0,n=(n=n+Math.imul(F,dt)|0)+Math.imul(D,ct)|0,s=s+Math.imul(D,dt)|0;var Rt=(l+(r=r+Math.imul(R,pt)|0)|0)+((8191&(n=(n=n+Math.imul(R,gt)|0)+Math.imul(L,pt)|0))<<13)|0;l=((s=s+Math.imul(L,gt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(N,ct),n=(n=Math.imul(N,dt))+Math.imul(z,ct)|0,s=Math.imul(z,dt);var Lt=(l+(r=r+Math.imul(F,pt)|0)|0)+((8191&(n=(n=n+Math.imul(F,gt)|0)+Math.imul(D,pt)|0))<<13)|0;l=((s=s+Math.imul(D,gt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var It=(l+(r=Math.imul(N,pt))|0)+((8191&(n=(n=Math.imul(N,gt))+Math.imul(z,pt)|0))<<13)|0;return l=((s=Math.imul(z,gt))+(n>>>13)|0)+(It>>>26)|0,It&=67108863,h[0]=vt,h[1]=mt,h[2]=yt,h[3]=xt,h[4]=bt,h[5]=wt,h[6]=Tt,h[7]=St,h[8]=Et,h[9]=Ct,h[10]=_t,h[11]=At,h[12]=Mt,h[13]=Pt,h[14]=kt,h[15]=Ot,h[16]=Rt,h[17]=Lt,h[18]=It,0!==l&&(h[19]=l,i.length++),i};function g(t,e,i){return(new v).mulp(t,e,i)}function v(t,e){this.x=t,this.y=e}Math.imul||(p=f),s.prototype.mulTo=function(t,e){var i,r=this.length+t.length;return i=10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var a=67108863&r,h=Math.min(s,e.length-1),l=Math.max(0,s-t.length+1);l<=h;l++){var u=s-l,c=(0|t.words[u])*(0|e.words[l]),d=67108863&c;a=67108863&(d=d+a|0),n+=(o=(o=o+(c/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[s]=a,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):g(this,t,e),i},v.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},v.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},v.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},v.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<n;u+=a)for(var c=h,d=l,f=0;f<o;f++){var p=i[u+f],g=r[u+f],v=i[u+f+o],m=r[u+f+o],y=c*v-d*m;m=c*m+d*v,v=y,i[u+f]=p+v,r[u+f]=g+m,i[u+f+o]=p-v,r[u+f+o]=g-m,f!==a&&(y=h*c-l*d,d=h*d+l*c,c=y)}},v.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},v.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},v.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},v.prototype.convert13b=function(t,e,i,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)i[o]=0;r(0===s),r(0==(-8192&s))},v.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},v.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,l,r),this.transform(o,s,a,h,r,n),this.transform(l,s,u,c,r,n);for(var f=0;f<r;f++){var p=a[f]*u[f]-h[f]*c[f];h[f]=a[f]*c[f]+h[f]*u[f],a[f]=p}return this.conjugate(a,h,r),this.transform(a,h,d,s,r,n),this.conjugate(d,s,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),g(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,s=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<i;this.words[e]=h|o,o=a>>>26-i}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=i;if(n-=o,n=Math.max(0,n),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=n);l--){var c=0|this.words[l];this.words[l]=u<<26-s|c>>>s,u=c&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},s.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var n,s,o=t.length+i;this._expand(o);var a=0;for(n=0;n<t.length;n++){s=(0|this.words[n+i])+a;var h=(0|t.words[n])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&s;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=r.clone()._ishlnsubmul(n,1,h);0===u.negative&&(r=u,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var d=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(n,d,c);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=d)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},s.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var u=i.clone(),c=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(c)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(c)),a.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),o.isub(h)):(i.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:i.iushln(l)}},s.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,u=1;0==(e.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var c=0,d=1;0==(i.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a)):(i.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new S(t)},s.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(x,y),x.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,y),n(w,y),n(T,y),T.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new T}return m[t]=e,e},S.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new s(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,l).cmp(h);)u.redIAdd(h);for(var c=this.pow(u,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),p=o;0!==f.cmp(a);){for(var g=f,v=0;0!==g.cmp(a);v++)g=g.redSqr();r(v<p);var m=this.pow(c,new s(1).iushln(p-v-1));d=d.redMul(m),c=m.redSqr(),f=f.redMul(c),p=v}return d},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],u=h-1;u>=0;u--){var c=l>>u&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===u)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new E(t)},n(E,S),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},7902:function(t){"use strict";!function(e){const i=2147483647;function r(t){const e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let i=1779033703,r=3144134277,n=1013904242,s=2773480762,o=1359893119,a=2600822924,h=528734635,l=1541459225;const u=new Uint32Array(64);function c(t){let c=0,d=t.length;for(;d>=64;){let f,p,g,v,m,y=i,x=r,b=n,w=s,T=o,S=a,E=h,C=l;for(p=0;p<16;p++)g=c+4*p,u[p]=(255&t[g])<<24|(255&t[g+1])<<16|(255&t[g+2])<<8|255&t[g+3];for(p=16;p<64;p++)f=u[p-2],v=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,f=u[p-15],m=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,u[p]=(v+u[p-7]|0)+(m+u[p-16]|0)|0;for(p=0;p<64;p++)v=(((T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7))+(T&S^~T&E)|0)+(C+(e[p]+u[p]|0)|0)|0,m=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&x^y&b^x&b)|0,C=E,E=S,S=T,T=w+v|0,w=b,b=x,x=y,y=v+m|0;i=i+y|0,r=r+x|0,n=n+b|0,s=s+w|0,o=o+T|0,a=a+S|0,h=h+E|0,l=l+C|0,c+=64,d-=64}}c(t);let d,f=t.length%64,p=t.length/536870912|0,g=t.length<<3,v=f<56?56:120,m=t.slice(t.length-f,t.length);for(m.push(128),d=f+1;d<v;d++)m.push(0);return m.push(p>>>24&255),m.push(p>>>16&255),m.push(p>>>8&255),m.push(p>>>0&255),m.push(g>>>24&255),m.push(g>>>16&255),m.push(g>>>8&255),m.push(g>>>0&255),c(m),[i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,h>>>24&255,h>>>16&255,h>>>8&255,h>>>0&255,l>>>24&255,l>>>16&255,l>>>8&255,l>>>0&255]}function n(t,e,i){t=t.length<=64?t:r(t);const n=64+e.length+4,s=new Array(n),o=new Array(64);let a,h=[];for(a=0;a<64;a++)s[a]=54;for(a=0;a<t.length;a++)s[a]^=t[a];for(a=0;a<e.length;a++)s[64+a]=e[a];for(a=n-4;a<n;a++)s[a]=0;for(a=0;a<64;a++)o[a]=92;for(a=0;a<t.length;a++)o[a]^=t[a];function l(){for(let t=n-1;t>=n-4;t--){if(s[t]++,s[t]<=255)return;s[t]=0}}for(;i>=32;)l(),h=h.concat(r(o.concat(r(s)))),i-=32;return i>0&&(l(),h=h.concat(r(o.concat(r(s))).slice(0,i))),h}function s(t,e,i,r,n){let s;for(l(t,16*(2*i-1),n,0,16),s=0;s<2*i;s++)h(t,16*s,n,16),a(n,r),l(n,0,t,e+16*s,16);for(s=0;s<i;s++)l(t,e+2*s*16,t,16*s,16);for(s=0;s<i;s++)l(t,e+16*(2*s+1),t,16*(s+i),16)}function o(t,e){return t<<e|t>>>32-e}function a(t,e){l(t,0,e,0,16);for(let t=8;t>0;t-=2)e[4]^=o(e[0]+e[12],7),e[8]^=o(e[4]+e[0],9),e[12]^=o(e[8]+e[4],13),e[0]^=o(e[12]+e[8],18),e[9]^=o(e[5]+e[1],7),e[13]^=o(e[9]+e[5],9),e[1]^=o(e[13]+e[9],13),e[5]^=o(e[1]+e[13],18),e[14]^=o(e[10]+e[6],7),e[2]^=o(e[14]+e[10],9),e[6]^=o(e[2]+e[14],13),e[10]^=o(e[6]+e[2],18),e[3]^=o(e[15]+e[11],7),e[7]^=o(e[3]+e[15],9),e[11]^=o(e[7]+e[3],13),e[15]^=o(e[11]+e[7],18),e[1]^=o(e[0]+e[3],7),e[2]^=o(e[1]+e[0],9),e[3]^=o(e[2]+e[1],13),e[0]^=o(e[3]+e[2],18),e[6]^=o(e[5]+e[4],7),e[7]^=o(e[6]+e[5],9),e[4]^=o(e[7]+e[6],13),e[5]^=o(e[4]+e[7],18),e[11]^=o(e[10]+e[9],7),e[8]^=o(e[11]+e[10],9),e[9]^=o(e[8]+e[11],13),e[10]^=o(e[9]+e[8],18),e[12]^=o(e[15]+e[14],7),e[13]^=o(e[12]+e[15],9),e[14]^=o(e[13]+e[12],13),e[15]^=o(e[14]+e[13],18);for(let i=0;i<16;++i)t[i]+=e[i]}function h(t,e,i,r){for(let n=0;n<r;n++)i[n]^=t[e+n]}function l(t,e,i,r,n){for(;n--;)i[r++]=t[e++]}function u(t){if(!t||"number"!=typeof t.length)return!1;for(let e=0;e<t.length;e++){const i=t[e];if("number"!=typeof i||i%1||i<0||i>=256)return!1}return!0}function c(t,e){if("number"!=typeof t||t%1)throw new Error("invalid "+e);return t}function d(t,e,r,o,a,d,f){if(r=c(r,"N"),o=c(o,"r"),a=c(a,"p"),d=c(d,"dkLen"),0===r||0!=(r&r-1))throw new Error("N must be power of 2");if(r>i/128/o)throw new Error("N too large");if(o>i/128/a)throw new Error("r too large");if(!u(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!u(e))throw new Error("salt must be an array or buffer");e=Array.prototype.slice.call(e);let p=n(t,e,128*a*o);const g=new Uint32Array(32*a*o);for(let t=0;t<g.length;t++){const e=4*t;g[t]=(255&p[e+3])<<24|(255&p[e+2])<<16|(255&p[e+1])<<8|(255&p[e+0])<<0}const v=new Uint32Array(64*o),m=new Uint32Array(32*o*r),y=32*o,x=new Uint32Array(16),b=new Uint32Array(16),w=a*r*2;let T,S,E=0,C=null,_=!1,A=0,M=0;const P=f?parseInt(1e3/o):4294967295,k="undefined"!=typeof setImmediate?setImmediate:setTimeout,O=function(){if(_)return f(new Error("cancelled"),E/w);let e;switch(A){case 0:S=32*M*o,l(g,S,v,0,y),A=1,T=0;case 1:e=r-T,e>P&&(e=P);for(let t=0;t<e;t++)l(v,0,m,(T+t)*y,y),s(v,y,o,x,b);if(T+=e,E+=e,f){const t=parseInt(1e3*E/w);if(t!==C){if(_=f(null,E/w),_)break;C=t}}if(T<r)break;T=0,A=2;case 2:e=r-T,e>P&&(e=P);for(let t=0;t<e;t++){const t=v[16*(2*o-1)]&r-1;h(m,t*y,v,y),s(v,y,o,x,b)}if(T+=e,E+=e,f){const t=parseInt(1e3*E/w);if(t!==C){if(_=f(null,E/w),_)break;C=t}}if(T<r)break;if(l(v,0,g,S,y),M++,M<a){A=0;break}p=[];for(let t=0;t<g.length;t++)p.push(g[t]>>0&255),p.push(g[t]>>8&255),p.push(g[t]>>16&255),p.push(g[t]>>24&255);const i=n(t,p,d);return f&&f(null,1,i),i}f&&k(O)};if(!f)for(;;){const t=O();if(null!=t)return t}O()}const f={scrypt:function(t,e,i,r,n,s,o){return new Promise((function(a,h){let l=0;o&&o(0),d(t,e,i,r,n,s,(function(t,e,i){if(t)h(t);else if(i)o&&1!==l&&o(1),a(new Uint8Array(i));else if(o&&e!==l)return l=e,o(e)}))}))},syncScrypt:function(t,e,i,r,n,s){return new Uint8Array(d(t,e,i,r,n,s))}};t.exports=f}()},6831:(t,e,i)=>{var r=e;r.utils=i(7946),r.common=i(8585),r.sha=i(5915),r.ripemd=i(562),r.hmac=i(1531),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},8585:(t,e,i)=>{"use strict";var r=i(7946),n=i(9746);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},s.prototype.digest=function(t){return this.update(this._pad()),n(null===this.pending),this._digest(t)},s.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var n=1;n<i;n++)r[n]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=t>>>24&255,r[n++]=t>>>16&255,r[n++]=t>>>8&255,r[n++]=255&t}else for(r[n++]=255&t,r[n++]=t>>>8&255,r[n++]=t>>>16&255,r[n++]=t>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,s=8;s<this.padLength;s++)r[n++]=0;return r}},1531:(t,e,i)=>{"use strict";var r=i(7946),n=i(9746);function s(t,e,i){if(!(this instanceof s))return new s(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,i))}t.exports=s,s.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),n(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},s.prototype.update=function(t,e){return this.inner.update(t,e),this},s.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},562:(t,e,i)=>{"use strict";var r=i(7946),n=i(8585),s=r.rotl32,o=r.sum32,a=r.sum32_3,h=r.sum32_4,l=n.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(u,l),e.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],l=this.h[3],u=this.h[4],y=i,x=r,b=n,w=l,T=u,S=0;S<80;S++){var E=o(s(h(i,c(S,r,n,l),t[p[S]+e],d(S)),v[S]),u);i=u,u=l,l=s(n,10),n=r,r=E,E=o(s(h(y,c(79-S,x,b,w),t[g[S]+e],f(S)),m[S]),T),y=T,T=w,w=s(b,10),b=x,x=E}E=a(this.h[1],n,w),this.h[1]=a(this.h[2],l,T),this.h[2]=a(this.h[3],u,y),this.h[3]=a(this.h[4],i,x),this.h[4]=a(this.h[0],r,b),this.h[0]=E},u.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},5915:(t,e,i)=>{"use strict";e.sha1=i(9214),e.sha224=i(5673),e.sha256=i(3619),e.sha384=i(8274),e.sha512=i(7429)},9214:(t,e,i)=>{"use strict";var r=i(7946),n=i(8585),s=i(5986),o=r.rotl32,a=r.sum32,h=r.sum32_5,l=s.ft_1,u=n.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(d,u),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=o(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var n=this.h[0],s=this.h[1],u=this.h[2],d=this.h[3],f=this.h[4];for(r=0;r<i.length;r++){var p=~~(r/20),g=h(o(n,5),l(p,s,u,d),f,i[r],c[p]);f=d,d=u,u=o(s,30),s=n,n=g}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},5673:(t,e,i)=>{"use strict";var r=i(7946),n=i(3619);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(s,n),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},3619:(t,e,i)=>{"use strict";var r=i(7946),n=i(8585),s=i(5986),o=i(9746),a=r.sum32,h=r.sum32_4,l=r.sum32_5,u=s.ch32,c=s.maj32,d=s.s0_256,f=s.s1_256,p=s.g0_256,g=s.g1_256,v=n.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}r.inherits(y,v),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=h(g(i[r-2]),i[r-7],p(i[r-15]),i[r-16]);var n=this.h[0],s=this.h[1],v=this.h[2],m=this.h[3],y=this.h[4],x=this.h[5],b=this.h[6],w=this.h[7];for(o(this.k.length===i.length),r=0;r<i.length;r++){var T=l(w,f(y),u(y,x,b),this.k[r],i[r]),S=a(d(n),c(n,s,v));w=b,b=x,x=y,y=a(m,T),m=v,v=s,s=n,n=a(T,S)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],v),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],x),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],w)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},8274:(t,e,i)=>{"use strict";var r=i(7946),n=i(7429);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(s,n),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},7429:(t,e,i)=>{"use strict";var r=i(7946),n=i(8585),s=i(9746),o=r.rotr64_hi,a=r.rotr64_lo,h=r.shr64_hi,l=r.shr64_lo,u=r.sum64,c=r.sum64_hi,d=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,g=r.sum64_5_hi,v=r.sum64_5_lo,m=n.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function x(){if(!(this instanceof x))return new x;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function b(t,e,i,r,n){var s=t&i^~t&n;return s<0&&(s+=4294967296),s}function w(t,e,i,r,n,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function T(t,e,i,r,n){var s=t&i^t&n^i&n;return s<0&&(s+=4294967296),s}function S(t,e,i,r,n,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function E(t,e){var i=o(t,e,28)^o(e,t,2)^o(e,t,7);return i<0&&(i+=4294967296),i}function C(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function _(t,e){var i=a(t,e,14)^a(t,e,18)^a(e,t,9);return i<0&&(i+=4294967296),i}function A(t,e){var i=o(t,e,1)^o(t,e,8)^h(t,e,7);return i<0&&(i+=4294967296),i}function M(t,e){var i=a(t,e,1)^a(t,e,8)^l(t,e,7);return i<0&&(i+=4294967296),i}function P(t,e){var i=a(t,e,19)^a(e,t,29)^l(t,e,6);return i<0&&(i+=4294967296),i}r.inherits(x,m),t.exports=x,x.blockSize=1024,x.outSize=512,x.hmacStrength=192,x.padLength=128,x.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var n=(v=i[r-4],m=i[r-3],y=void 0,(y=o(v,m,19)^o(m,v,29)^h(v,m,6))<0&&(y+=4294967296),y),s=P(i[r-4],i[r-3]),a=i[r-14],l=i[r-13],u=A(i[r-30],i[r-29]),c=M(i[r-30],i[r-29]),d=i[r-32],g=i[r-31];i[r]=f(n,s,a,l,u,c,d,g),i[r+1]=p(n,s,a,l,u,c,d,g)}var v,m,y},x.prototype._update=function(t,e){this._prepareBlock(t,e);var i,r,n,a=this.W,h=this.h[0],l=this.h[1],f=this.h[2],p=this.h[3],m=this.h[4],y=this.h[5],x=this.h[6],A=this.h[7],M=this.h[8],P=this.h[9],k=this.h[10],O=this.h[11],R=this.h[12],L=this.h[13],I=this.h[14],F=this.h[15];s(this.k.length===a.length);for(var D=0;D<a.length;D+=2){var B=I,N=F,z=(n=void 0,(n=o(i=M,r=P,14)^o(i,r,18)^o(r,i,9))<0&&(n+=4294967296),n),U=_(M,P),Y=b(M,0,k,0,R),X=w(0,P,0,O,0,L),G=this.k[D],W=this.k[D+1],V=a[D],j=a[D+1],H=g(B,N,z,U,Y,X,G,W,V,j),q=v(B,N,z,U,Y,X,G,W,V,j);B=E(h,l),N=C(h,l),z=T(h,0,f,0,m),U=S(0,l,0,p,0,y);var K=c(B,N,z,U),Z=d(B,N,z,U);I=R,F=L,R=k,L=O,k=M,O=P,M=c(x,A,H,q),P=d(A,A,H,q),x=m,A=y,m=f,y=p,f=h,p=l,h=c(H,q,K,Z),l=d(H,q,K,Z)}u(this.h,0,h,l),u(this.h,2,f,p),u(this.h,4,m,y),u(this.h,6,x,A),u(this.h,8,M,P),u(this.h,10,k,O),u(this.h,12,R,L),u(this.h,14,I,F)},x.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},5986:(t,e,i)=>{"use strict";var r=i(7946).rotr32;function n(t,e,i){return t&e^~t&i}function s(t,e,i){return t&e^t&i^e&i}function o(t,e,i){return t^e^i}e.ft_1=function(t,e,i,r){return 0===t?n(e,i,r):1===t||3===t?o(e,i,r):2===t?s(e,i,r):void 0},e.ch32=n,e.maj32=s,e.p32=o,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},7946:(t,e,i)=>{"use strict";var r=i(9746),n=i(5717);function s(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function h(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=n,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16))}else for(var r=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?i[r++]=o:o<2048?(i[r++]=o>>6|192,i[r++]=63&o|128):s(t,n)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++n)),i[r++]=o>>18|240,i[r++]=o>>12&63|128,i[r++]=o>>6&63|128,i[r++]=63&o|128):(i[r++]=o>>12|224,i[r++]=o>>6&63|128,i[r++]=63&o|128)}else for(n=0;n<t.length;n++)i[n]=0|t[n];return i},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=a(t[i].toString(16));return e},e.htonl=o,e.toHex32=function(t,e){for(var i="",r=0;r<t.length;r++){var n=t[r];"little"===e&&(n=o(n)),i+=h(n.toString(16))}return i},e.zero2=a,e.zero8=h,e.join32=function(t,e,i,n){var s=i-e;r(s%4==0);for(var o=new Array(s/4),a=0,h=e;a<o.length;a++,h+=4){var l;l="big"===n?t[h]<<24|t[h+1]<<16|t[h+2]<<8|t[h+3]:t[h+3]<<24|t[h+2]<<16|t[h+1]<<8|t[h],o[a]=l>>>0}return o},e.split32=function(t,e){for(var i=new Array(4*t.length),r=0,n=0;r<t.length;r++,n+=4){var s=t[r];"big"===e?(i[n]=s>>>24,i[n+1]=s>>>16&255,i[n+2]=s>>>8&255,i[n+3]=255&s):(i[n+3]=s>>>24,i[n+2]=s>>>16&255,i[n+1]=s>>>8&255,i[n]=255&s)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,r){return t+e+i+r>>>0},e.sum32_5=function(t,e,i,r,n){return t+e+i+r+n>>>0},e.sum64=function(t,e,i,r){var n=t[e],s=r+t[e+1]>>>0,o=(s<r?1:0)+i+n;t[e]=o>>>0,t[e+1]=s},e.sum64_hi=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,r){return e+r>>>0},e.sum64_4_hi=function(t,e,i,r,n,s,o,a){var h=0,l=e;return h+=(l=l+r>>>0)<e?1:0,h+=(l=l+s>>>0)<s?1:0,t+i+n+o+(h+=(l=l+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,i,r,n,s,o,a){return e+r+s+a>>>0},e.sum64_5_hi=function(t,e,i,r,n,s,o,a,h,l){var u=0,c=e;return u+=(c=c+r>>>0)<e?1:0,u+=(c=c+s>>>0)<s?1:0,u+=(c=c+a>>>0)<a?1:0,t+i+n+o+h+(u+=(c=c+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,i,r,n,s,o,a,h,l){return e+r+s+a+l>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},2500:function(t,e,i){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(2808).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function l(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var a=t.charCodeAt(o)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===i)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,o=s%r,a=Math.min(s,s-o)+i,h=0,u=i;u<a;u+=r)h=l(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var c=1;for(h=l(t,u,t.length,e),u=0;u<o;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var l=1;l<r;l++){for(var u=h>>>26,c=67108863&h,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var p=l-f|0;u+=(o=(n=0|t.words[p])*(s=0|e.words[f])+c)/67108864|0,c=67108863&o}i.words[l]=0|c,h=0|u}return 0!==h?i.words[l]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<n|s)).toString(16);i=0!=(s=a>>>24-n&16777215)||o!==this.length-1?u[6-h.length]+h+i:h+i,(n+=2)>=26&&(n-=26,o--)}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(t);i=(p=p.idivn(f)).isZero()?g+i:u[l-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0"),this.strip();var o,a,h="le"===e,l=new t(s),u=this.clone();if(h){for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),l[a]=o;for(;a<s;a++)l[a]=0}else{for(a=0;a<s-n;a++)l[a]=0;for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),l[s-a-1]=o}return l},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,s,o=t.words,a=e.words,h=i.words,l=0,u=0|o[0],c=8191&u,d=u>>>13,f=0|o[1],p=8191&f,g=f>>>13,v=0|o[2],m=8191&v,y=v>>>13,x=0|o[3],b=8191&x,w=x>>>13,T=0|o[4],S=8191&T,E=T>>>13,C=0|o[5],_=8191&C,A=C>>>13,M=0|o[6],P=8191&M,k=M>>>13,O=0|o[7],R=8191&O,L=O>>>13,I=0|o[8],F=8191&I,D=I>>>13,B=0|o[9],N=8191&B,z=B>>>13,U=0|a[0],Y=8191&U,X=U>>>13,G=0|a[1],W=8191&G,V=G>>>13,j=0|a[2],H=8191&j,q=j>>>13,K=0|a[3],Z=8191&K,J=K>>>13,$=0|a[4],Q=8191&$,tt=$>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ht=8191&at,lt=at>>>13,ut=0|a[8],ct=8191&ut,dt=ut>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var vt=(l+(r=Math.imul(c,Y))|0)+((8191&(n=(n=Math.imul(c,X))+Math.imul(d,Y)|0))<<13)|0;l=((s=Math.imul(d,X))+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(p,Y),n=(n=Math.imul(p,X))+Math.imul(g,Y)|0,s=Math.imul(g,X);var mt=(l+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,V)|0)+Math.imul(d,W)|0))<<13)|0;l=((s=s+Math.imul(d,V)|0)+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,Y),n=(n=Math.imul(m,X))+Math.imul(y,Y)|0,s=Math.imul(y,X),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,V)|0)+Math.imul(g,W)|0,s=s+Math.imul(g,V)|0;var yt=(l+(r=r+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(d,H)|0))<<13)|0;l=((s=s+Math.imul(d,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(b,Y),n=(n=Math.imul(b,X))+Math.imul(w,Y)|0,s=Math.imul(w,X),r=r+Math.imul(m,W)|0,n=(n=n+Math.imul(m,V)|0)+Math.imul(y,W)|0,s=s+Math.imul(y,V)|0,r=r+Math.imul(p,H)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,q)|0;var xt=(l+(r=r+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(d,Z)|0))<<13)|0;l=((s=s+Math.imul(d,J)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(S,Y),n=(n=Math.imul(S,X))+Math.imul(E,Y)|0,s=Math.imul(E,X),r=r+Math.imul(b,W)|0,n=(n=n+Math.imul(b,V)|0)+Math.imul(w,W)|0,s=s+Math.imul(w,V)|0,r=r+Math.imul(m,H)|0,n=(n=n+Math.imul(m,q)|0)+Math.imul(y,H)|0,s=s+Math.imul(y,q)|0,r=r+Math.imul(p,Z)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(g,Z)|0,s=s+Math.imul(g,J)|0;var bt=(l+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(d,Q)|0))<<13)|0;l=((s=s+Math.imul(d,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(_,Y),n=(n=Math.imul(_,X))+Math.imul(A,Y)|0,s=Math.imul(A,X),r=r+Math.imul(S,W)|0,n=(n=n+Math.imul(S,V)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,V)|0,r=r+Math.imul(b,H)|0,n=(n=n+Math.imul(b,q)|0)+Math.imul(w,H)|0,s=s+Math.imul(w,q)|0,r=r+Math.imul(m,Z)|0,n=(n=n+Math.imul(m,J)|0)+Math.imul(y,Z)|0,s=s+Math.imul(y,J)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,tt)|0;var wt=(l+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(d,it)|0))<<13)|0;l=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(P,Y),n=(n=Math.imul(P,X))+Math.imul(k,Y)|0,s=Math.imul(k,X),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,V)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,V)|0,r=r+Math.imul(S,H)|0,n=(n=n+Math.imul(S,q)|0)+Math.imul(E,H)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(w,Z)|0,s=s+Math.imul(w,J)|0,r=r+Math.imul(m,Q)|0,n=(n=n+Math.imul(m,tt)|0)+Math.imul(y,Q)|0,s=s+Math.imul(y,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(g,it)|0,s=s+Math.imul(g,rt)|0;var Tt=(l+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(d,st)|0))<<13)|0;l=((s=s+Math.imul(d,ot)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(R,Y),n=(n=Math.imul(R,X))+Math.imul(L,Y)|0,s=Math.imul(L,X),r=r+Math.imul(P,W)|0,n=(n=n+Math.imul(P,V)|0)+Math.imul(k,W)|0,s=s+Math.imul(k,V)|0,r=r+Math.imul(_,H)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(A,H)|0,s=s+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,n=(n=n+Math.imul(S,J)|0)+Math.imul(E,Z)|0,s=s+Math.imul(E,J)|0,r=r+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,tt)|0,r=r+Math.imul(m,it)|0,n=(n=n+Math.imul(m,rt)|0)+Math.imul(y,it)|0,s=s+Math.imul(y,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0;var St=(l+(r=r+Math.imul(c,ht)|0)|0)+((8191&(n=(n=n+Math.imul(c,lt)|0)+Math.imul(d,ht)|0))<<13)|0;l=((s=s+Math.imul(d,lt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(F,Y),n=(n=Math.imul(F,X))+Math.imul(D,Y)|0,s=Math.imul(D,X),r=r+Math.imul(R,W)|0,n=(n=n+Math.imul(R,V)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,V)|0,r=r+Math.imul(P,H)|0,n=(n=n+Math.imul(P,q)|0)+Math.imul(k,H)|0,s=s+Math.imul(k,q)|0,r=r+Math.imul(_,Z)|0,n=(n=n+Math.imul(_,J)|0)+Math.imul(A,Z)|0,s=s+Math.imul(A,J)|0,r=r+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,s=s+Math.imul(w,rt)|0,r=r+Math.imul(m,st)|0,n=(n=n+Math.imul(m,ot)|0)+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,r=r+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,lt)|0)+Math.imul(g,ht)|0,s=s+Math.imul(g,lt)|0;var Et=(l+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((s=s+Math.imul(d,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(N,Y),n=(n=Math.imul(N,X))+Math.imul(z,Y)|0,s=Math.imul(z,X),r=r+Math.imul(F,W)|0,n=(n=n+Math.imul(F,V)|0)+Math.imul(D,W)|0,s=s+Math.imul(D,V)|0,r=r+Math.imul(R,H)|0,n=(n=n+Math.imul(R,q)|0)+Math.imul(L,H)|0,s=s+Math.imul(L,q)|0,r=r+Math.imul(P,Z)|0,n=(n=n+Math.imul(P,J)|0)+Math.imul(k,Z)|0,s=s+Math.imul(k,J)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,n=(n=n+Math.imul(S,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(b,st)|0,n=(n=n+Math.imul(b,ot)|0)+Math.imul(w,st)|0,s=s+Math.imul(w,ot)|0,r=r+Math.imul(m,ht)|0,n=(n=n+Math.imul(m,lt)|0)+Math.imul(y,ht)|0,s=s+Math.imul(y,lt)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,dt)|0)+Math.imul(g,ct)|0,s=s+Math.imul(g,dt)|0;var Ct=(l+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,gt)|0)+Math.imul(d,pt)|0))<<13)|0;l=((s=s+Math.imul(d,gt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(N,W),n=(n=Math.imul(N,V))+Math.imul(z,W)|0,s=Math.imul(z,V),r=r+Math.imul(F,H)|0,n=(n=n+Math.imul(F,q)|0)+Math.imul(D,H)|0,s=s+Math.imul(D,q)|0,r=r+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,J)|0,r=r+Math.imul(P,Q)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(A,it)|0,s=s+Math.imul(A,rt)|0,r=r+Math.imul(S,st)|0,n=(n=n+Math.imul(S,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(b,ht)|0,n=(n=n+Math.imul(b,lt)|0)+Math.imul(w,ht)|0,s=s+Math.imul(w,lt)|0,r=r+Math.imul(m,ct)|0,n=(n=n+Math.imul(m,dt)|0)+Math.imul(y,ct)|0,s=s+Math.imul(y,dt)|0;var _t=(l+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;l=((s=s+Math.imul(g,gt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(N,H),n=(n=Math.imul(N,q))+Math.imul(z,H)|0,s=Math.imul(z,q),r=r+Math.imul(F,Z)|0,n=(n=n+Math.imul(F,J)|0)+Math.imul(D,Z)|0,s=s+Math.imul(D,J)|0,r=r+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,tt)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,tt)|0,r=r+Math.imul(P,it)|0,n=(n=n+Math.imul(P,rt)|0)+Math.imul(k,it)|0,s=s+Math.imul(k,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(A,st)|0,s=s+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,n=(n=n+Math.imul(S,lt)|0)+Math.imul(E,ht)|0,s=s+Math.imul(E,lt)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,ct)|0,s=s+Math.imul(w,dt)|0;var At=(l+(r=r+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,gt)|0)+Math.imul(y,pt)|0))<<13)|0;l=((s=s+Math.imul(y,gt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,Z),n=(n=Math.imul(N,J))+Math.imul(z,Z)|0,s=Math.imul(z,J),r=r+Math.imul(F,Q)|0,n=(n=n+Math.imul(F,tt)|0)+Math.imul(D,Q)|0,s=s+Math.imul(D,tt)|0,r=r+Math.imul(R,it)|0,n=(n=n+Math.imul(R,rt)|0)+Math.imul(L,it)|0,s=s+Math.imul(L,rt)|0,r=r+Math.imul(P,st)|0,n=(n=n+Math.imul(P,ot)|0)+Math.imul(k,st)|0,s=s+Math.imul(k,ot)|0,r=r+Math.imul(_,ht)|0,n=(n=n+Math.imul(_,lt)|0)+Math.imul(A,ht)|0,s=s+Math.imul(A,lt)|0,r=r+Math.imul(S,ct)|0,n=(n=n+Math.imul(S,dt)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,dt)|0;var Mt=(l+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,gt)|0)+Math.imul(w,pt)|0))<<13)|0;l=((s=s+Math.imul(w,gt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(N,Q),n=(n=Math.imul(N,tt))+Math.imul(z,Q)|0,s=Math.imul(z,tt),r=r+Math.imul(F,it)|0,n=(n=n+Math.imul(F,rt)|0)+Math.imul(D,it)|0,s=s+Math.imul(D,rt)|0,r=r+Math.imul(R,st)|0,n=(n=n+Math.imul(R,ot)|0)+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,r=r+Math.imul(P,ht)|0,n=(n=n+Math.imul(P,lt)|0)+Math.imul(k,ht)|0,s=s+Math.imul(k,lt)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,dt)|0)+Math.imul(A,ct)|0,s=s+Math.imul(A,dt)|0;var Pt=(l+(r=r+Math.imul(S,pt)|0)|0)+((8191&(n=(n=n+Math.imul(S,gt)|0)+Math.imul(E,pt)|0))<<13)|0;l=((s=s+Math.imul(E,gt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(N,it),n=(n=Math.imul(N,rt))+Math.imul(z,it)|0,s=Math.imul(z,rt),r=r+Math.imul(F,st)|0,n=(n=n+Math.imul(F,ot)|0)+Math.imul(D,st)|0,s=s+Math.imul(D,ot)|0,r=r+Math.imul(R,ht)|0,n=(n=n+Math.imul(R,lt)|0)+Math.imul(L,ht)|0,s=s+Math.imul(L,lt)|0,r=r+Math.imul(P,ct)|0,n=(n=n+Math.imul(P,dt)|0)+Math.imul(k,ct)|0,s=s+Math.imul(k,dt)|0;var kt=(l+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,gt)|0)+Math.imul(A,pt)|0))<<13)|0;l=((s=s+Math.imul(A,gt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(N,st),n=(n=Math.imul(N,ot))+Math.imul(z,st)|0,s=Math.imul(z,ot),r=r+Math.imul(F,ht)|0,n=(n=n+Math.imul(F,lt)|0)+Math.imul(D,ht)|0,s=s+Math.imul(D,lt)|0,r=r+Math.imul(R,ct)|0,n=(n=n+Math.imul(R,dt)|0)+Math.imul(L,ct)|0,s=s+Math.imul(L,dt)|0;var Ot=(l+(r=r+Math.imul(P,pt)|0)|0)+((8191&(n=(n=n+Math.imul(P,gt)|0)+Math.imul(k,pt)|0))<<13)|0;l=((s=s+Math.imul(k,gt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(N,ht),n=(n=Math.imul(N,lt))+Math.imul(z,ht)|0,s=Math.imul(z,lt),r=r+Math.imul(F,ct)|0,n=(n=n+Math.imul(F,dt)|0)+Math.imul(D,ct)|0,s=s+Math.imul(D,dt)|0;var Rt=(l+(r=r+Math.imul(R,pt)|0)|0)+((8191&(n=(n=n+Math.imul(R,gt)|0)+Math.imul(L,pt)|0))<<13)|0;l=((s=s+Math.imul(L,gt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(N,ct),n=(n=Math.imul(N,dt))+Math.imul(z,ct)|0,s=Math.imul(z,dt);var Lt=(l+(r=r+Math.imul(F,pt)|0)|0)+((8191&(n=(n=n+Math.imul(F,gt)|0)+Math.imul(D,pt)|0))<<13)|0;l=((s=s+Math.imul(D,gt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var It=(l+(r=Math.imul(N,pt))|0)+((8191&(n=(n=Math.imul(N,gt))+Math.imul(z,pt)|0))<<13)|0;return l=((s=Math.imul(z,gt))+(n>>>13)|0)+(It>>>26)|0,It&=67108863,h[0]=vt,h[1]=mt,h[2]=yt,h[3]=xt,h[4]=bt,h[5]=wt,h[6]=Tt,h[7]=St,h[8]=Et,h[9]=Ct,h[10]=_t,h[11]=At,h[12]=Mt,h[13]=Pt,h[14]=kt,h[15]=Ot,h[16]=Rt,h[17]=Lt,h[18]=It,0!==l&&(h[19]=l,i.length++),i};function g(t,e,i){return(new v).mulp(t,e,i)}function v(t,e){this.x=t,this.y=e}Math.imul||(p=f),s.prototype.mulTo=function(t,e){var i,r=this.length+t.length;return i=10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var a=67108863&r,h=Math.min(s,e.length-1),l=Math.max(0,s-t.length+1);l<=h;l++){var u=s-l,c=(0|t.words[u])*(0|e.words[l]),d=67108863&c;a=67108863&(d=d+a|0),n+=(o=(o=o+(c/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[s]=a,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):g(this,t,e),i},v.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},v.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},v.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},v.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<n;u+=a)for(var c=h,d=l,f=0;f<o;f++){var p=i[u+f],g=r[u+f],v=i[u+f+o],m=r[u+f+o],y=c*v-d*m;m=c*m+d*v,v=y,i[u+f]=p+v,r[u+f]=g+m,i[u+f+o]=p-v,r[u+f+o]=g-m,f!==a&&(y=h*c-l*d,d=h*d+l*c,c=y)}},v.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},v.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},v.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},v.prototype.convert13b=function(t,e,i,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)i[o]=0;r(0===s),r(0==(-8192&s))},v.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},v.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,l,r),this.transform(o,s,a,h,r,n),this.transform(l,s,u,c,r,n);for(var f=0;f<r;f++){var p=a[f]*u[f]-h[f]*c[f];h[f]=a[f]*c[f]+h[f]*u[f],a[f]=p}return this.conjugate(a,h,r),this.transform(a,h,d,s,r,n),this.conjugate(d,s,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),g(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,s=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<i;this.words[e]=h|o,o=a>>>26-i}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=i;if(n-=o,n=Math.max(0,n),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=n);l--){var c=0|this.words[l];this.words[l]=u<<26-s|c>>>s,u=c&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},s.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var n,s,o=t.length+i;this._expand(o);var a=0;for(n=0;n<t.length;n++){s=(0|this.words[n+i])+a;var h=(0|t.words[n])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&s;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=r.clone()._ishlnsubmul(n,1,h);0===u.negative&&(r=u,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var d=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(n,d,c);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=d)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},s.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var u=i.clone(),c=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(c)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(i.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(c)),a.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),o.isub(h)):(i.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:i.iushln(l)}},s.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,u=1;0==(e.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var c=0,d=1;0==(i.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a)):(i.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new S(t)},s.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(x,y),x.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,y),n(w,y),n(T,y),T.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new T}return m[t]=e,e},S.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new s(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,l).cmp(h);)u.redIAdd(h);for(var c=this.pow(u,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),p=o;0!==f.cmp(a);){for(var g=f,v=0;0!==g.cmp(a);v++)g=g.redSqr();r(v<p);var m=this.pow(c,new s(1).iushln(p-v-1));d=d.redMul(m),c=m.redSqr(),f=f.redMul(c),p=v}return d},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],u=h-1;u>=0;u--){var c=l>>u&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===u)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new E(t)},n(E,S),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},9161:(t,e,i)=>{var r=e;r.utils=i(3580),r.common=i(9691),r.sha=i(7343),r.ripemd=i(32),r.hmac=i(5667),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},9691:(t,e,i)=>{"use strict";var r=i(3580),n=i(9746);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},s.prototype.digest=function(t){return this.update(this._pad()),n(null===this.pending),this._digest(t)},s.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var n=1;n<i;n++)r[n]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=t>>>24&255,r[n++]=t>>>16&255,r[n++]=t>>>8&255,r[n++]=255&t}else for(r[n++]=255&t,r[n++]=t>>>8&255,r[n++]=t>>>16&255,r[n++]=t>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,s=8;s<this.padLength;s++)r[n++]=0;return r}},5667:(t,e,i)=>{"use strict";var r=i(3580),n=i(9746);function s(t,e,i){if(!(this instanceof s))return new s(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,i))}t.exports=s,s.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),n(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},s.prototype.update=function(t,e){return this.inner.update(t,e),this},s.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},32:(t,e,i)=>{"use strict";var r=i(3580),n=i(9691),s=r.rotl32,o=r.sum32,a=r.sum32_3,h=r.sum32_4,l=n.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(u,l),e.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],l=this.h[3],u=this.h[4],y=i,x=r,b=n,w=l,T=u,S=0;S<80;S++){var E=o(s(h(i,c(S,r,n,l),t[p[S]+e],d(S)),v[S]),u);i=u,u=l,l=s(n,10),n=r,r=E,E=o(s(h(y,c(79-S,x,b,w),t[g[S]+e],f(S)),m[S]),T),y=T,T=w,w=s(b,10),b=x,x=E}E=a(this.h[1],n,w),this.h[1]=a(this.h[2],l,T),this.h[2]=a(this.h[3],u,y),this.h[3]=a(this.h[4],i,x),this.h[4]=a(this.h[0],r,b),this.h[0]=E},u.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},7343:(t,e,i)=>{"use strict";e.sha1=i(8925),e.sha224=i(7943),e.sha256=i(8506),e.sha384=i(187),e.sha512=i(8185)},8925:(t,e,i)=>{"use strict";var r=i(3580),n=i(9691),s=i(7768),o=r.rotl32,a=r.sum32,h=r.sum32_5,l=s.ft_1,u=n.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(d,u),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=o(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var n=this.h[0],s=this.h[1],u=this.h[2],d=this.h[3],f=this.h[4];for(r=0;r<i.length;r++){var p=~~(r/20),g=h(o(n,5),l(p,s,u,d),f,i[r],c[p]);f=d,d=u,u=o(s,30),s=n,n=g}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},7943:(t,e,i)=>{"use strict";var r=i(3580),n=i(8506);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(s,n),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},8506:(t,e,i)=>{"use strict";var r=i(3580),n=i(9691),s=i(7768),o=i(9746),a=r.sum32,h=r.sum32_4,l=r.sum32_5,u=s.ch32,c=s.maj32,d=s.s0_256,f=s.s1_256,p=s.g0_256,g=s.g1_256,v=n.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}r.inherits(y,v),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=h(g(i[r-2]),i[r-7],p(i[r-15]),i[r-16]);var n=this.h[0],s=this.h[1],v=this.h[2],m=this.h[3],y=this.h[4],x=this.h[5],b=this.h[6],w=this.h[7];for(o(this.k.length===i.length),r=0;r<i.length;r++){var T=l(w,f(y),u(y,x,b),this.k[r],i[r]),S=a(d(n),c(n,s,v));w=b,b=x,x=y,y=a(m,T),m=v,v=s,s=n,n=a(T,S)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],v),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],x),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],w)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},187:(t,e,i)=>{"use strict";var r=i(3580),n=i(8185);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(s,n),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},8185:(t,e,i)=>{"use strict";var r=i(3580),n=i(9691),s=i(9746),o=r.rotr64_hi,a=r.rotr64_lo,h=r.shr64_hi,l=r.shr64_lo,u=r.sum64,c=r.sum64_hi,d=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,g=r.sum64_5_hi,v=r.sum64_5_lo,m=n.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function x(){if(!(this instanceof x))return new x;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function b(t,e,i,r,n){var s=t&i^~t&n;return s<0&&(s+=4294967296),s}function w(t,e,i,r,n,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function T(t,e,i,r,n){var s=t&i^t&n^i&n;return s<0&&(s+=4294967296),s}function S(t,e,i,r,n,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function E(t,e){var i=o(t,e,28)^o(e,t,2)^o(e,t,7);return i<0&&(i+=4294967296),i}function C(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function _(t,e){var i=a(t,e,14)^a(t,e,18)^a(e,t,9);return i<0&&(i+=4294967296),i}function A(t,e){var i=o(t,e,1)^o(t,e,8)^h(t,e,7);return i<0&&(i+=4294967296),i}function M(t,e){var i=a(t,e,1)^a(t,e,8)^l(t,e,7);return i<0&&(i+=4294967296),i}function P(t,e){var i=a(t,e,19)^a(e,t,29)^l(t,e,6);return i<0&&(i+=4294967296),i}r.inherits(x,m),t.exports=x,x.blockSize=1024,x.outSize=512,x.hmacStrength=192,x.padLength=128,x.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var n=(v=i[r-4],m=i[r-3],y=void 0,(y=o(v,m,19)^o(m,v,29)^h(v,m,6))<0&&(y+=4294967296),y),s=P(i[r-4],i[r-3]),a=i[r-14],l=i[r-13],u=A(i[r-30],i[r-29]),c=M(i[r-30],i[r-29]),d=i[r-32],g=i[r-31];i[r]=f(n,s,a,l,u,c,d,g),i[r+1]=p(n,s,a,l,u,c,d,g)}var v,m,y},x.prototype._update=function(t,e){this._prepareBlock(t,e);var i,r,n,a=this.W,h=this.h[0],l=this.h[1],f=this.h[2],p=this.h[3],m=this.h[4],y=this.h[5],x=this.h[6],A=this.h[7],M=this.h[8],P=this.h[9],k=this.h[10],O=this.h[11],R=this.h[12],L=this.h[13],I=this.h[14],F=this.h[15];s(this.k.length===a.length);for(var D=0;D<a.length;D+=2){var B=I,N=F,z=(n=void 0,(n=o(i=M,r=P,14)^o(i,r,18)^o(r,i,9))<0&&(n+=4294967296),n),U=_(M,P),Y=b(M,0,k,0,R),X=w(0,P,0,O,0,L),G=this.k[D],W=this.k[D+1],V=a[D],j=a[D+1],H=g(B,N,z,U,Y,X,G,W,V,j),q=v(B,N,z,U,Y,X,G,W,V,j);B=E(h,l),N=C(h,l),z=T(h,0,f,0,m),U=S(0,l,0,p,0,y);var K=c(B,N,z,U),Z=d(B,N,z,U);I=R,F=L,R=k,L=O,k=M,O=P,M=c(x,A,H,q),P=d(A,A,H,q),x=m,A=y,m=f,y=p,f=h,p=l,h=c(H,q,K,Z),l=d(H,q,K,Z)}u(this.h,0,h,l),u(this.h,2,f,p),u(this.h,4,m,y),u(this.h,6,x,A),u(this.h,8,M,P),u(this.h,10,k,O),u(this.h,12,R,L),u(this.h,14,I,F)},x.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},7768:(t,e,i)=>{"use strict";var r=i(3580).rotr32;function n(t,e,i){return t&e^~t&i}function s(t,e,i){return t&e^t&i^e&i}function o(t,e,i){return t^e^i}e.ft_1=function(t,e,i,r){return 0===t?n(e,i,r):1===t||3===t?o(e,i,r):2===t?s(e,i,r):void 0},e.ch32=n,e.maj32=s,e.p32=o,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},3580:(t,e,i)=>{"use strict";var r=i(9746),n=i(5717);function s(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function h(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=n,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16))}else for(var r=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?i[r++]=o:o<2048?(i[r++]=o>>6|192,i[r++]=63&o|128):s(t,n)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++n)),i[r++]=o>>18|240,i[r++]=o>>12&63|128,i[r++]=o>>6&63|128,i[r++]=63&o|128):(i[r++]=o>>12|224,i[r++]=o>>6&63|128,i[r++]=63&o|128)}else for(n=0;n<t.length;n++)i[n]=0|t[n];return i},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=a(t[i].toString(16));return e},e.htonl=o,e.toHex32=function(t,e){for(var i="",r=0;r<t.length;r++){var n=t[r];"little"===e&&(n=o(n)),i+=h(n.toString(16))}return i},e.zero2=a,e.zero8=h,e.join32=function(t,e,i,n){var s=i-e;r(s%4==0);for(var o=new Array(s/4),a=0,h=e;a<o.length;a++,h+=4){var l;l="big"===n?t[h]<<24|t[h+1]<<16|t[h+2]<<8|t[h+3]:t[h+3]<<24|t[h+2]<<16|t[h+1]<<8|t[h],o[a]=l>>>0}return o},e.split32=function(t,e){for(var i=new Array(4*t.length),r=0,n=0;r<t.length;r++,n+=4){var s=t[r];"big"===e?(i[n]=s>>>24,i[n+1]=s>>>16&255,i[n+2]=s>>>8&255,i[n+3]=255&s):(i[n+3]=s>>>24,i[n+2]=s>>>16&255,i[n+1]=s>>>8&255,i[n]=255&s)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,r){return t+e+i+r>>>0},e.sum32_5=function(t,e,i,r,n){return t+e+i+r+n>>>0},e.sum64=function(t,e,i,r){var n=t[e],s=r+t[e+1]>>>0,o=(s<r?1:0)+i+n;t[e]=o>>>0,t[e+1]=s},e.sum64_hi=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,r){return e+r>>>0},e.sum64_4_hi=function(t,e,i,r,n,s,o,a){var h=0,l=e;return h+=(l=l+r>>>0)<e?1:0,h+=(l=l+s>>>0)<s?1:0,t+i+n+o+(h+=(l=l+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,i,r,n,s,o,a){return e+r+s+a>>>0},e.sum64_5_hi=function(t,e,i,r,n,s,o,a,h,l){var u=0,c=e;return u+=(c=c+r>>>0)<e?1:0,u+=(c=c+s>>>0)<s?1:0,u+=(c=c+a>>>0)<a?1:0,t+i+n+o+h+(u+=(c=c+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,i,r,n,s,o,a,h,l){return e+r+s+a+l>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},3063:(t,e)=>{function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}e.Emitter=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<r.length;n++)if((i=r[n])===e||i.fn===e){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){r=0;for(var n=(i=i.slice(0)).length;r<n;++r)i[r].apply(this,e)}return this},i.prototype.emitReserved=i.prototype.emit,i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},8826:function(t){"use strict";!function(e){function i(t){return parseInt(t)===t}function r(t){if(!i(t.length))return!1;for(var e=0;e<t.length;e++)if(!i(t[e])||t[e]<0||t[e]>255)return!1;return!0}function n(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!r(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(i(t.length)&&r(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function s(t){return new Uint8Array(t)}function o(t,e,i,r,n){null==r&&null==n||(t=t.slice?t.slice(r,n):Array.prototype.slice.call(t,r,n)),e.set(t,i)}var a,h={toBytes:function(t){var e=[],i=0;for(t=encodeURI(t);i<t.length;){var r=t.charCodeAt(i++);37===r?(e.push(parseInt(t.substr(i,2),16)),i+=2):e.push(r)}return n(e)},fromBytes:function(t){for(var e=[],i=0;i<t.length;){var r=t[i];r<128?(e.push(String.fromCharCode(r)),i++):r>191&&r<224?(e.push(String.fromCharCode((31&r)<<6|63&t[i+1])),i+=2):(e.push(String.fromCharCode((15&r)<<12|(63&t[i+1])<<6|63&t[i+2])),i+=3)}return e.join("")}},l=(a="0123456789abcdef",{toBytes:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(parseInt(t.substr(i,2),16));return e},fromBytes:function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];e.push(a[(240&r)>>4]+a[15&r])}return e.join("")}}),u={16:10,24:12,32:14},c=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],d=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],g=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],v=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],m=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],y=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],x=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],b=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],T=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],S=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],E=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],C=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function _(t){for(var e=[],i=0;i<t.length;i+=4)e.push(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]);return e}var A=function(t){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(t,!0)}),this._prepare()};A.prototype._prepare=function(){var t=u[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var i,r=4*(t+1),n=this.key.length/4,s=_(this.key);for(e=0;e<n;e++)i=e>>2,this._Ke[i][e%4]=s[e],this._Kd[t-i][e%4]=s[e];for(var o,a=0,h=n;h<r;){if(o=s[n-1],s[0]^=d[o>>16&255]<<24^d[o>>8&255]<<16^d[255&o]<<8^d[o>>24&255]^c[a]<<24,a+=1,8!=n)for(e=1;e<n;e++)s[e]^=s[e-1];else{for(e=1;e<n/2;e++)s[e]^=s[e-1];for(o=s[n/2-1],s[n/2]^=d[255&o]^d[o>>8&255]<<8^d[o>>16&255]<<16^d[o>>24&255]<<24,e=n/2+1;e<n;e++)s[e]^=s[e-1]}for(e=0;e<n&&h<r;)l=h>>2,f=h%4,this._Ke[l][f]=s[e],this._Kd[t-l][f]=s[e++],h++}for(var l=1;l<t;l++)for(var f=0;f<4;f++)o=this._Kd[l][f],this._Kd[l][f]=T[o>>24&255]^S[o>>16&255]^E[o>>8&255]^C[255&o]},A.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,i=[0,0,0,0],r=_(t),n=0;n<4;n++)r[n]^=this._Ke[0][n];for(var o=1;o<e;o++){for(n=0;n<4;n++)i[n]=p[r[n]>>24&255]^g[r[(n+1)%4]>>16&255]^v[r[(n+2)%4]>>8&255]^m[255&r[(n+3)%4]]^this._Ke[o][n];r=i.slice()}var a,h=s(16);for(n=0;n<4;n++)a=this._Ke[e][n],h[4*n]=255&(d[r[n]>>24&255]^a>>24),h[4*n+1]=255&(d[r[(n+1)%4]>>16&255]^a>>16),h[4*n+2]=255&(d[r[(n+2)%4]>>8&255]^a>>8),h[4*n+3]=255&(d[255&r[(n+3)%4]]^a);return h},A.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,i=[0,0,0,0],r=_(t),n=0;n<4;n++)r[n]^=this._Kd[0][n];for(var o=1;o<e;o++){for(n=0;n<4;n++)i[n]=y[r[n]>>24&255]^x[r[(n+3)%4]>>16&255]^b[r[(n+2)%4]>>8&255]^w[255&r[(n+1)%4]]^this._Kd[o][n];r=i.slice()}var a,h=s(16);for(n=0;n<4;n++)a=this._Kd[e][n],h[4*n]=255&(f[r[n]>>24&255]^a>>24),h[4*n+1]=255&(f[r[(n+3)%4]>>16&255]^a>>16),h[4*n+2]=255&(f[r[(n+2)%4]>>8&255]^a>>8),h[4*n+3]=255&(f[255&r[(n+1)%4]]^a);return h};var M=function(t){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new A(t)};M.prototype.encrypt=function(t){if((t=n(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=s(t.length),i=s(16),r=0;r<t.length;r+=16)o(t,i,0,r,r+16),o(i=this._aes.encrypt(i),e,r);return e},M.prototype.decrypt=function(t){if((t=n(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=s(t.length),i=s(16),r=0;r<t.length;r+=16)o(t,i,0,r,r+16),o(i=this._aes.decrypt(i),e,r);return e};var P=function(t,e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=s(16);this._lastCipherblock=n(e,!0),this._aes=new A(t)};P.prototype.encrypt=function(t){if((t=n(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=s(t.length),i=s(16),r=0;r<t.length;r+=16){o(t,i,0,r,r+16);for(var a=0;a<16;a++)i[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(i),o(this._lastCipherblock,e,r)}return e},P.prototype.decrypt=function(t){if((t=n(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=s(t.length),i=s(16),r=0;r<t.length;r+=16){o(t,i,0,r,r+16),i=this._aes.decrypt(i);for(var a=0;a<16;a++)e[r+a]=i[a]^this._lastCipherblock[a];o(t,this._lastCipherblock,0,r,r+16)}return e};var k=function(t,e,i){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=s(16);i||(i=1),this.segmentSize=i,this._shiftRegister=n(e,!0),this._aes=new A(t)};k.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,i=n(t,!0),r=0;r<i.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)i[r+s]^=e[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(i,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return i},k.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,i=n(t,!0),r=0;r<i.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)i[r+s]^=e[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(t,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return i};var O=function(t,e){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=s(16);this._lastPrecipher=n(e,!0),this._lastPrecipherIndex=16,this._aes=new A(t)};O.prototype.encrypt=function(t){for(var e=n(t,!0),i=0;i<e.length;i++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[i]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},O.prototype.decrypt=O.prototype.encrypt;var R=function(t){if(!(this instanceof R))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=s(16),this.setValue(t)):this.setBytes(t)};R.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");for(var e=15;e>=0;--e)this._counter[e]=t%256,t>>=8},R.prototype.setBytes=function(t){if(16!=(t=n(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},R.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var L=function(t,e){if(!(this instanceof L))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof R||(e=new R(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new A(t)};L.prototype.encrypt=function(t){for(var e=n(t,!0),i=0;i<e.length;i++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[i]^=this._remainingCounter[this._remainingCounterIndex++];return e},L.prototype.decrypt=L.prototype.encrypt;var I={AES:A,Counter:R,ModeOfOperation:{ecb:M,cbc:P,cfb:k,ofb:O,ctr:L},utils:{hex:l,utf8:h},padding:{pkcs7:{pad:function(t){var e=16-(t=n(t,!0)).length%16,i=s(t.length+e);o(t,i);for(var r=t.length;r<i.length;r++)i[r]=e;return i},strip:function(t){if((t=n(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var i=t.length-e,r=0;r<e;r++)if(t[i+r]!==e)throw new Error("PKCS#7 invalid padding byte");var a=s(i);return o(t,a,0,0,i),a}}},_arrayTest:{coerceArray:n,createArray:s,copyArray:o}};t.exports=I}()},3010:t=>{function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},8247:(t,e,i)=>{"use strict";i.r(e),i.d(e,{decode:()=>a,encode:()=>o});for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256),s=0;s<r.length;s++)n[r.charCodeAt(s)]=s;var o=function(t){var e,i=new Uint8Array(t),n=i.length,s="";for(e=0;e<n;e+=3)s+=r[i[e]>>2],s+=r[(3&i[e])<<4|i[e+1]>>4],s+=r[(15&i[e+1])<<2|i[e+2]>>6],s+=r[63&i[e+2]];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s},a=function(t){var e,i,r,s,o,a=.75*t.length,h=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(e=0;e<h;e+=4)i=n[t.charCodeAt(e)],r=n[t.charCodeAt(e+1)],s=n[t.charCodeAt(e+2)],o=n[t.charCodeAt(e+3)],c[l++]=i<<2|r>>4,c[l++]=(15&r)<<4|s>>2,c[l++]=(3&s)<<6|63&o;return u}},2882:t=>{"use strict";for(var e="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={},r=0;r<e.length;r++){var n=e.charAt(r);if(void 0!==i[n])throw new TypeError(n+" is ambiguous");i[n]=r}function s(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function o(t){for(var e=1,i=0;i<t.length;++i){var r=t.charCodeAt(i);if(r<33||r>126)return"Invalid prefix ("+t+")";e=s(e)^r>>5}for(e=s(e),i=0;i<t.length;++i){var n=t.charCodeAt(i);e=s(e)^31&n}return e}function a(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;var a=(t=r).lastIndexOf("1");if(-1===a)return"No separator character for "+t;if(0===a)return"Missing prefix for "+t;var h=t.slice(0,a),l=t.slice(a+1);if(l.length<6)return"Data too short";var u=o(h);if("string"==typeof u)return u;for(var c=[],d=0;d<l.length;++d){var f=l.charAt(d),p=i[f];if(void 0===p)return"Unknown character "+f;u=s(u)^p,d+6>=l.length||c.push(p)}return 1!==u?"Invalid checksum for "+t:{prefix:h,words:c}}function h(t,e,i,r){for(var n=0,s=0,o=(1<<i)-1,a=[],h=0;h<t.length;++h)for(n=n<<e|t[h],s+=e;s>=i;)s-=i,a.push(n>>s&o);if(r)s>0&&a.push(n<<i-s&o);else{if(s>=e)return"Excess padding";if(n<<i-s&o)return"Non-zero padding"}return a}t.exports={decodeUnsafe:function(){var t=a.apply(null,arguments);if("object"==typeof t)return t},decode:function(t){var e=a.apply(null,arguments);if("object"==typeof e)return e;throw new Error(e)},encode:function(t,i,r){if(r=r||90,t.length+7+i.length>r)throw new TypeError("Exceeds length limit");var n=o(t=t.toLowerCase());if("string"==typeof n)throw new Error(n);for(var a=t+"1",h=0;h<i.length;++h){var l=i[h];if(l>>5!=0)throw new Error("Non 5-bit word");n=s(n)^l,a+=e.charAt(l)}for(h=0;h<6;++h)n=s(n);for(n^=1,h=0;h<6;++h)a+=e.charAt(n>>5*(5-h)&31);return a},toWordsUnsafe:function(t){var e=h(t,8,5,!0);if(Array.isArray(e))return e},toWords:function(t){var e=h(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function(t){var e=h(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function(t){var e=h(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}}},4802:(t,e,i)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(n=r))})),e.splice(n,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=i(804)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},804:(t,e,i)=>{t.exports=function(t){function e(t){let i,n,s,o=null;function a(...t){if(!a.enabled)return;const r=a,n=Number(new Date),s=n-(i||n);r.diff=s,r.prev=i,r.curr=n,i=n,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((i,n)=>{if("%%"===i)return"%";o++;const s=e.formatters[n];if("function"==typeof s){const e=t[o];i=s.call(r,e),t.splice(o,1),o--}return i})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==e.namespaces&&(n=e.namespaces,s=e.enabled(t)),s),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,i){const r=e(this.namespace+(void 0===i?":":i)+t);return r.log=this.log,r}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(n),...e.skips.map(n).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let i;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(i=0;i<n;i++)r[i]&&("-"===(t=r[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let i,r;for(i=0,r=e.skips.length;i<r;i++)if(e.skips[i].test(t))return!1;for(i=0,r=e.names.length;i<r;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=i(810),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((i=>{e[i]=t[i]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e}},810:t=>{var e=1e3,i=60*e,r=60*i,n=24*r;function s(t,e,i,r){var n=e>=1.5*i;return Math.round(t/i)+" "+r+(n?"s":"")}t.exports=function(t,o){o=o||{};var a,h,l=typeof t;if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===l&&isFinite(t))return o.long?(a=t,(h=Math.abs(a))>=n?s(a,h,n,"day"):h>=r?s(a,h,r,"hour"):h>=i?s(a,h,i,"minute"):h>=e?s(a,h,e,"second"):a+" ms"):function(t){var s=Math.abs(t);return s>=n?Math.round(t/n)+"d":s>=r?Math.round(t/r)+"h":s>=i?Math.round(t/i)+"m":s>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},72:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BaseContract:()=>Or,BigNumber:()=>H,Contract:()=>Rr,ContractFactory:()=>Lr,FixedNumber:()=>Wr,Signer:()=>oi,VoidSigner:()=>ai,Wallet:()=>bs,Wordlist:()=>Sn,constants:()=>n,errors:()=>v,ethers:()=>h,getDefaultProvider:()=>ja,logger:()=>fl,providers:()=>s,utils:()=>a,version:()=>dl,wordlists:()=>An});var r={};i.r(r),i.d(r,{decode:()=>Et,encode:()=>wt});var n={};i.r(n),i.d(n,{AddressZero:()=>Ss,EtherSymbol:()=>Cs,HashZero:()=>Es,MaxInt256:()=>fe,MaxUint256:()=>ce,MinInt256:()=>de,NegativeOne:()=>oe,One:()=>he,Two:()=>le,WeiPerEther:()=>ue,Zero:()=>ae});var s={};i.r(s),i.d(s,{AlchemyProvider:()=>ra,AlchemyWebSocketProvider:()=>ia,BaseProvider:()=>Lo,CloudflareProvider:()=>sa,EtherscanProvider:()=>pa,FallbackProvider:()=>Pa,Formatter:()=>lo,InfuraProvider:()=>Ia,InfuraWebSocketProvider:()=>La,IpcProvider:()=>ka,JsonRpcBatchProvider:()=>Fa,JsonRpcProvider:()=>Vo,JsonRpcSigner:()=>Xo,NodesmithProvider:()=>Ba,PocketProvider:()=>Ua,Provider:()=>ei,Resolver:()=>ko,StaticJsonRpcProvider:()=>$o,UrlJsonRpcProvider:()=>Qo,Web3Provider:()=>Wa,WebSocketProvider:()=>Zo,getDefaultProvider:()=>ja,getNetwork:()=>Ls,isCommunityResourcable:()=>uo,isCommunityResource:()=>co,showThrottleMessage:()=>po});var o={};i.r(o),i.d(o,{decode:()=>Zs,encode:()=>Js});var a={};i.r(a),i.d(a,{AbiCoder:()=>zh,ConstructorFragment:()=>Mh,ErrorFragment:()=>Oh,EventFragment:()=>Eh,FormatTypes:()=>xh,Fragment:()=>Sh,FunctionFragment:()=>Ph,HDNode:()=>Nn,Indexed:()=>Vh,Interface:()=>qh,LogDescription:()=>Xh,Logger:()=>y,ParamType:()=>wh,RLP:()=>r,SigningKey:()=>Ji,SupportedAlgorithm:()=>fn,TransactionDescription:()=>Gh,TransactionTypes:()=>er,UnicodeNormalizationForm:()=>Bt,Utf8ErrorFuncs:()=>Ut,Utf8ErrorReason:()=>Nt,_TypedDataEncoder:()=>un,_fetchData:()=>io,_toEscapedUtf8String:()=>Wt,accessListify:()=>ur,arrayify:()=>C,base58:()=>dn,base64:()=>o,checkProperties:()=>it,checkResultErrors:()=>Ka,commify:()=>al,computeAddress:()=>or,computeHmac:()=>bn,computePublicKey:()=>Qi,concat:()=>_,deepCopy:()=>at,defaultAbiCoder:()=>Uh,defaultPath:()=>Bn,defineReadOnly:()=>Q,entropyToMnemonic:()=>Yn,fetchJson:()=>ro,formatBytes32String:()=>rl,formatEther:()=>ul,formatUnits:()=>hl,getAccountPath:()=>Gn,getAddress:()=>Ot,getContractAddress:()=>It,getCreate2Address:()=>Ft,getIcapAddress:()=>Lt,getJsonWalletAddress:()=>as,getStatic:()=>tt,hashMessage:()=>Hr,hexConcat:()=>I,hexDataLength:()=>R,hexDataSlice:()=>L,hexStripZeros:()=>D,hexValue:()=>F,hexZeroPad:()=>B,hexlify:()=>O,id:()=>qt,isAddress:()=>Rt,isBytes:()=>E,isBytesLike:()=>T,isHexString:()=>P,isValidMnemonic:()=>Xn,isValidName:()=>qs,joinSignature:()=>z,keccak256:()=>vt,mnemonicToEntropy:()=>Un,mnemonicToSeed:()=>zn,namehash:()=>Ks,nameprep:()=>Ws,parseBytes32String:()=>nl,parseEther:()=>cl,parseTransaction:()=>vr,parseUnits:()=>ll,poll:()=>no,randomBytes:()=>Hn,recoverAddress:()=>ar,recoverPublicKey:()=>$i,resolveProperties:()=>et,ripemd160:()=>mn,serializeTransaction:()=>pr,sha256:()=>yn,sha512:()=>xn,shallowCopy:()=>rt,shuffled:()=>ga,solidityKeccak256:()=>el,solidityPack:()=>tl,soliditySha256:()=>il,splitSignature:()=>N,stripZeros:()=>A,toUtf8Bytes:()=>Xt,toUtf8CodePoints:()=>Ht,toUtf8String:()=>jt,verifyMessage:()=>ws,verifyTypedData:()=>Ts,zeroPad:()=>M});var h={};i.r(h),i.d(h,{BaseContract:()=>Or,BigNumber:()=>H,Contract:()=>Rr,ContractFactory:()=>Lr,FixedNumber:()=>Wr,Signer:()=>oi,VoidSigner:()=>ai,Wallet:()=>bs,Wordlist:()=>Sn,constants:()=>n,errors:()=>v,getDefaultProvider:()=>ja,logger:()=>fl,providers:()=>s,utils:()=>a,version:()=>dl,wordlists:()=>An});let l=!1,u=!1;const c={debug:1,default:2,info:2,warning:3,error:4,off:5};let d=c.default,f=null;const p=function(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(i){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();var g,v;!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(g||(g={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(v||(v={}));const m="0123456789abcdef";class y{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const i=t.toLowerCase();null==c[i]&&this.throwArgumentError("invalid log level name","logLevel",t),d>c[i]||console.log.apply(console,e)}debug(...t){this._log(y.levels.DEBUG,t)}info(...t){this._log(y.levels.INFO,t)}warn(...t){this._log(y.levels.WARNING,t)}makeError(t,e,i){if(u)return this.makeError("censored error",e,{});e||(e=y.errors.UNKNOWN_ERROR),i||(i={});const r=[];Object.keys(i).forEach((t=>{const e=i[t];try{if(e instanceof Uint8Array){let i="";for(let t=0;t<e.length;t++)i+=m[e[t]>>4],i+=m[15&e[t]];r.push(t+"=Uint8Array(0x"+i+")")}else r.push(t+"="+JSON.stringify(e))}catch(e){r.push(t+"="+JSON.stringify(i[t].toString()))}})),r.push(`code=${e}`),r.push(`version=${this.version}`);const n=t;r.length&&(t+=" ("+r.join(", ")+")");const s=new Error(t);return s.reason=n,s.code=e,Object.keys(i).forEach((function(t){s[t]=i[t]})),s}throwError(t,e,i){throw this.makeError(t,e,i)}throwArgumentError(t,e,i){return this.throwError(t,y.errors.INVALID_ARGUMENT,{argument:e,value:i})}assert(t,e,i,r){t||this.throwError(e,i,r)}assertArgument(t,e,i,r){t||this.throwArgumentError(e,i,r)}checkNormalize(t){null==t&&(t="platform missing String.prototype.normalize"),p&&this.throwError("platform missing String.prototype.normalize",y.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:p})}checkSafeUint53(t,e){"number"==typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,y.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,y.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,i){i=i?": "+i:"",t<e&&this.throwError("missing argument"+i,y.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+i,y.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",y.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",y.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",y.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return f||(f=new y("logger/5.5.0")),f}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",y.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),l){if(!t)return;this.globalLogger().throwError("error censorship permanent",y.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}u=!!t,l=!!e}static setLogLevel(t){const e=c[t.toLowerCase()];null!=e?d=e:y.globalLogger().warn("invalid log level - "+t)}static from(t){return new y(t)}}y.errors=v,y.levels=g;const x=new y("bytes/5.5.0");function b(t){return!!t.toHexString}function w(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return w(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function T(t){return P(t)&&!(t.length%2)||E(t)}function S(t){return"number"==typeof t&&t==t&&t%1==0}function E(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t)return!1;if(!S(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const i=t[e];if(!S(i)||i<0||i>=256)return!1}return!0}function C(t,e){if(e||(e={}),"number"==typeof t){x.checkSafeUint53(t,"invalid arrayify value");const e=[];for(;t;)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),w(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),b(t)&&(t=t.toHexString()),P(t)){let i=t.substring(2);i.length%2&&("left"===e.hexPad?i="0x0"+i.substring(2):"right"===e.hexPad?i+="0":x.throwArgumentError("hex data is odd-length","value",t));const r=[];for(let t=0;t<i.length;t+=2)r.push(parseInt(i.substring(t,t+2),16));return w(new Uint8Array(r))}return E(t)?w(new Uint8Array(t)):x.throwArgumentError("invalid arrayify value","value",t)}function _(t){const e=t.map((t=>C(t))),i=e.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(i);return e.reduce(((t,e)=>(r.set(e,t),t+e.length)),0),w(r)}function A(t){let e=C(t);if(0===e.length)return e;let i=0;for(;i<e.length&&0===e[i];)i++;return i&&(e=e.slice(i)),e}function M(t,e){(t=C(t)).length>e&&x.throwArgumentError("value out of range","value",arguments[0]);const i=new Uint8Array(e);return i.set(t,e-t.length),w(i)}function P(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const k="0123456789abcdef";function O(t,e){if(e||(e={}),"number"==typeof t){x.checkSafeUint53(t,"invalid hexlify value");let e="";for(;t;)e=k[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("bigint"==typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),b(t))return t.toHexString();if(P(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":x.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(E(t)){let e="0x";for(let i=0;i<t.length;i++){let r=t[i];e+=k[(240&r)>>4]+k[15&r]}return e}return x.throwArgumentError("invalid hexlify value","value",t)}function R(t){if("string"!=typeof t)t=O(t);else if(!P(t)||t.length%2)return null;return(t.length-2)/2}function L(t,e,i){return"string"!=typeof t?t=O(t):(!P(t)||t.length%2)&&x.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=i?"0x"+t.substring(e,2+2*i):"0x"+t.substring(e)}function I(t){let e="0x";return t.forEach((t=>{e+=O(t).substring(2)})),e}function F(t){const e=D(O(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function D(t){"string"!=typeof t&&(t=O(t)),P(t)||x.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&"0"===t[e];)e++;return"0x"+t.substring(e)}function B(t,e){for("string"!=typeof t?t=O(t):P(t)||x.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&x.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function N(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(T(t)){const i=C(t);65!==i.length&&x.throwArgumentError("invalid signature string; must be 65 bytes","signature",t),e.r=O(i.slice(0,32)),e.s=O(i.slice(32,64)),e.v=i[64],e.v<27&&(0===e.v||1===e.v?e.v+=27:x.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(i[32]|=128),e._vs=O(i.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){const i=M(C(e._vs),32);e._vs=O(i);const r=i[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=r:e.recoveryParam!==r&&x.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const n=O(i);null==e.s?e.s=n:e.s!==n&&x.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?x.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{const i=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==i&&x.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&P(e.r)?e.r=B(e.r,32):x.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&P(e.s)?e.s=B(e.s,32):x.throwArgumentError("signature missing or invalid s","signature",t);const i=C(e.s);i[0]>=128&&x.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(i[0]|=128);const r=O(i);e._vs&&(P(e._vs)||x.throwArgumentError("signature invalid _vs","signature",t),e._vs=B(e._vs,32)),null==e._vs?e._vs=r:e._vs!==r&&x.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e}function z(t){return O(_([(t=N(t)).r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}var U=i(3877);const Y="bignumber/5.5.0";var X=i.n(U)().BN;const G=new y(Y),W={},V=9007199254740991;let j=!1;class H{constructor(t,e){G.checkNew(new.target,H),t!==W&&G.throwError("cannot call constructor directly; use BigNumber.from",y.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return K(Z(this).fromTwos(t))}toTwos(t){return K(Z(this).toTwos(t))}abs(){return"-"===this._hex[0]?H.from(this._hex.substring(1)):this}add(t){return K(Z(this).add(Z(t)))}sub(t){return K(Z(this).sub(Z(t)))}div(t){return H.from(t).isZero()&&J("division by zero","div"),K(Z(this).div(Z(t)))}mul(t){return K(Z(this).mul(Z(t)))}mod(t){const e=Z(t);return e.isNeg()&&J("cannot modulo negative values","mod"),K(Z(this).umod(e))}pow(t){const e=Z(t);return e.isNeg()&&J("cannot raise to negative values","pow"),K(Z(this).pow(e))}and(t){const e=Z(t);return(this.isNegative()||e.isNeg())&&J("cannot 'and' negative values","and"),K(Z(this).and(e))}or(t){const e=Z(t);return(this.isNegative()||e.isNeg())&&J("cannot 'or' negative values","or"),K(Z(this).or(e))}xor(t){const e=Z(t);return(this.isNegative()||e.isNeg())&&J("cannot 'xor' negative values","xor"),K(Z(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&J("cannot mask negative values","mask"),K(Z(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&J("cannot shift negative values","shl"),K(Z(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&J("cannot shift negative values","shr"),K(Z(this).shrn(t))}eq(t){return Z(this).eq(Z(t))}lt(t){return Z(this).lt(Z(t))}lte(t){return Z(this).lte(Z(t))}gt(t){return Z(this).gt(Z(t))}gte(t){return Z(this).gte(Z(t))}isNegative(){return"-"===this._hex[0]}isZero(){return Z(this).isZero()}toNumber(){try{return Z(this).toNumber()}catch(t){J("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(t){}return G.throwError("this platform does not support BigInt",y.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?j||(j=!0,G.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?G.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",y.errors.UNEXPECTED_ARGUMENT,{}):G.throwError("BigNumber.toString does not accept parameters",y.errors.UNEXPECTED_ARGUMENT,{})),Z(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof H)return t;if("string"==typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new H(W,q(t)):t.match(/^-?[0-9]+$/)?new H(W,q(new X(t))):G.throwArgumentError("invalid BigNumber string","value",t);if("number"==typeof t)return t%1&&J("underflow","BigNumber.from",t),(t>=V||t<=-V)&&J("overflow","BigNumber.from",t),H.from(String(t));const e=t;if("bigint"==typeof e)return H.from(e.toString());if(E(e))return H.from(O(e));if(e)if(e.toHexString){const t=e.toHexString();if("string"==typeof t)return H.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"==typeof t&&(P(t)||"-"===t[0]&&P(t.substring(1))))return H.from(t)}return G.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!(!t||!t._isBigNumber)}}function q(t){if("string"!=typeof t)return q(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&G.throwArgumentError("invalid hex","value",t),"0x00"===(t=q(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function K(t){return H.from(q(t))}function Z(t){const e=H.from(t).toHexString();return"-"===e[0]?new X("-"+e.substring(3),16):new X(e.substring(2),16)}function J(t,e,i){const r={fault:t,operation:e};return null!=i&&(r.value=i),G.throwError(t,y.errors.NUMERIC_FAULT,r)}const $=new y("properties/5.5.0");function Q(t,e,i){Object.defineProperty(t,e,{enumerable:!0,value:i,writable:!1})}function tt(t,e){for(let i=0;i<32;i++){if(t[e])return t[e];if(!t.prototype||"object"!=typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function et(t){return e=this,i=void 0,n=function*(){const e=Object.keys(t).map((e=>{const i=t[e];return Promise.resolve(i).then((t=>({key:e,value:t})))}));return(yield Promise.all(e)).reduce(((t,e)=>(t[e.key]=e.value,t)),{})},new((r=void 0)||(r=Promise))((function(t,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(o,a)}h((n=n.apply(e,i||[])).next())}));var e,i,r,n}function it(t,e){t&&"object"==typeof t||$.throwArgumentError("invalid object","object",t),Object.keys(t).forEach((i=>{e[i]||$.throwArgumentError("invalid object key - "+i,"transaction:"+i,t)}))}function rt(t){const e={};for(const i in t)e[i]=t[i];return e}const nt={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function st(t){if(null==t||nt[typeof t])return!0;if(Array.isArray(t)||"object"==typeof t){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let i=0;i<e.length;i++){let r=null;try{r=t[e[i]]}catch(t){continue}if(!st(r))return!1}return!0}return $.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function ot(t){if(st(t))return t;if(Array.isArray(t))return Object.freeze(t.map((t=>at(t))));if("object"==typeof t){const e={};for(const i in t){const r=t[i];void 0!==r&&Q(e,i,at(r))}return e}return $.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function at(t){return ot(t)}class ht{constructor(t){for(const e in t)this[e]=at(t[e])}}const lt="abi/5.5.0",ut=new y(lt);class ct{constructor(t,e,i,r){this.name=t,this.type=e,this.localName=i,this.dynamic=r}_throwError(t,e){ut.throwArgumentError(t,this.localName,e)}}class dt{constructor(t){Q(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return I(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData(_(t._data))}writeBytes(t){let e=C(t);const i=e.length%this.wordSize;return i&&(e=_([e,this._padding.slice(i)])),this._writeData(e)}_getValue(t){let e=C(H.from(t));return e.length>this.wordSize&&ut.throwError("value out-of-bounds",y.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=_([this._padding.slice(e.length%this.wordSize),e])),e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,e=>{this._data[t]=this._getValue(e)}}}class ft{constructor(t,e,i,r){Q(this,"_data",C(t)),Q(this,"wordSize",e||32),Q(this,"_coerceFunc",i),Q(this,"allowLoose",r),this._offset=0}get data(){return O(this._data)}get consumed(){return this._offset}static coerce(t,e){let i=t.match("^u?int([0-9]+)$");return i&&parseInt(i[1])<=48&&(e=e.toNumber()),e}coerce(t,e){return this._coerceFunc?this._coerceFunc(t,e):ft.coerce(t,e)}_peekBytes(t,e,i){let r=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+r>this._data.length&&(this.allowLoose&&i&&this._offset+e<=this._data.length?r=e:ut.throwError("data out-of-bounds",y.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+r})),this._data.slice(this._offset,this._offset+r)}subReader(t){return new ft(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let i=this._peekBytes(0,t,!!e);return this._offset+=i.length,i.slice(0,t)}readValue(){return H.from(this.readBytes(this.wordSize))}}var pt=i(1094),gt=i.n(pt);function vt(t){return"0x"+gt().keccak_256(C(t))}const mt=new y("rlp/5.5.0");function yt(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function xt(t,e,i){let r=0;for(let n=0;n<i;n++)r=256*r+t[e+n];return r}function bt(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(bt(t))})),e.length<=55)return e.unshift(192+e.length),e;const i=yt(e.length);return i.unshift(247+i.length),i.concat(e)}T(t)||mt.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(C(t));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const i=yt(e.length);return i.unshift(183+i.length),i.concat(e)}function wt(t){return O(bt(t))}function Tt(t,e,i,r){const n=[];for(;i<e+1+r;){const s=St(t,i);n.push(s.result),(i+=s.consumed)>e+1+r&&mt.throwError("child data too short",y.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:n}}function St(t,e){if(0===t.length&&mt.throwError("data too short",y.errors.BUFFER_OVERRUN,{}),t[e]>=248){const i=t[e]-247;e+1+i>t.length&&mt.throwError("data short segment too short",y.errors.BUFFER_OVERRUN,{});const r=xt(t,e+1,i);return e+1+i+r>t.length&&mt.throwError("data long segment too short",y.errors.BUFFER_OVERRUN,{}),Tt(t,e,e+1+i,i+r)}if(t[e]>=192){const i=t[e]-192;return e+1+i>t.length&&mt.throwError("data array too short",y.errors.BUFFER_OVERRUN,{}),Tt(t,e,e+1,i)}if(t[e]>=184){const i=t[e]-183;e+1+i>t.length&&mt.throwError("data array too short",y.errors.BUFFER_OVERRUN,{});const r=xt(t,e+1,i);return e+1+i+r>t.length&&mt.throwError("data array too short",y.errors.BUFFER_OVERRUN,{}),{consumed:1+i+r,result:O(t.slice(e+1+i,e+1+i+r))}}if(t[e]>=128){const i=t[e]-128;return e+1+i>t.length&&mt.throwError("data too short",y.errors.BUFFER_OVERRUN,{}),{consumed:1+i,result:O(t.slice(e+1,e+1+i))}}return{consumed:1,result:O(t[e])}}function Et(t){const e=C(t),i=St(e,0);return i.consumed!==e.length&&mt.throwArgumentError("invalid rlp data","data",t),i.result}const Ct=new y("address/5.5.0");function _t(t){P(t,20)||Ct.throwArgumentError("invalid address","address",t);const e=(t=t.toLowerCase()).substring(2).split(""),i=new Uint8Array(40);for(let t=0;t<40;t++)i[t]=e[t].charCodeAt(0);const r=C(vt(i));for(let t=0;t<40;t+=2)r[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&r[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const At={};for(let t=0;t<10;t++)At[String(t)]=String(t);for(let t=0;t<26;t++)At[String.fromCharCode(65+t)]=String(10+t);const Mt=Math.floor((Pt=9007199254740991,Math.log10?Math.log10(Pt):Math.log(Pt)/Math.LN10));var Pt;function kt(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>At[t])).join("");for(;e.length>=Mt;){let t=e.substring(0,Mt);e=parseInt(t,10)%97+e.substring(t.length)}let i=String(98-parseInt(e,10)%97);for(;i.length<2;)i="0"+i;return i}function Ot(t){let e=null;if("string"!=typeof t&&Ct.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=_t(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Ct.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==kt(t)&&Ct.throwArgumentError("bad icap checksum","address",t),i=t.substring(4),e=new X(i,36).toString(16);e.length<40;)e="0"+e;e=_t("0x"+e)}else Ct.throwArgumentError("invalid address","address",t);var i;return e}function Rt(t){try{return Ot(t),!0}catch(t){}return!1}function Lt(t){let e=(i=Ot(t).substring(2),new X(i,16).toString(36)).toUpperCase();for(var i;e.length<30;)e="0"+e;return"XE"+kt("XE00"+e)+e}function It(t){let e=null;try{e=Ot(t.from)}catch(e){Ct.throwArgumentError("missing from address","transaction",t)}return Ot(L(vt(wt([e,A(C(H.from(t.nonce).toHexString()))])),12))}function Ft(t,e,i){return 32!==R(e)&&Ct.throwArgumentError("salt must be 32 bytes","salt",e),32!==R(i)&&Ct.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",i),Ot(L(vt(_(["0xff",Ot(t),e,i])),12))}const Dt=new y("strings/5.5.0");var Bt,Nt;function zt(t,e,i,r,n){if(t===Nt.BAD_PREFIX||t===Nt.UNEXPECTED_CONTINUE){let t=0;for(let r=e+1;r<i.length&&i[r]>>6==2;r++)t++;return t}return t===Nt.OVERRUN?i.length-e-1:0}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(Bt||(Bt={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(Nt||(Nt={}));const Ut=Object.freeze({error:function(t,e,i,r,n){return Dt.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",i)},ignore:zt,replace:function(t,e,i,r,n){return t===Nt.OVERLONG?(r.push(n),0):(r.push(65533),zt(t,e,i))}});function Yt(t,e){null==e&&(e=Ut.error),t=C(t);const i=[];let r=0;for(;r<t.length;){const n=t[r++];if(n>>7==0){i.push(n);continue}let s=null,o=null;if(192==(224&n))s=1,o=127;else if(224==(240&n))s=2,o=2047;else{if(240!=(248&n)){r+=e(128==(192&n)?Nt.UNEXPECTED_CONTINUE:Nt.BAD_PREFIX,r-1,t,i);continue}s=3,o=65535}if(r-1+s>=t.length){r+=e(Nt.OVERRUN,r-1,t,i);continue}let a=n&(1<<8-s-1)-1;for(let n=0;n<s;n++){let n=t[r];if(128!=(192&n)){r+=e(Nt.MISSING_CONTINUE,r,t,i),a=null;break}a=a<<6|63&n,r++}null!==a&&(a>1114111?r+=e(Nt.OUT_OF_RANGE,r-1-s,t,i,a):a>=55296&&a<=57343?r+=e(Nt.UTF16_SURROGATE,r-1-s,t,i,a):a<=o?r+=e(Nt.OVERLONG,r-1-s,t,i,a):i.push(a))}return i}function Xt(t,e=Bt.current){e!=Bt.current&&(Dt.checkNormalize(),t=t.normalize(e));let i=[];for(let e=0;e<t.length;e++){const r=t.charCodeAt(e);if(r<128)i.push(r);else if(r<2048)i.push(r>>6|192),i.push(63&r|128);else if(55296==(64512&r)){e++;const n=t.charCodeAt(e);if(e>=t.length||56320!=(64512&n))throw new Error("invalid utf-8 string");const s=65536+((1023&r)<<10)+(1023&n);i.push(s>>18|240),i.push(s>>12&63|128),i.push(s>>6&63|128),i.push(63&s|128)}else i.push(r>>12|224),i.push(r>>6&63|128),i.push(63&r|128)}return C(i)}function Gt(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function Wt(t,e){return'"'+Yt(t,e).map((t=>{if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127)return String.fromCharCode(t)}return t<=65535?Gt(t):Gt(55296+((t-=65536)>>10&1023))+Gt(56320+(1023&t))})).join("")+'"'}function Vt(t){return t.map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function jt(t,e){return Vt(Yt(t,e))}function Ht(t,e=Bt.current){return Yt(Xt(t,e))}function qt(t){return vt(Xt(t))}class Kt extends ct{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{e=Ot(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)}decode(t){return Ot(B(t.readValue().toHexString(),20))}}class Zt extends ct{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const Jt=new y(lt);function $t(t,e,i){let r=null;if(Array.isArray(i))r=i;else if(i&&"object"==typeof i){let t={};r=e.map((e=>{const r=e.localName;return r||Jt.throwError("cannot encode object for signature with missing names",y.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:i}),t[r]&&Jt.throwError("cannot encode object for signature with duplicate names",y.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:i}),t[r]=!0,i[r]}))}else Jt.throwArgumentError("invalid tuple value","tuple",i);e.length!==r.length&&Jt.throwArgumentError("types/value length mismatch","tuple",i);let n=new dt(t.wordSize),s=new dt(t.wordSize),o=[];e.forEach(((t,e)=>{let i=r[e];if(t.dynamic){let e=s.length;t.encode(s,i);let r=n.writeUpdatableValue();o.push((t=>{r(t+e)}))}else t.encode(n,i)})),o.forEach((t=>{t(n.length)}));let a=t.appendWriter(n);return a+=t.appendWriter(s),a}function Qt(t,e){let i=[],r=t.subReader(0);e.forEach((e=>{let n=null;if(e.dynamic){let i=t.readValue(),s=r.subReader(i.toNumber());try{n=e.decode(s)}catch(t){if(t.code===y.errors.BUFFER_OVERRUN)throw t;n=t,n.baseType=e.name,n.name=e.localName,n.type=e.type}}else try{n=e.decode(t)}catch(t){if(t.code===y.errors.BUFFER_OVERRUN)throw t;n=t,n.baseType=e.name,n.name=e.localName,n.type=e.type}null!=n&&i.push(n)}));const n=e.reduce(((t,e)=>{const i=e.localName;return i&&(t[i]||(t[i]=0),t[i]++),t}),{});e.forEach(((t,e)=>{let r=t.localName;if(!r||1!==n[r])return;if("length"===r&&(r="_length"),null!=i[r])return;const s=i[e];s instanceof Error?Object.defineProperty(i,r,{enumerable:!0,get:()=>{throw s}}):i[r]=s}));for(let t=0;t<i.length;t++){const e=i[t];e instanceof Error&&Object.defineProperty(i,t,{enumerable:!0,get:()=>{throw e}})}return Object.freeze(i)}class te extends ct{constructor(t,e,i){super("array",t.type+"["+(e>=0?e:"")+"]",i,-1===e||t.dynamic),this.coder=t,this.length=e}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let i=0;i<this.length;i++)e.push(t);return e}encode(t,e){Array.isArray(e)||this._throwError("expected array value",e);let i=this.length;-1===i&&(i=e.length,t.writeValue(e.length)),Jt.checkArgumentCount(e.length,i,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let t=0;t<e.length;t++)r.push(this.coder);return $t(t,r,e)}decode(t){let e=this.length;-1===e&&(e=t.readValue().toNumber(),32*e>t._data.length&&Jt.throwError("insufficient data length",y.errors.BUFFER_OVERRUN,{length:t._data.length,count:e}));let i=[];for(let t=0;t<e;t++)i.push(new Zt(this.coder));return t.coerce(this.name,Qt(t,i))}}class ee extends ct{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class ie extends ct{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=C(e);let i=t.writeValue(e.length);return i+=t.writeBytes(e),i}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class re extends ie{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,O(super.decode(t)))}}class ne extends ct{constructor(t,e){let i="bytes"+String(t);super(i,i,e,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let i=C(e);return i.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(i)}decode(t){return t.coerce(this.name,O(t.readBytes(this.size)))}}class se extends ct{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}const oe=H.from(-1),ae=H.from(0),he=H.from(1),le=H.from(2),ue=H.from("1000000000000000000"),ce=H.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),de=H.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),fe=H.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class pe extends ct{constructor(t,e,i){const r=(e?"int":"uint")+8*t;super(r,r,i,!1),this.size=t,this.signed=e}defaultValue(){return 0}encode(t,e){let i=H.from(e),r=ce.mask(8*t.wordSize);if(this.signed){let t=r.mask(8*this.size-1);(i.gt(t)||i.lt(t.add(he).mul(oe)))&&this._throwError("value out-of-bounds",e)}else(i.lt(ae)||i.gt(r.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return i=i.toTwos(8*this.size).mask(8*this.size),this.signed&&(i=i.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(i)}decode(t){let e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}class ge extends ie{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Xt(e))}decode(t){return jt(super.decode(t))}}class ve extends ct{constructor(t,e){let i=!1;const r=[];t.forEach((t=>{t.dynamic&&(i=!0),r.push(t.type)})),super("tuple","tuple("+r.join(",")+")",e,i),this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const i=e.localName;return i&&(t[i]||(t[i]=0),t[i]++),t}),{});return this.coders.forEach(((i,r)=>{let n=i.localName;n&&1===e[n]&&("length"===n&&(n="_length"),null==t[n]&&(t[n]=t[r]))})),Object.freeze(t)}encode(t,e){return $t(t,this.coders,e)}decode(t){return t.coerce(this.name,Qt(t,this.coders))}}const me=new y(lt),ye={};let xe={calldata:!0,memory:!0,storage:!0},be={calldata:!0,memory:!0};function we(t,e){if("bytes"===t||"string"===t){if(xe[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&be[e])return!0;return(xe[e]||"payable"===e)&&me.throwArgumentError("invalid modifier","name",e),!1}function Te(t,e){for(let i in e)Q(t,i,e[i])}const Se=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Ee=new RegExp(/^(.*)\[([0-9]*)\]$/);class Ce{constructor(t,e){t!==ye&&me.throwError("use fromString",y.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Te(this,e);let i=this.type.match(Ee);Te(this,i?{arrayLength:parseInt(i[2]||"-1"),arrayChildren:Ce.fromObject({type:i[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=Se.sighash),Se[t]||me.throwArgumentError("invalid format type","format",t),t===Se.json){let e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(e)}let e="";return"array"===this.baseType?(e+=this.arrayChildren.format(t),e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==Se.sighash&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join(t===Se.full?", ":",")+")"):e+=this.type,t!==Se.sighash&&(!0===this.indexed&&(e+=" indexed"),t===Se.full&&this.name&&(e+=" "+this.name)),e}static from(t,e){return"string"==typeof t?Ce.fromString(t,e):Ce.fromObject(t)}static fromObject(t){return Ce.isParamType(t)?t:new Ce(ye,{name:t.name||null,type:De(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(Ce.fromObject):null})}static fromString(t,e){return i=function(t,e){let i=t;function r(e){me.throwArgumentError(`unexpected character at position ${e}`,"param",t)}function n(t){let i={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(i.indexed=!1),i}t=t.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},o=s;for(let i=0;i<t.length;i++){let s=t[i];switch(s){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||r(i),o.state.allowType=!1,o.type=De(o.type),o.components=[n(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(e||r(i),o.indexed=!0,o.name=""),we(o.type,o.name)&&(o.name=""),o.type=De(o.type);let t=o;o=o.parent,o||r(i),delete t.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(e||r(i),o.indexed=!0,o.name=""),we(o.type,o.name)&&(o.name=""),o.type=De(o.type);let a=n(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=De(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(e||r(i),o.indexed&&r(i),o.indexed=!0,o.name=""):we(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(i),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(i),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:r(i)}}return o.parent&&me.throwArgumentError("unexpected eof","param",t),delete s.state,"indexed"===o.name?(e||r(i.length-7),o.indexed&&r(i.length-7),o.indexed=!0,o.name=""):we(o.type,o.name)&&(o.name=""),s.type=De(s.type),s}(t,!!e),Ce.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components});var i}static isParamType(t){return!(null==t||!t._isParamType)}}function _e(t,e){return function(t){t=t.trim();let e=[],i="",r=0;for(let n=0;n<t.length;n++){let s=t[n];","===s&&0===r?(e.push(i),i=""):(i+=s,"("===s?r++:")"===s&&(r--,-1===r&&me.throwArgumentError("unbalanced parenthesis","value",t)))}return i&&e.push(i),e}(t).map((t=>Ce.fromString(t,e)))}class Ae{constructor(t,e){t!==ye&&me.throwError("use a static from method",y.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Te(this,e),this._isFragment=!0,Object.freeze(this)}static from(t){return Ae.isFragment(t)?t:"string"==typeof t?Ae.fromString(t):Ae.fromObject(t)}static fromObject(t){if(Ae.isFragment(t))return t;switch(t.type){case"function":return Le.fromObject(t);case"event":return Me.fromObject(t);case"constructor":return Re.fromObject(t);case"error":return Fe.fromObject(t);case"fallback":case"receive":return null}return me.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Me.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?Le.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?Re.fromString(t.trim()):"error"===t.split(" ")[0]?Fe.fromString(t.substring(5).trim()):me.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!(!t||!t._isFragment)}}class Me extends Ae{format(t){if(t||(t=Se.sighash),Se[t]||me.throwArgumentError("invalid format type","format",t),t===Se.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Se.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Se.full?", ":",")+") ",t!==Se.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}static from(t){return"string"==typeof t?Me.fromString(t):Me.fromObject(t)}static fromObject(t){if(Me.isEventFragment(t))return t;"event"!==t.type&&me.throwArgumentError("invalid event object","value",t);const e={name:Ne(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(Ce.fromObject):[],type:"event"};return new Me(ye,e)}static fromString(t){let e=t.match(ze);e||me.throwArgumentError("invalid event string","value",t);let i=!1;return e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":i=!0;break;case"":break;default:me.warn("unknown modifier: "+t)}})),Me.fromObject({name:e[1].trim(),anonymous:i,inputs:_e(e[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&"event"===t.type}}function Pe(t,e){e.gas=null;let i=t.split("@");return 1!==i.length?(i.length>2&&me.throwArgumentError("invalid human-readable ABI signature","value",t),i[1].match(/^[0-9]+$/)||me.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=H.from(i[1]),i[0]):t}function ke(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function Oe(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&me.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&me.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||me.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&me.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&me.throwArgumentError("unable to determine stateMutability","value",t),e}class Re extends Ae{format(t){if(t||(t=Se.sighash),Se[t]||me.throwArgumentError("invalid format type","format",t),t===Se.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});t===Se.sighash&&me.throwError("cannot format a constructor for sighash",y.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===Se.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}static from(t){return"string"==typeof t?Re.fromString(t):Re.fromObject(t)}static fromObject(t){if(Re.isConstructorFragment(t))return t;"constructor"!==t.type&&me.throwArgumentError("invalid constructor object","value",t);let e=Oe(t);e.constant&&me.throwArgumentError("constructor cannot be constant","value",t);const i={name:null,type:t.type,inputs:t.inputs?t.inputs.map(Ce.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?H.from(t.gas):null};return new Re(ye,i)}static fromString(t){let e={type:"constructor"},i=(t=Pe(t,e)).match(ze);return i&&"constructor"===i[1].trim()||me.throwArgumentError("invalid constructor string","value",t),e.inputs=_e(i[2].trim(),!1),ke(i[3].trim(),e),Re.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&"constructor"===t.type}}class Le extends Re{format(t){if(t||(t=Se.sighash),Se[t]||me.throwArgumentError("invalid format type","format",t),t===Se.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Se.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Se.full?", ":",")+") ",t!==Se.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}static from(t){return"string"==typeof t?Le.fromString(t):Le.fromObject(t)}static fromObject(t){if(Le.isFunctionFragment(t))return t;"function"!==t.type&&me.throwArgumentError("invalid function object","value",t);let e=Oe(t);const i={type:t.type,name:Ne(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(Ce.fromObject):[],outputs:t.outputs?t.outputs.map(Ce.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?H.from(t.gas):null};return new Le(ye,i)}static fromString(t){let e={type:"function"},i=(t=Pe(t,e)).split(" returns ");i.length>2&&me.throwArgumentError("invalid function string","value",t);let r=i[0].match(ze);if(r||me.throwArgumentError("invalid function signature","value",t),e.name=r[1].trim(),e.name&&Ne(e.name),e.inputs=_e(r[2],!1),ke(r[3].trim(),e),i.length>1){let r=i[1].match(ze);""==r[1].trim()&&""==r[3].trim()||me.throwArgumentError("unexpected tokens","value",t),e.outputs=_e(r[2],!1)}else e.outputs=[];return Le.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&"function"===t.type}}function Ie(t){const e=t.format();return"Error(string)"!==e&&"Panic(uint256)"!==e||me.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Fe extends Ae{format(t){if(t||(t=Se.sighash),Se[t]||me.throwArgumentError("invalid format type","format",t),t===Se.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Se.sighash&&(e+="error "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Se.full?", ":",")+") ",e.trim()}static from(t){return"string"==typeof t?Fe.fromString(t):Fe.fromObject(t)}static fromObject(t){if(Fe.isErrorFragment(t))return t;"error"!==t.type&&me.throwArgumentError("invalid error object","value",t);const e={type:t.type,name:Ne(t.name),inputs:t.inputs?t.inputs.map(Ce.fromObject):[]};return Ie(new Fe(ye,e))}static fromString(t){let e={type:"error"},i=t.match(ze);return i||me.throwArgumentError("invalid error signature","value",t),e.name=i[1].trim(),e.name&&Ne(e.name),e.inputs=_e(i[2],!1),Ie(Fe.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&"error"===t.type}}function De(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const Be=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Ne(t){return t&&t.match(Be)||me.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const ze=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),Ue=new y(lt),Ye=new RegExp(/^bytes([0-9]*)$/),Xe=new RegExp(/^(u?int)([0-9]*)$/);class Ge{constructor(t){Ue.checkNew(new.target,Ge),Q(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new Kt(t.name);case"bool":return new ee(t.name);case"string":return new ge(t.name);case"bytes":return new re(t.name);case"array":return new te(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new ve((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new se(t.name)}let e=t.type.match(Xe);if(e){let i=parseInt(e[2]||"256");return(0===i||i>256||i%8!=0)&&Ue.throwArgumentError("invalid "+e[1]+" bit length","param",t),new pe(i/8,"int"===e[1],t.name)}if(e=t.type.match(Ye),e){let i=parseInt(e[1]);return(0===i||i>32)&&Ue.throwArgumentError("invalid bytes length","param",t),new ne(i,t.name)}return Ue.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new ft(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new dt(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(Ce.from(t))));return new ve(e,"_").defaultValue()}encode(t,e){t.length!==e.length&&Ue.throwError("types/values length mismatch",y.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const i=t.map((t=>this._getCoder(Ce.from(t)))),r=new ve(i,"_"),n=this._getWriter();return r.encode(n,e),n.data}decode(t,e,i){const r=t.map((t=>this._getCoder(Ce.from(t))));return new ve(r,"_").decode(this._getReader(C(e),i))}}const We=new Ge,Ve=new y(lt);class je extends ht{}class He extends ht{}class qe extends ht{}class Ke extends ht{static isIndexed(t){return!(!t||!t._isIndexed)}}const Ze={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Je(t,e){const i=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return i.error=e,i}class $e{constructor(t){Ve.checkNew(new.target,$e);let e=[];e="string"==typeof t?JSON.parse(t):t,Q(this,"fragments",e.map((t=>Ae.from(t))).filter((t=>null!=t))),Q(this,"_abiCoder",tt(new.target,"getAbiCoder")()),Q(this,"functions",{}),Q(this,"errors",{}),Q(this,"events",{}),Q(this,"structs",{}),this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":return this.deploy?void Ve.warn("duplicate definition - constructor"):void Q(this,"deploy",t);case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let i=t.format();e[i]?Ve.warn("duplicate definition - "+i):e[i]=t})),this.deploy||Q(this,"deploy",Re.from({payable:!1,type:"constructor"})),Q(this,"_isInterface",!0)}format(t){t||(t=Se.full),t===Se.sighash&&Ve.throwArgumentError("interface does not support formatting sighash","format",t);const e=this.fragments.map((e=>e.format(t)));return t===Se.json?JSON.stringify(e.map((t=>JSON.parse(t)))):e}static getAbiCoder(){return We}static getAddress(t){return Ot(t)}static getSighash(t){return L(qt(t.format()),0,4)}static getEventTopic(t){return qt(t.format())}getFunction(t){if(P(t)){for(const e in this.functions)if(t===this.getSighash(e))return this.functions[e];Ve.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),i=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));return 0===i.length?Ve.throwArgumentError("no matching function","name",e):i.length>1&&Ve.throwArgumentError("multiple matching functions","name",e),this.functions[i[0]]}const e=this.functions[Le.fromString(t).format()];return e||Ve.throwArgumentError("no matching function","signature",t),e}getEvent(t){if(P(t)){const e=t.toLowerCase();for(const t in this.events)if(e===this.getEventTopic(t))return this.events[t];Ve.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){const e=t.trim(),i=Object.keys(this.events).filter((t=>t.split("(")[0]===e));return 0===i.length?Ve.throwArgumentError("no matching event","name",e):i.length>1&&Ve.throwArgumentError("multiple matching events","name",e),this.events[i[0]]}const e=this.events[Me.fromString(t).format()];return e||Ve.throwArgumentError("no matching event","signature",t),e}getError(t){if(P(t)){const e=tt(this.constructor,"getSighash");for(const i in this.errors)if(t===e(this.errors[i]))return this.errors[i];Ve.throwArgumentError("no matching error","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),i=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));return 0===i.length?Ve.throwArgumentError("no matching error","name",e):i.length>1&&Ve.throwArgumentError("multiple matching errors","name",e),this.errors[i[0]]}const e=this.errors[Le.fromString(t).format()];return e||Ve.throwArgumentError("no matching error","signature",t),e}getSighash(t){if("string"==typeof t)try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(t){throw e}}return tt(this.constructor,"getSighash")(t)}getEventTopic(t){return"string"==typeof t&&(t=this.getEvent(t)),tt(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){"string"==typeof t&&(t=this.getError(t));const i=C(e);return O(i.slice(0,4))!==this.getSighash(t)&&Ve.throwArgumentError(`data signature does not match error ${t.name}.`,"data",O(i)),this._decodeParams(t.inputs,i.slice(4))}encodeErrorResult(t,e){return"string"==typeof t&&(t=this.getError(t)),O(_([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){"string"==typeof t&&(t=this.getFunction(t));const i=C(e);return O(i.slice(0,4))!==this.getSighash(t)&&Ve.throwArgumentError(`data signature does not match function ${t.name}.`,"data",O(i)),this._decodeParams(t.inputs,i.slice(4))}encodeFunctionData(t,e){return"string"==typeof t&&(t=this.getFunction(t)),O(_([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){"string"==typeof t&&(t=this.getFunction(t));let i=C(e),r=null,n=null,s=null,o=null;switch(i.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,i)}catch(t){}break;case 4:{const t=O(i.slice(0,4)),e=Ze[t];if(e)n=this._abiCoder.decode(e.inputs,i.slice(4)),s=e.name,o=e.signature,e.reason&&(r=n[0]);else try{const e=this.getError(t);n=this._abiCoder.decode(e.inputs,i.slice(4)),s=e.name,o=e.format()}catch(t){console.log(t)}break}}return Ve.throwError("call revert exception",y.errors.CALL_EXCEPTION,{method:t.format(),errorArgs:n,errorName:s,errorSignature:o,reason:r})}encodeFunctionResult(t,e){return"string"==typeof t&&(t=this.getFunction(t)),O(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){"string"==typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&Ve.throwError("too many arguments for "+t.format(),y.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});let i=[];t.anonymous||i.push(this.getEventTopic(t));const r=(t,e)=>"string"===t.type?qt(e):"bytes"===t.type?vt(O(e)):("address"===t.type&&this._abiCoder.encode(["address"],[e]),B(O(e),32));for(e.forEach(((e,n)=>{let s=t.inputs[n];s.indexed?null==e?i.push(null):"array"===s.baseType||"tuple"===s.baseType?Ve.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,e):Array.isArray(e)?i.push(e.map((t=>r(s,t)))):i.push(r(s,e)):null!=e&&Ve.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,e)}));i.length&&null===i[i.length-1];)i.pop();return i}encodeEventLog(t,e){"string"==typeof t&&(t=this.getEvent(t));const i=[],r=[],n=[];return t.anonymous||i.push(this.getEventTopic(t)),e.length!==t.inputs.length&&Ve.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach(((t,s)=>{const o=e[s];if(t.indexed)if("string"===t.type)i.push(qt(o));else if("bytes"===t.type)i.push(vt(o));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");i.push(this._abiCoder.encode([t.type],[o]))}else r.push(t),n.push(o)})),{data:this._abiCoder.encode(r,n),topics:i}}decodeEventLog(t,e,i){if("string"==typeof t&&(t=this.getEvent(t)),null!=i&&!t.anonymous){let e=this.getEventTopic(t);P(i[0],32)&&i[0].toLowerCase()===e||Ve.throwError("fragment/topic mismatch",y.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:i[0]}),i=i.slice(1)}let r=[],n=[],s=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(r.push(Ce.fromObject({type:"bytes32",name:t.name})),s.push(!0)):(r.push(t),s.push(!1)):(n.push(t),s.push(!1))}));let o=null!=i?this._abiCoder.decode(r,_(i)):null,a=this._abiCoder.decode(n,e,!0),h=[],l=0,u=0;t.inputs.forEach(((t,e)=>{if(t.indexed)if(null==o)h[e]=new Ke({_isIndexed:!0,hash:null});else if(s[e])h[e]=new Ke({_isIndexed:!0,hash:o[u++]});else try{h[e]=o[u++]}catch(t){h[e]=t}else try{h[e]=a[l++]}catch(t){h[e]=t}if(t.name&&null==h[t.name]){const i=h[e];i instanceof Error?Object.defineProperty(h,t.name,{enumerable:!0,get:()=>{throw Je(`property ${JSON.stringify(t.name)}`,i)}}):h[t.name]=i}}));for(let t=0;t<h.length;t++){const e=h[t];e instanceof Error&&Object.defineProperty(h,t,{enumerable:!0,get:()=>{throw Je(`index ${t}`,e)}})}return Object.freeze(h)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new He({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:H.from(t.value||"0")}):null}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new je({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=O(t);let i=this.getError(e.substring(0,10).toLowerCase());return i?new qe({args:this._abiCoder.decode(i.inputs,"0x"+e.substring(10)),errorFragment:i,name:i.name,signature:i.format(),sighash:this.getSighash(i)}):null}static isInterface(t){return!(!t||!t._isInterface)}}const Qe=new y("abstract-provider/5.5.1");class ti extends ht{static isForkEvent(t){return!(!t||!t._isForkEvent)}}class ei{constructor(){Qe.checkAbstract(new.target,ei),Q(this,"_isProvider",!0)}getFeeData(){return t=this,e=void 0,r=function*(){const{block:t,gasPrice:e}=yield et({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let i=null,r=null;return t&&t.baseFeePerGas&&(r=H.from("2500000000"),i=t.baseFeePerGas.mul(2).add(r)),{maxFeePerGas:i,maxPriorityFeePerGas:r,gasPrice:e}},new((i=void 0)||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}));var t,e,i,r}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!(!t||!t._isProvider)}}var ii=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const ri=new y("abstract-signer/5.5.0"),ni=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],si=[y.errors.INSUFFICIENT_FUNDS,y.errors.NONCE_EXPIRED,y.errors.REPLACEMENT_UNDERPRICED];class oi{constructor(){ri.checkAbstract(new.target,oi),Q(this,"_isSigner",!0)}getBalance(t){return ii(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return ii(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return ii(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield et(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return ii(this,void 0,void 0,(function*(){this._checkProvider("call");const i=yield et(this.checkTransaction(t));return yield this.provider.call(i,e)}))}sendTransaction(t){return ii(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const e=yield this.populateTransaction(t),i=yield this.signTransaction(e);return yield this.provider.sendTransaction(i)}))}getChainId(){return ii(this,void 0,void 0,(function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return ii(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return ii(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(t){return ii(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)}))}checkTransaction(t){for(const e in t)-1===ni.indexOf(e)&&ri.throwArgumentError("invalid transaction key: "+e,"transaction",t);const e=rt(t);return null==e.from?e.from=this.getAddress():e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>(e[0].toLowerCase()!==e[1].toLowerCase()&&ri.throwArgumentError("from address mismatch","transaction",t),e[0]))),e}populateTransaction(t){return ii(this,void 0,void 0,(function*(){const e=yield et(this.checkTransaction(t));null!=e.to&&(e.to=Promise.resolve(e.to).then((t=>ii(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.resolveName(t);return null==e&&ri.throwArgumentError("provided ENS name resolves to null","tx.to",t),e})))),e.to.catch((t=>{})));const i=null!=e.maxFeePerGas||null!=e.maxPriorityFeePerGas;if(null==e.gasPrice||2!==e.type&&!i?0!==e.type&&1!==e.type||!i||ri.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):ri.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==e.type&&null!=e.type||null==e.maxFeePerGas||null==e.maxPriorityFeePerGas)if(0===e.type||1===e.type)null==e.gasPrice&&(e.gasPrice=this.getGasPrice());else{const t=yield this.getFeeData();if(null==e.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(e.type=2,null!=e.gasPrice){const t=e.gasPrice;delete e.gasPrice,e.maxFeePerGas=t,e.maxPriorityFeePerGas=t}else null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(i&&ri.throwError("network does not support EIP-1559",y.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==e.gasPrice&&(e.gasPrice=t.gasPrice),e.type=0):ri.throwError("failed to get consistent fee data",y.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===e.type&&(null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else e.type=2;return null==e.nonce&&(e.nonce=this.getTransactionCount("pending")),null==e.gasLimit&&(e.gasLimit=this.estimateGas(e).catch((t=>{if(si.indexOf(t.code)>=0)throw t;return ri.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",y.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))),null==e.chainId?e.chainId=this.getChainId():e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>(0!==e[1]&&e[0]!==e[1]&&ri.throwArgumentError("chainId address mismatch","transaction",t),e[0]))),yield et(e)}))}_checkProvider(t){this.provider||ri.throwError("missing provider",y.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!(!t||!t._isSigner)}}class ai extends oi{constructor(t,e){ri.checkNew(new.target,ai),super(),Q(this,"address",t),Q(this,"provider",e||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,e){return Promise.resolve().then((()=>{ri.throwError(t,y.errors.UNSUPPORTED_OPERATION,{operation:e})}))}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,e,i){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new ai(this.address,t)}}var hi=i(2500),li=i.n(hi),ui=i(9161),ci=i.n(ui);function di(t,e,i){return i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},t(i,i.exports),i.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self&&self;var fi=pi;function pi(t,e){if(!t)throw new Error(e||"Assertion failed")}pi.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)};var gi=di((function(t,e){var i=e;function r(t){return 1===t.length?"0"+t:t}function n(t){for(var e="",i=0;i<t.length;i++)e+=r(t[i].toString(16));return e}i.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)i[r]=0|t[r];return i}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var n=t.charCodeAt(r),s=n>>8,o=255&n;s?i.push(s,o):i.push(o)}return i},i.zero2=r,i.toHex=n,i.encode=function(t,e){return"hex"===e?n(t):t}})),vi=di((function(t,e){var i=e;i.assert=fi,i.toArray=gi.toArray,i.zero2=gi.zero2,i.toHex=gi.toHex,i.encode=gi.encode,i.getNAF=function(t,e,i){var r=new Array(Math.max(t.bitLength(),i)+1);r.fill(0);for(var n=1<<e+1,s=t.clone(),o=0;o<r.length;o++){var a,h=s.andln(n-1);s.isOdd()?(a=h>(n>>1)-1?(n>>1)-h:h,s.isubn(a)):a=0,r[o]=a,s.iushrn(1)}return r},i.getJSF=function(t,e){var i=[[],[]];t=t.clone(),e=e.clone();for(var r,n=0,s=0;t.cmpn(-n)>0||e.cmpn(-s)>0;){var o,a,h=t.andln(3)+n&3,l=e.andln(3)+s&3;3===h&&(h=-1),3===l&&(l=-1),o=0==(1&h)?0:3!=(r=t.andln(7)+n&7)&&5!==r||2!==l?h:-h,i[0].push(o),a=0==(1&l)?0:3!=(r=e.andln(7)+s&7)&&5!==r||2!==h?l:-l,i[1].push(a),2*n===o+1&&(n=1-n),2*s===a+1&&(s=1-s),t.iushrn(1),e.iushrn(1)}return i},i.cachedProperty=function(t,e,i){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},i.parseBytes=function(t){return"string"==typeof t?i.toArray(t,"hex"):t},i.intFromLE=function(t){return new(li())(t,"hex","le")}})),mi=vi.getNAF,yi=vi.getJSF,xi=vi.assert;function bi(t,e){this.type=t,this.p=new(li())(e.p,16),this.red=e.prime?li().red(e.prime):li().mont(this.p),this.zero=new(li())(0).toRed(this.red),this.one=new(li())(1).toRed(this.red),this.two=new(li())(2).toRed(this.red),this.n=e.n&&new(li())(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var wi=bi;function Ti(t,e){this.curve=t,this.type=e,this.precomputed=null}bi.prototype.point=function(){throw new Error("Not implemented")},bi.prototype.validate=function(){throw new Error("Not implemented")},bi.prototype._fixedNafMul=function(t,e){xi(t.precomputed);var i=t._getDoubles(),r=mi(e,1,this._bitLength),n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;var s,o,a=[];for(s=0;s<r.length;s+=i.step){o=0;for(var h=s+i.step-1;h>=s;h--)o=(o<<1)+r[h];a.push(o)}for(var l=this.jpoint(null,null,null),u=this.jpoint(null,null,null),c=n;c>0;c--){for(s=0;s<a.length;s++)(o=a[s])===c?u=u.mixedAdd(i.points[s]):o===-c&&(u=u.mixedAdd(i.points[s].neg()));l=l.add(u)}return l.toP()},bi.prototype._wnafMul=function(t,e){var i=4,r=t._getNAFPoints(i);i=r.wnd;for(var n=r.points,s=mi(e,i,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var h=0;a>=0&&0===s[a];a--)h++;if(a>=0&&h++,o=o.dblp(h),a<0)break;var l=s[a];xi(0!==l),o="affine"===t.type?l>0?o.mixedAdd(n[l-1>>1]):o.mixedAdd(n[-l-1>>1].neg()):l>0?o.add(n[l-1>>1]):o.add(n[-l-1>>1].neg())}return"affine"===t.type?o.toP():o},bi.prototype._wnafMulAdd=function(t,e,i,r,n){var s,o,a,h=this._wnafT1,l=this._wnafT2,u=this._wnafT3,c=0;for(s=0;s<r;s++){var d=(a=e[s])._getNAFPoints(t);h[s]=d.wnd,l[s]=d.points}for(s=r-1;s>=1;s-=2){var f=s-1,p=s;if(1===h[f]&&1===h[p]){var g=[e[f],null,null,e[p]];0===e[f].y.cmp(e[p].y)?(g[1]=e[f].add(e[p]),g[2]=e[f].toJ().mixedAdd(e[p].neg())):0===e[f].y.cmp(e[p].y.redNeg())?(g[1]=e[f].toJ().mixedAdd(e[p]),g[2]=e[f].add(e[p].neg())):(g[1]=e[f].toJ().mixedAdd(e[p]),g[2]=e[f].toJ().mixedAdd(e[p].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],m=yi(i[f],i[p]);for(c=Math.max(m[0].length,c),u[f]=new Array(c),u[p]=new Array(c),o=0;o<c;o++){var y=0|m[0][o],x=0|m[1][o];u[f][o]=v[3*(y+1)+(x+1)],u[p][o]=0,l[f]=g}}else u[f]=mi(i[f],h[f],this._bitLength),u[p]=mi(i[p],h[p],this._bitLength),c=Math.max(u[f].length,c),c=Math.max(u[p].length,c)}var b=this.jpoint(null,null,null),w=this._wnafT4;for(s=c;s>=0;s--){for(var T=0;s>=0;){var S=!0;for(o=0;o<r;o++)w[o]=0|u[o][s],0!==w[o]&&(S=!1);if(!S)break;T++,s--}if(s>=0&&T++,b=b.dblp(T),s<0)break;for(o=0;o<r;o++){var E=w[o];0!==E&&(E>0?a=l[o][E-1>>1]:E<0&&(a=l[o][-E-1>>1].neg()),b="affine"===a.type?b.mixedAdd(a):b.add(a))}}for(s=0;s<r;s++)l[s]=null;return n?b:b.toP()},bi.BasePoint=Ti,Ti.prototype.eq=function(){throw new Error("Not implemented")},Ti.prototype.validate=function(){return this.curve.validate(this)},bi.prototype.decodePoint=function(t,e){t=vi.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]?xi(t[t.length-1]%2==0):7===t[0]&&xi(t[t.length-1]%2==1),this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")},Ti.prototype.encodeCompressed=function(t){return this.encode(t,!0)},Ti.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},Ti.prototype.encode=function(t,e){return vi.encode(this._encode(e),t)},Ti.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},Ti.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},Ti.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,n=0;n<e;n+=t){for(var s=0;s<t;s++)r=r.dbl();i.push(r)}return{step:t,points:i}},Ti.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1===i?null:this.dbl(),n=1;n<i;n++)e[n]=e[n-1].add(r);return{wnd:t,points:e}},Ti.prototype._getBeta=function(){return null},Ti.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e};var Si=di((function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}})),Ei=vi.assert;function Ci(t){wi.call(this,"short",t),this.a=new(li())(t.a,16).toRed(this.red),this.b=new(li())(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Si(Ci,wi);var _i=Ci;function Ai(t,e,i,r){wi.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new(li())(e,16),this.y=new(li())(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Mi(t,e,i,r){wi.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(li())(0)):(this.x=new(li())(e,16),this.y=new(li())(i,16),this.z=new(li())(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ci.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,i;if(t.beta)e=new(li())(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)i=new(li())(t.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))?i=n[0]:(i=n[1],Ei(0===this.g.mul(i).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:i,basis:t.basis?t.basis.map((function(t){return{a:new(li())(t.a,16),b:new(li())(t.b,16)}})):this._getEndoBasis(i)}}},Ci.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:li().mont(t),i=new(li())(2).toRed(e).redInvm(),r=i.redNeg(),n=new(li())(3).toRed(e).redNeg().redSqrt().redMul(i);return[r.redAdd(n).fromRed(),r.redSub(n).fromRed()]},Ci.prototype._getEndoBasis=function(t){for(var e,i,r,n,s,o,a,h,l,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),c=t,d=this.n.clone(),f=new(li())(1),p=new(li())(0),g=new(li())(0),v=new(li())(1),m=0;0!==c.cmpn(0);){var y=d.div(c);h=d.sub(y.mul(c)),l=g.sub(y.mul(f));var x=v.sub(y.mul(p));if(!r&&h.cmp(u)<0)e=a.neg(),i=f,r=h.neg(),n=l;else if(r&&2==++m)break;a=h,d=c,c=h,g=f,f=l,v=p,p=x}s=h.neg(),o=l;var b=r.sqr().add(n.sqr());return s.sqr().add(o.sqr()).cmp(b)>=0&&(s=e,o=i),r.negative&&(r=r.neg(),n=n.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:r,b:n},{a:s,b:o}]},Ci.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],r=e[1],n=r.b.mul(t).divRound(this.n),s=i.b.neg().mul(t).divRound(this.n),o=n.mul(i.a),a=s.mul(r.a),h=n.mul(i.b),l=s.mul(r.b);return{k1:t.sub(o).sub(a),k2:h.add(l).neg()}},Ci.prototype.pointFromX=function(t,e){(t=new(li())(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var n=r.fromRed().isOdd();return(e&&!n||!e&&n)&&(r=r.redNeg()),this.point(t,r)},Ci.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,r=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(n).cmpn(0)},Ci.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,n=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),a=t[s],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),r[2*s]=a,r[2*s+1]=h,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var l=this._wnafMulAdd(1,r,n,2*s,i),u=0;u<2*s;u++)r[u]=null,n[u]=null;return l},Si(Ai,wi.BasePoint),Ci.prototype.point=function(t,e,i){return new Ai(this,t,e,i)},Ci.prototype.pointFromJSON=function(t,e){return Ai.fromJSON(this,t,e)},Ai.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},Ai.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Ai.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);if(!e[2])return r;function n(e){return t.point(e[0],e[1],i)}var s=e[2];return r.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[r].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[r].concat(s.naf.points.map(n))}},r},Ai.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Ai.prototype.isInfinity=function(){return this.inf},Ai.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},Ai.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),r=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(r),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Ai.prototype.getX=function(){return this.x.fromRed()},Ai.prototype.getY=function(){return this.y.fromRed()},Ai.prototype.mul=function(t){return t=new(li())(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Ai.prototype.mulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},Ai.prototype.jmulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},Ai.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},Ai.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return e},Ai.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Si(Mi,wi.BasePoint),Ci.prototype.jpoint=function(t,e,i){return new Mi(this,t,e,i)},Mi.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(i,r)},Mi.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Mi.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(e),n=t.x.redMul(i),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),a=r.redSub(n),h=s.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),c=r.redMul(l),d=h.redSqr().redIAdd(u).redISub(c).redISub(c),f=h.redMul(c.redISub(d)).redISub(s.redMul(u)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,f,p)},Mi.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,r=t.x.redMul(e),n=this.y,s=t.y.redMul(e).redMul(this.z),o=i.redSub(r),a=n.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),l=h.redMul(o),u=i.redMul(h),c=a.redSqr().redIAdd(l).redISub(u).redISub(u),d=a.redMul(u.redISub(c)).redISub(n.redMul(l)),f=this.z.redMul(o);return this.curve.jpoint(c,d,f)},Mi.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var r=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),l=o.redAdd(o);for(e=0;e<t;e++){var u=s.redSqr(),c=l.redSqr(),d=c.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(h)),p=s.redMul(c),g=f.redSqr().redISub(p.redAdd(p)),v=p.redISub(g),m=f.redMul(v);m=m.redIAdd(m).redISub(d);var y=l.redMul(a);e+1<t&&(h=h.redMul(d)),s=g,a=y,l=m}return this.curve.jpoint(s,l.redMul(n),a)},Mi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Mi.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r),h=a.redSqr().redISub(o).redISub(o),l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),t=h,e=a.redMul(o.redISub(h)).redISub(l),i=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),c=this.y.redSqr(),d=c.redSqr(),f=this.x.redAdd(c).redSqr().redISub(u).redISub(d);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),g=p.redSqr(),v=d.redIAdd(d);v=(v=v.redIAdd(v)).redIAdd(v),t=g.redISub(f).redISub(f),e=p.redMul(f.redISub(t)).redISub(v),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},Mi.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);t=h;var l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),e=a.redMul(o.redISub(h)).redISub(l),i=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),c=this.y.redSqr(),d=this.x.redMul(c),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),g=(p=p.redIAdd(p)).redAdd(p);t=f.redSqr().redISub(g),i=this.y.redAdd(this.z).redSqr().redISub(c).redISub(u);var v=c.redSqr();v=(v=(v=v.redIAdd(v)).redIAdd(v)).redIAdd(v),e=f.redMul(p.redISub(t)).redISub(v)}return this.curve.jpoint(t,e,i)},Mi.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,n=r.redSqr().redSqr(),s=e.redSqr(),o=i.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(n)),h=e.redAdd(e),l=(h=h.redIAdd(h)).redMul(o),u=a.redSqr().redISub(l.redAdd(l)),c=l.redISub(u),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(c).redISub(d),p=i.redAdd(i).redMul(r);return this.curve.jpoint(u,f,p)},Mi.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),r=e.redSqr(),n=t.redAdd(t).redIAdd(t),s=n.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(r),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),h=r.redIAdd(r);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var l=n.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(h),u=e.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var c=this.x.redMul(a).redISub(u);c=(c=c.redIAdd(c)).redIAdd(c);var d=this.y.redMul(l.redMul(h.redISub(l)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(i).redISub(a);return this.curve.jpoint(c,d,f)},Mi.prototype.mul=function(t,e){return t=new(li())(t,e),this.curve._wnafMul(this,t)},Mi.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),n=i.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(r)).cmpn(0)},Mi.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),0===this.x.cmp(i))return!0}},Mi.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Mi.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Pi=di((function(t,e){var i=e;i.base=wi,i.short=_i,i.mont=null,i.edwards=null})),ki=di((function(t,e){var i,r=e,n=vi.assert;function s(t){"short"===t.type?this.curve=new Pi.short(t):"edwards"===t.type?this.curve=new Pi.edwards(t):this.curve=new Pi.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(t,e){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){var i=new s(e);return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,value:i}),i}})}r.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ci().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ci().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ci().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ci().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ci().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ci().sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ci().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=null.crash()}catch(t){i=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ci().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})}));function Oi(t){if(!(this instanceof Oi))return new Oi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=gi.toArray(t.entropy,t.entropyEnc||"hex"),i=gi.toArray(t.nonce,t.nonceEnc||"hex"),r=gi.toArray(t.pers,t.persEnc||"hex");fi(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,i,r)}var Ri=Oi;Oi.prototype._init=function(t,e,i){var r=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},Oi.prototype._hmac=function(){return new(ci().hmac)(this.hash,this.K)},Oi.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},Oi.prototype.reseed=function(t,e,i,r){"string"!=typeof e&&(r=i,i=e,e=null),t=gi.toArray(t,e),i=gi.toArray(i,r),fi(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},Oi.prototype.generate=function(t,e,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=i,i=e,e=null),i&&(i=gi.toArray(i,r||"hex"),this._update(i));for(var n=[];n.length<t;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var s=n.slice(0,t);return this._update(i),this._reseed++,gi.encode(s,e)};var Li=vi.assert;function Ii(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Fi=Ii;Ii.fromPublic=function(t,e,i){return e instanceof Ii?e:new Ii(t,{pub:e,pubEnc:i})},Ii.fromPrivate=function(t,e,i){return e instanceof Ii?e:new Ii(t,{priv:e,privEnc:i})},Ii.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ii.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Ii.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},Ii.prototype._importPrivate=function(t,e){this.priv=new(li())(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Ii.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?Li(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Li(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},Ii.prototype.derive=function(t){return t.validate()||Li(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Ii.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},Ii.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Ii.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Di=vi.assert;function Bi(t,e){if(t instanceof Bi)return t;this._importDER(t,e)||(Di(t.r&&t.s,"Signature without r or s"),this.r=new(li())(t.r,16),this.s=new(li())(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Ni=Bi;function zi(){this.place=0}function Ui(t,e){var i=t[e.place++];if(!(128&i))return i;var r=15&i;if(0===r||r>4)return!1;for(var n=0,s=0,o=e.place;s<r;s++,o++)n<<=8,n|=t[o],n>>>=0;return!(n<=127)&&(e.place=o,n)}function Yi(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function Xi(t,e){if(e<128)t.push(e);else{var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255);t.push(e)}}Bi.prototype._importDER=function(t,e){t=vi.toArray(t,e);var i=new zi;if(48!==t[i.place++])return!1;var r=Ui(t,i);if(!1===r)return!1;if(r+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;var n=Ui(t,i);if(!1===n)return!1;var s=t.slice(i.place,n+i.place);if(i.place+=n,2!==t[i.place++])return!1;var o=Ui(t,i);if(!1===o)return!1;if(t.length!==o+i.place)return!1;var a=t.slice(i.place,o+i.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(li())(s),this.s=new(li())(a),this.recoveryParam=null,!0},Bi.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=Yi(e),i=Yi(i);!(i[0]||128&i[1]);)i=i.slice(1);var r=[2];Xi(r,e.length),(r=r.concat(e)).push(2),Xi(r,i.length);var n=r.concat(i),s=[48];return Xi(s,n.length),s=s.concat(n),vi.encode(s,t)};var Gi=function(){throw new Error("unsupported")},Wi=vi.assert;function Vi(t){if(!(this instanceof Vi))return new Vi(t);"string"==typeof t&&(Wi(Object.prototype.hasOwnProperty.call(ki,t),"Unknown curve "+t),t=ki[t]),t instanceof ki.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ji=Vi;Vi.prototype.keyPair=function(t){return new Fi(this,t)},Vi.prototype.keyFromPrivate=function(t,e){return Fi.fromPrivate(this,t,e)},Vi.prototype.keyFromPublic=function(t,e){return Fi.fromPublic(this,t,e)},Vi.prototype.genKeyPair=function(t){t||(t={});for(var e=new Ri({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||Gi(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),r=this.n.sub(new(li())(2));;){var n=new(li())(e.generate(i));if(!(n.cmp(r)>0))return n.iaddn(1),this.keyFromPrivate(n)}},Vi.prototype._truncateToN=function(t,e){var i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Vi.prototype.sign=function(t,e,i,r){"object"==typeof i&&(r=i,i=null),r||(r={}),e=this.keyFromPrivate(e,i),t=this._truncateToN(new(li())(t,16));for(var n=this.n.byteLength(),s=e.getPrivate().toArray("be",n),o=t.toArray("be",n),a=new Ri({hash:this.hash,entropy:s,nonce:o,pers:r.pers,persEnc:r.persEnc||"utf8"}),h=this.n.sub(new(li())(1)),l=0;;l++){var u=r.k?r.k(l):new(li())(a.generate(this.n.byteLength()));if(!((u=this._truncateToN(u,!0)).cmpn(1)<=0||u.cmp(h)>=0)){var c=this.g.mul(u);if(!c.isInfinity()){var d=c.getX(),f=d.umod(this.n);if(0!==f.cmpn(0)){var p=u.invm(this.n).mul(f.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var g=(c.getY().isOdd()?1:0)|(0!==d.cmp(f)?2:0);return r.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),g^=1),new Ni({r:f,s:p,recoveryParam:g})}}}}}},Vi.prototype.verify=function(t,e,i,r){t=this._truncateToN(new(li())(t,16)),i=this.keyFromPublic(i,r);var n=(e=new Ni(e,"hex")).r,s=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,a=s.invm(this.n),h=a.mul(t).umod(this.n),l=a.mul(n).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(h,i.getPublic(),l)).isInfinity()&&o.eqXToP(n):!(o=this.g.mulAdd(h,i.getPublic(),l)).isInfinity()&&0===o.getX().umod(this.n).cmp(n)},Vi.prototype.recoverPubKey=function(t,e,i,r){Wi((3&i)===i,"The recovery param is more than two bits"),e=new Ni(e,r);var n=this.n,s=new(li())(t),o=e.r,a=e.s,h=1&i,l=i>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");o=l?this.curve.pointFromX(o.add(this.curve.n),h):this.curve.pointFromX(o,h);var u=e.r.invm(n),c=n.sub(s).mul(u).umod(n),d=a.mul(u).umod(n);return this.g.mulAdd(c,o,d)},Vi.prototype.getKeyRecoveryParam=function(t,e,i,r){if(null!==(e=new Ni(e,r)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch(t){continue}if(s.eq(i))return n}throw new Error("Unable to find valid recovery factor")};var Hi=di((function(t,e){var i=e;i.version="6.5.4",i.utils=vi,i.rand=function(){throw new Error("unsupported")},i.curve=Pi,i.curves=ki,i.ec=ji,i.eddsa=null})).ec;const qi=new y("signing-key/5.5.0");let Ki=null;function Zi(){return Ki||(Ki=new Hi("secp256k1")),Ki}class Ji{constructor(t){Q(this,"curve","secp256k1"),Q(this,"privateKey",O(t));const e=Zi().keyFromPrivate(C(this.privateKey));Q(this,"publicKey","0x"+e.getPublic(!1,"hex")),Q(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),Q(this,"_isSigningKey",!0)}_addPoint(t){const e=Zi().keyFromPublic(C(this.publicKey)),i=Zi().keyFromPublic(C(t));return"0x"+e.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){const e=Zi().keyFromPrivate(C(this.privateKey)),i=C(t);32!==i.length&&qi.throwArgumentError("bad digest length","digest",t);const r=e.sign(i,{canonical:!0});return N({recoveryParam:r.recoveryParam,r:B("0x"+r.r.toString(16),32),s:B("0x"+r.s.toString(16),32)})}computeSharedSecret(t){const e=Zi().keyFromPrivate(C(this.privateKey)),i=Zi().keyFromPublic(C(Qi(t)));return B("0x"+e.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!(!t||!t._isSigningKey)}}function $i(t,e){const i=N(e),r={r:C(i.r),s:C(i.s)};return"0x"+Zi().recoverPubKey(C(t),r,i.recoveryParam).encode("hex",!1)}function Qi(t,e){const i=C(t);if(32===i.length){const t=new Ji(i);return e?"0x"+Zi().keyFromPrivate(i).getPublic(!0,"hex"):t.publicKey}return 33===i.length?e?O(i):"0x"+Zi().keyFromPublic(i).getPublic(!1,"hex"):65===i.length?e?"0x"+Zi().keyFromPublic(i).getPublic(!0,"hex"):O(i):qi.throwArgumentError("invalid public or private key","key","[REDACTED]")}const tr=new y("transactions/5.5.0");var er;function ir(t){return"0x"===t?null:Ot(t)}function rr(t){return"0x"===t?ae:H.from(t)}!function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(er||(er={}));const nr=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],sr={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function or(t){return Ot(L(vt(L(Qi(t),1)),12))}function ar(t,e){return or($i(C(t),e))}function hr(t,e){const i=A(H.from(t).toHexString());return i.length>32&&tr.throwArgumentError("invalid length for "+e,"transaction:"+e,t),i}function lr(t,e){return{address:Ot(t),storageKeys:(e||[]).map(((e,i)=>(32!==R(e)&&tr.throwArgumentError("invalid access list storageKey",`accessList[${t}:${i}]`,e),e.toLowerCase())))}}function ur(t){if(Array.isArray(t))return t.map(((t,e)=>Array.isArray(t)?(t.length>2&&tr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${e}]`,t),lr(t[0],t[1])):lr(t.address,t.storageKeys)));const e=Object.keys(t).map((e=>{const i=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return lr(e,Object.keys(i).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function cr(t){return ur(t).map((t=>[t.address,t.storageKeys]))}function dr(t,e){if(null!=t.gasPrice){const e=H.from(t.gasPrice),i=H.from(t.maxFeePerGas||0);e.eq(i)||tr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:e,maxFeePerGas:i})}const i=[hr(t.chainId||0,"chainId"),hr(t.nonce||0,"nonce"),hr(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),hr(t.maxFeePerGas||0,"maxFeePerGas"),hr(t.gasLimit||0,"gasLimit"),null!=t.to?Ot(t.to):"0x",hr(t.value||0,"value"),t.data||"0x",cr(t.accessList||[])];if(e){const t=N(e);i.push(hr(t.recoveryParam,"recoveryParam")),i.push(A(t.r)),i.push(A(t.s))}return I(["0x02",wt(i)])}function fr(t,e){const i=[hr(t.chainId||0,"chainId"),hr(t.nonce||0,"nonce"),hr(t.gasPrice||0,"gasPrice"),hr(t.gasLimit||0,"gasLimit"),null!=t.to?Ot(t.to):"0x",hr(t.value||0,"value"),t.data||"0x",cr(t.accessList||[])];if(e){const t=N(e);i.push(hr(t.recoveryParam,"recoveryParam")),i.push(A(t.r)),i.push(A(t.s))}return I(["0x01",wt(i)])}function pr(t,e){if(null==t.type||0===t.type)return null!=t.accessList&&tr.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),function(t,e){it(t,sr);const i=[];nr.forEach((function(e){let r=t[e.name]||[];const n={};e.numeric&&(n.hexPad="left"),r=C(O(r,n)),e.length&&r.length!==e.length&&r.length>0&&tr.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,r),e.maxLength&&(r=A(r),r.length>e.maxLength&&tr.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,r)),i.push(O(r))}));let r=0;if(null!=t.chainId?(r=t.chainId,"number"!=typeof r&&tr.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!T(e)&&e.v>28&&(r=Math.floor((e.v-35)/2)),0!==r&&(i.push(O(r)),i.push("0x"),i.push("0x")),!e)return wt(i);const n=N(e);let s=27+n.recoveryParam;return 0!==r?(i.pop(),i.pop(),i.pop(),s+=2*r+8,n.v>28&&n.v!==s&&tr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):n.v!==s&&tr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),i.push(O(s)),i.push(A(C(n.r))),i.push(A(C(n.s))),wt(i)}(t,e);switch(t.type){case 1:return fr(t,e);case 2:return dr(t,e)}return tr.throwError(`unsupported transaction type: ${t.type}`,y.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function gr(t,e,i){try{const i=rr(e[0]).toNumber();if(0!==i&&1!==i)throw new Error("bad recid");t.v=i}catch(t){tr.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=B(e[1],32),t.s=B(e[2],32);try{const e=vt(i(t));t.from=ar(e,{r:t.r,s:t.s,recoveryParam:t.v})}catch(t){console.log(t)}}function vr(t){const e=C(t);if(e[0]>127)return function(t){const e=Et(t);9!==e.length&&6!==e.length&&tr.throwArgumentError("invalid raw transaction","rawTransaction",t);const i={nonce:rr(e[0]).toNumber(),gasPrice:rr(e[1]),gasLimit:rr(e[2]),to:ir(e[3]),value:rr(e[4]),data:e[5],chainId:0};if(6===e.length)return i;try{i.v=H.from(e[6]).toNumber()}catch(t){return console.log(t),i}if(i.r=B(e[7],32),i.s=B(e[8],32),H.from(i.r).isZero()&&H.from(i.s).isZero())i.chainId=i.v,i.v=0;else{i.chainId=Math.floor((i.v-35)/2),i.chainId<0&&(i.chainId=0);let r=i.v-27;const n=e.slice(0,6);0!==i.chainId&&(n.push(O(i.chainId)),n.push("0x"),n.push("0x"),r-=2*i.chainId+8);const s=vt(wt(n));try{i.from=ar(s,{r:O(i.r),s:O(i.s),recoveryParam:r})}catch(t){console.log(t)}i.hash=vt(t)}return i.type=null,i}(e);switch(e[0]){case 1:return function(t){const e=Et(t.slice(1));8!==e.length&&11!==e.length&&tr.throwArgumentError("invalid component count for transaction type: 1","payload",O(t));const i={type:1,chainId:rr(e[0]).toNumber(),nonce:rr(e[1]).toNumber(),gasPrice:rr(e[2]),gasLimit:rr(e[3]),to:ir(e[4]),value:rr(e[5]),data:e[6],accessList:ur(e[7])};return 8===e.length||(i.hash=vt(t),gr(i,e.slice(8),fr)),i}(e);case 2:return function(t){const e=Et(t.slice(1));9!==e.length&&12!==e.length&&tr.throwArgumentError("invalid component count for transaction type: 2","payload",O(t));const i=rr(e[2]),r=rr(e[3]),n={type:2,chainId:rr(e[0]).toNumber(),nonce:rr(e[1]).toNumber(),maxPriorityFeePerGas:i,maxFeePerGas:r,gasPrice:null,gasLimit:rr(e[4]),to:ir(e[5]),value:rr(e[6]),data:e[7],accessList:ur(e[8])};return 9===e.length||(n.hash=vt(t),gr(n,e.slice(9),dr)),n}(e)}return tr.throwError(`unsupported transaction type: ${e[0]}`,y.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}var mr=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const yr=new y("contracts/5.5.0"),xr={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0};function br(t,e){return mr(this,void 0,void 0,(function*(){const i=yield e;"string"!=typeof i&&yr.throwArgumentError("invalid address or ENS name","name",i);try{return Ot(i)}catch(t){}t||yr.throwError("a provider or signer is needed to resolve ENS names",y.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield t.resolveName(i);return null==r&&yr.throwArgumentError("resolver or addr is not configured for ENS name","name",i),r}))}function wr(t,e,i){return mr(this,void 0,void 0,(function*(){return Array.isArray(i)?yield Promise.all(i.map(((i,r)=>wr(t,Array.isArray(e)?e[r]:e[i.name],i)))):"address"===i.type?yield br(t,e):"tuple"===i.type?yield wr(t,e,i.components):"array"===i.baseType?Array.isArray(e)?yield Promise.all(e.map((e=>wr(t,e,i.arrayChildren)))):Promise.reject(yr.makeError("invalid value for array",y.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e}))}function Tr(t,e,i){return mr(this,void 0,void 0,(function*(){let r={};i.length===e.inputs.length+1&&"object"==typeof i[i.length-1]&&(r=rt(i.pop())),yr.checkArgumentCount(i.length,e.inputs.length,"passed to contract"),t.signer?r.from?r.from=et({override:br(t.signer,r.from),signer:t.signer.getAddress()}).then((t=>mr(this,void 0,void 0,(function*(){return Ot(t.signer)!==t.override&&yr.throwError("Contract with a Signer cannot override from",y.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),t.override})))):r.from=t.signer.getAddress():r.from&&(r.from=br(t.provider,r.from));const n=yield et({args:wr(t.signer||t.provider,i,e.inputs),address:t.resolvedAddress,overrides:et(r)||{}}),s=t.interface.encodeFunctionData(e,n.args),o={data:s,to:n.address},a=n.overrides;if(null!=a.nonce&&(o.nonce=H.from(a.nonce).toNumber()),null!=a.gasLimit&&(o.gasLimit=H.from(a.gasLimit)),null!=a.gasPrice&&(o.gasPrice=H.from(a.gasPrice)),null!=a.maxFeePerGas&&(o.maxFeePerGas=H.from(a.maxFeePerGas)),null!=a.maxPriorityFeePerGas&&(o.maxPriorityFeePerGas=H.from(a.maxPriorityFeePerGas)),null!=a.from&&(o.from=a.from),null!=a.type&&(o.type=a.type),null!=a.accessList&&(o.accessList=ur(a.accessList)),null==o.gasLimit&&null!=e.gas){let t=21e3;const i=C(s);for(let e=0;e<i.length;e++)t+=4,i[e]&&(t+=64);o.gasLimit=H.from(e.gas).add(t)}if(a.value){const t=H.from(a.value);t.isZero()||e.payable||yr.throwError("non-payable method cannot override value",y.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=t}a.customData&&(o.customData=rt(a.customData)),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData;const h=Object.keys(r).filter((t=>null!=r[t]));return h.length&&yr.throwError(`cannot override ${h.map((t=>JSON.stringify(t))).join(",")}`,y.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:h}),o}))}function Sr(t,e){const i=e.wait.bind(e);e.wait=e=>i(e).then((e=>(e.events=e.logs.map((i=>{let r=at(i),n=null;try{n=t.interface.parseLog(i)}catch(t){}return n&&(r.args=n.args,r.decode=(e,i)=>t.interface.decodeEventLog(n.eventFragment,e,i),r.event=n.name,r.eventSignature=n.signature),r.removeListener=()=>t.provider,r.getBlock=()=>t.provider.getBlock(e.blockHash),r.getTransaction=()=>t.provider.getTransaction(e.transactionHash),r.getTransactionReceipt=()=>Promise.resolve(e),r})),e)))}function Er(t,e,i){const r=t.signer||t.provider;return function(...n){return mr(this,void 0,void 0,(function*(){let s;if(n.length===e.inputs.length+1&&"object"==typeof n[n.length-1]){const t=rt(n.pop());null!=t.blockTag&&(s=yield t.blockTag),delete t.blockTag,n.push(t)}null!=t.deployTransaction&&(yield t._deployed(s));const o=yield Tr(t,e,n),a=yield r.call(o,s);try{let r=t.interface.decodeFunctionResult(e,a);return i&&1===e.outputs.length&&(r=r[0]),r}catch(e){throw e.code===y.errors.CALL_EXCEPTION&&(e.address=t.address,e.args=n,e.transaction=o),e}}))}}function Cr(t,e,i){return e.constant?Er(t,e,i):function(t,e){return function(...i){return mr(this,void 0,void 0,(function*(){t.signer||yr.throwError("sending a transaction requires a signer",y.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=t.deployTransaction&&(yield t._deployed());const r=yield Tr(t,e,i),n=yield t.signer.sendTransaction(r);return Sr(t,n),n}))}}(t,e)}function _r(t){return!t.address||null!=t.topics&&0!==t.topics.length?(t.address||"*")+"@"+(t.topics?t.topics.map((t=>Array.isArray(t)?t.join("|"):t)).join(":"):""):"*"}class Ar{constructor(t,e){Q(this,"tag",t),Q(this,"filter",e),this._listeners=[]}addListener(t,e){this._listeners.push({listener:t,once:e})}removeListener(t){let e=!1;this._listeners=this._listeners.filter((i=>!(!e&&i.listener===t&&(e=!0,1))))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((t=>t.listener))}listenerCount(){return this._listeners.length}run(t){const e=this.listenerCount();return this._listeners=this._listeners.filter((e=>{const i=t.slice();return setTimeout((()=>{e.listener.apply(this,i)}),0),!e.once})),e}prepareEvent(t){}getEmit(t){return[t]}}class Mr extends Ar{constructor(){super("error",null)}}class Pr extends Ar{constructor(t,e,i,r){const n={address:t};let s=e.getEventTopic(i);r?(s!==r[0]&&yr.throwArgumentError("topic mismatch","topics",r),n.topics=r.slice()):n.topics=[s],super(_r(n),n),Q(this,"address",t),Q(this,"interface",e),Q(this,"fragment",i)}prepareEvent(t){super.prepareEvent(t),t.event=this.fragment.name,t.eventSignature=this.fragment.format(),t.decode=(t,e)=>this.interface.decodeEventLog(this.fragment,t,e);try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(e){t.args=null,t.decodeError=e}}getEmit(t){const e=function(t){const e=[],i=function(t,r){if(Array.isArray(r))for(let n in r){const s=t.slice();s.push(n);try{i(s,r[n])}catch(t){e.push({path:s,error:t})}}};return i([],t),e}(t.args);if(e.length)throw e[0].error;const i=(t.args||[]).slice();return i.push(t),i}}class kr extends Ar{constructor(t,e){super("*",{address:t}),Q(this,"address",t),Q(this,"interface",e)}prepareEvent(t){super.prepareEvent(t);try{const e=this.interface.parseLog(t);t.event=e.name,t.eventSignature=e.signature,t.decode=(t,i)=>this.interface.decodeEventLog(e.eventFragment,t,i),t.args=e.args}catch(t){}}}class Or{constructor(t,e,i){yr.checkNew(new.target,Rr),Q(this,"interface",tt(new.target,"getInterface")(e)),null==i?(Q(this,"provider",null),Q(this,"signer",null)):oi.isSigner(i)?(Q(this,"provider",i.provider||null),Q(this,"signer",i)):ei.isProvider(i)?(Q(this,"provider",i),Q(this,"signer",null)):yr.throwArgumentError("invalid signer or provider","signerOrProvider",i),Q(this,"callStatic",{}),Q(this,"estimateGas",{}),Q(this,"functions",{}),Q(this,"populateTransaction",{}),Q(this,"filters",{});{const t={};Object.keys(this.interface.events).forEach((e=>{const i=this.interface.events[e];Q(this.filters,e,((...t)=>({address:this.address,topics:this.interface.encodeFilterTopics(i,t)}))),t[i.name]||(t[i.name]=[]),t[i.name].push(e)})),Object.keys(t).forEach((e=>{const i=t[e];1===i.length?Q(this.filters,e,this.filters[i[0]]):yr.warn(`Duplicate definition of ${e} (${i.join(", ")})`)}))}if(Q(this,"_runningEvents",{}),Q(this,"_wrappedEmits",{}),null==t&&yr.throwArgumentError("invalid contract address or ENS name","addressOrName",t),Q(this,"address",t),this.provider)Q(this,"resolvedAddress",br(this.provider,t));else try{Q(this,"resolvedAddress",Promise.resolve(Ot(t)))}catch(t){yr.throwError("provider is required to use ENS name as contract address",y.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}const r={},n={};Object.keys(this.interface.functions).forEach((t=>{const e=this.interface.functions[t];if(n[t])yr.warn(`Duplicate ABI entry for ${JSON.stringify(t)}`);else{n[t]=!0;{const i=e.name;r[`%${i}`]||(r[`%${i}`]=[]),r[`%${i}`].push(t)}null==this[t]&&Q(this,t,Cr(this,e,!0)),null==this.functions[t]&&Q(this.functions,t,Cr(this,e,!1)),null==this.callStatic[t]&&Q(this.callStatic,t,Er(this,e,!0)),null==this.populateTransaction[t]&&Q(this.populateTransaction,t,function(t,e){return function(...i){return Tr(t,e,i)}}(this,e)),null==this.estimateGas[t]&&Q(this.estimateGas,t,function(t,e){const i=t.signer||t.provider;return function(...r){return mr(this,void 0,void 0,(function*(){i||yr.throwError("estimate require a provider or signer",y.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const n=yield Tr(t,e,r);return yield i.estimateGas(n)}))}}(this,e))}})),Object.keys(r).forEach((t=>{const e=r[t];if(e.length>1)return;t=t.substring(1);const i=e[0];try{null==this[t]&&Q(this,t,this[i])}catch(t){}null==this.functions[t]&&Q(this.functions,t,this.functions[i]),null==this.callStatic[t]&&Q(this.callStatic,t,this.callStatic[i]),null==this.populateTransaction[t]&&Q(this.populateTransaction,t,this.populateTransaction[i]),null==this.estimateGas[t]&&Q(this.estimateGas,t,this.estimateGas[i])}))}static getContractAddress(t){return It(t)}static getInterface(t){return $e.isInterface(t)?t:new $e(t)}deployed(){return this._deployed()}_deployed(t){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,t).then((t=>("0x"===t&&yr.throwError("contract not deployed",y.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(t){this.signer||yr.throwError("sending a transactions require a signer",y.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const e=rt(t||{});return["from","to"].forEach((function(t){null!=e[t]&&yr.throwError("cannot override "+t,y.errors.UNSUPPORTED_OPERATION,{operation:t})})),e.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(e)))}connect(t){"string"==typeof t&&(t=new ai(t,this.provider));const e=new this.constructor(this.address,this.interface,t);return this.deployTransaction&&Q(e,"deployTransaction",this.deployTransaction),e}attach(t){return new this.constructor(t,this.interface,this.signer||this.provider)}static isIndexed(t){return Ke.isIndexed(t)}_normalizeRunningEvent(t){return this._runningEvents[t.tag]?this._runningEvents[t.tag]:t}_getRunningEvent(t){if("string"==typeof t){if("error"===t)return this._normalizeRunningEvent(new Mr);if("event"===t)return this._normalizeRunningEvent(new Ar("event",null));if("*"===t)return this._normalizeRunningEvent(new kr(this.address,this.interface));const e=this.interface.getEvent(t);return this._normalizeRunningEvent(new Pr(this.address,this.interface,e))}if(t.topics&&t.topics.length>0){try{const e=t.topics[0];if("string"!=typeof e)throw new Error("invalid topic");const i=this.interface.getEvent(e);return this._normalizeRunningEvent(new Pr(this.address,this.interface,i,t.topics))}catch(t){}const e={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new Ar(_r(e),e))}return this._normalizeRunningEvent(new kr(this.address,this.interface))}_checkRunningEvents(t){if(0===t.listenerCount()){delete this._runningEvents[t.tag];const e=this._wrappedEmits[t.tag];e&&t.filter&&(this.provider.off(t.filter,e),delete this._wrappedEmits[t.tag])}}_wrapEvent(t,e,i){const r=at(e);return r.removeListener=()=>{i&&(t.removeListener(i),this._checkRunningEvents(t))},r.getBlock=()=>this.provider.getBlock(e.blockHash),r.getTransaction=()=>this.provider.getTransaction(e.transactionHash),r.getTransactionReceipt=()=>this.provider.getTransactionReceipt(e.transactionHash),t.prepareEvent(r),r}_addEventListener(t,e,i){if(this.provider||yr.throwError("events require a provider or a signer with a provider",y.errors.UNSUPPORTED_OPERATION,{operation:"once"}),t.addListener(e,i),this._runningEvents[t.tag]=t,!this._wrappedEmits[t.tag]){const i=i=>{let r=this._wrapEvent(t,i,e);if(null==r.decodeError)try{const e=t.getEmit(r);this.emit(t.filter,...e)}catch(t){r.decodeError=t.error}null!=t.filter&&this.emit("event",r),null!=r.decodeError&&this.emit("error",r.decodeError,r)};this._wrappedEmits[t.tag]=i,null!=t.filter&&this.provider.on(t.filter,i)}}queryFilter(t,e,i){const r=this._getRunningEvent(t),n=rt(r.filter);return"string"==typeof e&&P(e,32)?(null!=i&&yr.throwArgumentError("cannot specify toBlock with blockhash","toBlock",i),n.blockHash=e):(n.fromBlock=null!=e?e:0,n.toBlock=null!=i?i:"latest"),this.provider.getLogs(n).then((t=>t.map((t=>this._wrapEvent(r,t,null)))))}on(t,e){return this._addEventListener(this._getRunningEvent(t),e,!1),this}once(t,e){return this._addEventListener(this._getRunningEvent(t),e,!0),this}emit(t,...e){if(!this.provider)return!1;const i=this._getRunningEvent(t),r=i.run(e)>0;return this._checkRunningEvents(i),r}listenerCount(t){return this.provider?null==t?Object.keys(this._runningEvents).reduce(((t,e)=>t+this._runningEvents[e].listenerCount()),0):this._getRunningEvent(t).listenerCount():0}listeners(t){if(!this.provider)return[];if(null==t){const t=[];for(let e in this._runningEvents)this._runningEvents[e].listeners().forEach((e=>{t.push(e)}));return t}return this._getRunningEvent(t).listeners()}removeAllListeners(t){if(!this.provider)return this;if(null==t){for(const t in this._runningEvents){const e=this._runningEvents[t];e.removeAllListeners(),this._checkRunningEvents(e)}return this}const e=this._getRunningEvent(t);return e.removeAllListeners(),this._checkRunningEvents(e),this}off(t,e){if(!this.provider)return this;const i=this._getRunningEvent(t);return i.removeListener(e),this._checkRunningEvents(i),this}removeListener(t,e){return this.off(t,e)}}class Rr extends Or{}class Lr{constructor(t,e,i){let r=null;r="string"==typeof e?e:E(e)?O(e):e&&"string"==typeof e.object?e.object:"!","0x"!==r.substring(0,2)&&(r="0x"+r),(!P(r)||r.length%2)&&yr.throwArgumentError("invalid bytecode","bytecode",e),i&&!oi.isSigner(i)&&yr.throwArgumentError("invalid signer","signer",i),Q(this,"bytecode",r),Q(this,"interface",tt(new.target,"getInterface")(t)),Q(this,"signer",i||null)}getDeployTransaction(...t){let e={};if(t.length===this.interface.deploy.inputs.length+1&&"object"==typeof t[t.length-1]){e=rt(t.pop());for(const t in e)if(!xr[t])throw new Error("unknown transaction override "+t)}return["data","from","to"].forEach((t=>{null!=e[t]&&yr.throwError("cannot override "+t,y.errors.UNSUPPORTED_OPERATION,{operation:t})})),e.value&&(H.from(e.value).isZero()||this.interface.deploy.payable||yr.throwError("non-payable constructor cannot override value",y.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:e.value})),yr.checkArgumentCount(t.length,this.interface.deploy.inputs.length," in Contract constructor"),e.data=O(_([this.bytecode,this.interface.encodeDeploy(t)])),e}deploy(...t){return mr(this,void 0,void 0,(function*(){let e={};t.length===this.interface.deploy.inputs.length+1&&(e=t.pop()),yr.checkArgumentCount(t.length,this.interface.deploy.inputs.length," in Contract constructor");const i=yield wr(this.signer,t,this.interface.deploy.inputs);i.push(e);const r=this.getDeployTransaction(...i),n=yield this.signer.sendTransaction(r),s=tt(this.constructor,"getContractAddress")(n),o=tt(this.constructor,"getContract")(s,this.interface,this.signer);return Sr(o,n),Q(o,"deployTransaction",n),o}))}attach(t){return this.constructor.getContract(t,this.interface,this.signer)}connect(t){return new this.constructor(this.interface,this.bytecode,t)}static fromSolidity(t,e){null==t&&yr.throwError("missing compiler output",y.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof t&&(t=JSON.parse(t));const i=t.abi;let r=null;return t.bytecode?r=t.bytecode:t.evm&&t.evm.bytecode&&(r=t.evm.bytecode),new this(i,r,e)}static getInterface(t){return Rr.getInterface(t)}static getContractAddress(t){return It(t)}static getContract(t,e,i){return new Rr(t,e,i)}}const Ir=new y(Y),Fr={},Dr=H.from(0),Br=H.from(-1);function Nr(t,e,i,r){const n={fault:e,operation:i};return void 0!==r&&(n.value=r),Ir.throwError(t,y.errors.NUMERIC_FAULT,n)}let zr="0";for(;zr.length<256;)zr+=zr;function Ur(t){if("number"!=typeof t)try{t=H.from(t).toNumber()}catch(t){}return"number"==typeof t&&t>=0&&t<=256&&!(t%1)?"1"+zr.substring(0,t):Ir.throwArgumentError("invalid decimal size","decimals",t)}function Yr(t,e){null==e&&(e=0);const i=Ur(e),r=(t=H.from(t)).lt(Dr);r&&(t=t.mul(Br));let n=t.mod(i).toString();for(;n.length<i.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(i).toString();return t=1===i.length?s:s+"."+n,r&&(t="-"+t),t}function Xr(t,e){null==e&&(e=0);const i=Ur(e);"string"==typeof t&&t.match(/^-?[0-9.]+$/)||Ir.throwArgumentError("invalid decimal value","value",t);const r="-"===t.substring(0,1);r&&(t=t.substring(1)),"."===t&&Ir.throwArgumentError("missing value","value",t);const n=t.split(".");n.length>2&&Ir.throwArgumentError("too many decimal points","value",t);let s=n[0],o=n[1];for(s||(s="0"),o||(o="0");"0"===o[o.length-1];)o=o.substring(0,o.length-1);for(o.length>i.length-1&&Nr("fractional component exceeds decimals","underflow","parseFixed"),""===o&&(o="0");o.length<i.length-1;)o+="0";const a=H.from(s),h=H.from(o);let l=a.mul(i).add(h);return r&&(l=l.mul(Br)),l}class Gr{constructor(t,e,i,r){t!==Fr&&Ir.throwError("cannot use FixedFormat constructor; use FixedFormat.from",y.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=e,this.width=i,this.decimals=r,this.name=(e?"":"u")+"fixed"+String(i)+"x"+String(r),this._multiplier=Ur(r),Object.freeze(this)}static from(t){if(t instanceof Gr)return t;"number"==typeof t&&(t=`fixed128x${t}`);let e=!0,i=128,r=18;if("string"==typeof t)if("fixed"===t);else if("ufixed"===t)e=!1;else{const n=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);n||Ir.throwArgumentError("invalid fixed format","format",t),e="u"!==n[1],i=parseInt(n[2]),r=parseInt(n[3])}else if(t){const n=(e,i,r)=>null==t[e]?r:(typeof t[e]!==i&&Ir.throwArgumentError("invalid fixed format ("+e+" not "+i+")","format."+e,t[e]),t[e]);e=n("signed","boolean",e),i=n("width","number",i),r=n("decimals","number",r)}return i%8&&Ir.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),r>80&&Ir.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",r),new Gr(Fr,e,i,r)}}class Wr{constructor(t,e,i,r){Ir.checkNew(new.target,Wr),t!==Fr&&Ir.throwError("cannot use FixedNumber constructor; use FixedNumber.from",y.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=r,this._hex=e,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&Ir.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const e=Xr(this._value,this.format.decimals),i=Xr(t._value,t.format.decimals);return Wr.fromValue(e.add(i),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const e=Xr(this._value,this.format.decimals),i=Xr(t._value,t.format.decimals);return Wr.fromValue(e.sub(i),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const e=Xr(this._value,this.format.decimals),i=Xr(t._value,t.format.decimals);return Wr.fromValue(e.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const e=Xr(this._value,this.format.decimals),i=Xr(t._value,t.format.decimals);return Wr.fromValue(e.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");1===t.length&&t.push("0");let e=Wr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return this.isNegative()&&i&&(e=e.subUnsafe(Vr.toFormat(e.format))),e}ceiling(){const t=this.toString().split(".");1===t.length&&t.push("0");let e=Wr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return!this.isNegative()&&i&&(e=e.addUnsafe(Vr.toFormat(e.format))),e}round(t){null==t&&(t=0);const e=this.toString().split(".");if(1===e.length&&e.push("0"),(t<0||t>80||t%1)&&Ir.throwArgumentError("invalid decimal count","decimals",t),e[1].length<=t)return this;const i=Wr.from("1"+zr.substring(0,t),this.format),r=jr.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(r).floor().divUnsafe(i)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(t){return null==t?this._hex:(t%8&&Ir.throwArgumentError("invalid byte width","width",t),B(H.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString(),t/8))}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Wr.fromString(this._value,t)}static fromValue(t,e,i){return null!=i||null==e||function(t){return null!=t&&(H.isBigNumber(t)||"number"==typeof t&&t%1==0||"string"==typeof t&&!!t.match(/^-?[0-9]+$/)||P(t)||"bigint"==typeof t||E(t))}(e)||(i=e,e=null),null==e&&(e=0),null==i&&(i="fixed"),Wr.fromString(Yr(t,e),Gr.from(i))}static fromString(t,e){null==e&&(e="fixed");const i=Gr.from(e),r=Xr(t,i.decimals);!i.signed&&r.lt(Dr)&&Nr("unsigned value cannot be negative","overflow","value",t);let n=null;i.signed?n=r.toTwos(i.width).toHexString():(n=r.toHexString(),n=B(n,i.width/8));const s=Yr(r,i.decimals);return new Wr(Fr,n,s,i)}static fromBytes(t,e){null==e&&(e="fixed");const i=Gr.from(e);if(C(t).length>i.width/8)throw new Error("overflow");let r=H.from(t);i.signed&&(r=r.fromTwos(i.width));const n=r.toTwos((i.signed?0:1)+i.width).toHexString(),s=Yr(r,i.decimals);return new Wr(Fr,n,s,i)}static from(t,e){if("string"==typeof t)return Wr.fromString(t,e);if(E(t))return Wr.fromBytes(t,e);try{return Wr.fromValue(t,0,e)}catch(t){if(t.code!==y.errors.INVALID_ARGUMENT)throw t}return Ir.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!(!t||!t._isFixedNumber)}}const Vr=Wr.from(1),jr=Wr.from("0.5");function Hr(t){return"string"==typeof t&&(t=Xt(t)),vt(_([Xt("Ethereum Signed Message:\n"),Xt(String(t.length)),t]))}const qr="hash/5.5.0";const Kr=new y(qr),Zr=new Uint8Array(32);Zr.fill(0);const Jr=H.from(-1),$r=H.from(0),Qr=H.from(1),tn=H.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),en=B(Qr.toHexString(),32),rn=B($r.toHexString(),32),nn={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},sn=["name","version","chainId","verifyingContract","salt"];function on(t){return function(e){return"string"!=typeof e&&Kr.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const an={name:on("name"),version:on("version"),chainId:function(t){try{return H.from(t).toString()}catch(t){}return Kr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Ot(t).toLowerCase()}catch(t){}return Kr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=C(t);if(32!==e.length)throw new Error("bad length");return O(e)}catch(t){}return Kr.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function hn(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const i=""===e[1],r=parseInt(e[2]||"256");(r%8!=0||r>256||e[2]&&e[2]!==String(r))&&Kr.throwArgumentError("invalid numeric width","type",t);const n=tn.mask(i?r-1:r),s=i?n.add(Qr).mul(Jr):$r;return function(e){const i=H.from(e);return(i.lt(s)||i.gt(n))&&Kr.throwArgumentError(`value out-of-bounds for ${t}`,"value",e),B(i.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const i=parseInt(e[1]);return(0===i||i>32||e[1]!==String(i))&&Kr.throwArgumentError("invalid bytes width","type",t),function(e){return C(e).length!==i&&Kr.throwArgumentError(`invalid length for ${t}`,"value",e),function(t){const e=C(t),i=e.length%32;return i?I([e,Zr.slice(i)]):O(e)}(e)}}}switch(t){case"address":return function(t){return B(Ot(t),32)};case"bool":return function(t){return t?en:rn};case"bytes":return function(t){return vt(t)};case"string":return function(t){return qt(t)}}return null}function ln(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class un{constructor(t){Q(this,"types",Object.freeze(at(t))),Q(this,"_encoderCache",{}),Q(this,"_types",{});const e={},i={},r={};Object.keys(t).forEach((t=>{e[t]={},i[t]=[],r[t]={}}));for(const r in t){const n={};t[r].forEach((s=>{n[s.name]&&Kr.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(r)}`,"types",t),n[s.name]=!0;const o=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===r&&Kr.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",t),hn(o)||(i[o]||Kr.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",t),i[o].push(r),e[r][o]=!0)}))}const n=Object.keys(i).filter((t=>0===i[t].length));0===n.length?Kr.throwArgumentError("missing primary type","types",t):n.length>1&&Kr.throwArgumentError(`ambiguous primary types or unused types: ${n.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),Q(this,"primaryType",n[0]),function n(s,o){o[s]&&Kr.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",t),o[s]=!0,Object.keys(e[s]).forEach((t=>{i[t]&&(n(t,o),Object.keys(o).forEach((e=>{r[e][t]=!0})))})),delete o[s]}(this.primaryType,{});for(const e in r){const i=Object.keys(r[e]);i.sort(),this._types[e]=ln(e,t[e])+i.map((e=>ln(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e}_getEncoder(t){{const e=hn(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],i=this.getEncoder(t),r=parseInt(e[3]);return e=>{r>=0&&e.length!==r&&Kr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);let n=e.map(i);return this._types[t]&&(n=n.map(vt)),vt(I(n))}}const i=this.types[t];if(i){const e=qt(this._types[t]);return t=>{const r=i.map((({name:e,type:i})=>{const r=this.getEncoder(i)(t[e]);return this._types[i]?vt(r):r}));return r.unshift(e),I(r)}}return Kr.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const e=this._types[t];return e||Kr.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return vt(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,i){if(hn(t))return i(t,e);const r=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const t=r[1],n=parseInt(r[3]);return n>=0&&e.length!==n&&Kr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((e=>this._visit(t,e,i)))}const n=this.types[t];return n?n.reduce(((t,{name:r,type:n})=>(t[r]=this._visit(n,e[r],i),t)),{}):Kr.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new un(t)}static getPrimaryType(t){return un.from(t).primaryType}static hashStruct(t,e,i){return un.from(e).hashStruct(t,i)}static hashDomain(t){const e=[];for(const i in t){const r=nn[i];r||Kr.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(i)}`,"domain",t),e.push({name:i,type:r})}return e.sort(((t,e)=>sn.indexOf(t.name)-sn.indexOf(e.name))),un.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,i){return I(["0x1901",un.hashDomain(t),un.from(e).hash(i)])}static hash(t,e,i){return vt(un.encode(t,e,i))}static resolveNames(t,e,i,r){return n=this,s=void 0,a=function*(){t=rt(t);const n={};t.verifyingContract&&!P(t.verifyingContract,20)&&(n[t.verifyingContract]="0x");const s=un.from(e);s.visit(i,((t,e)=>("address"!==t||P(e,20)||(n[e]="0x"),e)));for(const t in n)n[t]=yield r(t);return t.verifyingContract&&n[t.verifyingContract]&&(t.verifyingContract=n[t.verifyingContract]),i=s.visit(i,((t,e)=>"address"===t&&n[e]?n[e]:e)),{domain:t,value:i}},new((o=void 0)||(o=Promise))((function(t,e){function i(t){try{h(a.next(t))}catch(t){e(t)}}function r(t){try{h(a.throw(t))}catch(t){e(t)}}function h(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(i,r)}h((a=a.apply(n,s||[])).next())}));var n,s,o,a}static getPayload(t,e,i){un.hashDomain(t);const r={},n=[];sn.forEach((e=>{const i=t[e];null!=i&&(r[e]=an[e](i),n.push({name:e,type:nn[e]}))}));const s=un.from(e),o=rt(e);return o.EIP712Domain?Kr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e):o.EIP712Domain=n,s.encode(i),{types:o,domain:r,primaryType:s.primaryType,message:s.visit(i,((t,e)=>{if(t.match(/^bytes(\d*)/))return O(C(e));if(t.match(/^u?int/))return H.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!=typeof e&&Kr.throwArgumentError("invalid string","value",e),e}return Kr.throwArgumentError("unsupported type","type",t)}))}}}class cn{constructor(t){Q(this,"alphabet",t),Q(this,"base",t.length),Q(this,"_alphabetMap",{}),Q(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}encode(t){let e=C(t);if(0===e.length)return"";let i=[0];for(let t=0;t<e.length;++t){let r=e[t];for(let t=0;t<i.length;++t)r+=i[t]<<8,i[t]=r%this.base,r=r/this.base|0;for(;r>0;)i.push(r%this.base),r=r/this.base|0}let r="";for(let t=0;0===e[t]&&t<e.length-1;++t)r+=this._leader;for(let t=i.length-1;t>=0;--t)r+=this.alphabet[i[t]];return r}decode(t){if("string"!=typeof t)throw new TypeError("Expected String");let e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(let i=0;i<t.length;i++){let r=this._alphabetMap[t[i]];if(void 0===r)throw new Error("Non-base"+this.base+" character");let n=r;for(let t=0;t<e.length;++t)n+=e[t]*this.base,e[t]=255&n,n>>=8;for(;n>0;)e.push(255&n),n>>=8}for(let i=0;t[i]===this._leader&&i<t.length-1;++i)e.push(0);return C(new Uint8Array(e.reverse()))}}new cn("abcdefghijklmnopqrstuvwxyz234567");const dn=new cn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var fn,pn=i(6831),gn=i.n(pn);!function(t){t.sha256="sha256",t.sha512="sha512"}(fn||(fn={}));const vn=new y("sha2/5.5.0");function mn(t){return"0x"+gn().ripemd160().update(C(t)).digest("hex")}function yn(t){return"0x"+gn().sha256().update(C(t)).digest("hex")}function xn(t){return"0x"+gn().sha512().update(C(t)).digest("hex")}function bn(t,e,i){return fn[t]||vn.throwError("unsupported algorithm "+t,y.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+gn().hmac(gn()[t],C(e)).update(C(i)).digest("hex")}function wn(t,e,i,r,n){let s;t=C(t),e=C(e);let o=1;const a=new Uint8Array(r),h=new Uint8Array(e.length+4);let l,u;h.set(e);for(let c=1;c<=o;c++){h[e.length]=c>>24&255,h[e.length+1]=c>>16&255,h[e.length+2]=c>>8&255,h[e.length+3]=255&c;let d=C(bn(n,t,h));s||(s=d.length,u=new Uint8Array(s),o=Math.ceil(r/s),l=r-(o-1)*s),u.set(d);for(let e=1;e<i;e++){d=C(bn(n,t,d));for(let t=0;t<s;t++)u[t]^=d[t]}const f=(c-1)*s,p=c===o?l:s;a.set(C(u).slice(0,p),f)}return O(a)}const Tn=new y("wordlists/5.5.0");class Sn{constructor(t){Tn.checkAbstract(new.target,Sn),Q(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){const e=[];for(let i=0;i<2048;i++){const r=t.getWord(i);if(i!==t.getWordIndex(r))return"0x";e.push(r)}return qt(e.join("\n")+"\n")}static register(t,e){e||(e=t.locale)}}let En=null;function Cn(t){if(null==En&&(En="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==Sn.check(t)))throw En=null,new Error("BIP39 Wordlist for en (English) FAILED")}const _n=new class extends Sn{constructor(){super("en")}getWord(t){return Cn(this),En[t]}getWordIndex(t){return Cn(this),En.indexOf(t)}};Sn.register(_n);const An={en:_n},Mn=new y("hdnode/5.5.0"),Pn=H.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kn=Xt("Bitcoin seed"),On=2147483648;function Rn(t){return(1<<t)-1<<8-t}function Ln(t){return B(O(t),32)}function In(t){return dn.encode(_([t,L(yn(yn(t)),0,4)]))}function Fn(t){if(null==t)return An.en;if("string"==typeof t){const e=An[t];return null==e&&Mn.throwArgumentError("unknown locale","wordlist",t),e}return t}const Dn={},Bn="m/44'/60'/0'/0/0";class Nn{constructor(t,e,i,r,n,s,o,a){if(Mn.checkNew(new.target,Nn),t!==Dn)throw new Error("HDNode constructor cannot be called directly");if(e){const t=new Ji(e);Q(this,"privateKey",t.privateKey),Q(this,"publicKey",t.compressedPublicKey)}else Q(this,"privateKey",null),Q(this,"publicKey",O(i));Q(this,"parentFingerprint",r),Q(this,"fingerprint",L(mn(yn(this.publicKey)),0,4)),Q(this,"address",or(this.publicKey)),Q(this,"chainCode",n),Q(this,"index",s),Q(this,"depth",o),null==a?(Q(this,"mnemonic",null),Q(this,"path",null)):"string"==typeof a?(Q(this,"mnemonic",null),Q(this,"path",a)):(Q(this,"mnemonic",a),Q(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return In(_([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",O(this.depth),this.parentFingerprint,B(O(this.index),4),this.chainCode,null!=this.privateKey?_(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Nn(Dn,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295)throw new Error("invalid index - "+String(t));let e=this.path;e&&(e+="/"+(2147483647&t));const i=new Uint8Array(37);if(t&On){if(!this.privateKey)throw new Error("cannot derive child of neutered node");i.set(C(this.privateKey),1),e&&(e+="'")}else i.set(C(this.publicKey));for(let e=24;e>=0;e-=8)i[33+(e>>3)]=t>>24-e&255;const r=C(bn(fn.sha512,this.chainCode,i)),n=r.slice(0,32),s=r.slice(32);let o=null,a=null;this.privateKey?o=Ln(H.from(n).add(this.privateKey).mod(Pn)):a=new Ji(O(n))._addPoint(this.publicKey);let h=e;const l=this.mnemonic;return l&&(h=Object.freeze({phrase:l.phrase,path:e,locale:l.locale||"en"})),new Nn(Dn,o,a,this.fingerprint,Ln(s),t,this.depth+1,h)}derivePath(t){const e=t.split("/");if(0===e.length||"m"===e[0]&&0!==this.depth)throw new Error("invalid path - "+t);"m"===e[0]&&e.shift();let i=this;for(let t=0;t<e.length;t++){const r=e[t];if(r.match(/^[0-9]+'$/)){const t=parseInt(r.substring(0,r.length-1));if(t>=On)throw new Error("invalid path index - "+r);i=i._derive(On+t)}else{if(!r.match(/^[0-9]+$/))throw new Error("invalid path component - "+r);{const t=parseInt(r);if(t>=On)throw new Error("invalid path index - "+r);i=i._derive(t)}}}return i}static _fromSeed(t,e){const i=C(t);if(i.length<16||i.length>64)throw new Error("invalid seed");const r=C(bn(fn.sha512,kn,i));return new Nn(Dn,Ln(r.slice(0,32)),null,"0x00000000",Ln(r.slice(32)),0,0,e)}static fromMnemonic(t,e,i){return t=Yn(Un(t,i=Fn(i)),i),Nn._fromSeed(zn(t,e),{phrase:t,path:"m",locale:i.locale})}static fromSeed(t){return Nn._fromSeed(t,null)}static fromExtendedKey(t){const e=dn.decode(t);82===e.length&&In(e.slice(0,78))===t||Mn.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const i=e[4],r=O(e.slice(5,9)),n=parseInt(O(e.slice(9,13)).substring(2),16),s=O(e.slice(13,45)),o=e.slice(45,78);switch(O(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Nn(Dn,null,O(o),r,s,n,i,null);case"0x0488ade4":case"0x04358394 ":if(0!==o[0])break;return new Nn(Dn,O(o.slice(1)),null,r,s,n,i,null)}return Mn.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function zn(t,e){e||(e="");const i=Xt("mnemonic"+e,Bt.NFKD);return wn(Xt(t,Bt.NFKD),i,2048,64,"sha512")}function Un(t,e){e=Fn(e),Mn.checkNormalize();const i=e.split(t);if(i.length%3!=0)throw new Error("invalid mnemonic");const r=C(new Uint8Array(Math.ceil(11*i.length/8)));let n=0;for(let t=0;t<i.length;t++){let s=e.getWordIndex(i[t].normalize("NFKD"));if(-1===s)throw new Error("invalid mnemonic");for(let t=0;t<11;t++)s&1<<10-t&&(r[n>>3]|=1<<7-n%8),n++}const s=32*i.length/3,o=Rn(i.length/3);if((C(yn(r.slice(0,s/8)))[0]&o)!=(r[r.length-1]&o))throw new Error("invalid checksum");return O(r.slice(0,s/8))}function Yn(t,e){if(e=Fn(e),(t=C(t)).length%4!=0||t.length<16||t.length>32)throw new Error("invalid entropy");const i=[0];let r=11;for(let e=0;e<t.length;e++)r>8?(i[i.length-1]<<=8,i[i.length-1]|=t[e],r-=8):(i[i.length-1]<<=r,i[i.length-1]|=t[e]>>8-r,i.push(t[e]&(1<<8-r)-1),r+=3);const n=t.length/4,s=C(yn(t))[0]&Rn(n);return i[i.length-1]<<=n,i[i.length-1]|=s>>8-n,e.join(i.map((t=>e.getWord(t))))}function Xn(t,e){try{return Un(t,e),!0}catch(t){}return!1}function Gn(t){return("number"!=typeof t||t<0||t>=On||t%1)&&Mn.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}const Wn=new y("random/5.5.0");let Vn=null;try{if(Vn=window,null==Vn)throw new Error("try next")}catch(t){try{if(Vn=i.g,null==Vn)throw new Error("try next")}catch(t){Vn={}}}let jn=Vn.crypto||Vn.msCrypto;function Hn(t){(t<=0||t>1024||t%1||t!=t)&&Wn.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return jn.getRandomValues(e),C(e)}jn&&jn.getRandomValues||(Wn.warn("WARNING: Missing strong random number source"),jn={getRandomValues:function(t){return Wn.throwError("no secure random source avaialble",y.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var qn=i(8826),Kn=i.n(qn);const Zn="json-wallets/5.5.0";function Jn(t){return"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),C(t)}function $n(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function Qn(t){return"string"==typeof t?Xt(t,Bt.NFKC):C(t)}function ts(t,e){let i=t;const r=e.toLowerCase().split("/");for(let t=0;t<r.length;t++){let e=null;for(const n in i)if(n.toLowerCase()===r[t]){e=i[n];break}if(null===e)return null;i=e}return i}function es(t){const e=C(t);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const i=O(e);return[i.substring(2,10),i.substring(10,14),i.substring(14,18),i.substring(18,22),i.substring(22,34)].join("-")}const is=new y(Zn);class rs extends ht{isCrowdsaleAccount(t){return!(!t||!t._isCrowdsaleAccount)}}function ns(t,e){const i=JSON.parse(t);e=Qn(e);const r=Ot(ts(i,"ethaddr")),n=Jn(ts(i,"encseed"));n&&n.length%16==0||is.throwArgumentError("invalid encseed","json",t);const s=C(wn(e,e,2e3,32,"sha256")).slice(0,16),o=n.slice(0,16),a=n.slice(16),h=new(Kn().ModeOfOperation.cbc)(s,o),l=Kn().padding.pkcs7.strip(C(h.decrypt(a)));let u="";for(let t=0;t<l.length;t++)u+=String.fromCharCode(l[t]);const c=vt(Xt(u));return new rs({_isCrowdsaleAccount:!0,address:r,privateKey:c})}function ss(t){let e=null;try{e=JSON.parse(t)}catch(t){return!1}return e.encseed&&e.ethaddr}function os(t){let e=null;try{e=JSON.parse(t)}catch(t){return!1}return!(!e.version||parseInt(e.version)!==e.version||3!==parseInt(e.version))}function as(t){if(ss(t))try{return Ot(JSON.parse(t).ethaddr)}catch(t){return null}if(os(t))try{return Ot(JSON.parse(t).address)}catch(t){return null}return null}var hs=i(7902),ls=i.n(hs);const us=new y(Zn);function cs(t){return null!=t&&t.mnemonic&&t.mnemonic.phrase}class ds extends ht{isKeystoreAccount(t){return!(!t||!t._isKeystoreAccount)}}function fs(t,e){const i=Jn(ts(t,"crypto/ciphertext"));if(O(vt(_([e.slice(16,32),i]))).substring(2)!==ts(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const r=function(t,e,i){if("aes-128-ctr"===ts(t,"crypto/cipher")){const r=Jn(ts(t,"crypto/cipherparams/iv")),n=new(Kn().Counter)(r);return C(new(Kn().ModeOfOperation.ctr)(e,n).decrypt(i))}return null}(t,e.slice(0,16),i);r||us.throwError("unsupported cipher",y.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const n=e.slice(32,64),s=or(r);if(t.address){let e=t.address.toLowerCase();if("0x"!==e.substring(0,2)&&(e="0x"+e),Ot(e)!==s)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:s,privateKey:O(r)};if("0.1"===ts(t,"x-ethers/version")){const e=Jn(ts(t,"x-ethers/mnemonicCiphertext")),i=Jn(ts(t,"x-ethers/mnemonicCounter")),r=new(Kn().Counter)(i),s=new(Kn().ModeOfOperation.ctr)(n,r),a=ts(t,"x-ethers/path")||Bn,h=ts(t,"x-ethers/locale")||"en",l=C(s.decrypt(e));try{const t=Yn(l,h),e=Nn.fromMnemonic(t,null,h).derivePath(a);if(e.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=e.mnemonic}catch(t){if(t.code!==y.errors.INVALID_ARGUMENT||"wordlist"!==t.argument)throw t}}return new ds(o)}function ps(t,e,i,r,n){return C(wn(t,e,i,r,n))}function gs(t,e,i,r,n){return Promise.resolve(ps(t,e,i,r,n))}function vs(t,e,i,r,n){const s=Qn(e),o=ts(t,"crypto/kdf");if(o&&"string"==typeof o){const e=function(t,e){return us.throwArgumentError("invalid key-derivation function parameters",t,e)};if("scrypt"===o.toLowerCase()){const i=Jn(ts(t,"crypto/kdfparams/salt")),a=parseInt(ts(t,"crypto/kdfparams/n")),h=parseInt(ts(t,"crypto/kdfparams/r")),l=parseInt(ts(t,"crypto/kdfparams/p"));a&&h&&l||e("kdf",o),0!=(a&a-1)&&e("N",a);const u=parseInt(ts(t,"crypto/kdfparams/dklen"));return 32!==u&&e("dklen",u),r(s,i,a,h,l,64,n)}if("pbkdf2"===o.toLowerCase()){const r=Jn(ts(t,"crypto/kdfparams/salt"));let n=null;const o=ts(t,"crypto/kdfparams/prf");"hmac-sha256"===o?n="sha256":"hmac-sha512"===o?n="sha512":e("prf",o);const a=parseInt(ts(t,"crypto/kdfparams/c")),h=parseInt(ts(t,"crypto/kdfparams/dklen"));return 32!==h&&e("dklen",h),i(s,r,a,h,n)}}return us.throwArgumentError("unsupported key-derivation function","kdf",o)}function ms(t,e,i){if(ss(t)){i&&i(0);const r=ns(t,e);return i&&i(1),Promise.resolve(r)}return os(t)?function(t,e,i){return r=this,n=void 0,o=function*(){const r=JSON.parse(t);return fs(r,yield vs(r,e,gs,ls().scrypt,i))},new((s=void 0)||(s=Promise))((function(t,e){function i(t){try{h(o.next(t))}catch(t){e(t)}}function a(t){try{h(o.throw(t))}catch(t){e(t)}}function h(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(t){t(r)}))).then(i,a)}h((o=o.apply(r,n||[])).next())}));var r,n,s,o}(t,e,i):Promise.reject(new Error("invalid JSON wallet"))}var ys=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const xs=new y("wallet/5.5.0");class bs extends oi{constructor(t,e){if(xs.checkNew(new.target,bs),super(),null!=(i=t)&&P(i.privateKey,32)&&null!=i.address){const e=new Ji(t.privateKey);if(Q(this,"_signingKey",(()=>e)),Q(this,"address",or(this.publicKey)),this.address!==Ot(t.address)&&xs.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(t){const e=t.mnemonic;return e&&e.phrase}(t)){const e=t.mnemonic;Q(this,"_mnemonic",(()=>({phrase:e.phrase,path:e.path||Bn,locale:e.locale||"en"})));const i=this.mnemonic;or(Nn.fromMnemonic(i.phrase,null,i.locale).derivePath(i.path).privateKey)!==this.address&&xs.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else Q(this,"_mnemonic",(()=>null))}else{if(Ji.isSigningKey(t))"secp256k1"!==t.curve&&xs.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),Q(this,"_signingKey",(()=>t));else{"string"==typeof t&&t.match(/^[0-9a-f]*$/i)&&64===t.length&&(t="0x"+t);const e=new Ji(t);Q(this,"_signingKey",(()=>e))}Q(this,"_mnemonic",(()=>null)),Q(this,"address",or(this.publicKey))}var i;e&&!ei.isProvider(e)&&xs.throwArgumentError("invalid provider","provider",e),Q(this,"provider",e||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new bs(this,t)}signTransaction(t){return et(t).then((e=>{null!=e.from&&(Ot(e.from)!==this.address&&xs.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete e.from);const i=this._signingKey().signDigest(vt(pr(e)));return pr(e,i)}))}signMessage(t){return ys(this,void 0,void 0,(function*(){return z(this._signingKey().signDigest(Hr(t)))}))}_signTypedData(t,e,i){return ys(this,void 0,void 0,(function*(){const r=yield un.resolveNames(t,e,i,(t=>(null==this.provider&&xs.throwError("cannot resolve ENS names without a provider",y.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:t}),this.provider.resolveName(t))));return z(this._signingKey().signDigest(un.hash(r.domain,e,r.value)))}))}encrypt(t,e,i){if("function"!=typeof e||i||(i=e,e={}),i&&"function"!=typeof i)throw new Error("invalid callback");return e||(e={}),function(t,e,i,r){try{if(Ot(t.address)!==or(t.privateKey))throw new Error("address/privateKey mismatch");if(cs(t)){const e=t.mnemonic;if(Nn.fromMnemonic(e.phrase,null,e.locale).derivePath(e.path||Bn).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(t){return Promise.reject(t)}"function"!=typeof i||r||(r=i,i={}),i||(i={});const n=C(t.privateKey),s=Qn(e);let o=null,a=null,h=null;if(cs(t)){const e=t.mnemonic;o=C(Un(e.phrase,e.locale||"en")),a=e.path||Bn,h=e.locale||"en"}let l=i.client;l||(l="ethers.js");let u=null;u=i.salt?C(i.salt):Hn(32);let c=null;if(i.iv){if(c=C(i.iv),16!==c.length)throw new Error("invalid iv")}else c=Hn(16);let d=null;if(i.uuid){if(d=C(i.uuid),16!==d.length)throw new Error("invalid uuid")}else d=Hn(16);let f=1<<17,p=8,g=1;return i.scrypt&&(i.scrypt.N&&(f=i.scrypt.N),i.scrypt.r&&(p=i.scrypt.r),i.scrypt.p&&(g=i.scrypt.p)),ls().scrypt(s,u,f,p,g,64,r).then((e=>{const i=(e=C(e)).slice(0,16),r=e.slice(16,32),s=e.slice(32,64),v=new(Kn().Counter)(c),m=C(new(Kn().ModeOfOperation.ctr)(i,v).encrypt(n)),y=vt(_([r,m])),x={address:t.address.substring(2).toLowerCase(),id:es(d),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:O(c).substring(2)},ciphertext:O(m).substring(2),kdf:"scrypt",kdfparams:{salt:O(u).substring(2),n:f,dklen:32,p:g,r:p},mac:y.substring(2)}};if(o){const t=Hn(16),e=new(Kn().Counter)(t),i=C(new(Kn().ModeOfOperation.ctr)(s,e).encrypt(o)),r=new Date,n=r.getUTCFullYear()+"-"+$n(r.getUTCMonth()+1,2)+"-"+$n(r.getUTCDate(),2)+"T"+$n(r.getUTCHours(),2)+"-"+$n(r.getUTCMinutes(),2)+"-"+$n(r.getUTCSeconds(),2)+".0Z";x["x-ethers"]={client:l,gethFilename:"UTC--"+n+"--"+x.address,mnemonicCounter:O(t).substring(2),mnemonicCiphertext:O(i).substring(2),path:a,locale:h,version:"0.1"}}return JSON.stringify(x)}))}(this,t,e,i)}static createRandom(t){let e=Hn(16);t||(t={}),t.extraEntropy&&(e=C(L(vt(_([e,t.extraEntropy])),0,16)));const i=Yn(e,t.locale);return bs.fromMnemonic(i,t.path,t.locale)}static fromEncryptedJson(t,e,i){return ms(t,e,i).then((t=>new bs(t)))}static fromEncryptedJsonSync(t,e){return new bs(function(t,e){if(ss(t))return ns(t,e);if(os(t))return function(t,e){const i=JSON.parse(t);return fs(i,vs(i,e,ps,ls().syncScrypt))}(t,e);throw new Error("invalid JSON wallet")}(t,e))}static fromMnemonic(t,e,i){return e||(e=Bn),new bs(Nn.fromMnemonic(t,null,i).derivePath(e))}}function ws(t,e){return ar(Hr(t),e)}function Ts(t,e,i,r){return ar(un.hash(t,e,i),r)}const Ss="0x0000000000000000000000000000000000000000",Es="0x0000000000000000000000000000000000000000000000000000000000000000",Cs="Ξ",_s=new y("networks/5.5.1");function As(t){const e=function(e,i){null==i&&(i={});const r=[];if(e.InfuraProvider)try{r.push(new e.InfuraProvider(t,i.infura))}catch(t){}if(e.EtherscanProvider)try{r.push(new e.EtherscanProvider(t,i.etherscan))}catch(t){}if(e.AlchemyProvider)try{r.push(new e.AlchemyProvider(t,i.alchemy))}catch(t){}if(e.PocketProvider){const i=["goerli","ropsten","rinkeby"];try{const n=new e.PocketProvider(t);n.network&&-1===i.indexOf(n.network.name)&&r.push(n)}catch(t){}}if(e.CloudflareProvider)try{r.push(new e.CloudflareProvider(t))}catch(t){}if(0===r.length)return null;if(e.FallbackProvider){let n=1;return null!=i.quorum?n=i.quorum:"homestead"===t&&(n=2),new e.FallbackProvider(r,n)}return r[0]};return e.renetwork=function(t){return As(t)},e}function Ms(t,e){const i=function(i,r){return i.JsonRpcProvider?new i.JsonRpcProvider(t,e):null};return i.renetwork=function(e){return Ms(t,e)},i}const Ps={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:As("homestead")},ks={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:As("ropsten")},Os={chainId:63,name:"classicMordor",_defaultProvider:Ms("https://www.ethercluster.com/mordor","classicMordor")},Rs={unspecified:{chainId:0,name:"unspecified"},homestead:Ps,mainnet:Ps,morden:{chainId:2,name:"morden"},ropsten:ks,testnet:ks,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:As("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:As("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:As("goerli")},classic:{chainId:61,name:"classic",_defaultProvider:Ms("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Os,classicTestnet:Os,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Ms("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism"},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Ls(t){if(null==t)return null;if("number"==typeof t){for(const e in Rs){const i=Rs[e];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"==typeof t){const e=Rs[t];return null==e?null:{name:e.name,chainId:e.chainId,ensAddress:e.ensAddress,_defaultProvider:e._defaultProvider||null}}const e=Rs[t.name];if(!e)return"number"!=typeof t.chainId&&_s.throwArgumentError("invalid network chainId","network",t),t;0!==t.chainId&&t.chainId!==e.chainId&&_s.throwArgumentError("network chainId mismatch","network",t);let i=t._defaultProvider||null;var r;return null==i&&e._defaultProvider&&(i=(r=e._defaultProvider)&&"function"==typeof r.renetwork?e._defaultProvider.renetwork(t):e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:i}}function Is(t,e){e||(e=function(t){return[parseInt(t,16)]});let i=0,r={};return t.split(",").forEach((t=>{let n=t.split(":");i+=parseInt(n[0],16),r[i]=e(n[1])})),r}function Fs(t){let e=0;return t.split(",").map((t=>{let i=t.split("-");1===i.length?i[1]="0":""===i[1]&&(i[1]="1");let r=e+parseInt(i[0],16);return e=parseInt(i[1],16),{l:r,h:e}}))}function Ds(t,e){let i=0;for(let r=0;r<e.length;r++){let n=e[r];if(i+=n.l,t>=i&&t<=i+n.h&&(t-i)%(n.d||1)==0){if(n.e&&-1!==n.e.indexOf(t-i))continue;return n}}return null}const Bs=Fs("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Ns="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16))),zs=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Us=Is("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Ys=Is("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Xs=Is("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!=0)throw new Error("bad data");let e=[];for(let i=0;i<t.length;i+=4)e.push(parseInt(t.substring(i,i+4),16));return e})),Gs=Fs("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Ws(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=Ht(t);var i;i=e.map((t=>{if(Ns.indexOf(t)>=0)return[];if(t>=65024&&t<=65039)return[];let e=function(t){let e=Ds(t,zs);if(e)return[t+e.s];let i=Us[t];if(i)return i;let r=Ys[t];return r?[t+r[0]]:Xs[t]||null}(t);return e||[t]})),e=i.reduce(((t,e)=>(e.forEach((e=>{t.push(e)})),t)),[]),e=Ht(Vt(e),Bt.NFKC),e.forEach((t=>{if(Ds(t,Gs))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),e.forEach((t=>{if(Ds(t,Bs))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let r=Vt(e);if("-"===r.substring(0,1)||"--"===r.substring(2,4)||"-"===r.substring(r.length-1))throw new Error("invalid hyphen");if(r.length>63)throw new Error("too long");return r}const Vs=new y(qr),js=new Uint8Array(32);js.fill(0);const Hs=new RegExp("^((.*)\\.)?([^.]+)$");function qs(t){try{const e=t.split(".");for(let t=0;t<e.length;t++)if(0===Ws(e[t]).length)throw new Error("empty");return!0}catch(t){}return!1}function Ks(t){"string"!=typeof t&&Vs.throwArgumentError("invalid ENS name; not a string","name",t);let e=t,i=js;for(;e.length;){const r=e.match(Hs);null!=r&&""!==r[2]||Vs.throwArgumentError("invalid ENS address; missing component","name",t),i=vt(_([i,vt(Xt(Ws(r[3])))])),e=r[2]||""}return O(i)}function Zs(t){t=atob(t);const e=[];for(let i=0;i<t.length;i++)e.push(t.charCodeAt(i));return C(e)}function Js(t){t=C(t);let e="";for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function $s(t,e){return i=this,r=void 0,s=function*(){null==e&&(e={});const i={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};!0!==e.skipFetchSetup&&(i.mode="cors",i.cache="no-cache",i.credentials="same-origin",i.redirect="follow",i.referrer="client");const r=yield fetch(t,i),n=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach(((t,e)=>{s[e.toLowerCase()]=t})):r.headers.keys().forEach((t=>{s[t.toLowerCase()]=r.headers.get(t)})),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:C(new Uint8Array(n))}},new((n=void 0)||(n=Promise))((function(t,e){function o(t){try{h(s.next(t))}catch(t){e(t)}}function a(t){try{h(s.throw(t))}catch(t){e(t)}}function h(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(o,a)}h((s=s.apply(i,r||[])).next())}));var i,r,n,s}const Qs=new y("web/5.5.1");function to(t){return new Promise((e=>{setTimeout(e,t)}))}function eo(t,e){if(null==t)return null;if("string"==typeof t)return t;if(T(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return jt(t)}catch(t){}return O(t)}return t}function io(t,e,i){const r="object"==typeof t&&null!=t.throttleLimit?t.throttleLimit:12;Qs.assertArgument(r>0&&r%1==0,"invalid connection throttle limit","connection.throttleLimit",r);const n="object"==typeof t?t.throttleCallback:null,s="object"==typeof t&&"number"==typeof t.throttleSlotInterval?t.throttleSlotInterval:100;Qs.assertArgument(s>0&&s%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o={};let a=null;const h={method:"GET"};let l=!1,u=12e4;if("string"==typeof t)a=t;else if("object"==typeof t){if(null!=t&&null!=t.url||Qs.throwArgumentError("missing URL","connection.url",t),a=t.url,"number"==typeof t.timeout&&t.timeout>0&&(u=t.timeout),t.headers)for(const e in t.headers)o[e.toLowerCase()]={key:e,value:String(t.headers[e])},["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0&&(l=!0);if(h.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==a.substring(0,6)&&!0!==t.allowInsecureAuthentication&&Qs.throwError("basic authentication requires a secure https url",y.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:t.user,password:"[REDACTED]"});const e=t.user+":"+t.password;o.authorization={key:"Authorization",value:"Basic "+Js(Xt(e))}}}const c=new RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),d=a?a.match(c):null;if(d)try{const t={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]},body:Zs(d[2])};let e=t.body;return i&&(e=i(t.body,t)),Promise.resolve(e)}catch(t){Qs.throwError("processing response error",y.errors.SERVER_ERROR,{body:eo(d[1],d[2]),error:t,requestBody:null,requestMethod:"GET",url:a})}e&&(h.method="POST",h.body=e,null==o["content-type"]&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==o["content-length"]&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const f={};Object.keys(o).forEach((t=>{const e=o[t];f[e.key]=e.value})),h.headers=f;const p=function(){let t=null;return{promise:new Promise((function(e,i){u&&(t=setTimeout((()=>{null!=t&&(t=null,i(Qs.makeError("timeout",y.errors.TIMEOUT,{requestBody:eo(h.body,f["content-type"]),requestMethod:h.method,timeout:u,url:a})))}),u))})),cancel:function(){null!=t&&(clearTimeout(t),t=null)}}}(),g=function(){return t=this,e=void 0,u=function*(){for(let t=0;t<r;t++){let e=null;try{if(e=yield $s(a,h),t<r)if(301===e.statusCode||302===e.statusCode){const t=e.headers.location||"";if("GET"===h.method&&t.match(/^https:/)){a=e.headers.location;continue}}else if(429===e.statusCode){let i=!0;if(n&&(i=yield n(t,a)),i){let i=0;const r=e.headers["retry-after"];i="string"==typeof r&&r.match(/^[1-9][0-9]*$/)?1e3*parseInt(r):s*parseInt(String(Math.random()*Math.pow(2,t))),yield to(i);continue}}}catch(t){e=t.response,null==e&&(p.cancel(),Qs.throwError("missing response",y.errors.SERVER_ERROR,{requestBody:eo(h.body,f["content-type"]),requestMethod:h.method,serverError:t,url:a}))}let o=e.body;if(l&&304===e.statusCode?o=null:(e.statusCode<200||e.statusCode>=300)&&(p.cancel(),Qs.throwError("bad response",y.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:eo(o,e.headers?e.headers["content-type"]:null),requestBody:eo(h.body,f["content-type"]),requestMethod:h.method,url:a})),i)try{const t=yield i(o,e);return p.cancel(),t}catch(i){if(i.throttleRetry&&t<r){let e=!0;if(n&&(e=yield n(t,a)),e){const e=s*parseInt(String(Math.random()*Math.pow(2,t)));yield to(e);continue}}p.cancel(),Qs.throwError("processing response error",y.errors.SERVER_ERROR,{body:eo(o,e.headers?e.headers["content-type"]:null),error:i,requestBody:eo(h.body,f["content-type"]),requestMethod:h.method,url:a})}return p.cancel(),o}return Qs.throwError("failed response",y.errors.SERVER_ERROR,{requestBody:eo(h.body,f["content-type"]),requestMethod:h.method,url:a})},new((o=void 0)||(o=Promise))((function(i,r){function n(t){try{a(u.next(t))}catch(t){r(t)}}function s(t){try{a(u.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,s)}a((u=u.apply(t,e||[])).next())}));var t,e,o,u}();return Promise.race([p.promise,g])}function ro(t,e,i){let r=null;if(null!=e){r=Xt(e);const i="string"==typeof t?{url:t}:rt(t);i.headers?0!==Object.keys(i.headers).filter((t=>"content-type"===t.toLowerCase())).length||(i.headers=rt(i.headers),i.headers["content-type"]="application/json"):i.headers={"content-type":"application/json"},t=i}return io(t,r,((t,e)=>{let r=null;if(null!=t)try{r=JSON.parse(jt(t))}catch(e){Qs.throwError("invalid JSON",y.errors.SERVER_ERROR,{body:t,error:e})}return i&&(r=i(r,e)),r}))}function no(t,e){return e||(e={}),null==(e=rt(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(i,r){let n=null,s=!1;const o=()=>!s&&(s=!0,n&&clearTimeout(n),!0);e.timeout&&(n=setTimeout((()=>{o()&&r(new Error("timeout"))}),e.timeout));const a=e.retryLimit;let h=0;!function n(){return t().then((function(t){if(void 0!==t)o()&&i(t);else if(e.oncePoll)e.oncePoll.once("poll",n);else if(e.onceBlock)e.onceBlock.once("block",n);else if(!s){if(h++,h>a)return void(o()&&r(new Error("retry limit reached")));let t=e.interval*parseInt(String(Math.random()*Math.pow(2,h)));t<e.floor&&(t=e.floor),t>e.ceiling&&(t=e.ceiling),setTimeout(n,t)}return null}),(function(t){o()&&r(t)}))}()}))}var so=i(2882),oo=i.n(so);const ao="providers/5.5.1",ho=new y(ao);class lo{constructor(){ho.checkNew(new.target,lo),this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={},e=this.address.bind(this),i=this.bigNumber.bind(this),r=this.blockTag.bind(this),n=this.data.bind(this),s=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),h=this.type.bind(this);return t.transaction={hash:s,type:h,accessList:lo.allowNull(this.accessList.bind(this),null),blockHash:lo.allowNull(s,null),blockNumber:lo.allowNull(a,null),transactionIndex:lo.allowNull(a,null),confirmations:lo.allowNull(a,null),from:e,gasPrice:lo.allowNull(i),maxPriorityFeePerGas:lo.allowNull(i),maxFeePerGas:lo.allowNull(i),gasLimit:i,to:lo.allowNull(e,null),value:i,nonce:a,data:n,r:lo.allowNull(this.uint256),s:lo.allowNull(this.uint256),v:lo.allowNull(a),creates:lo.allowNull(e,null),raw:lo.allowNull(n)},t.transactionRequest={from:lo.allowNull(e),nonce:lo.allowNull(a),gasLimit:lo.allowNull(i),gasPrice:lo.allowNull(i),maxPriorityFeePerGas:lo.allowNull(i),maxFeePerGas:lo.allowNull(i),to:lo.allowNull(e),value:lo.allowNull(i),data:lo.allowNull((t=>this.data(t,!0))),type:lo.allowNull(a),accessList:lo.allowNull(this.accessList.bind(this),null)},t.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:s,address:e,topics:lo.arrayOf(s),data:n,logIndex:a,blockHash:s},t.receipt={to:lo.allowNull(this.address,null),from:lo.allowNull(this.address,null),contractAddress:lo.allowNull(e,null),transactionIndex:a,root:lo.allowNull(o),gasUsed:i,logsBloom:lo.allowNull(n),blockHash:s,transactionHash:s,logs:lo.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:lo.allowNull(a,null),cumulativeGasUsed:i,effectiveGasPrice:lo.allowNull(i),status:lo.allowNull(a),type:h},t.block={hash:s,parentHash:s,number:a,timestamp:a,nonce:lo.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:i,gasUsed:i,miner:e,extraData:n,transactions:lo.allowNull(lo.arrayOf(s)),baseFeePerGas:lo.allowNull(i)},t.blockWithTransactions=rt(t.block),t.blockWithTransactions.transactions=lo.allowNull(lo.arrayOf(this.transactionResponse.bind(this))),t.filter={fromBlock:lo.allowNull(r,void 0),toBlock:lo.allowNull(r,void 0),blockHash:lo.allowNull(s,void 0),address:lo.allowNull(e,void 0),topics:lo.allowNull(this.topics.bind(this),void 0)},t.filterLog={blockNumber:lo.allowNull(a),blockHash:lo.allowNull(s),transactionIndex:a,removed:lo.allowNull(this.boolean.bind(this)),address:e,data:lo.allowFalsish(n,"0x"),topics:lo.arrayOf(s),transactionHash:s,logIndex:a},t}accessList(t){return ur(t||[])}number(t){return"0x"===t?0:H.from(t).toNumber()}type(t){return"0x"===t||null==t?0:H.from(t).toNumber()}bigNumber(t){return H.from(t)}boolean(t){if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===(t=t.toLowerCase()))return!0;if("false"===t)return!1}throw new Error("invalid boolean - "+t)}hex(t,e){return"string"==typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),P(t))?t.toLowerCase():ho.throwArgumentError("invalid hash","value",t)}data(t,e){const i=this.hex(t,e);if(i.length%2!=0)throw new Error("invalid data; odd-length - "+t);return i}address(t){return Ot(t)}callAddress(t){if(!P(t,32))return null;const e=Ot(L(t,12));return e===Ss?null:e}contractAddress(t){return It(t)}blockTag(t){if(null==t)return"latest";if("earliest"===t)return"0x0";if("latest"===t||"pending"===t)return t;if("number"==typeof t||P(t))return F(t);throw new Error("invalid blockTag")}hash(t,e){const i=this.hex(t,e);return 32!==R(i)?ho.throwArgumentError("invalid hash","value",t):i}difficulty(t){if(null==t)return null;const e=H.from(t);try{return e.toNumber()}catch(t){}return null}uint256(t){if(!P(t))throw new Error("invalid uint256");return B(t,32)}_block(t,e){null!=t.author&&null==t.miner&&(t.miner=t.author);const i=null!=t._difficulty?t._difficulty:t.difficulty,r=lo.check(e,t);return r._difficulty=null==i?null:H.from(i),r}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return lo.check(this.formats.transactionRequest,t)}transactionResponse(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&H.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);const e=lo.check(this.formats.transaction,t);if(null!=t.chainId){let i=t.chainId;P(i)&&(i=H.from(i).toNumber()),e.chainId=i}else{let i=t.networkId;null==i&&null==e.v&&(i=t.chainId),P(i)&&(i=H.from(i).toNumber()),"number"!=typeof i&&null!=e.v&&(i=(e.v-35)/2,i<0&&(i=0),i=parseInt(i)),"number"!=typeof i&&(i=0),e.chainId=i}return e.blockHash&&"x"===e.blockHash.replace(/0/g,"")&&(e.blockHash=null),e}transaction(t){return vr(t)}receiptLog(t){return lo.check(this.formats.receiptLog,t)}receipt(t){const e=lo.check(this.formats.receipt,t);if(null!=e.root)if(e.root.length<=4){const t=H.from(e.root).toNumber();0===t||1===t?(null!=e.status&&e.status!==t&&ho.throwArgumentError("alt-root-status/status mismatch","value",{root:e.root,status:e.status}),e.status=t,delete e.root):ho.throwArgumentError("invalid alt-root-status","value.root",e.root)}else 66!==e.root.length&&ho.throwArgumentError("invalid root hash","value.root",e.root);return null!=e.status&&(e.byzantium=!0),e}topics(t){return Array.isArray(t)?t.map((t=>this.topics(t))):null!=t?this.hash(t,!0):null}filter(t){return lo.check(this.formats.filter,t)}filterLog(t){return lo.check(this.formats.filterLog,t)}static check(t,e){const i={};for(const r in t)try{const n=t[r](e[r]);void 0!==n&&(i[r]=n)}catch(t){throw t.checkKey=r,t.checkValue=e[r],t}return i}static allowNull(t,e){return function(i){return null==i?e:t(i)}}static allowFalsish(t,e){return function(i){return i?t(i):e}}static arrayOf(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");const i=[];return e.forEach((function(e){i.push(t(e))})),i}}}function uo(t){return t&&"function"==typeof t.isCommunityResource}function co(t){return uo(t)&&t.isCommunityResource()}let fo=!1;function po(){fo||(fo=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var go=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const vo=new y(ao);function mo(t){return null==t?"null":(32!==R(t)&&vo.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function yo(t){for(t=t.slice();t.length>0&&null==t[t.length-1];)t.pop();return t.map((t=>{if(Array.isArray(t)){const e={};t.forEach((t=>{e[mo(t)]=!0}));const i=Object.keys(e);return i.sort(),i.join("|")}return mo(t)})).join("&")}function xo(t){if("string"==typeof t){if(32===R(t=t.toLowerCase()))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter:*:"+yo(t);if(ti.isForkEvent(t))throw vo.warn("not implemented"),new Error("not implemented");if(t&&"object"==typeof t)return"filter:"+(t.address||"*")+":"+yo(t.topics||[])}throw new Error("invalid event - "+t)}function bo(){return(new Date).getTime()}function wo(t){return new Promise((e=>{setTimeout(e,t)}))}const To=["block","network","pending","poll"];class So{constructor(t,e,i){Q(this,"tag",t),Q(this,"listener",e),Q(this,"once",i)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");return"tx"!==t[0]?null:t[1]}get filter(){const t=this.tag.split(":");if("filter"!==t[0])return null;const e=t[1],i=""===(r=t[2])?[]:r.split(/&/g).map((t=>{if(""===t)return[];const e=t.split("|").map((t=>"null"===t?null:t));return 1===e.length?e[0]:e}));var r;const n={};return i.length>0&&(n.topics=i),e&&"*"!==e&&(n.address=e),n}pollable(){return this.tag.indexOf(":")>=0||To.indexOf(this.tag)>=0}}const Eo={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Co(t){return B(H.from(t).toHexString(),32)}function _o(t){return dn.encode(_([t,L(yn(yn(t)),0,4)]))}const Ao=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),new RegExp("^(ipfs)://(.*)$","i"),new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Mo(t){try{return jt(Po(t))}catch(t){}return null}function Po(t){if("0x"===t)return null;const e=H.from(L(t,0,32)).toNumber(),i=H.from(L(t,e,e+32)).toNumber();return L(t,e+32,e+32+i)}class ko{constructor(t,e,i,r){Q(this,"provider",t),Q(this,"name",i),Q(this,"address",t.formatter.address(e)),Q(this,"_resolvedAddress",r)}_fetchBytes(t,e){return go(this,void 0,void 0,(function*(){const i={to:this.address,data:I([t,Ks(this.name),e||"0x"])};try{return Po(yield this.provider.call(i))}catch(t){return t.code,y.errors.CALL_EXCEPTION,null}}))}_getAddress(t,e){const i=Eo[String(t)];if(null==i&&vo.throwError(`unsupported coin type: ${t}`,y.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`}),"eth"===i.ilk)return this.provider.formatter.address(e);const r=C(e);if(null!=i.p2pkh){const t=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return _o(_([[i.p2pkh],"0x"+t[2]]))}}if(null!=i.p2sh){const t=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return _o(_([[i.p2sh],"0x"+t[2]]))}}if(null!=i.prefix){const t=r[1];let e=r[0];if(0===e?20!==t&&32!==t&&(e=-1):e=-1,e>=0&&r.length===2+t&&t>=1&&t<=75){const t=oo().toWords(r.slice(2));return t.unshift(e),oo().encode(i.prefix,t)}}return null}getAddress(t){return go(this,void 0,void 0,(function*(){if(null==t&&(t=60),60===t)try{const t={to:this.address,data:"0x3b3b57de"+Ks(this.name).substring(2)},e=yield this.provider.call(t);return"0x"===e||e===Es?null:this.provider.formatter.callAddress(e)}catch(t){if(t.code===y.errors.CALL_EXCEPTION)return null;throw t}const e=yield this._fetchBytes("0xf1cb7e06",Co(t));if(null==e||"0x"===e)return null;const i=this._getAddress(t,e);return null==i&&vo.throwError("invalid or unsupported coin data",y.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:e}),i}))}getAvatar(){return go(this,void 0,void 0,(function*(){const t=[];try{const e=yield this.getText("avatar");if(null==e)return null;for(let i=0;i<Ao.length;i++){const r=e.match(Ao[i]);if(null!=r)switch(r[1]){case"https":return t.push({type:"url",content:e}),{linkage:t,url:e};case"data":return t.push({type:"data",content:e}),{linkage:t,url:e};case"ipfs":return t.push({type:"ipfs",content:e}),{linkage:t,url:`https://gateway.ipfs.io/ipfs/${e.substring(7)}`};case"erc721":case"erc1155":{const i="erc721"===r[1]?"0xc87b56dd":"0x0e89341c";t.push({type:r[1],content:e});const n=this._resolvedAddress||(yield this.getAddress()),s=(r[2]||"").split("/");if(2!==s.length)return null;const o=yield this.provider.formatter.address(s[0]),a=B(H.from(s[1]).toHexString(),32);if("erc721"===r[1]){const e=this.provider.formatter.callAddress(yield this.provider.call({to:o,data:I(["0x6352211e",a])}));if(n!==e)return null;t.push({type:"owner",content:e})}else if("erc1155"===r[1]){const e=H.from(yield this.provider.call({to:o,data:I(["0x00fdd58e",B(n,32),a])}));if(e.isZero())return null;t.push({type:"balance",content:e.toString()})}const h={to:this.provider.formatter.address(s[0]),data:I([i,a])};let l=Mo(yield this.provider.call(h));if(null==l)return null;t.push({type:"metadata-url",content:l}),"erc1155"===r[1]&&(l=l.replace("{id}",a.substring(2)));const u=yield ro(l);return u&&"string"==typeof u.image&&u.image.match(/^(https:\/\/|data:)/i)?(t.push({type:"metadata",content:JSON.stringify(u)}),t.push({type:"url",content:u.image}),{linkage:t,url:u.image}):null}}}}catch(t){}return null}))}getContentHash(){return go(this,void 0,void 0,(function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(null==t||"0x"===t)return null;const e=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t=parseInt(e[3],16);if(e[4].length===2*t)return"ipfs://"+dn.encode("0x"+e[1])}const i=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);return i&&64===i[1].length?"bzz://"+i[1]:vo.throwError("invalid or unsupported content hash data",y.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})}))}getText(t){return go(this,void 0,void 0,(function*(){let e=Xt(t);e=_([Co(64),Co(e.length),e]),e.length%32!=0&&(e=_([e,B("0x",32-t.length%32)]));const i=yield this._fetchBytes("0x59d1d43c",O(e));return null==i||"0x"===i?null:jt(i)}))}}let Oo=null,Ro=1;class Lo extends ei{constructor(t){if(vo.checkNew(new.target,ei),super(),this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),Q(this,"anyNetwork","any"===t),this.anyNetwork&&(t=this.detectNetwork()),t instanceof Promise)this._networkPromise=t,t.catch((t=>{})),this._ready().catch((t=>{}));else{const e=tt(new.target,"getNetwork")(t);e?(Q(this,"_network",e),this.emit("network",e,null)):vo.throwArgumentError("invalid network","network",t)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return go(this,void 0,void 0,(function*(){if(null==this._network){let t=null;if(this._networkPromise)try{t=yield this._networkPromise}catch(t){}null==t&&(t=yield this.detectNetwork()),t||vo.throwError("no network detected",y.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:Q(this,"_network",t),this.emit("network",t,null))}return this._network}))}get ready(){return no((()=>this._ready().then((t=>t),(t=>{if(t.code!==y.errors.NETWORK_ERROR||"noNetwork"!==t.event)throw t}))))}static getFormatter(){return null==Oo&&(Oo=new lo),Oo}static getNetwork(t){return Ls(null==t?"homestead":t)}_getInternalBlockNumber(t){return go(this,void 0,void 0,(function*(){if(yield this._ready(),t>0)for(;this._internalBlockNumber;){const e=this._internalBlockNumber;try{const i=yield e;if(bo()-i.respTime<=t)return i.blockNumber;break}catch(t){if(this._internalBlockNumber===e)break}}const e=bo(),i=et({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((t=>null),(t=>t))}).then((({blockNumber:t,networkError:r})=>{if(r)throw this._internalBlockNumber===i&&(this._internalBlockNumber=null),r;const n=bo();return(t=H.from(t).toNumber())<this._maxInternalBlockNumber&&(t=this._maxInternalBlockNumber),this._maxInternalBlockNumber=t,this._setFastBlockNumber(t),{blockNumber:t,reqTime:e,respTime:n}}));return this._internalBlockNumber=i,i.catch((t=>{this._internalBlockNumber===i&&(this._internalBlockNumber=null)})),(yield i).blockNumber}))}poll(){return go(this,void 0,void 0,(function*(){const t=Ro++,e=[];let i=null;try{i=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(t){return void this.emit("error",t)}if(this._setFastBlockNumber(i),this.emit("poll",t,i),i!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=i-1),Math.abs(this._emitted.block-i)>1e3)vo.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${i})`),this.emit("error",vo.makeError("network block skew detected",y.errors.NETWORK_ERROR,{blockNumber:i,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",i);else for(let t=this._emitted.block+1;t<=i;t++)this.emit("block",t);this._emitted.block!==i&&(this._emitted.block=i,Object.keys(this._emitted).forEach((t=>{if("block"===t)return;const e=this._emitted[t];"pending"!==e&&i-e>12&&delete this._emitted[t]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=i-1),this._events.forEach((t=>{switch(t.type){case"tx":{const i=t.hash;let r=this.getTransactionReceipt(i).then((t=>t&&null!=t.blockNumber?(this._emitted["t:"+i]=t.blockNumber,this.emit(i,t),null):null)).catch((t=>{this.emit("error",t)}));e.push(r);break}case"filter":{const r=t.filter;r.fromBlock=this._lastBlockNumber+1,r.toBlock=i;const n=this.getLogs(r).then((t=>{0!==t.length&&t.forEach((t=>{this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(r,t)}))})).catch((t=>{this.emit("error",t)}));e.push(n);break}}})),this._lastBlockNumber=i,Promise.all(e).then((()=>{this.emit("didPoll",t)})).catch((t=>{this.emit("error",t)}))}else this.emit("didPoll",t)}))}resetEventsBlock(t){this._lastBlockNumber=t-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return go(this,void 0,void 0,(function*(){return vo.throwError("provider does not support network detection",y.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return go(this,void 0,void 0,(function*(){const t=yield this._ready(),e=yield this.detectNetwork();if(t.chainId!==e.chainId){if(this.anyNetwork)return this._network=e,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",e,t),yield wo(0),this._network;const i=vo.makeError("underlying network changed",y.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:e});throw this.emit("error",i),i}return t}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((t=>{this._setFastBlockNumber(t)}),(t=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(t){t&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if("number"!=typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const t=bo();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((t=>((null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=bo(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))}waitForTransaction(t,e,i){return go(this,void 0,void 0,(function*(){return this._waitForTransaction(t,null==e?1:e,i||0,null)}))}_waitForTransaction(t,e,i,r){return go(this,void 0,void 0,(function*(){const n=yield this.getTransactionReceipt(t);return(n?n.confirmations:0)>=e?n:new Promise(((n,s)=>{const o=[];let a=!1;const h=function(){return!!a||(a=!0,o.forEach((t=>{t()})),!1)},l=t=>{t.confirmations<e||h()||n(t)};if(this.on(t,l),o.push((()=>{this.removeListener(t,l)})),r){let i=r.startBlock,n=null;const l=o=>go(this,void 0,void 0,(function*(){a||(yield wo(1e3),this.getTransactionCount(r.from).then((u=>go(this,void 0,void 0,(function*(){if(!a){if(u<=r.nonce)i=o;else{{const e=yield this.getTransaction(t);if(e&&null!=e.blockNumber)return}for(null==n&&(n=i-3,n<r.startBlock&&(n=r.startBlock));n<=o;){if(a)return;const i=yield this.getBlockWithTransactions(n);for(let n=0;n<i.transactions.length;n++){const o=i.transactions[n];if(o.hash===t)return;if(o.from===r.from&&o.nonce===r.nonce){if(a)return;const i=yield this.waitForTransaction(o.hash,e);if(h())return;let n="replaced";return o.data===r.data&&o.to===r.to&&o.value.eq(r.value)?n="repriced":"0x"===o.data&&o.from===o.to&&o.value.isZero()&&(n="cancelled"),void s(vo.makeError("transaction was replaced",y.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:this._wrapTransaction(o),hash:t,receipt:i}))}}n++}}a||this.once("block",l)}}))),(t=>{a||this.once("block",l)})))}));if(a)return;this.once("block",l),o.push((()=>{this.removeListener("block",l)}))}if("number"==typeof i&&i>0){const t=setTimeout((()=>{h()||s(vo.makeError("timeout exceeded",y.errors.TIMEOUT,{timeout:i}))}),i);t.unref&&t.unref(),o.push((()=>{clearTimeout(t)}))}}))}))}getBlockNumber(){return go(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return H.from(t)}catch(e){return vo.throwError("bad result from backend",y.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e})}}))}getBalance(t,e){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const i=yield et({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),r=yield this.perform("getBalance",i);try{return H.from(r)}catch(t){return vo.throwError("bad result from backend",y.errors.SERVER_ERROR,{method:"getBalance",params:i,result:r,error:t})}}))}getTransactionCount(t,e){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const i=yield et({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),r=yield this.perform("getTransactionCount",i);try{return H.from(r).toNumber()}catch(t){return vo.throwError("bad result from backend",y.errors.SERVER_ERROR,{method:"getTransactionCount",params:i,result:r,error:t})}}))}getCode(t,e){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const i=yield et({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),r=yield this.perform("getCode",i);try{return O(r)}catch(t){return vo.throwError("bad result from backend",y.errors.SERVER_ERROR,{method:"getCode",params:i,result:r,error:t})}}))}getStorageAt(t,e,i){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield et({address:this._getAddress(t),blockTag:this._getBlockTag(i),position:Promise.resolve(e).then((t=>F(t)))}),n=yield this.perform("getStorageAt",r);try{return O(n)}catch(t){return vo.throwError("bad result from backend",y.errors.SERVER_ERROR,{method:"getStorageAt",params:r,result:n,error:t})}}))}_wrapTransaction(t,e,i){if(null!=e&&32!==R(e))throw new Error("invalid response - sendTransaction");const r=t;return null!=e&&t.hash!==e&&vo.throwError("Transaction hash mismatch from Provider.sendTransaction.",y.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),r.wait=(e,r)=>go(this,void 0,void 0,(function*(){let n;null==e&&(e=1),null==r&&(r=0),0!==e&&null!=i&&(n={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:i});const s=yield this._waitForTransaction(t.hash,e,r,n);return null==s&&0===e?null:(this._emitted["t:"+t.hash]=s.blockNumber,0===s.status&&vo.throwError("transaction failed",y.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:s}),s)})),r}sendTransaction(t){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Promise.resolve(t).then((t=>O(t))),i=this.formatter.transaction(t);null==i.confirmations&&(i.confirmations=0);const r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const t=yield this.perform("sendTransaction",{signedTransaction:e});return this._wrapTransaction(i,t,r)}catch(t){throw t.transaction=i,t.transactionHash=i.hash,t}}))}_getTransactionRequest(t){return go(this,void 0,void 0,(function*(){const e=yield t,i={};return["from","to"].forEach((t=>{null!=e[t]&&(i[t]=Promise.resolve(e[t]).then((t=>t?this._getAddress(t):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((t=>{null!=e[t]&&(i[t]=Promise.resolve(e[t]).then((t=>t?H.from(t):null)))})),["type"].forEach((t=>{null!=e[t]&&(i[t]=Promise.resolve(e[t]).then((t=>null!=t?t:null)))})),e.accessList&&(i.accessList=this.formatter.accessList(e.accessList)),["data"].forEach((t=>{null!=e[t]&&(i[t]=Promise.resolve(e[t]).then((t=>t?O(t):null)))})),this.formatter.transactionRequest(yield et(i))}))}_getFilter(t){return go(this,void 0,void 0,(function*(){t=yield t;const e={};return null!=t.address&&(e.address=this._getAddress(t.address)),["blockHash","topics"].forEach((i=>{null!=t[i]&&(e[i]=t[i])})),["fromBlock","toBlock"].forEach((i=>{null!=t[i]&&(e[i]=this._getBlockTag(t[i]))})),this.formatter.filter(yield et(e))}))}call(t,e){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const i=yield et({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e)}),r=yield this.perform("call",i);try{return O(r)}catch(t){return vo.throwError("bad result from backend",y.errors.SERVER_ERROR,{method:"call",params:i,result:r,error:t})}}))}estimateGas(t){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield et({transaction:this._getTransactionRequest(t)}),i=yield this.perform("estimateGas",e);try{return H.from(i)}catch(t){return vo.throwError("bad result from backend",y.errors.SERVER_ERROR,{method:"estimateGas",params:e,result:i,error:t})}}))}_getAddress(t){return go(this,void 0,void 0,(function*(){"string"!=typeof(t=yield t)&&vo.throwArgumentError("invalid address or ENS name","name",t);const e=yield this.resolveName(t);return null==e&&vo.throwError("ENS name not configured",y.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`}),e}))}_getBlock(t,e){return go(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;let i=-128;const r={includeTransactions:!!e};if(P(t,32))r.blockHash=t;else try{r.blockTag=yield this._getBlockTag(t),P(r.blockTag)&&(i=parseInt(r.blockTag.substring(2),16))}catch(e){vo.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}return no((()=>go(this,void 0,void 0,(function*(){const t=yield this.perform("getBlock",r);if(null==t)return null!=r.blockHash&&null==this._emitted["b:"+r.blockHash]||null!=r.blockTag&&i>this._emitted.block?null:void 0;if(e){let e=null;for(let i=0;i<t.transactions.length;i++){const r=t.transactions[i];if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations){null==e&&(e=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let t=e-r.blockNumber+1;t<=0&&(t=1),r.confirmations=t}}const i=this.formatter.blockWithTransactions(t);return i.transactions=i.transactions.map((t=>this._wrapTransaction(t))),i}return this.formatter.block(t)}))),{oncePoll:this})}))}getBlock(t){return this._getBlock(t,!1)}getBlockWithTransactions(t){return this._getBlock(t,!0)}getTransaction(t){return go(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return no((()=>go(this,void 0,void 0,(function*(){const i=yield this.perform("getTransaction",e);if(null==i)return null==this._emitted["t:"+t]?null:void 0;const r=this.formatter.transactionResponse(i);if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-r.blockNumber+1;t<=0&&(t=1),r.confirmations=t}return this._wrapTransaction(r)}))),{oncePoll:this})}))}getTransactionReceipt(t){return go(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return no((()=>go(this,void 0,void 0,(function*(){const i=yield this.perform("getTransactionReceipt",e);if(null==i)return null==this._emitted["t:"+t]?null:void 0;if(null==i.blockHash)return;const r=this.formatter.receipt(i);if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-r.blockNumber+1;t<=0&&(t=1),r.confirmations=t}return r}))),{oncePoll:this})}))}getLogs(t){return go(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield et({filter:this._getFilter(t)}),i=yield this.perform("getLogs",e);return i.forEach((t=>{null==t.removed&&(t.removed=!1)})),lo.arrayOf(this.formatter.filterLog.bind(this.formatter))(i)}))}getEtherPrice(){return go(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(t){return go(this,void 0,void 0,(function*(){if("number"==typeof(t=yield t)&&t<0){t%1&&vo.throwArgumentError("invalid BlockTag","blockTag",t);let e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return e+=t,e<0&&(e=0),this.formatter.blockTag(e)}return this.formatter.blockTag(t)}))}getResolver(t){return go(this,void 0,void 0,(function*(){try{const e=yield this._getResolver(t);return null==e?null:new ko(this,e,t)}catch(t){return t.code,y.errors.CALL_EXCEPTION,null}}))}_getResolver(t){return go(this,void 0,void 0,(function*(){const e=yield this.getNetwork();e.ensAddress||vo.throwError("network does not support ENS",y.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:e.name});const i={to:e.ensAddress,data:"0x0178b8bf"+Ks(t).substring(2)};try{return this.formatter.callAddress(yield this.call(i))}catch(t){if(t.code===y.errors.CALL_EXCEPTION)return null;throw t}}))}resolveName(t){return go(this,void 0,void 0,(function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(e){if(P(t))throw e}"string"!=typeof t&&vo.throwArgumentError("invalid ENS name","name",t);const e=yield this.getResolver(t);return e?yield e.getAddress():null}))}lookupAddress(t){return go(this,void 0,void 0,(function*(){t=yield t;const e=(t=this.formatter.address(t)).substring(2).toLowerCase()+".addr.reverse",i=yield this._getResolver(e);if(!i)return null;let r=C(yield this.call({to:i,data:"0x691f3431"+Ks(e).substring(2)}));if(r.length<32||!H.from(r.slice(0,32)).eq(32))return null;if(r=r.slice(32),r.length<32)return null;const n=H.from(r.slice(0,32)).toNumber();if(r=r.slice(32),n>r.length)return null;const s=jt(r.slice(0,n));return(yield this.resolveName(s))!=t?null:s}))}getAvatar(t){return go(this,void 0,void 0,(function*(){let e=null;if(P(t)){const i=this.formatter.address(t),r=i.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r);if(!n)return null;e=new ko(this,n,"_",i)}else if(e=yield this.getResolver(t),!e)return null;const i=yield e.getAvatar();return null==i?null:i.url}))}perform(t,e){return vo.throwError(t+" not implemented",y.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_stopEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_addEventListener(t,e,i){const r=new So(xo(t),e,i);return this._events.push(r),this._startEvent(r),this}on(t,e){return this._addEventListener(t,e,!1)}once(t,e){return this._addEventListener(t,e,!0)}emit(t,...e){let i=!1,r=[],n=xo(t);return this._events=this._events.filter((t=>t.tag!==n||(setTimeout((()=>{t.listener.apply(this,e)}),0),i=!0,!t.once||(r.push(t),!1)))),r.forEach((t=>{this._stopEvent(t)})),i}listenerCount(t){if(!t)return this._events.length;let e=xo(t);return this._events.filter((t=>t.tag===e)).length}listeners(t){if(null==t)return this._events.map((t=>t.listener));let e=xo(t);return this._events.filter((t=>t.tag===e)).map((t=>t.listener))}off(t,e){if(null==e)return this.removeAllListeners(t);const i=[];let r=!1,n=xo(t);return this._events=this._events.filter((t=>t.tag!==n||t.listener!=e||!!r||(r=!0,i.push(t),!1))),i.forEach((t=>{this._stopEvent(t)})),this}removeAllListeners(t){let e=[];if(null==t)e=this._events,this._events=[];else{const i=xo(t);this._events=this._events.filter((t=>t.tag!==i||(e.push(t),!1)))}return e.forEach((t=>{this._stopEvent(t)})),this}}var Io=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const Fo=new y(ao),Do=["call","estimateGas"];function Bo(t,e,i){if("call"===t&&e.code===y.errors.SERVER_ERROR){const t=e.error;if(t&&t.message.match("reverted")&&P(t.data))return t.data;Fo.throwError("missing revert data in call exception",y.errors.CALL_EXCEPTION,{error:e,data:"0x"})}let r=e.message;e.code===y.errors.SERVER_ERROR&&e.error&&"string"==typeof e.error.message?r=e.error.message:"string"==typeof e.body?r=e.body:"string"==typeof e.responseText&&(r=e.responseText),r=(r||"").toLowerCase();const n=i.transaction||i.signedTransaction;throw r.match(/insufficient funds|base fee exceeds gas limit/)&&Fo.throwError("insufficient funds for intrinsic transaction cost",y.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),r.match(/nonce too low/)&&Fo.throwError("nonce has already been used",y.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),r.match(/replacement transaction underpriced/)&&Fo.throwError("replacement fee too low",y.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),r.match(/only replay-protected/)&&Fo.throwError("legacy pre-eip-155 transactions not supported",y.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),Do.indexOf(t)>=0&&r.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&Fo.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",y.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function No(t){return new Promise((function(e){setTimeout(e,t)}))}function zo(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Uo(t){return t?t.toLowerCase():t}const Yo={};class Xo extends oi{constructor(t,e,i){if(Fo.checkNew(new.target,Xo),super(),t!==Yo)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Q(this,"provider",e),null==i&&(i=0),"string"==typeof i?(Q(this,"_address",this.provider.formatter.address(i)),Q(this,"_index",null)):"number"==typeof i?(Q(this,"_index",i),Q(this,"_address",null)):Fo.throwArgumentError("invalid address or index","addressOrIndex",i)}connect(t){return Fo.throwError("cannot alter JSON-RPC Signer connection",y.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Go(Yo,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((t=>(t.length<=this._index&&Fo.throwError("unknown account #"+this._index,y.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(t[this._index]))))}sendUncheckedTransaction(t){t=rt(t);const e=this.getAddress().then((t=>(t&&(t=t.toLowerCase()),t)));if(null==t.gasLimit){const i=rt(t);i.from=e,t.gasLimit=this.provider.estimateGas(i)}return null!=t.to&&(t.to=Promise.resolve(t.to).then((t=>Io(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.provider.resolveName(t);return null==e&&Fo.throwArgumentError("provided ENS name resolves to null","tx.to",t),e}))))),et({tx:et(t),sender:e}).then((({tx:e,sender:i})=>{null!=e.from?e.from.toLowerCase()!==i&&Fo.throwArgumentError("from address mismatch","transaction",t):e.from=i;const r=this.provider.constructor.hexlifyTransaction(e,{from:!0});return this.provider.send("eth_sendTransaction",[r]).then((t=>t),(t=>Bo("sendTransaction",t,r)))}))}signTransaction(t){return Fo.throwError("signing transactions is unsupported",y.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return Io(this,void 0,void 0,(function*(){const e=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),i=yield this.sendUncheckedTransaction(t);try{return yield no((()=>Io(this,void 0,void 0,(function*(){const t=yield this.provider.getTransaction(i);if(null!==t)return this.provider._wrapTransaction(t,i,e)}))),{oncePoll:this.provider})}catch(t){throw t.transactionHash=i,t}}))}signMessage(t){return Io(this,void 0,void 0,(function*(){const e="string"==typeof t?Xt(t):t,i=yield this.getAddress();return yield this.provider.send("personal_sign",[O(e),i.toLowerCase()])}))}_legacySignMessage(t){return Io(this,void 0,void 0,(function*(){const e="string"==typeof t?Xt(t):t,i=yield this.getAddress();return yield this.provider.send("eth_sign",[i.toLowerCase(),O(e)])}))}_signTypedData(t,e,i){return Io(this,void 0,void 0,(function*(){const r=yield un.resolveNames(t,e,i,(t=>this.provider.resolveName(t))),n=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[n.toLowerCase(),JSON.stringify(un.getPayload(r.domain,e,r.value))])}))}unlock(t){return Io(this,void 0,void 0,(function*(){const e=this.provider,i=yield this.getAddress();return e.send("personal_unlockAccount",[i.toLowerCase(),t,null])}))}}class Go extends Xo{sendTransaction(t){return this.sendUncheckedTransaction(t).then((t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:e=>this.provider.waitForTransaction(t,e)})))}}const Wo={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Vo extends Lo{constructor(t,e){Fo.checkNew(new.target,Vo);let i=e;null==i&&(i=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then((e=>{t(e)}),(t=>{e(t)}))}),0)}))),super(i),t||(t=tt(this.constructor,"defaultUrl")()),Q(this,"connection","string"==typeof t?Object.freeze({url:t}):Object.freeze(rt(t))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Io(this,void 0,void 0,(function*(){yield No(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch(e){try{t=yield this.send("net_version",[])}catch(t){}}if(null!=t){const e=tt(this.constructor,"getNetwork");try{return e(H.from(t).toNumber())}catch(e){return Fo.throwError("could not detect network",y.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}}return Fo.throwError("could not detect network",y.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(t){return new Xo(Yo,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((t=>t.map((t=>this.formatter.address(t)))))}send(t,e){const i={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:at(i),provider:this});const r=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(r&&this._cache[t])return this._cache[t];const n=ro(this.connection,JSON.stringify(i),zo).then((t=>(this.emit("debug",{action:"response",request:i,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",error:t,request:i,provider:this}),t}));return r&&(this._cache[t]=n,setTimeout((()=>{this._cache[t]=null}),0)),n}prepareRequest(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Uo(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Uo(e.address),e.blockTag]];case"getCode":return["eth_getCode",[Uo(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Uo(e.address),e.position,e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":return e.blockTag?["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]:e.blockHash?["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":return["eth_call",[tt(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0}),e.blockTag]];case"estimateGas":return["eth_estimateGas",[tt(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0})]];case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=Uo(e.filter.address)),["eth_getLogs",[e.filter]]}return null}perform(t,e){return Io(this,void 0,void 0,(function*(){if("call"===t||"estimateGas"===t){const t=e.transaction;if(t&&null!=t.type&&H.from(t.type).isZero()&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const i=yield this.getFeeData();null==i.maxFeePerGas&&null==i.maxPriorityFeePerGas&&((e=rt(e)).transaction=rt(t),delete e.transaction.type)}}const i=this.prepareRequest(t,e);null==i&&Fo.throwError(t+" not implemented",y.errors.NOT_IMPLEMENTED,{operation:t});try{return yield this.send(i[0],i[1])}catch(i){return Bo(t,i,e)}}))}_startEvent(t){"pending"===t.tag&&this._startPending(),super._startEvent(t)}_startPending(){if(null!=this._pendingFilter)return;const t=this,e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e,e.then((function(i){return function r(){t.send("eth_getFilterChanges",[i]).then((function(i){if(t._pendingFilter!=e)return null;let r=Promise.resolve();return i.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",r=r.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),r.then((function(){return No(1e3)}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){r()}),0),null;t.send("eth_uninstallFilter",[i])})).catch((t=>{}))}(),i})).catch((t=>{}))}_stopEvent(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(t)}static hexlifyTransaction(t,e){const i=rt(Wo);if(e)for(const t in e)e[t]&&(i[t]=!0);it(t,i);const r={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(null==t[e])return;const i=F(t[e]);"gasLimit"===e&&(e="gas"),r[e]=i})),["from","to","data"].forEach((function(e){null!=t[e]&&(r[e]=O(t[e]))})),t.accessList&&(r.accessList=ur(t.accessList)),r}}let jo=null;try{if(jo=WebSocket,null==jo)throw new Error("inject please")}catch(t){const e=new y(ao);jo=function(){e.throwError("WebSockets not supported in this environment",y.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ho=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const qo=new y(ao);let Ko=1;class Zo extends Vo{constructor(t,e){"any"===e&&qo.throwError("WebSocketProvider does not support 'any' network yet",y.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super(t,e),this._pollingInterval=-1,this._wsReady=!1,Q(this,"_websocket",new jo(this.connection.url)),Q(this,"_requests",{}),Q(this,"_subs",{}),Q(this,"_subIds",{}),Q(this,"_detectNetwork",super.detectNetwork()),this._websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach((t=>{this._websocket.send(this._requests[t].payload)}))},this._websocket.onmessage=t=>{const e=t.data,i=JSON.parse(e);if(null!=i.id){const t=String(i.id),r=this._requests[t];if(delete this._requests[t],void 0!==i.result)r.callback(null,i.result),this.emit("debug",{action:"response",request:JSON.parse(r.payload),response:i.result,provider:this});else{let t=null;i.error?(t=new Error(i.error.message||"unknown error"),Q(t,"code",i.error.code||null),Q(t,"response",e)):t=new Error("unknown error"),r.callback(t,void 0),this.emit("debug",{action:"response",error:t,request:JSON.parse(r.payload),provider:this})}}else if("eth_subscription"===i.method){const t=this._subs[i.params.subscription];t&&t.processFunc(i.params.result)}else console.warn("this should not happen")};const i=setInterval((()=>{this.emit("poll")}),1e3);i.unref&&i.unref()}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){qo.throwError("cannot reset events block on WebSocketProvider",y.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){qo.throwError("cannot set polling interval on WebSocketProvider",y.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ho(this,void 0,void 0,(function*(){return null}))}set polling(t){t&&qo.throwError("cannot set polling on WebSocketProvider",y.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const i=Ko++;return new Promise(((r,n)=>{const s=JSON.stringify({method:t,params:e,id:i,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(s),provider:this}),this._requests[String(i)]={callback:function(t,e){return t?n(t):r(e)},payload:s},this._wsReady&&this._websocket.send(s)}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,i){return Ho(this,void 0,void 0,(function*(){let r=this._subIds[t];null==r&&(r=Promise.all(e).then((t=>this.send("eth_subscribe",t))),this._subIds[t]=r);const n=yield r;this._subs[n]={tag:t,processFunc:i}}))}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],(t=>{const e=H.from(t.number).toNumber();this._emitted.block=e,this.emit("block",e)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(t=>{this.emit("pending",t)}));break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],(e=>{null==e.removed&&(e.removed=!1),this.emit(t.filter,this.formatter.filterLog(e))}));break;case"tx":{const e=t=>{const e=t.hash;this.getTransactionReceipt(e).then((t=>{t&&this.emit(e,t)}))};e(t),this._subscribe("tx",["newHeads"],(t=>{this._events.filter((t=>"tx"===t.type)).forEach(e)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t)}}_stopEvent(t){let e=t.tag;if("tx"===t.type){if(this._events.filter((t=>"tx"===t.type)).length)return;e="tx"}else if(this.listenerCount(t.event))return;const i=this._subIds[e];i&&(delete this._subIds[e],i.then((t=>{this._subs[t]&&(delete this._subs[t],this.send("eth_unsubscribe",[t]))})))}destroy(){return Ho(this,void 0,void 0,(function*(){this._websocket.readyState===jo.CONNECTING&&(yield new Promise((t=>{this._websocket.onopen=function(){t(!0)},this._websocket.onerror=function(){t(!1)}}))),this._websocket.close(1e3)}))}}const Jo=new y(ao);class $o extends Vo{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return e=this,i=void 0,n=function*(){let e=this.network;return null==e&&(e=yield t.detectNetwork.call(this),e||Jo.throwError("no network detected",y.errors.UNKNOWN_ERROR,{}),null==this._network&&(Q(this,"_network",e),this.emit("network",e,null))),e},new((r=void 0)||(r=Promise))((function(t,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(o,a)}h((n=n.apply(e,i||[])).next())}));var e,i,r,n}}class Qo extends $o{constructor(t,e){Jo.checkAbstract(new.target,Qo),t=tt(new.target,"getNetwork")(t),e=tt(new.target,"getApiKey")(e),super(tt(new.target,"getUrl")(t,e),t),"string"==typeof e?Q(this,"apiKey",e):null!=e&&Object.keys(e).forEach((t=>{Q(this,t,e[t])}))}_startPending(){Jo.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(t){return Jo.throwError("API provider does not support signing",y.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return Jo.throwError("not implemented; sub-classes must override getUrl",y.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const ta=new y(ao),ea="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class ia extends Zo{constructor(t,e){const i=new ra(t,e);super(i.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),i.network),Q(this,"apiKey",i.apiKey)}isCommunityResource(){return this.apiKey===ea}}class ra extends Qo{static getWebSocketProvider(t,e){return new ia(t,e)}static getApiKey(t){return null==t?ea:(t&&"string"!=typeof t&&ta.throwArgumentError("invalid apiKey","apiKey",t),t)}static getUrl(t,e){let i=null;switch(t.name){case"homestead":i="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":i="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":i="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":i="eth-goerli.alchemyapi.io/v2/";break;case"kovan":i="eth-kovan.alchemyapi.io/v2/";break;case"matic":i="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":i="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":i="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":i="arb-rinkeby.g.alchemy.com/v2/";break;case"optimism":i="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":i="opt-kovan.g.alchemy.com/v2/";break;default:ta.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+i+e,throttleCallback:(t,i)=>(e===ea&&po(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ea}}const na=new y(ao);class sa extends Qo{static getApiKey(t){return null!=t&&na.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}static getUrl(t,e){let i=null;return"homestead"===t.name?i="https://cloudflare-eth.com/":na.throwArgumentError("unsupported network","network",arguments[0]),i}perform(t,e){const i=Object.create(null,{perform:{get:()=>super.perform}});return r=this,n=void 0,o=function*(){return"getBlockNumber"===t?(yield i.perform.call(this,"getBlock",{blockTag:"latest"})).number:i.perform.call(this,t,e)},new((s=void 0)||(s=Promise))((function(t,e){function i(t){try{h(o.next(t))}catch(t){e(t)}}function a(t){try{h(o.throw(t))}catch(t){e(t)}}function h(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(t){t(r)}))).then(i,a)}h((o=o.apply(r,n||[])).next())}));var r,n,s,o}}var oa=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const aa=new y(ao);function ha(t){const e={};for(let i in t){if(null==t[i])continue;let r=t[i];"type"===i&&0===r||(r={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[i]?F(O(r)):"accessList"===i?"["+ur(r).map((t=>`{address:"${t.address}",storageKeys:["${t.storageKeys.join('","')}"]}`)).join(",")+"]":O(r),e[i]=r)}return e}function la(t){if(0==t.status&&("No records found"===t.message||"No transactions found"===t.message))return t.result;if(1!=t.status||"OK"!=t.message){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function ua(t){if(t&&0==t.status&&"NOTOK"==t.message&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if("2.0"!=t.jsonrpc){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function ca(t){if("pending"===t)throw new Error("pending not supported");return"latest"===t?t:parseInt(t.substring(2),16)}const da="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function fa(t,e,i){if("call"===t&&e.code===y.errors.SERVER_ERROR){const t=e.error;if(t&&(t.message.match(/reverted/i)||t.message.match(/VM execution error/i))){let i=t.data;if(i&&(i="0x"+i.replace(/^.*0x/i,"")),P(i))return i;aa.throwError("missing revert data in call exception",y.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===y.errors.SERVER_ERROR&&(e.error&&"string"==typeof e.error.message?r=e.error.message:"string"==typeof e.body?r=e.body:"string"==typeof e.responseText&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&aa.throwError("insufficient funds for intrinsic transaction cost",y.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:i}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&aa.throwError("nonce has already been used",y.errors.NONCE_EXPIRED,{error:e,method:t,transaction:i}),r.match(/another transaction with same nonce/)&&aa.throwError("replacement fee too low",y.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:i}),r.match(/execution failed due to an exception|execution reverted/)&&aa.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",y.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:i}),e}class pa extends Lo{constructor(t,e){aa.checkNew(new.target,pa),super(t),Q(this,"baseUrl",this.getBaseUrl()),Q(this,"apiKey",e||da)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io"}return aa.throwArgumentError("unsupported network","network",name)}getUrl(t,e){const i=Object.keys(e).reduce(((t,i)=>{const r=e[i];return null!=r&&(t+=`&${i}=${r}`),t}),""),r=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${t}${i}${r}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}fetch(t,e,i){return oa(this,void 0,void 0,(function*(){const r=i?this.getPostUrl():this.getUrl(t,e),n=i?this.getPostData(t,e):null,s="proxy"===t?ua:la;this.emit("debug",{action:"request",request:r,provider:this});const o={url:r,throttleSlotInterval:1e3,throttleCallback:(t,e)=>(this.isCommunityResource()&&po(),Promise.resolve(!0))};let a=null;n&&(o.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},a=Object.keys(n).map((t=>`${t}=${n[t]}`)).join("&"));const h=yield ro(o,a,s||ua);return this.emit("debug",{action:"response",request:r,response:at(h),provider:this}),h}))}detectNetwork(){return oa(this,void 0,void 0,(function*(){return this.network}))}perform(t,e){const i=Object.create(null,{perform:{get:()=>super.perform}});return oa(this,void 0,void 0,(function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch((t=>fa("sendTransaction",t,e.signedTransaction)));case"getBlock":if(e.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if("latest"!==e.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const t=ha(e.transaction);t.module="proxy",t.action="eth_call";try{return yield this.fetch("proxy",t,!0)}catch(t){return fa("call",t,e.transaction)}}case"estimateGas":{const t=ha(e.transaction);t.module="proxy",t.action="eth_estimateGas";try{return yield this.fetch("proxy",t,!0)}catch(t){return fa("estimateGas",t,e.transaction)}}case"getLogs":{const t={action:"getLogs"};if(e.filter.fromBlock&&(t.fromBlock=ca(e.filter.fromBlock)),e.filter.toBlock&&(t.toBlock=ca(e.filter.toBlock)),e.filter.address&&(t.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&aa.throwError("unsupported topic count",y.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),1===e.filter.topics.length)){const i=e.filter.topics[0];"string"==typeof i&&66===i.length||aa.throwError("unsupported topic format",y.errors.UNSUPPORTED_OPERATION,{topic0:i}),t.topic0=i}const i=yield this.fetch("logs",t);let r={};for(let t=0;t<i.length;t++){const e=i[t];if(null==e.blockHash){if(null==r[e.blockNumber]){const t=yield this.getBlock(e.blockNumber);t&&(r[e.blockNumber]=t.hash)}e.blockHash=r[e.blockNumber]}}return i}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return i.perform.call(this,t,e)}))}getHistory(t,e,i){return oa(this,void 0,void 0,(function*(){const r={action:"txlist",address:yield this.resolveName(t),startblock:null==e?0:e,endblock:null==i?99999999:i,sort:"asc"};return(yield this.fetch("account",r)).map((t=>{["contractAddress","to"].forEach((function(e){""==t[e]&&delete t[e]})),null==t.creates&&null!=t.contractAddress&&(t.creates=t.contractAddress);const e=this.formatter.transactionResponse(t);return t.timeStamp&&(e.timestamp=parseInt(t.timeStamp)),e}))}))}isCommunityResource(){return this.apiKey===da}}function ga(t){for(let e=(t=t.slice()).length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t}var va=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};const ma=new y(ao);function ya(){return(new Date).getTime()}function xa(t){let e=null;for(let i=0;i<t.length;i++){const r=t[i];if(null==r)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||null==e.ensAddress&&null==r.ensAddress)||ma.throwArgumentError("provider mismatch","networks",t):e=r}return e}function ba(t,e){t=t.slice().sort();const i=Math.floor(t.length/2);if(t.length%2)return t[i];const r=t[i-1],n=t[i];return null!=e&&Math.abs(r-n)>e?null:(r+n)/2}function wa(t){if(null===t)return"null";if("number"==typeof t||"boolean"==typeof t)return JSON.stringify(t);if("string"==typeof t)return t;if(H.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map((t=>wa(t))));if("object"==typeof t){const e=Object.keys(t);return e.sort(),"{"+e.map((e=>{let i=t[e];return i="function"==typeof i?"[function]":wa(i),JSON.stringify(e)+":"+i})).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let Ta=1;function Sa(t){let e=null,i=null,r=new Promise((r=>{e=function(){i&&(clearTimeout(i),i=null),r()},i=setTimeout(e,t)}));return{cancel:e,getPromise:function(){return r},wait:t=>(r=r.then(t),r)}}const Ea=[y.errors.CALL_EXCEPTION,y.errors.INSUFFICIENT_FUNDS,y.errors.NONCE_EXPIRED,y.errors.REPLACEMENT_UNDERPRICED,y.errors.UNPREDICTABLE_GAS_LIMIT],Ca=["address","args","errorArgs","errorSignature","method","transaction"];function _a(t,e){const i={weight:t.weight};return Object.defineProperty(i,"provider",{get:()=>t.provider}),t.start&&(i.start=t.start),e&&(i.duration=e-t.start),t.done&&(t.error?i.error=t.error:i.result=t.result||null),i}function Aa(t,e){return va(this,void 0,void 0,(function*(){const i=t.provider;return null!=i.blockNumber&&i.blockNumber>=e||-1===e?i:no((()=>new Promise(((r,n)=>{setTimeout((function(){return i.blockNumber>=e?r(i):t.cancelled?r(null):r(void 0)}),0)}))),{oncePoll:i})}))}function Ma(t,e,i,r){return va(this,void 0,void 0,(function*(){let n=t.provider;switch(i){case"getBlockNumber":case"getGasPrice":return n[i]();case"getEtherPrice":if(n.getEtherPrice)return n.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&P(r.blockTag)&&(n=yield Aa(t,e)),n[i](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&P(r.blockTag)&&(n=yield Aa(t,e)),n.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&P(r.blockTag)&&(n=yield Aa(t,e)),n[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&P(r.blockTag)&&(n=yield Aa(t,e)),n[i](r.transaction);case"getTransaction":case"getTransactionReceipt":return n[i](r.transactionHash);case"getLogs":{let i=r.filter;return(i.fromBlock&&P(i.fromBlock)||i.toBlock&&P(i.toBlock))&&(n=yield Aa(t,e)),n.getLogs(i)}}return ma.throwError("unknown method error",y.errors.UNKNOWN_ERROR,{method:i,params:r})}))}class Pa extends Lo{constructor(t,e){ma.checkNew(new.target,Pa),0===t.length&&ma.throwArgumentError("missing providers","providers",t);const i=t.map(((t,e)=>{if(ei.isProvider(t)){const e=co(t)?2e3:750,i=1;return Object.freeze({provider:t,weight:1,stallTimeout:e,priority:i})}const i=rt(t);null==i.priority&&(i.priority=1),null==i.stallTimeout&&(i.stallTimeout=co(t)?2e3:750),null==i.weight&&(i.weight=1);const r=i.weight;return(r%1||r>512||r<1)&&ma.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${e}].weight`,r),Object.freeze(i)})),r=i.reduce(((t,e)=>t+e.weight),0);null==e?e=r/2:e>r&&ma.throwArgumentError("quorum will always fail; larger than total weight","quorum",e);let n=xa(i.map((t=>t.provider.network)));null==n&&(n=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then(t,e)}),0)}))),super(n),Q(this,"providerConfigs",Object.freeze(i)),Q(this,"quorum",e),this._highestBlockNumber=-1}detectNetwork(){return va(this,void 0,void 0,(function*(){return xa(yield Promise.all(this.providerConfigs.map((t=>t.provider.getNetwork()))))}))}perform(t,e){return va(this,void 0,void 0,(function*(){if("sendTransaction"===t){const t=yield Promise.all(this.providerConfigs.map((t=>t.provider.sendTransaction(e.signedTransaction).then((t=>t.hash),(t=>t)))));for(let e=0;e<t.length;e++){const i=t[e];if("string"==typeof i)return i}throw t[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==t&&(yield this.getBlockNumber());const i=function(t,e,i){let r=wa;switch(e){case"getBlockNumber":return function(e){const i=e.map((t=>t.result));let r=ba(e.map((t=>t.result)),2);if(null!=r)return r=Math.ceil(r),i.indexOf(r+1)>=0&&r++,r>=t._highestBlockNumber&&(t._highestBlockNumber=r),t._highestBlockNumber};case"getGasPrice":return function(t){const e=t.map((t=>t.result));return e.sort(),e[Math.floor(e.length/2)]};case"getEtherPrice":return function(t){return ba(t.map((t=>t.result)))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(t){return null==t?null:((t=rt(t)).confirmations=-1,wa(t))};break;case"getBlock":r=i.includeTransactions?function(t){return null==t?null:((t=rt(t)).transactions=t.transactions.map((t=>((t=rt(t)).confirmations=-1,t))),wa(t))}:function(t){return null==t?null:wa(t)};break;default:throw new Error("unknown method: "+e)}return function(t,e){return function(i){const r={};i.forEach((e=>{const i=t(e.result);r[i]||(r[i]={count:0,result:e.result}),r[i].count++}));const n=Object.keys(r);for(let t=0;t<n.length;t++){const i=r[n[t]];if(i.count>=e)return i.result}}}(r,t.quorum)}(this,t,e),r=ga(this.providerConfigs.map(rt));r.sort(((t,e)=>t.priority-e.priority));const n=this._highestBlockNumber;let s=0,o=!0;for(;;){const a=ya();let h=r.filter((t=>t.runner&&a-t.start<t.stallTimeout)).reduce(((t,e)=>t+e.weight),0);for(;h<this.quorum&&s<r.length;){const i=r[s++],o=Ta++;i.start=ya(),i.staller=Sa(i.stallTimeout),i.staller.wait((()=>{i.staller=null})),i.runner=Ma(i,n,t,e).then((r=>{i.done=!0,i.result=r,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:_a(i,ya()),request:{method:t,params:at(e)},provider:this})}),(r=>{i.done=!0,i.error=r,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:_a(i,ya()),request:{method:t,params:at(e)},provider:this})})),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:_a(i,null),request:{method:t,params:at(e)},provider:this}),h+=i.weight}const l=[];r.forEach((t=>{!t.done&&t.runner&&(l.push(t.runner),t.staller&&l.push(t.staller.getPromise()))})),l.length&&(yield Promise.race(l));const u=r.filter((t=>t.done&&null==t.error));if(u.length>=this.quorum){const t=i(u);if(void 0!==t)return r.forEach((t=>{t.staller&&t.staller.cancel(),t.cancelled=!0})),t;o||(yield Sa(100).getPromise()),o=!1}const c=r.reduce(((t,e)=>{if(!e.done||null==e.error)return t;const i=e.error.code;return Ea.indexOf(i)>=0&&(t[i]||(t[i]={error:e.error,weight:0}),t[i].weight+=e.weight),t}),{});if(Object.keys(c).forEach((t=>{const e=c[t];if(e.weight<this.quorum)return;r.forEach((t=>{t.staller&&t.staller.cancel(),t.cancelled=!0}));const i=e.error,n={};Ca.forEach((t=>{null!=i[t]&&(n[t]=i[t])})),ma.throwError(i.reason||i.message,t,n)})),0===r.filter((t=>!t.done)).length)break}return r.forEach((t=>{t.staller&&t.staller.cancel(),t.cancelled=!0})),ma.throwError("failed to meet quorum",y.errors.SERVER_ERROR,{method:t,params:e,results:r.map((t=>_a(t))),provider:this})}))}}const ka=null,Oa=new y(ao),Ra="84842078b09946638c03157f83405213";class La extends Zo{constructor(t,e){const i=new Ia(t,e),r=i.connection;r.password&&Oa.throwError("INFURA WebSocket project secrets unsupported",y.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(r.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),t),Q(this,"apiKey",i.projectId),Q(this,"projectId",i.projectId),Q(this,"projectSecret",i.projectSecret)}isCommunityResource(){return this.projectId===Ra}}class Ia extends Qo{static getWebSocketProvider(t,e){return new La(t,e)}static getApiKey(t){const e={apiKey:Ra,projectId:Ra,projectSecret:null};return null==t||("string"==typeof t?e.projectId=t:null!=t.projectSecret?(Oa.assertArgument("string"==typeof t.projectId,"projectSecret requires a projectId","projectId",t.projectId),Oa.assertArgument("string"==typeof t.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}static getUrl(t,e){let i=null;switch(t?t.name:"unknown"){case"homestead":i="mainnet.infura.io";break;case"ropsten":i="ropsten.infura.io";break;case"rinkeby":i="rinkeby.infura.io";break;case"kovan":i="kovan.infura.io";break;case"goerli":i="goerli.infura.io";break;case"matic":i="polygon-mainnet.infura.io";break;case"maticmum":i="polygon-mumbai.infura.io";break;case"optimism":i="optimism-mainnet.infura.io";break;case"optimism-kovan":i="optimism-kovan.infura.io";break;case"arbitrum":i="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":i="arbitrum-rinkeby.infura.io";break;default:Oa.throwError("unsupported network",y.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const r={allowGzip:!0,url:"https://"+i+"/v3/"+e.projectId,throttleCallback:(t,i)=>(e.projectId===Ra&&po(),Promise.resolve(!0))};return null!=e.projectSecret&&(r.user="",r.password=e.projectSecret),r}isCommunityResource(){return this.projectId===Ra}}class Fa extends Vo{send(t,e){const i={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const r={request:i,resolve:null,reject:null},n=new Promise(((t,e)=>{r.resolve=t,r.reject=e}));return this._pendingBatch.push(r),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((()=>{const t=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const e=t.map((t=>t.request));return this.emit("debug",{action:"requestBatch",request:at(e),provider:this}),ro(this.connection,JSON.stringify(e)).then((i=>{this.emit("debug",{action:"response",request:e,response:i,provider:this}),t.forEach(((t,e)=>{const r=i[e];if(r.error){const e=new Error(r.error.message);e.code=r.error.code,e.data=r.error.data,t.reject(e)}else t.resolve(r.result)}))}),(i=>{this.emit("debug",{action:"response",error:i,request:e,provider:this}),t.forEach((t=>{t.reject(i)}))}))}),10)),n}}const Da=new y(ao);class Ba extends Qo{static getApiKey(t){return t&&"string"!=typeof t&&Da.throwArgumentError("invalid apiKey","apiKey",t),t||"ETHERS_JS_SHARED"}static getUrl(t,e){Da.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let i=null;switch(t.name){case"homestead":i="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":i="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":i="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":i="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":i="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Da.throwArgumentError("unsupported network","network",arguments[0])}return i+"?apiKey="+e}}const Na=new y(ao),za={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class Ua extends Qo{constructor(t,e){if(null==e){const i=tt(new.target,"getNetwork")(t);if(i){const t=za[i.name];t&&(e={applicationId:t,loadBalancer:!0})}null==e&&Na.throwError("unsupported network",y.errors.INVALID_ARGUMENT,{argument:"network",value:t})}super(t,e)}static getApiKey(t){null==t&&Na.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",t);const e={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return"string"==typeof t?e.applicationId=t:null!=t.applicationSecretKey?(Na.assertArgument("string"==typeof t.applicationId,"applicationSecretKey requires an applicationId","applicationId",t.applicationId),Na.assertArgument("string"==typeof t.applicationSecretKey,"invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey,e.loadBalancer=!!t.loadBalancer):t.applicationId?(Na.assertArgument("string"==typeof t.applicationId,"apiKey.applicationId must be a string","apiKey.applicationId",t.applicationId),e.applicationId=t.applicationId,e.loadBalancer=!!t.loadBalancer):Na.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}static getUrl(t,e){let i=null;switch(t?t.name:"unknown"){case"homestead":i="eth-mainnet.gateway.pokt.network";break;case"ropsten":i="eth-ropsten.gateway.pokt.network";break;case"rinkeby":i="eth-rinkeby.gateway.pokt.network";break;case"goerli":i="eth-goerli.gateway.pokt.network";break;default:Na.throwError("unsupported network",y.errors.INVALID_ARGUMENT,{argument:"network",value:t})}let r=null;r=e.loadBalancer?`https://${i}/v1/lb/${e.applicationId}`:`https://${i}/v1/${e.applicationId}`;const n={url:r,headers:{}};return null!=e.applicationSecretKey&&(n.user="",n.password=e.applicationSecretKey),n}isCommunityResource(){return this.applicationId===za[this.network.name]}}const Ya=new y(ao);let Xa=1;function Ga(t,e){const i="Web3LegacyFetcher";return function(t,r){const n={method:t,params:r,id:Xa++,jsonrpc:"2.0"};return new Promise(((t,r)=>{this.emit("debug",{action:"request",fetcher:i,request:at(n),provider:this}),e(n,((e,s)=>{if(e)return this.emit("debug",{action:"response",fetcher:i,error:e,request:n,provider:this}),r(e);if(this.emit("debug",{action:"response",fetcher:i,request:n,response:s,provider:this}),s.error){const t=new Error(s.error.message);return t.code=s.error.code,t.data=s.error.data,r(t)}t(s.result)}))}))}}class Wa extends Vo{constructor(t,e){Ya.checkNew(new.target,Wa),null==t&&Ya.throwArgumentError("missing provider","provider",t);let i=null,r=null,n=null;"function"==typeof t?(i="unknown:",r=t):(i=t.host||t.path||"",!i&&t.isMetaMask&&(i="metamask"),n=t,t.request?(""===i&&(i="eip-1193:"),r=function(t){return function(e,i){null==i&&(i=[]);const r={method:e,params:i};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:at(r),provider:this}),t.request(r).then((t=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:t,provider:this}),t}))}}(t)):t.sendAsync?r=Ga(0,t.sendAsync.bind(t)):t.send?r=Ga(0,t.send.bind(t)):Ya.throwArgumentError("unsupported provider","provider",t),i||(i="unknown:")),super(i,e),Q(this,"jsonRpcFetchFunc",r),Q(this,"provider",n)}send(t,e){return this.jsonRpcFetchFunc(t,e)}}const Va=new y(ao);function ja(t,e){if(null==t&&(t="homestead"),"string"==typeof t){const e=t.match(/^(ws|http)s?:/i);if(e)switch(e[1]){case"http":return new Vo(t);case"ws":return new Zo(t);default:Va.throwArgumentError("unsupported URL scheme","network",t)}}const i=Ls(t);return i&&i._defaultProvider||Va.throwError("unsupported getDefaultProvider network",y.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),i._defaultProvider({FallbackProvider:Pa,AlchemyProvider:ra,CloudflareProvider:sa,EtherscanProvider:pa,InfuraProvider:Ia,JsonRpcProvider:Vo,NodesmithProvider:Ba,PocketProvider:Ua,Web3Provider:Wa,IpcProvider:ka},e)}const Ha="abi/5.5.0",qa=new y(Ha);function Ka(t){const e=[],i=function(t,r){if(Array.isArray(r))for(let n in r){const s=t.slice();s.push(n);try{i(s,r[n])}catch(t){e.push({path:s,error:t})}}};return i([],t),e}class Za{constructor(t,e,i,r){this.name=t,this.type=e,this.localName=i,this.dynamic=r}_throwError(t,e){qa.throwArgumentError(t,this.localName,e)}}class Ja{constructor(t){Q(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return I(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData(_(t._data))}writeBytes(t){let e=C(t);const i=e.length%this.wordSize;return i&&(e=_([e,this._padding.slice(i)])),this._writeData(e)}_getValue(t){let e=C(H.from(t));return e.length>this.wordSize&&qa.throwError("value out-of-bounds",y.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=_([this._padding.slice(e.length%this.wordSize),e])),e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,e=>{this._data[t]=this._getValue(e)}}}class $a{constructor(t,e,i,r){Q(this,"_data",C(t)),Q(this,"wordSize",e||32),Q(this,"_coerceFunc",i),Q(this,"allowLoose",r),this._offset=0}get data(){return O(this._data)}get consumed(){return this._offset}static coerce(t,e){let i=t.match("^u?int([0-9]+)$");return i&&parseInt(i[1])<=48&&(e=e.toNumber()),e}coerce(t,e){return this._coerceFunc?this._coerceFunc(t,e):$a.coerce(t,e)}_peekBytes(t,e,i){let r=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+r>this._data.length&&(this.allowLoose&&i&&this._offset+e<=this._data.length?r=e:qa.throwError("data out-of-bounds",y.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+r})),this._data.slice(this._offset,this._offset+r)}subReader(t){return new $a(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let i=this._peekBytes(0,t,!!e);return this._offset+=i.length,i.slice(0,t)}readValue(){return H.from(this.readBytes(this.wordSize))}}class Qa extends Za{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{e=Ot(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)}decode(t){return Ot(B(t.readValue().toHexString(),20))}}class th extends Za{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const eh=new y(Ha);function ih(t,e,i){let r=null;if(Array.isArray(i))r=i;else if(i&&"object"==typeof i){let t={};r=e.map((e=>{const r=e.localName;return r||eh.throwError("cannot encode object for signature with missing names",y.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:i}),t[r]&&eh.throwError("cannot encode object for signature with duplicate names",y.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:i}),t[r]=!0,i[r]}))}else eh.throwArgumentError("invalid tuple value","tuple",i);e.length!==r.length&&eh.throwArgumentError("types/value length mismatch","tuple",i);let n=new Ja(t.wordSize),s=new Ja(t.wordSize),o=[];e.forEach(((t,e)=>{let i=r[e];if(t.dynamic){let e=s.length;t.encode(s,i);let r=n.writeUpdatableValue();o.push((t=>{r(t+e)}))}else t.encode(n,i)})),o.forEach((t=>{t(n.length)}));let a=t.appendWriter(n);return a+=t.appendWriter(s),a}function rh(t,e){let i=[],r=t.subReader(0);e.forEach((e=>{let n=null;if(e.dynamic){let i=t.readValue(),s=r.subReader(i.toNumber());try{n=e.decode(s)}catch(t){if(t.code===y.errors.BUFFER_OVERRUN)throw t;n=t,n.baseType=e.name,n.name=e.localName,n.type=e.type}}else try{n=e.decode(t)}catch(t){if(t.code===y.errors.BUFFER_OVERRUN)throw t;n=t,n.baseType=e.name,n.name=e.localName,n.type=e.type}null!=n&&i.push(n)}));const n=e.reduce(((t,e)=>{const i=e.localName;return i&&(t[i]||(t[i]=0),t[i]++),t}),{});e.forEach(((t,e)=>{let r=t.localName;if(!r||1!==n[r])return;if("length"===r&&(r="_length"),null!=i[r])return;const s=i[e];s instanceof Error?Object.defineProperty(i,r,{enumerable:!0,get:()=>{throw s}}):i[r]=s}));for(let t=0;t<i.length;t++){const e=i[t];e instanceof Error&&Object.defineProperty(i,t,{enumerable:!0,get:()=>{throw e}})}return Object.freeze(i)}class nh extends Za{constructor(t,e,i){super("array",t.type+"["+(e>=0?e:"")+"]",i,-1===e||t.dynamic),this.coder=t,this.length=e}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let i=0;i<this.length;i++)e.push(t);return e}encode(t,e){Array.isArray(e)||this._throwError("expected array value",e);let i=this.length;-1===i&&(i=e.length,t.writeValue(e.length)),eh.checkArgumentCount(e.length,i,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let t=0;t<e.length;t++)r.push(this.coder);return ih(t,r,e)}decode(t){let e=this.length;-1===e&&(e=t.readValue().toNumber(),32*e>t._data.length&&eh.throwError("insufficient data length",y.errors.BUFFER_OVERRUN,{length:t._data.length,count:e}));let i=[];for(let t=0;t<e;t++)i.push(new th(this.coder));return t.coerce(this.name,rh(t,i))}}class sh extends Za{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class oh extends Za{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=C(e);let i=t.writeValue(e.length);return i+=t.writeBytes(e),i}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class ah extends oh{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,O(super.decode(t)))}}class hh extends Za{constructor(t,e){let i="bytes"+String(t);super(i,i,e,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let i=C(e);return i.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(i)}decode(t){return t.coerce(this.name,O(t.readBytes(this.size)))}}class lh extends Za{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}class uh extends Za{constructor(t,e,i){const r=(e?"int":"uint")+8*t;super(r,r,i,!1),this.size=t,this.signed=e}defaultValue(){return 0}encode(t,e){let i=H.from(e),r=ce.mask(8*t.wordSize);if(this.signed){let t=r.mask(8*this.size-1);(i.gt(t)||i.lt(t.add(he).mul(oe)))&&this._throwError("value out-of-bounds",e)}else(i.lt(ae)||i.gt(r.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return i=i.toTwos(8*this.size).mask(8*this.size),this.signed&&(i=i.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(i)}decode(t){let e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}class ch extends oh{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Xt(e))}decode(t){return jt(super.decode(t))}}class dh extends Za{constructor(t,e){let i=!1;const r=[];t.forEach((t=>{t.dynamic&&(i=!0),r.push(t.type)})),super("tuple","tuple("+r.join(",")+")",e,i),this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const i=e.localName;return i&&(t[i]||(t[i]=0),t[i]++),t}),{});return this.coders.forEach(((i,r)=>{let n=i.localName;n&&1===e[n]&&("length"===n&&(n="_length"),null==t[n]&&(t[n]=t[r]))})),Object.freeze(t)}encode(t,e){return ih(t,this.coders,e)}decode(t){return t.coerce(this.name,rh(t,this.coders))}}const fh=new y(Ha),ph={};let gh={calldata:!0,memory:!0,storage:!0},vh={calldata:!0,memory:!0};function mh(t,e){if("bytes"===t||"string"===t){if(gh[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&vh[e])return!0;return(gh[e]||"payable"===e)&&fh.throwArgumentError("invalid modifier","name",e),!1}function yh(t,e){for(let i in e)Q(t,i,e[i])}const xh=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),bh=new RegExp(/^(.*)\[([0-9]*)\]$/);class wh{constructor(t,e){t!==ph&&fh.throwError("use fromString",y.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),yh(this,e);let i=this.type.match(bh);yh(this,i?{arrayLength:parseInt(i[2]||"-1"),arrayChildren:wh.fromObject({type:i[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=xh.sighash),xh[t]||fh.throwArgumentError("invalid format type","format",t),t===xh.json){let e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(e)}let e="";return"array"===this.baseType?(e+=this.arrayChildren.format(t),e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==xh.sighash&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join(t===xh.full?", ":",")+")"):e+=this.type,t!==xh.sighash&&(!0===this.indexed&&(e+=" indexed"),t===xh.full&&this.name&&(e+=" "+this.name)),e}static from(t,e){return"string"==typeof t?wh.fromString(t,e):wh.fromObject(t)}static fromObject(t){return wh.isParamType(t)?t:new wh(ph,{name:t.name||null,type:Rh(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(wh.fromObject):null})}static fromString(t,e){return i=function(t,e){let i=t;function r(e){fh.throwArgumentError(`unexpected character at position ${e}`,"param",t)}function n(t){let i={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(i.indexed=!1),i}t=t.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},o=s;for(let i=0;i<t.length;i++){let s=t[i];switch(s){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||r(i),o.state.allowType=!1,o.type=Rh(o.type),o.components=[n(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(e||r(i),o.indexed=!0,o.name=""),mh(o.type,o.name)&&(o.name=""),o.type=Rh(o.type);let t=o;o=o.parent,o||r(i),delete t.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(e||r(i),o.indexed=!0,o.name=""),mh(o.type,o.name)&&(o.name=""),o.type=Rh(o.type);let a=n(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=Rh(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(e||r(i),o.indexed&&r(i),o.indexed=!0,o.name=""):mh(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(i),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(i),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:r(i)}}return o.parent&&fh.throwArgumentError("unexpected eof","param",t),delete s.state,"indexed"===o.name?(e||r(i.length-7),o.indexed&&r(i.length-7),o.indexed=!0,o.name=""):mh(o.type,o.name)&&(o.name=""),s.type=Rh(s.type),s}(t,!!e),wh.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components});var i}static isParamType(t){return!(null==t||!t._isParamType)}}function Th(t,e){return function(t){t=t.trim();let e=[],i="",r=0;for(let n=0;n<t.length;n++){let s=t[n];","===s&&0===r?(e.push(i),i=""):(i+=s,"("===s?r++:")"===s&&(r--,-1===r&&fh.throwArgumentError("unbalanced parenthesis","value",t)))}return i&&e.push(i),e}(t).map((t=>wh.fromString(t,e)))}class Sh{constructor(t,e){t!==ph&&fh.throwError("use a static from method",y.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),yh(this,e),this._isFragment=!0,Object.freeze(this)}static from(t){return Sh.isFragment(t)?t:"string"==typeof t?Sh.fromString(t):Sh.fromObject(t)}static fromObject(t){if(Sh.isFragment(t))return t;switch(t.type){case"function":return Ph.fromObject(t);case"event":return Eh.fromObject(t);case"constructor":return Mh.fromObject(t);case"error":return Oh.fromObject(t);case"fallback":case"receive":return null}return fh.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Eh.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?Ph.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?Mh.fromString(t.trim()):"error"===t.split(" ")[0]?Oh.fromString(t.substring(5).trim()):fh.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!(!t||!t._isFragment)}}class Eh extends Sh{format(t){if(t||(t=xh.sighash),xh[t]||fh.throwArgumentError("invalid format type","format",t),t===xh.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==xh.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===xh.full?", ":",")+") ",t!==xh.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}static from(t){return"string"==typeof t?Eh.fromString(t):Eh.fromObject(t)}static fromObject(t){if(Eh.isEventFragment(t))return t;"event"!==t.type&&fh.throwArgumentError("invalid event object","value",t);const e={name:Ih(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(wh.fromObject):[],type:"event"};return new Eh(ph,e)}static fromString(t){let e=t.match(Fh);e||fh.throwArgumentError("invalid event string","value",t);let i=!1;return e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":i=!0;break;case"":break;default:fh.warn("unknown modifier: "+t)}})),Eh.fromObject({name:e[1].trim(),anonymous:i,inputs:Th(e[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&"event"===t.type}}function Ch(t,e){e.gas=null;let i=t.split("@");return 1!==i.length?(i.length>2&&fh.throwArgumentError("invalid human-readable ABI signature","value",t),i[1].match(/^[0-9]+$/)||fh.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=H.from(i[1]),i[0]):t}function _h(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function Ah(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&fh.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&fh.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||fh.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&fh.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&fh.throwArgumentError("unable to determine stateMutability","value",t),e}class Mh extends Sh{format(t){if(t||(t=xh.sighash),xh[t]||fh.throwArgumentError("invalid format type","format",t),t===xh.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});t===xh.sighash&&fh.throwError("cannot format a constructor for sighash",y.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===xh.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}static from(t){return"string"==typeof t?Mh.fromString(t):Mh.fromObject(t)}static fromObject(t){if(Mh.isConstructorFragment(t))return t;"constructor"!==t.type&&fh.throwArgumentError("invalid constructor object","value",t);let e=Ah(t);e.constant&&fh.throwArgumentError("constructor cannot be constant","value",t);const i={name:null,type:t.type,inputs:t.inputs?t.inputs.map(wh.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?H.from(t.gas):null};return new Mh(ph,i)}static fromString(t){let e={type:"constructor"},i=(t=Ch(t,e)).match(Fh);return i&&"constructor"===i[1].trim()||fh.throwArgumentError("invalid constructor string","value",t),e.inputs=Th(i[2].trim(),!1),_h(i[3].trim(),e),Mh.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&"constructor"===t.type}}class Ph extends Mh{format(t){if(t||(t=xh.sighash),xh[t]||fh.throwArgumentError("invalid format type","format",t),t===xh.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==xh.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===xh.full?", ":",")+") ",t!==xh.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}static from(t){return"string"==typeof t?Ph.fromString(t):Ph.fromObject(t)}static fromObject(t){if(Ph.isFunctionFragment(t))return t;"function"!==t.type&&fh.throwArgumentError("invalid function object","value",t);let e=Ah(t);const i={type:t.type,name:Ih(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(wh.fromObject):[],outputs:t.outputs?t.outputs.map(wh.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?H.from(t.gas):null};return new Ph(ph,i)}static fromString(t){let e={type:"function"},i=(t=Ch(t,e)).split(" returns ");i.length>2&&fh.throwArgumentError("invalid function string","value",t);let r=i[0].match(Fh);if(r||fh.throwArgumentError("invalid function signature","value",t),e.name=r[1].trim(),e.name&&Ih(e.name),e.inputs=Th(r[2],!1),_h(r[3].trim(),e),i.length>1){let r=i[1].match(Fh);""==r[1].trim()&&""==r[3].trim()||fh.throwArgumentError("unexpected tokens","value",t),e.outputs=Th(r[2],!1)}else e.outputs=[];return Ph.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&"function"===t.type}}function kh(t){const e=t.format();return"Error(string)"!==e&&"Panic(uint256)"!==e||fh.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Oh extends Sh{format(t){if(t||(t=xh.sighash),xh[t]||fh.throwArgumentError("invalid format type","format",t),t===xh.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==xh.sighash&&(e+="error "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===xh.full?", ":",")+") ",e.trim()}static from(t){return"string"==typeof t?Oh.fromString(t):Oh.fromObject(t)}static fromObject(t){if(Oh.isErrorFragment(t))return t;"error"!==t.type&&fh.throwArgumentError("invalid error object","value",t);const e={type:t.type,name:Ih(t.name),inputs:t.inputs?t.inputs.map(wh.fromObject):[]};return kh(new Oh(ph,e))}static fromString(t){let e={type:"error"},i=t.match(Fh);return i||fh.throwArgumentError("invalid error signature","value",t),e.name=i[1].trim(),e.name&&Ih(e.name),e.inputs=Th(i[2],!1),kh(Oh.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&"error"===t.type}}function Rh(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const Lh=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Ih(t){return t&&t.match(Lh)||fh.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Fh=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),Dh=new y(Ha),Bh=new RegExp(/^bytes([0-9]*)$/),Nh=new RegExp(/^(u?int)([0-9]*)$/);class zh{constructor(t){Dh.checkNew(new.target,zh),Q(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new Qa(t.name);case"bool":return new sh(t.name);case"string":return new ch(t.name);case"bytes":return new ah(t.name);case"array":return new nh(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new dh((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new lh(t.name)}let e=t.type.match(Nh);if(e){let i=parseInt(e[2]||"256");return(0===i||i>256||i%8!=0)&&Dh.throwArgumentError("invalid "+e[1]+" bit length","param",t),new uh(i/8,"int"===e[1],t.name)}if(e=t.type.match(Bh),e){let i=parseInt(e[1]);return(0===i||i>32)&&Dh.throwArgumentError("invalid bytes length","param",t),new hh(i,t.name)}return Dh.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new $a(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new Ja(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(wh.from(t))));return new dh(e,"_").defaultValue()}encode(t,e){t.length!==e.length&&Dh.throwError("types/values length mismatch",y.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const i=t.map((t=>this._getCoder(wh.from(t)))),r=new dh(i,"_"),n=this._getWriter();return r.encode(n,e),n.data}decode(t,e,i){const r=t.map((t=>this._getCoder(wh.from(t))));return new dh(r,"_").decode(this._getReader(C(e),i))}}const Uh=new zh,Yh=new y(Ha);class Xh extends ht{}class Gh extends ht{}class Wh extends ht{}class Vh extends ht{static isIndexed(t){return!(!t||!t._isIndexed)}}const jh={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Hh(t,e){const i=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return i.error=e,i}class qh{constructor(t){Yh.checkNew(new.target,qh);let e=[];e="string"==typeof t?JSON.parse(t):t,Q(this,"fragments",e.map((t=>Sh.from(t))).filter((t=>null!=t))),Q(this,"_abiCoder",tt(new.target,"getAbiCoder")()),Q(this,"functions",{}),Q(this,"errors",{}),Q(this,"events",{}),Q(this,"structs",{}),this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":return this.deploy?void Yh.warn("duplicate definition - constructor"):void Q(this,"deploy",t);case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let i=t.format();e[i]?Yh.warn("duplicate definition - "+i):e[i]=t})),this.deploy||Q(this,"deploy",Mh.from({payable:!1,type:"constructor"})),Q(this,"_isInterface",!0)}format(t){t||(t=xh.full),t===xh.sighash&&Yh.throwArgumentError("interface does not support formatting sighash","format",t);const e=this.fragments.map((e=>e.format(t)));return t===xh.json?JSON.stringify(e.map((t=>JSON.parse(t)))):e}static getAbiCoder(){return Uh}static getAddress(t){return Ot(t)}static getSighash(t){return L(qt(t.format()),0,4)}static getEventTopic(t){return qt(t.format())}getFunction(t){if(P(t)){for(const e in this.functions)if(t===this.getSighash(e))return this.functions[e];Yh.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),i=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));return 0===i.length?Yh.throwArgumentError("no matching function","name",e):i.length>1&&Yh.throwArgumentError("multiple matching functions","name",e),this.functions[i[0]]}const e=this.functions[Ph.fromString(t).format()];return e||Yh.throwArgumentError("no matching function","signature",t),e}getEvent(t){if(P(t)){const e=t.toLowerCase();for(const t in this.events)if(e===this.getEventTopic(t))return this.events[t];Yh.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){const e=t.trim(),i=Object.keys(this.events).filter((t=>t.split("(")[0]===e));return 0===i.length?Yh.throwArgumentError("no matching event","name",e):i.length>1&&Yh.throwArgumentError("multiple matching events","name",e),this.events[i[0]]}const e=this.events[Eh.fromString(t).format()];return e||Yh.throwArgumentError("no matching event","signature",t),e}getError(t){if(P(t)){const e=tt(this.constructor,"getSighash");for(const i in this.errors)if(t===e(this.errors[i]))return this.errors[i];Yh.throwArgumentError("no matching error","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),i=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));return 0===i.length?Yh.throwArgumentError("no matching error","name",e):i.length>1&&Yh.throwArgumentError("multiple matching errors","name",e),this.errors[i[0]]}const e=this.errors[Ph.fromString(t).format()];return e||Yh.throwArgumentError("no matching error","signature",t),e}getSighash(t){if("string"==typeof t)try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(t){throw e}}return tt(this.constructor,"getSighash")(t)}getEventTopic(t){return"string"==typeof t&&(t=this.getEvent(t)),tt(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){"string"==typeof t&&(t=this.getError(t));const i=C(e);return O(i.slice(0,4))!==this.getSighash(t)&&Yh.throwArgumentError(`data signature does not match error ${t.name}.`,"data",O(i)),this._decodeParams(t.inputs,i.slice(4))}encodeErrorResult(t,e){return"string"==typeof t&&(t=this.getError(t)),O(_([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){"string"==typeof t&&(t=this.getFunction(t));const i=C(e);return O(i.slice(0,4))!==this.getSighash(t)&&Yh.throwArgumentError(`data signature does not match function ${t.name}.`,"data",O(i)),this._decodeParams(t.inputs,i.slice(4))}encodeFunctionData(t,e){return"string"==typeof t&&(t=this.getFunction(t)),O(_([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){"string"==typeof t&&(t=this.getFunction(t));let i=C(e),r=null,n=null,s=null,o=null;switch(i.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,i)}catch(t){}break;case 4:{const t=O(i.slice(0,4)),e=jh[t];if(e)n=this._abiCoder.decode(e.inputs,i.slice(4)),s=e.name,o=e.signature,e.reason&&(r=n[0]);else try{const e=this.getError(t);n=this._abiCoder.decode(e.inputs,i.slice(4)),s=e.name,o=e.format()}catch(t){console.log(t)}break}}return Yh.throwError("call revert exception",y.errors.CALL_EXCEPTION,{method:t.format(),errorArgs:n,errorName:s,errorSignature:o,reason:r})}encodeFunctionResult(t,e){return"string"==typeof t&&(t=this.getFunction(t)),O(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){"string"==typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&Yh.throwError("too many arguments for "+t.format(),y.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});let i=[];t.anonymous||i.push(this.getEventTopic(t));const r=(t,e)=>"string"===t.type?qt(e):"bytes"===t.type?vt(O(e)):("address"===t.type&&this._abiCoder.encode(["address"],[e]),B(O(e),32));for(e.forEach(((e,n)=>{let s=t.inputs[n];s.indexed?null==e?i.push(null):"array"===s.baseType||"tuple"===s.baseType?Yh.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,e):Array.isArray(e)?i.push(e.map((t=>r(s,t)))):i.push(r(s,e)):null!=e&&Yh.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,e)}));i.length&&null===i[i.length-1];)i.pop();return i}encodeEventLog(t,e){"string"==typeof t&&(t=this.getEvent(t));const i=[],r=[],n=[];return t.anonymous||i.push(this.getEventTopic(t)),e.length!==t.inputs.length&&Yh.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach(((t,s)=>{const o=e[s];if(t.indexed)if("string"===t.type)i.push(qt(o));else if("bytes"===t.type)i.push(vt(o));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");i.push(this._abiCoder.encode([t.type],[o]))}else r.push(t),n.push(o)})),{data:this._abiCoder.encode(r,n),topics:i}}decodeEventLog(t,e,i){if("string"==typeof t&&(t=this.getEvent(t)),null!=i&&!t.anonymous){let e=this.getEventTopic(t);P(i[0],32)&&i[0].toLowerCase()===e||Yh.throwError("fragment/topic mismatch",y.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:i[0]}),i=i.slice(1)}let r=[],n=[],s=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(r.push(wh.fromObject({type:"bytes32",name:t.name})),s.push(!0)):(r.push(t),s.push(!1)):(n.push(t),s.push(!1))}));let o=null!=i?this._abiCoder.decode(r,_(i)):null,a=this._abiCoder.decode(n,e,!0),h=[],l=0,u=0;t.inputs.forEach(((t,e)=>{if(t.indexed)if(null==o)h[e]=new Vh({_isIndexed:!0,hash:null});else if(s[e])h[e]=new Vh({_isIndexed:!0,hash:o[u++]});else try{h[e]=o[u++]}catch(t){h[e]=t}else try{h[e]=a[l++]}catch(t){h[e]=t}if(t.name&&null==h[t.name]){const i=h[e];i instanceof Error?Object.defineProperty(h,t.name,{enumerable:!0,get:()=>{throw Hh(`property ${JSON.stringify(t.name)}`,i)}}):h[t.name]=i}}));for(let t=0;t<h.length;t++){const e=h[t];e instanceof Error&&Object.defineProperty(h,t,{enumerable:!0,get:()=>{throw Hh(`index ${t}`,e)}})}return Object.freeze(h)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new Gh({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:H.from(t.value||"0")}):null}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Xh({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=O(t);let i=this.getError(e.substring(0,10).toLowerCase());return i?new Wh({args:this._abiCoder.decode(i.inputs,"0x"+e.substring(10)),errorFragment:i,name:i.name,signature:i.format(),sighash:this.getSighash(i)}):null}static isInterface(t){return!(!t||!t._isInterface)}}const Kh=new RegExp("^bytes([0-9]+)$"),Zh=new RegExp("^(u?int)([0-9]*)$"),Jh=new RegExp("^(.*)\\[([0-9]*)\\]$"),$h=new y("solidity/5.5.0");function Qh(t,e,i){switch(t){case"address":return i?M(e,32):C(e);case"string":return Xt(e);case"bytes":return C(e);case"bool":return e=e?"0x01":"0x00",i?M(e,32):C(e)}let r=t.match(Zh);if(r){let n=parseInt(r[2]||"256");return(r[2]&&String(n)!==r[2]||n%8!=0||0===n||n>256)&&$h.throwArgumentError("invalid number type","type",t),i&&(n=256),M(e=H.from(e).toTwos(n),n/8)}if(r=t.match(Kh),r){const n=parseInt(r[1]);return(String(n)!==r[1]||0===n||n>32)&&$h.throwArgumentError("invalid bytes type","type",t),C(e).byteLength!==n&&$h.throwArgumentError(`invalid value for ${t}`,"value",e),i?C((e+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):e}if(r=t.match(Jh),r&&Array.isArray(e)){const i=r[1];parseInt(r[2]||String(e.length))!=e.length&&$h.throwArgumentError(`invalid array length for ${t}`,"value",e);const n=[];return e.forEach((function(t){n.push(Qh(i,t,!0))})),_(n)}return $h.throwArgumentError("invalid type","type",t)}function tl(t,e){t.length!=e.length&&$h.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const i=[];return t.forEach((function(t,r){i.push(Qh(t,e[r]))})),O(_(i))}function el(t,e){return vt(tl(t,e))}function il(t,e){return yn(tl(t,e))}function rl(t){const e=Xt(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return O(_([e,Es]).slice(0,32))}function nl(t){const e=C(t);if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");let i=31;for(;0===e[i-1];)i--;return jt(e.slice(0,i))}const sl=new y("units/5.5.0"),ol=["wei","kwei","mwei","gwei","szabo","finney","ether"];function al(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||"."===t||"-."===t)&&sl.throwArgumentError("invalid value","value",t);let i=e[0],r="";for("-"===i.substring(0,1)&&(r="-",i=i.substring(1));"0"===i.substring(0,1);)i=i.substring(1);""===i&&(i="0");let n="";for(2===e.length&&(n="."+(e[1]||"0"));n.length>2&&"0"===n[n.length-1];)n=n.substring(0,n.length-1);const s=[];for(;i.length;){if(i.length<=3){s.unshift(i);break}{const t=i.length-3;s.unshift(i.substring(t)),i=i.substring(0,t)}}return r+s.join(",")+n}function hl(t,e){if("string"==typeof e){const t=ol.indexOf(e);-1!==t&&(e=3*t)}return Yr(t,null!=e?e:18)}function ll(t,e){if("string"!=typeof t&&sl.throwArgumentError("value must be a string","value",t),"string"==typeof e){const t=ol.indexOf(e);-1!==t&&(e=3*t)}return Xr(t,null!=e?e:18)}function ul(t){return hl(t,18)}function cl(t){return ll(t,18)}const dl="ethers/5.5.2",fl=new y(dl);try{const t=window;null==t._ethers&&(t._ethers=h)}catch(t){}},8058:t=>{try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},4485:(t,e,i)=>{t.exports=i(2894)},2894:function(t,e,i){t=i.nmd(t),function(){var e,i,r,n,s,o,a,h,l,u,c,d,f,p,g;r=Math.floor,u=Math.min,i=function(t,e){return t<e?-1:t>e?1:0},l=function(t,e,n,s,o){var a;if(null==n&&(n=0),null==o&&(o=i),n<0)throw new Error("lo must be non-negative");for(null==s&&(s=t.length);n<s;)o(e,t[a=r((n+s)/2)])<0?s=a:n=a+1;return[].splice.apply(t,[n,n-n].concat(e)),e},o=function(t,e,r){return null==r&&(r=i),t.push(e),p(t,0,t.length-1,r)},s=function(t,e){var r,n;return null==e&&(e=i),r=t.pop(),t.length?(n=t[0],t[0]=r,g(t,0,e)):n=r,n},h=function(t,e,r){var n;return null==r&&(r=i),n=t[0],t[0]=e,g(t,0,r),n},a=function(t,e,r){var n;return null==r&&(r=i),t.length&&r(t[0],e)<0&&(e=(n=[t[0],e])[0],t[0]=n[1],g(t,0,r)),e},n=function(t,e){var n,s,o,a,h,l;for(null==e&&(e=i),h=[],s=0,o=(a=function(){l=[];for(var e=0,i=r(t.length/2);0<=i?e<i:e>i;0<=i?e++:e--)l.push(e);return l}.apply(this).reverse()).length;s<o;s++)n=a[s],h.push(g(t,n,e));return h},f=function(t,e,r){var n;if(null==r&&(r=i),-1!==(n=t.indexOf(e)))return p(t,0,n,r),g(t,n,r)},c=function(t,e,r){var s,o,h,l,u;if(null==r&&(r=i),!(o=t.slice(0,e)).length)return o;for(n(o,r),h=0,l=(u=t.slice(e)).length;h<l;h++)s=u[h],a(o,s,r);return o.sort(r).reverse()},d=function(t,e,r){var o,a,h,c,d,f,p,g,v;if(null==r&&(r=i),10*e<=t.length){if(!(h=t.slice(0,e).sort(r)).length)return h;for(a=h[h.length-1],c=0,f=(p=t.slice(e)).length;c<f;c++)r(o=p[c],a)<0&&(l(h,o,0,null,r),h.pop(),a=h[h.length-1]);return h}for(n(t,r),v=[],d=0,g=u(e,t.length);0<=g?d<g:d>g;0<=g?++d:--d)v.push(s(t,r));return v},p=function(t,e,r,n){var s,o,a;for(null==n&&(n=i),s=t[r];r>e&&n(s,o=t[a=r-1>>1])<0;)t[r]=o,r=a;return t[r]=s},g=function(t,e,r){var n,s,o,a,h;for(null==r&&(r=i),s=t.length,h=e,o=t[e],n=2*e+1;n<s;)(a=n+1)<s&&!(r(t[n],t[a])<0)&&(n=a),t[e]=t[n],n=2*(e=n)+1;return t[e]=o,p(t,h,e,r)},e=function(){function t(t){this.cmp=null!=t?t:i,this.nodes=[]}return t.push=o,t.pop=s,t.replace=h,t.pushpop=a,t.heapify=n,t.updateItem=f,t.nlargest=c,t.nsmallest=d,t.prototype.push=function(t){return o(this.nodes,t,this.cmp)},t.prototype.pop=function(){return s(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return h(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return a(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return n(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return f(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}.call(this)},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},1094:(t,e,i)=>{var r;!function(){"use strict";var n="input is invalid type",s="object"==typeof window,o=s?window:{};o.JS_SHA3_NO_WINDOW&&(s=!1);var a=!s&&"object"==typeof self;!o.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?o=i.g:a&&(o=self);var h=!o.JS_SHA3_NO_COMMON_JS&&t.exports,l=i.amdO,u=!o.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,c="0123456789abcdef".split(""),d=[4,1024,262144,67108864],f=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],v=[128,256],m=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};!o.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!u||!o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var x=function(t,e,i){return function(r){return new I(t,e,t).update(r)[i]()}},b=function(t,e,i){return function(r,n){return new I(t,e,n).update(r)[i]()}},w=function(t,e,i){return function(e,r,n,s){return _["cshake"+t].update(e,r,n,s)[i]()}},T=function(t,e,i){return function(e,r,n,s){return _["kmac"+t].update(e,r,n,s)[i]()}},S=function(t,e,i,r){for(var n=0;n<m.length;++n){var s=m[n];t[s]=e(i,r,s)}return t},E=function(t,e){var i=x(t,e,"hex");return i.create=function(){return new I(t,e,t)},i.update=function(t){return i.create().update(t)},S(i,x,t,e)},C=[{name:"keccak",padding:[1,256,65536,16777216],bits:g,createMethod:E},{name:"sha3",padding:[6,1536,393216,100663296],bits:g,createMethod:E},{name:"shake",padding:[31,7936,2031616,520093696],bits:v,createMethod:function(t,e){var i=b(t,e,"hex");return i.create=function(i){return new I(t,e,i)},i.update=function(t,e){return i.create(e).update(t)},S(i,b,t,e)}},{name:"cshake",padding:d,bits:v,createMethod:function(t,e){var i=y[t],r=w(t,0,"hex");return r.create=function(r,n,s){return n||s?new I(t,e,r).bytepad([n,s],i):_["shake"+t].create(r)},r.update=function(t,e,i,n){return r.create(e,i,n).update(t)},S(r,w,t,e)}},{name:"kmac",padding:d,bits:v,createMethod:function(t,e){var i=y[t],r=T(t,0,"hex");return r.create=function(r,n,s){return new F(t,e,n).bytepad(["KMAC",s],i).bytepad([r],i)},r.update=function(t,e,i,n){return r.create(t,i,n).update(e)},S(r,T,t,e)}}],_={},A=[],M=0;M<C.length;++M)for(var P=C[M],k=P.bits,O=0;O<k.length;++O){var R=P.name+"_"+k[O];if(A.push(R),_[R]=P.createMethod(k[O],P.padding),"sha3"!==P.name){var L=P.name+k[O];A.push(L),_[L]=_[R]}}function I(t,e,i){this.blocks=[],this.s=[],this.padding=e,this.outputBits=i,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=i>>5,this.extraBytes=(31&i)>>3;for(var r=0;r<50;++r)this.s[r]=0}function F(t,e,i){I.call(this,t,e,i)}I.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var e,i=typeof t;if("string"!==i){if("object"!==i)throw new Error(n);if(null===t)throw new Error(n);if(u&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||u&&ArrayBuffer.isView(t)))throw new Error(n);e=!0}for(var r,s,o=this.blocks,a=this.byteCount,h=t.length,l=this.blockCount,c=0,d=this.s;c<h;){if(this.reset)for(this.reset=!1,o[0]=this.block,r=1;r<l+1;++r)o[r]=0;if(e)for(r=this.start;c<h&&r<a;++c)o[r>>2]|=t[c]<<f[3&r++];else for(r=this.start;c<h&&r<a;++c)(s=t.charCodeAt(c))<128?o[r>>2]|=s<<f[3&r++]:s<2048?(o[r>>2]|=(192|s>>6)<<f[3&r++],o[r>>2]|=(128|63&s)<<f[3&r++]):s<55296||s>=57344?(o[r>>2]|=(224|s>>12)<<f[3&r++],o[r>>2]|=(128|s>>6&63)<<f[3&r++],o[r>>2]|=(128|63&s)<<f[3&r++]):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++c)),o[r>>2]|=(240|s>>18)<<f[3&r++],o[r>>2]|=(128|s>>12&63)<<f[3&r++],o[r>>2]|=(128|s>>6&63)<<f[3&r++],o[r>>2]|=(128|63&s)<<f[3&r++]);if(this.lastByteIndex=r,r>=a){for(this.start=r-a,this.block=o[l],r=0;r<l;++r)d[r]^=o[r];D(d),this.reset=!0}else this.start=r}return this},I.prototype.encode=function(t,e){var i=255&t,r=1,n=[i];for(i=255&(t>>=8);i>0;)n.unshift(i),i=255&(t>>=8),++r;return e?n.push(r):n.unshift(r),this.update(n),n.length},I.prototype.encodeString=function(t){var e,i=typeof t;if("string"!==i){if("object"!==i)throw new Error(n);if(null===t)throw new Error(n);if(u&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||u&&ArrayBuffer.isView(t)))throw new Error(n);e=!0}var r=0,s=t.length;if(e)r=s;else for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);a<128?r+=1:a<2048?r+=2:a<55296||a>=57344?r+=3:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++o)),r+=4)}return r+=this.encode(8*r),this.update(t),r},I.prototype.bytepad=function(t,e){for(var i=this.encode(e),r=0;r<t.length;++r)i+=this.encodeString(t[r]);var n=e-i%e,s=[];return s.length=n,this.update(s),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,i=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[i],e=1;e<i+1;++e)t[e]=0;for(t[i-1]|=2147483648,e=0;e<i;++e)r[e]^=t[e];D(r)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,i=this.s,r=this.outputBlocks,n=this.extraBytes,s=0,o=0,a="";o<r;){for(s=0;s<e&&o<r;++s,++o)t=i[s],a+=c[t>>4&15]+c[15&t]+c[t>>12&15]+c[t>>8&15]+c[t>>20&15]+c[t>>16&15]+c[t>>28&15]+c[t>>24&15];o%e==0&&(D(i),s=0)}return n&&(t=i[s],a+=c[t>>4&15]+c[15&t],n>1&&(a+=c[t>>12&15]+c[t>>8&15]),n>2&&(a+=c[t>>20&15]+c[t>>16&15])),a},I.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,i=this.s,r=this.outputBlocks,n=this.extraBytes,s=0,o=0,a=this.outputBits>>3;t=n?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var h=new Uint32Array(t);o<r;){for(s=0;s<e&&o<r;++s,++o)h[o]=i[s];o%e==0&&D(i)}return n&&(h[s]=i[s],t=t.slice(0,a)),t},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var t,e,i=this.blockCount,r=this.s,n=this.outputBlocks,s=this.extraBytes,o=0,a=0,h=[];a<n;){for(o=0;o<i&&a<n;++o,++a)t=a<<2,e=r[o],h[t]=255&e,h[t+1]=e>>8&255,h[t+2]=e>>16&255,h[t+3]=e>>24&255;a%i==0&&D(r)}return s&&(t=a<<2,e=r[o],h[t]=255&e,s>1&&(h[t+1]=e>>8&255),s>2&&(h[t+2]=e>>16&255)),h},F.prototype=new I,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var D=function(t){var e,i,r,n,s,o,a,h,l,u,c,d,f,g,v,m,y,x,b,w,T,S,E,C,_,A,M,P,k,O,R,L,I,F,D,B,N,z,U,Y,X,G,W,V,j,H,q,K,Z,J,$,Q,tt,et,it,rt,nt,st,ot,at,ht,lt,ut;for(r=0;r<48;r+=2)n=t[0]^t[10]^t[20]^t[30]^t[40],s=t[1]^t[11]^t[21]^t[31]^t[41],o=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],h=t[4]^t[14]^t[24]^t[34]^t[44],l=t[5]^t[15]^t[25]^t[35]^t[45],u=t[6]^t[16]^t[26]^t[36]^t[46],c=t[7]^t[17]^t[27]^t[37]^t[47],e=(d=t[8]^t[18]^t[28]^t[38]^t[48])^(o<<1|a>>>31),i=(f=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|o>>>31),t[0]^=e,t[1]^=i,t[10]^=e,t[11]^=i,t[20]^=e,t[21]^=i,t[30]^=e,t[31]^=i,t[40]^=e,t[41]^=i,e=n^(h<<1|l>>>31),i=s^(l<<1|h>>>31),t[2]^=e,t[3]^=i,t[12]^=e,t[13]^=i,t[22]^=e,t[23]^=i,t[32]^=e,t[33]^=i,t[42]^=e,t[43]^=i,e=o^(u<<1|c>>>31),i=a^(c<<1|u>>>31),t[4]^=e,t[5]^=i,t[14]^=e,t[15]^=i,t[24]^=e,t[25]^=i,t[34]^=e,t[35]^=i,t[44]^=e,t[45]^=i,e=h^(d<<1|f>>>31),i=l^(f<<1|d>>>31),t[6]^=e,t[7]^=i,t[16]^=e,t[17]^=i,t[26]^=e,t[27]^=i,t[36]^=e,t[37]^=i,t[46]^=e,t[47]^=i,e=u^(n<<1|s>>>31),i=c^(s<<1|n>>>31),t[8]^=e,t[9]^=i,t[18]^=e,t[19]^=i,t[28]^=e,t[29]^=i,t[38]^=e,t[39]^=i,t[48]^=e,t[49]^=i,g=t[0],v=t[1],H=t[11]<<4|t[10]>>>28,q=t[10]<<4|t[11]>>>28,P=t[20]<<3|t[21]>>>29,k=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ht=t[30]<<9|t[31]>>>23,G=t[40]<<18|t[41]>>>14,W=t[41]<<18|t[40]>>>14,F=t[2]<<1|t[3]>>>31,D=t[3]<<1|t[2]>>>31,m=t[13]<<12|t[12]>>>20,y=t[12]<<12|t[13]>>>20,K=t[22]<<10|t[23]>>>22,Z=t[23]<<10|t[22]>>>22,O=t[33]<<13|t[32]>>>19,R=t[32]<<13|t[33]>>>19,lt=t[42]<<2|t[43]>>>30,ut=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,it=t[4]<<30|t[5]>>>2,B=t[14]<<6|t[15]>>>26,N=t[15]<<6|t[14]>>>26,x=t[25]<<11|t[24]>>>21,b=t[24]<<11|t[25]>>>21,J=t[34]<<15|t[35]>>>17,$=t[35]<<15|t[34]>>>17,L=t[45]<<29|t[44]>>>3,I=t[44]<<29|t[45]>>>3,C=t[6]<<28|t[7]>>>4,_=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,nt=t[16]<<23|t[17]>>>9,z=t[26]<<25|t[27]>>>7,U=t[27]<<25|t[26]>>>7,w=t[36]<<21|t[37]>>>11,T=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,V=t[8]<<27|t[9]>>>5,j=t[9]<<27|t[8]>>>5,A=t[18]<<20|t[19]>>>12,M=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,Y=t[38]<<8|t[39]>>>24,X=t[39]<<8|t[38]>>>24,S=t[48]<<14|t[49]>>>18,E=t[49]<<14|t[48]>>>18,t[0]=g^~m&x,t[1]=v^~y&b,t[10]=C^~A&P,t[11]=_^~M&k,t[20]=F^~B&z,t[21]=D^~N&U,t[30]=V^~H&K,t[31]=j^~q&Z,t[40]=et^~rt&st,t[41]=it^~nt&ot,t[2]=m^~x&w,t[3]=y^~b&T,t[12]=A^~P&O,t[13]=M^~k&R,t[22]=B^~z&Y,t[23]=N^~U&X,t[32]=H^~K&J,t[33]=q^~Z&$,t[42]=rt^~st&at,t[43]=nt^~ot&ht,t[4]=x^~w&S,t[5]=b^~T&E,t[14]=P^~O&L,t[15]=k^~R&I,t[24]=z^~Y&G,t[25]=U^~X&W,t[34]=K^~J&Q,t[35]=Z^~$&tt,t[44]=st^~at&lt,t[45]=ot^~ht&ut,t[6]=w^~S&g,t[7]=T^~E&v,t[16]=O^~L&C,t[17]=R^~I&_,t[26]=Y^~G&F,t[27]=X^~W&D,t[36]=J^~Q&V,t[37]=$^~tt&j,t[46]=at^~lt&et,t[47]=ht^~ut&it,t[8]=S^~g&m,t[9]=E^~v&y,t[18]=L^~C&A,t[19]=I^~_&M,t[28]=G^~F&B,t[29]=W^~D&N,t[38]=Q^~V&H,t[39]=tt^~j&q,t[48]=lt^~et&rt,t[49]=ut^~it&nt,t[0]^=p[r],t[1]^=p[r+1]};if(h)t.exports=_;else{for(M=0;M<A.length;++M)o[A[M]]=_[A[M]];l&&(void 0===(r=function(){return _}.call(e,i,e,t))||(t.exports=r))}}()},9746:t=>{function e(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=e,e.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},1830:(t,e)=>{e.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},e.decode=function(t){for(var e={},i=t.split("&"),r=0,n=i.length;r<n;r++){var s=i[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}},4187:t=>{var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var r,n,s=t,o=t.indexOf("["),a=t.indexOf("]");-1!=o&&-1!=a&&(t=t.substring(0,o)+t.substring(o,a).replace(/:/g,";")+t.substring(a,t.length));for(var h,l,u=e.exec(t||""),c={},d=14;d--;)c[i[d]]=u[d]||"";return-1!=o&&-1!=a&&(c.source=s,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=(r=c.path,n=r.replace(/\/{2,9}/g,"/").split("/"),"/"!=r.substr(0,1)&&0!==r.length||n.splice(0,1),"/"==r.substr(r.length-1,1)&&n.splice(n.length-1,1),n),c.queryKey=(h=c.query,l={},h.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,i){e&&(l[e]=i)})),l),c}},9657:(t,e,i)=>{t.exports=i(9558)},9558:(t,e,i)=>{t.exports={Heap:i(4485),Node:i(1289),Grid:i(8809),Util:i(8408),DiagonalMovement:i(3506),Heuristic:i(9430),AStarFinder:i(2131),BestFirstFinder:i(3644),BreadthFirstFinder:i(7904),DijkstraFinder:i(3607),BiAStarFinder:i(713),BiBestFirstFinder:i(6325),BiBreadthFirstFinder:i(2513),BiDijkstraFinder:i(6511),IDAStarFinder:i(944),JumpPointFinder:i(8717)}},3506:t=>{t.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},8809:(t,e,i)=>{var r=i(1289),n=i(3506);function s(t,e,i){var r;"object"!=typeof t?r=t:(e=t.length,r=t[0].length,i=t),this.width=r,this.height=e,this.nodes=this._buildNodes(r,e,i)}s.prototype._buildNodes=function(t,e,i){var n,s,o=new Array(e);for(n=0;n<e;++n)for(o[n]=new Array(t),s=0;s<t;++s)o[n][s]=new r(s,n);if(void 0===i)return o;if(i.length!==e||i[0].length!==t)throw new Error("Matrix size does not fit");for(n=0;n<e;++n)for(s=0;s<t;++s)i[n][s]&&(o[n][s].walkable=!1);return o},s.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},s.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},s.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},s.prototype.setWalkableAt=function(t,e,i){this.nodes[e][t].walkable=i},s.prototype.getNeighbors=function(t,e){var i=t.x,r=t.y,s=[],o=!1,a=!1,h=!1,l=!1,u=!1,c=!1,d=!1,f=!1,p=this.nodes;if(this.isWalkableAt(i,r-1)&&(s.push(p[r-1][i]),o=!0),this.isWalkableAt(i+1,r)&&(s.push(p[r][i+1]),h=!0),this.isWalkableAt(i,r+1)&&(s.push(p[r+1][i]),u=!0),this.isWalkableAt(i-1,r)&&(s.push(p[r][i-1]),d=!0),e===n.Never)return s;if(e===n.OnlyWhenNoObstacles)a=d&&o,l=o&&h,c=h&&u,f=u&&d;else if(e===n.IfAtMostOneObstacle)a=d||o,l=o||h,c=h||u,f=u||d;else{if(e!==n.Always)throw new Error("Incorrect value of diagonalMovement");a=!0,l=!0,c=!0,f=!0}return a&&this.isWalkableAt(i-1,r-1)&&s.push(p[r-1][i-1]),l&&this.isWalkableAt(i+1,r-1)&&s.push(p[r-1][i+1]),c&&this.isWalkableAt(i+1,r+1)&&s.push(p[r+1][i+1]),f&&this.isWalkableAt(i-1,r+1)&&s.push(p[r+1][i-1]),s},s.prototype.clone=function(){var t,e,i=this.width,n=this.height,o=this.nodes,a=new s(i,n),h=new Array(n);for(t=0;t<n;++t)for(h[t]=new Array(i),e=0;e<i;++e)h[t][e]=new r(e,t,o[t][e].walkable);return a.nodes=h,a},t.exports=s},9430:t=>{t.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var i=Math.SQRT2-1;return t<e?i*t+e:i*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},1289:t=>{t.exports=function(t,e,i){this.x=t,this.y=e,this.walkable=void 0===i||i}},8408:(t,e)=>{function i(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function r(t,e,i,r){var n,s,o,a,h,l,u=Math.abs,c=[];for(n=t<i?1:-1,s=e<r?1:-1,h=(o=u(i-t))-(a=u(r-e));c.push([t,e]),t!==i||e!==r;)(l=2*h)>-a&&(h-=a,t+=n),l<o&&(h+=o,e+=s);return c}e.backtrace=i,e.biBacktrace=function(t,e){var r=i(t),n=i(e);return r.concat(n.reverse())},e.pathLength=function(t){var e,i,r,n,s,o=0;for(e=1;e<t.length;++e)i=t[e-1],r=t[e],n=i[0]-r[0],s=i[1]-r[1],o+=Math.sqrt(n*n+s*s);return o},e.interpolate=r,e.expandPath=function(t){var e,i,n,s,o,a,h=[],l=t.length;if(l<2)return h;for(o=0;o<l-1;++o)for(e=t[o],i=t[o+1],s=(n=r(e[0],e[1],i[0],i[1])).length,a=0;a<s-1;++a)h.push(n[a]);return h.push(t[l-1]),h},e.smoothenPath=function(t,e){var i,n,s,o,a,h,l,u,c,d=e.length,f=e[0][0],p=e[0][1],g=e[d-1][0],v=e[d-1][1];for(s=[[i=f,n=p]],o=2;o<d;++o){for(l=r(i,n,(h=e[o])[0],h[1]),c=!1,a=1;a<l.length;++a)if(u=l[a],!t.isWalkableAt(u[0],u[1])){c=!0;break}c&&(lastValidCoord=e[o-1],s.push(lastValidCoord),i=lastValidCoord[0],n=lastValidCoord[1])}return s.push([g,v]),s},e.compressPath=function(t){if(t.length<3)return t;var e,i,r,n,s,o,a=[],h=t[0][0],l=t[0][1],u=t[1][0],c=t[1][1],d=u-h,f=c-l;for(d/=s=Math.sqrt(d*d+f*f),f/=s,a.push([h,l]),o=2;o<t.length;o++)e=u,i=c,r=d,n=f,d=(u=t[o][0])-e,f=(c=t[o][1])-i,f/=s=Math.sqrt(d*d+f*f),(d/=s)===r&&f===n||a.push([e,i]);return a.push([u,c]),a}},2131:(t,e,i)=>{var r=i(4485),n=i(8408),s=i(9430),o=i(3506);function a(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||s.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=t.heuristic||s.manhattan:this.heuristic=t.heuristic||s.octile}a.prototype.findPath=function(t,e,i,s,o){var a,h,l,u,c,d,f,p,g=new r((function(t,e){return t.f-e.f})),v=o.getNodeAt(t,e),m=o.getNodeAt(i,s),y=this.heuristic,x=this.diagonalMovement,b=this.weight,w=Math.abs,T=Math.SQRT2;for(v.g=0,v.f=0,g.push(v),v.opened=!0;!g.empty();){if((a=g.pop()).closed=!0,a===m)return n.backtrace(m);for(u=0,c=(h=o.getNeighbors(a,x)).length;u<c;++u)(l=h[u]).closed||(d=l.x,f=l.y,p=a.g+(d-a.x==0||f-a.y==0?1:T),(!l.opened||p<l.g)&&(l.g=p,l.h=l.h||b*y(w(d-i),w(f-s)),l.f=l.g+l.h,l.parent=a,l.opened?g.updateItem(l):(g.push(l),l.opened=!0)))}return[]},t.exports=a},3644:(t,e,i)=>{var r=i(2131);function n(t){r.call(this,t);var e=this.heuristic;this.heuristic=function(t,i){return 1e6*e(t,i)}}n.prototype=new r,n.prototype.constructor=n,t.exports=n},713:(t,e,i)=>{var r=i(4485),n=i(8408),s=i(9430),o=i(3506);function a(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||s.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=t.heuristic||s.manhattan:this.heuristic=t.heuristic||s.octile}a.prototype.findPath=function(t,e,i,s,o){var a,h,l,u,c,d,f,p,g=function(t,e){return t.f-e.f},v=new r(g),m=new r(g),y=o.getNodeAt(t,e),x=o.getNodeAt(i,s),b=this.heuristic,w=this.diagonalMovement,T=this.weight,S=Math.abs,E=Math.SQRT2;for(y.g=0,y.f=0,v.push(y),y.opened=1,x.g=0,x.f=0,m.push(x),x.opened=2;!v.empty()&&!m.empty();){for((a=v.pop()).closed=!0,u=0,c=(h=o.getNeighbors(a,w)).length;u<c;++u)if(!(l=h[u]).closed){if(2===l.opened)return n.biBacktrace(a,l);d=l.x,f=l.y,p=a.g+(d-a.x==0||f-a.y==0?1:E),(!l.opened||p<l.g)&&(l.g=p,l.h=l.h||T*b(S(d-i),S(f-s)),l.f=l.g+l.h,l.parent=a,l.opened?v.updateItem(l):(v.push(l),l.opened=1))}for((a=m.pop()).closed=!0,u=0,c=(h=o.getNeighbors(a,w)).length;u<c;++u)if(!(l=h[u]).closed){if(1===l.opened)return n.biBacktrace(l,a);d=l.x,f=l.y,p=a.g+(d-a.x==0||f-a.y==0?1:E),(!l.opened||p<l.g)&&(l.g=p,l.h=l.h||T*b(S(d-t),S(f-e)),l.f=l.g+l.h,l.parent=a,l.opened?m.updateItem(l):(m.push(l),l.opened=2))}}return[]},t.exports=a},6325:(t,e,i)=>{var r=i(713);function n(t){r.call(this,t);var e=this.heuristic;this.heuristic=function(t,i){return 1e6*e(t,i)}}n.prototype=new r,n.prototype.constructor=n,t.exports=n},2513:(t,e,i)=>{var r=i(8408),n=i(3506);function s(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never)}s.prototype.findPath=function(t,e,i,n,s){var o,a,h,l,u,c=s.getNodeAt(t,e),d=s.getNodeAt(i,n),f=[],p=[],g=this.diagonalMovement;for(f.push(c),c.opened=!0,c.by=0,p.push(d),d.opened=!0,d.by=1;f.length&&p.length;){for((h=f.shift()).closed=!0,l=0,u=(o=s.getNeighbors(h,g)).length;l<u;++l)if(!(a=o[l]).closed)if(a.opened){if(1===a.by)return r.biBacktrace(h,a)}else f.push(a),a.parent=h,a.opened=!0,a.by=0;for((h=p.shift()).closed=!0,l=0,u=(o=s.getNeighbors(h,g)).length;l<u;++l)if(!(a=o[l]).closed)if(a.opened){if(0===a.by)return r.biBacktrace(a,h)}else p.push(a),a.parent=h,a.opened=!0,a.by=1}return[]},t.exports=s},6511:(t,e,i)=>{var r=i(713);function n(t){r.call(this,t),this.heuristic=function(t,e){return 0}}n.prototype=new r,n.prototype.constructor=n,t.exports=n},7904:(t,e,i)=>{var r=i(8408),n=i(3506);function s(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never)}s.prototype.findPath=function(t,e,i,n,s){var o,a,h,l,u,c=[],d=this.diagonalMovement,f=s.getNodeAt(t,e),p=s.getNodeAt(i,n);for(c.push(f),f.opened=!0;c.length;){if((h=c.shift()).closed=!0,h===p)return r.backtrace(p);for(l=0,u=(o=s.getNeighbors(h,d)).length;l<u;++l)(a=o[l]).closed||a.opened||(c.push(a),a.opened=!0,a.parent=h)}return[]},t.exports=s},3607:(t,e,i)=>{var r=i(2131);function n(t){r.call(this,t),this.heuristic=function(t,e){return 0}}n.prototype=new r,n.prototype.constructor=n,t.exports=n},944:(t,e,i)=>{i(8408);var r=i(9430),n=i(1289),s=i(3506);function o(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||r.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=t.heuristic||r.manhattan:this.heuristic=t.heuristic||r.octile}o.prototype.findPath=function(t,e,i,r,s){var o,a,h,l=(new Date).getTime(),u=function(t,e){return this.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}.bind(this),c=function(t,e,i,r,o){if(this.timeLimit>0&&(new Date).getTime()-l>1e3*this.timeLimit)return 1/0;var a,h,d,p,g=e+u(t,f)*this.weight;if(g>i)return g;if(t==f)return r[o]=[t.x,t.y],t;var v,m,y=s.getNeighbors(t,this.diagonalMovement);for(d=0,a=1/0;p=y[d];++d){if(this.trackRecursion&&(p.retainCount=p.retainCount+1||1,!0!==p.tested&&(p.tested=!0)),(h=c(p,e+(m=p,(v=t).x===m.x||v.y===m.y?1:Math.SQRT2),i,r,o+1))instanceof n)return r[o]=[t.x,t.y],h;this.trackRecursion&&0==--p.retainCount&&(p.tested=!1),h<a&&(a=h)}return a}.bind(this),d=s.getNodeAt(t,e),f=s.getNodeAt(i,r),p=u(d,f);for(o=0;;++o){if((h=c(d,0,p,a=[],0))===1/0)return[];if(h instanceof n)return a;p=h}return[]},t.exports=o},4524:(t,e,i)=>{var r=i(1010),n=i(3506);function s(t){r.call(this,t)}s.prototype=new r,s.prototype.constructor=s,s.prototype._jump=function(t,e,i,r){var n=this.grid,s=t-i,o=e-r;if(!n.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(n.getNodeAt(t,e).tested=!0),n.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==s&&0!==o){if(n.isWalkableAt(t-s,e+o)&&!n.isWalkableAt(t-s,e)||n.isWalkableAt(t+s,e-o)&&!n.isWalkableAt(t,e-o))return[t,e];if(this._jump(t+s,e,t,e)||this._jump(t,e+o,t,e))return[t,e]}else if(0!==s){if(n.isWalkableAt(t+s,e+1)&&!n.isWalkableAt(t,e+1)||n.isWalkableAt(t+s,e-1)&&!n.isWalkableAt(t,e-1))return[t,e]}else if(n.isWalkableAt(t+1,e+o)&&!n.isWalkableAt(t+1,e)||n.isWalkableAt(t-1,e+o)&&!n.isWalkableAt(t-1,e))return[t,e];return this._jump(t+s,e+o,t,e)},s.prototype._findNeighbors=function(t){var e,i,r,s,o,a,h,l,u=t.parent,c=t.x,d=t.y,f=this.grid,p=[];if(u)e=u.x,i=u.y,r=(c-e)/Math.max(Math.abs(c-e),1),s=(d-i)/Math.max(Math.abs(d-i),1),0!==r&&0!==s?(f.isWalkableAt(c,d+s)&&p.push([c,d+s]),f.isWalkableAt(c+r,d)&&p.push([c+r,d]),f.isWalkableAt(c+r,d+s)&&p.push([c+r,d+s]),f.isWalkableAt(c-r,d)||p.push([c-r,d+s]),f.isWalkableAt(c,d-s)||p.push([c+r,d-s])):0===r?(f.isWalkableAt(c,d+s)&&p.push([c,d+s]),f.isWalkableAt(c+1,d)||p.push([c+1,d+s]),f.isWalkableAt(c-1,d)||p.push([c-1,d+s])):(f.isWalkableAt(c+r,d)&&p.push([c+r,d]),f.isWalkableAt(c,d+1)||p.push([c+r,d+1]),f.isWalkableAt(c,d-1)||p.push([c+r,d-1]));else for(h=0,l=(o=f.getNeighbors(t,n.Always)).length;h<l;++h)a=o[h],p.push([a.x,a.y]);return p},t.exports=s},1405:(t,e,i)=>{var r=i(1010),n=i(3506);function s(t){r.call(this,t)}s.prototype=new r,s.prototype.constructor=s,s.prototype._jump=function(t,e,i,r){var n=this.grid,s=t-i,o=e-r;if(!n.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(n.getNodeAt(t,e).tested=!0),n.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==s&&0!==o){if(n.isWalkableAt(t-s,e+o)&&!n.isWalkableAt(t-s,e)||n.isWalkableAt(t+s,e-o)&&!n.isWalkableAt(t,e-o))return[t,e];if(this._jump(t+s,e,t,e)||this._jump(t,e+o,t,e))return[t,e]}else if(0!==s){if(n.isWalkableAt(t+s,e+1)&&!n.isWalkableAt(t,e+1)||n.isWalkableAt(t+s,e-1)&&!n.isWalkableAt(t,e-1))return[t,e]}else if(n.isWalkableAt(t+1,e+o)&&!n.isWalkableAt(t+1,e)||n.isWalkableAt(t-1,e+o)&&!n.isWalkableAt(t-1,e))return[t,e];return n.isWalkableAt(t+s,e)||n.isWalkableAt(t,e+o)?this._jump(t+s,e+o,t,e):null},s.prototype._findNeighbors=function(t){var e,i,r,s,o,a,h,l,u=t.parent,c=t.x,d=t.y,f=this.grid,p=[];if(u)e=u.x,i=u.y,r=(c-e)/Math.max(Math.abs(c-e),1),s=(d-i)/Math.max(Math.abs(d-i),1),0!==r&&0!==s?(f.isWalkableAt(c,d+s)&&p.push([c,d+s]),f.isWalkableAt(c+r,d)&&p.push([c+r,d]),(f.isWalkableAt(c,d+s)||f.isWalkableAt(c+r,d))&&p.push([c+r,d+s]),!f.isWalkableAt(c-r,d)&&f.isWalkableAt(c,d+s)&&p.push([c-r,d+s]),!f.isWalkableAt(c,d-s)&&f.isWalkableAt(c+r,d)&&p.push([c+r,d-s])):0===r?f.isWalkableAt(c,d+s)&&(p.push([c,d+s]),f.isWalkableAt(c+1,d)||p.push([c+1,d+s]),f.isWalkableAt(c-1,d)||p.push([c-1,d+s])):f.isWalkableAt(c+r,d)&&(p.push([c+r,d]),f.isWalkableAt(c,d+1)||p.push([c+r,d+1]),f.isWalkableAt(c,d-1)||p.push([c+r,d-1]));else for(h=0,l=(o=f.getNeighbors(t,n.IfAtMostOneObstacle)).length;h<l;++h)a=o[h],p.push([a.x,a.y]);return p},t.exports=s},5368:(t,e,i)=>{var r=i(1010),n=i(3506);function s(t){r.call(this,t)}s.prototype=new r,s.prototype.constructor=s,s.prototype._jump=function(t,e,i,r){var n=this.grid,s=t-i,o=e-r;if(!n.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(n.getNodeAt(t,e).tested=!0),n.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==s&&0!==o){if(this._jump(t+s,e,t,e)||this._jump(t,e+o,t,e))return[t,e]}else if(0!==s){if(n.isWalkableAt(t,e-1)&&!n.isWalkableAt(t-s,e-1)||n.isWalkableAt(t,e+1)&&!n.isWalkableAt(t-s,e+1))return[t,e]}else if(0!==o&&(n.isWalkableAt(t-1,e)&&!n.isWalkableAt(t-1,e-o)||n.isWalkableAt(t+1,e)&&!n.isWalkableAt(t+1,e-o)))return[t,e];return n.isWalkableAt(t+s,e)&&n.isWalkableAt(t,e+o)?this._jump(t+s,e+o,t,e):null},s.prototype._findNeighbors=function(t){var e,i,r,s,o,a,h,l,u,c=t.parent,d=t.x,f=t.y,p=this.grid,g=[];if(c){if(e=c.x,i=c.y,r=(d-e)/Math.max(Math.abs(d-e),1),s=(f-i)/Math.max(Math.abs(f-i),1),0!==r&&0!==s)p.isWalkableAt(d,f+s)&&g.push([d,f+s]),p.isWalkableAt(d+r,f)&&g.push([d+r,f]),p.isWalkableAt(d,f+s)&&p.isWalkableAt(d+r,f)&&g.push([d+r,f+s]);else if(0!==r){u=p.isWalkableAt(d+r,f);var v=p.isWalkableAt(d,f+1),m=p.isWalkableAt(d,f-1);u&&(g.push([d+r,f]),v&&g.push([d+r,f+1]),m&&g.push([d+r,f-1])),v&&g.push([d,f+1]),m&&g.push([d,f-1])}else if(0!==s){u=p.isWalkableAt(d,f+s);var y=p.isWalkableAt(d+1,f),x=p.isWalkableAt(d-1,f);u&&(g.push([d,f+s]),y&&g.push([d+1,f+s]),x&&g.push([d-1,f+s])),y&&g.push([d+1,f]),x&&g.push([d-1,f])}}else for(h=0,l=(o=p.getNeighbors(t,n.OnlyWhenNoObstacles)).length;h<l;++h)a=o[h],g.push([a.x,a.y]);return g},t.exports=s},2403:(t,e,i)=>{var r=i(1010),n=i(3506);function s(t){r.call(this,t)}s.prototype=new r,s.prototype.constructor=s,s.prototype._jump=function(t,e,i,r){var n=this.grid,s=t-i,o=e-r;if(!n.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(n.getNodeAt(t,e).tested=!0),n.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==s){if(n.isWalkableAt(t,e-1)&&!n.isWalkableAt(t-s,e-1)||n.isWalkableAt(t,e+1)&&!n.isWalkableAt(t-s,e+1))return[t,e]}else{if(0===o)throw new Error("Only horizontal and vertical movements are allowed");if(n.isWalkableAt(t-1,e)&&!n.isWalkableAt(t-1,e-o)||n.isWalkableAt(t+1,e)&&!n.isWalkableAt(t+1,e-o))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+s,e+o,t,e)},s.prototype._findNeighbors=function(t){var e,i,r,s,o,a,h,l,u=t.parent,c=t.x,d=t.y,f=this.grid,p=[];if(u)e=u.x,i=u.y,r=(c-e)/Math.max(Math.abs(c-e),1),s=(d-i)/Math.max(Math.abs(d-i),1),0!==r?(f.isWalkableAt(c,d-1)&&p.push([c,d-1]),f.isWalkableAt(c,d+1)&&p.push([c,d+1]),f.isWalkableAt(c+r,d)&&p.push([c+r,d])):0!==s&&(f.isWalkableAt(c-1,d)&&p.push([c-1,d]),f.isWalkableAt(c+1,d)&&p.push([c+1,d]),f.isWalkableAt(c,d+s)&&p.push([c,d+s]));else for(h=0,l=(o=f.getNeighbors(t,n.Never)).length;h<l;++h)a=o[h],p.push([a.x,a.y]);return p},t.exports=s},8717:(t,e,i)=>{var r=i(3506),n=i(2403),s=i(4524),o=i(5368),a=i(1405);t.exports=function(t){return(t=t||{}).diagonalMovement===r.Never?new n(t):t.diagonalMovement===r.Always?new s(t):t.diagonalMovement===r.OnlyWhenNoObstacles?new o(t):new a(t)}},1010:(t,e,i)=>{var r=i(4485),n=i(8408),s=i(9430);function o(t){t=t||{},this.heuristic=t.heuristic||s.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}i(3506),o.prototype.findPath=function(t,e,i,s,o){var a,h=this.openList=new r((function(t,e){return t.f-e.f})),l=this.startNode=o.getNodeAt(t,e),u=this.endNode=o.getNodeAt(i,s);for(this.grid=o,l.g=0,l.f=0,h.push(l),l.opened=!0;!h.empty();){if((a=h.pop()).closed=!0,a===u)return n.expandPath(n.backtrace(u));this._identifySuccessors(a)}return[]},o.prototype._identifySuccessors=function(t){var e,i,r,n,o,a,h,l,u,c,d=this.grid,f=this.heuristic,p=this.openList,g=this.endNode.x,v=this.endNode.y,m=t.x,y=t.y,x=Math.abs;for(Math.max,n=0,o=(e=this._findNeighbors(t)).length;n<o;++n)if(i=e[n],r=this._jump(i[0],i[1],m,y)){if(a=r[0],h=r[1],(c=d.getNodeAt(a,h)).closed)continue;l=s.octile(x(a-m),x(h-y)),u=t.g+l,(!c.opened||u<c.g)&&(c.g=u,c.h=c.h||f(x(a-g),x(h-v)),c.f=c.g+c.h,c.parent=t,c.opened?p.updateItem(c):(p.push(c),c.opened=!0))}},t.exports=o},2260:function(t){var e;e=function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1528)}([function(t,e){function i(t,e,i){var r=i?t[e]:Object.getOwnPropertyDescriptor(t,e);return!i&&r.value&&"object"==typeof r.value&&(r=r.value),!(!r||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(r))&&(void 0===r.enumerable&&(r.enumerable=!0),void 0===r.configurable&&(r.configurable=!0),r)}function r(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return!!i&&(i.value&&"object"==typeof i.value&&(i=i.value),!1===i.configurable)}function n(t,e,n,s){for(var a in e)if(e.hasOwnProperty(a)){var h=i(e,a,n);if(!1!==h){if(r((s||t).prototype,a)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,h)}else t.prototype[a]=e[a]}}function s(t,e){if(e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)n(t,e[i].prototype||e[i])}}function o(t){var e,i;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var r=t.Extends;e=function(){r.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,i=t.Extends,delete t.Extends):e.prototype.constructor=e;var o=null;return t.Mixins&&(o=t.Mixins,delete t.Mixins),s(e,o),n(e,t,!0,i),e}o.extend=n,o.mixin=s,o.ignoreFinals=!1,t.exports=o},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,i){var r=typeof t;return t&&"number"!==r&&"string"!==r&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},function(t,e,i){var r=i(0),n=i(124),s=new r({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new s(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return n(this.x,t.x,e)&&n(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,i=t*t+e*e;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,r=this.y;return this.x=i+e*(t.x-i),this.y=r+e*(t.y-r),this},transformMat3:function(t){var e=this.x,i=this.y,r=t.val;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this},transformMat4:function(t){var e=this.x,i=this.y,r=t.val;return this.x=r[0]*e+r[4]*i+r[12],this.y=r[1]*e+r[5]*i+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&e>t&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e*this.x-i*this.y,i*this.x+e*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),t.exports=s},function(t,e,i){var r=i(0),n=i(56),s=new r({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=n.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=s},function(t,e,i){var r=i(0),n=i(24),s=i(20),o=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,e){o.prototype.hasOwnProperty(t)||(o.prototype[t]=e)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},n.register("GameObjectFactory",o,"add"),t.exports=o},function(t,e){t.exports=function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var r=e.split("."),n=t,s=i,o=0;o<r.length;o++){if(!n.hasOwnProperty(r[o])){s=i;break}s=n[r[o]],n=n[r[o]]}return s}return i}return i}},function(t,e){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e){var i={},r={install:function(t){for(var e in i)t[e]=i[e]},register:function(t,e){i[t]=e},destroy:function(){i={}}};t.exports=r},function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function s(){}function o(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,r,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new o(i,r||t,s),h=n?n+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function l(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),l.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},l.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},l.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},l.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,s),!0;case 6:return u.fn.call(u.context,e,i,r,s,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;case 4:u[l].fn.call(u[l].context,e,i,r);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},l.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},l.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},l.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return h(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||h(this,s);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==e||r&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[s]=1===l.length?l[0]:l:h(this,s)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&h(this,e)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l},function(t,e,i){var r=i(0),n=i(57),s=i(171),o=i(306),a=i(56),h=i(47),l=i(174),u=new r({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=a.RECTANGLE,this.x=t,this.y=e,this.width=i,this.height=r},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=u},function(t,e,i){t.exports={Alpha:i(607),AlphaSingle:i(303),BlendMode:i(304),ComputedSize:i(608),Crop:i(609),Depth:i(305),Flip:i(610),GetBounds:i(611),Mask:i(309),Origin:i(632),PathFollower:i(633),Pipeline:i(167),ScrollFactor:i(312),Size:i(634),Texture:i(635),TextureCrop:i(636),Tint:i(637),ToJSON:i(176),Transform:i(313),TransformMatrix:i(25),Visible:i(314)}},function(t,e){function i(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}t.exports={getTintFromFloats:function(t,e,i,r){return((255&(255*r|0))<<24|(255&(255*t|0))<<16|(255&(255*e|0))<<8|255&(255*i|0))>>>0},getTintAppendFloatAlpha:function(t,e){return((255&(255*e|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255&(255*e|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,e){e&&-1!==e||(e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var r=t.createShader(t.FRAGMENT_SHADER),n=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var s=n.replace(/%forloop%/gi,i(e));if(t.shaderSource(r,s),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e},parseFragmentShaderMaxTextures:function(t,e){if(!t)return"";for(var i="",r=0;r<e;r++)r>0&&(i+="\n\telse "),r<e-1&&(i+="if (outTexId < "+r+".5)"),i+="\n\t{",i+="\n\t\ttexture = texture2D(uMainSampler["+r+"], outTexCoord);",i+="\n\t}";return(t=t.replace(/%count%/gi,e.toString())).replace(/%forloop%/gi,i)}}},function(t,e,i){var r=i(193),n=i(6);t.exports=function(t,e,i){var s=n(t,e,null);if(null===s)return i;if(Array.isArray(s))return r.RND.pick(s);if("object"==typeof s){if(s.hasOwnProperty("randInt"))return r.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return r.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if("function"==typeof s)return s(e);return s}},function(t,e){var i={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=i},function(t,e,i){var r=i(0),n=i(176),s=i(101),o=i(9),a=i(75),h=i(20),l=new r({Extends:o,initialize:function(t,e){o.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(t,e){return this.data||(this.data=new s(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new s(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new s(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new s(this)),this.data.get(t)},setInteractive:function(t,e,i){return this.scene.sys.input.enable(this,t,e,i),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(t){return!(l.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(t)):i.unshift(this.scene.sys.displayList.getIndex(t)),i},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,t.exports=l},function(t,e,i){var r=i(0),n=i(24),s=i(20),o=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(t,e){o.prototype.hasOwnProperty(t)||(o.prototype[t]=e)},o.remove=function(t){o.prototype.hasOwnProperty(t)&&delete o.prototype[t]},n.register("GameObjectCreator",o,"make"),t.exports=o},function(t,e,i){var r=i(7),n=function(){var t,e,i,s,o,a,h=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof h&&(c=h,h=arguments[1]||{},l=2),u===l&&(h=this,--l);l<u;l++)if(null!=(t=arguments[l]))for(e in t)i=h[e],h!==(s=t[e])&&(c&&s&&(r(s)||(o=Array.isArray(s)))?(o?(o=!1,a=i&&Array.isArray(i)?i:[]):a=i&&r(i)?i:{},h[e]=n(c,a,s)):void 0!==s&&(h[e]=s));return h};t.exports=n},function(t,e){t.exports=function(t,e,i){return Math.max(e,Math.min(i,t))}},function(t,e,i){var r=i(25),n=new r,s=new r,o=new r,a={camera:n,sprite:s,calc:o};t.exports=function(t,e,i){var r=n,h=s,l=o;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),r.copyFrom(e.matrix),i?(r.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),r.multiply(h,l),a}},function(t,e,i){t.exports={ADDED_TO_SCENE:i(656),BOOT:i(657),CREATE:i(658),DESTROY:i(659),PAUSE:i(660),POST_UPDATE:i(661),PRE_RENDER:i(662),PRE_UPDATE:i(663),READY:i(664),REMOVED_FROM_SCENE:i(665),RENDER:i(666),RESUME:i(667),SHUTDOWN:i(668),SLEEP:i(669),START:i(670),TRANSITION_COMPLETE:i(671),TRANSITION_INIT:i(672),TRANSITION_OUT:i(673),TRANSITION_START:i(674),TRANSITION_WAKE:i(675),UPDATE:i(676),WAKE:i(677)}},function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,e,i){t.exports={BLUR:i(612),BOOT:i(613),CONTEXT_LOST:i(614),CONTEXT_RESTORED:i(615),DESTROY:i(616),FOCUS:i(617),HIDDEN:i(618),PAUSE:i(619),POST_RENDER:i(620),POST_STEP:i(621),PRE_RENDER:i(622),PRE_STEP:i(623),READY:i(624),RESUME:i(625),STEP:i(626),VISIBLE:i(627)}},function(t,e,i){var r=i(0),n=i(21),s=i(95),o=i(2),a=i(155),h=i(240),l=i(517),u=i(156),c=new r({initialize:function(t,e){this.loader=t,this.cache=o(e,"cache",!1),this.type=o(e,"type",!1),this.key=o(e,"key",!1);var i=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+i),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var r=o(e,"url");void 0===r?r=t.path+i+"."+o(e,"extension",""):"string"!=typeof r||r.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(r=t.path+r),this.url=r,this.src="",this.xhrSettings=u(o(e,"responseType",void 0)),o(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,o(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===n.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=n.FILE_LOADING,this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(t,e){var i=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===e.target.status,r=!(e.target&&200!==e.target.status)||i;4===t.readyState&&t.status>=400&&t.status<=599&&(r=!1),this.state=n.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,r)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=n.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=n.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=n.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,i=this.type;this.loader.emit(s.FILE_COMPLETE,e,i,t),this.loader.emit(s.FILE_KEY_COMPLETE+i+"-"+e,e,i,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});c.createObjectURL=function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var r=new FileReader;r.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+r.result.split(",")[1]},r.onerror=t.onerror,r.readAsDataURL(e)}},c.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=c},function(t,e){var i={},r={},n={register:function(t,e,r,n){void 0===n&&(n=!1),i[t]={plugin:e,mapping:r,custom:n}},registerCustom:function(t,e,i,n){r[t]={plugin:e,mapping:i,data:n}},hasCore:function(t){return i.hasOwnProperty(t)},hasCustom:function(t){return r.hasOwnProperty(t)},getCore:function(t){return i[t]},getCustom:function(t){return r[t]},getCustomClass:function(t){return r.hasOwnProperty(t)?r[t].plugin:null},remove:function(t){i.hasOwnProperty(t)&&delete i[t]},removeCustom:function(t){r.hasOwnProperty(t)&&delete r[t]},destroyCorePlugins:function(){for(var t in i)i.hasOwnProperty(t)&&delete i[t]},destroyCustomPlugins:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};t.exports=n},function(t,e,i){var r=i(0),n=i(14),s=i(3),o=new r({initialize:function(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.matrix=new Float32Array([t,e,i,r,n,s,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],i=t[1],r=t[2],s=t[3];return e||i?i>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):r||s?n.TAU-(s>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var i=this.matrix;return i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this},scale:function(t,e){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this},rotate:function(t){var e=Math.sin(t),i=Math.cos(t),r=this.matrix,n=r[0],s=r[1],o=r[2],a=r[3];return r[0]=n*i+o*e,r[1]=s*i+a*e,r[2]=n*-e+o*i,r[3]=s*-e+a*i,this},multiply:function(t,e){var i=this.matrix,r=t.matrix,n=i[0],s=i[1],o=i[2],a=i[3],h=i[4],l=i[5],u=r[0],c=r[1],d=r[2],f=r[3],p=r[4],g=r[5],v=void 0===e?this:e;return v.a=u*n+c*o,v.b=u*s+c*a,v.c=d*n+f*o,v.d=d*s+f*a,v.e=p*n+g*o+h,v.f=p*s+g*a+l,v},multiplyWithOffset:function(t,e,i){var r=this.matrix,n=t.matrix,s=r[0],o=r[1],a=r[2],h=r[3],l=e*s+i*a+r[4],u=e*o+i*h+r[5],c=n[0],d=n[1],f=n[2],p=n[3],g=n[4],v=n[5];return r[0]=c*s+d*a,r[1]=c*o+d*h,r[2]=f*s+p*a,r[3]=f*o+p*h,r[4]=g*s+v*a+l,r[5]=g*o+v*h+u,this},transform:function(t,e,i,r,n,s){var o=this.matrix,a=o[0],h=o[1],l=o[2],u=o[3],c=o[4],d=o[5];return o[0]=t*a+e*l,o[1]=t*h+e*u,o[2]=i*a+r*l,o[3]=i*h+r*u,o[4]=n*a+s*l+c,o[5]=n*h+s*u+d,this},transformPoint:function(t,e,i){void 0===i&&(i={x:0,y:0});var r=this.matrix,n=r[0],s=r[1],o=r[2],a=r[3],h=r[4],l=r[5];return i.x=t*n+e*o+h,i.y=t*s+e*a+l,i},invert:function(){var t=this.matrix,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=e*n-i*r;return t[0]=n/a,t[1]=-i/a,t[2]=-r/a,t[3]=e/a,t[4]=(r*o-n*s)/a,t[5]=-(e*o-i*s)/a,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){var e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,i,r,n,s){var o=this.matrix;return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,i=e[0],r=e[1],n=e[2],s=e[3],o=i*s-r*n;if(t.translateX=e[4],t.translateY=e[5],i||r){var a=Math.sqrt(i*i+r*r);t.rotation=r>0?Math.acos(i/a):-Math.acos(i/a),t.scaleX=a,t.scaleY=o/a}else if(n||s){var h=Math.sqrt(n*n+s*s);t.rotation=.5*Math.PI-(s>0?Math.acos(-n/h):-Math.acos(n/h)),t.scaleX=o/h,t.scaleY=h}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,i,r,n){var s=this.matrix,o=Math.sin(i),a=Math.cos(i);return s[4]=t,s[5]=e,s[0]=a*r,s[1]=o*r,s[2]=-o*n,s[3]=a*n,this},applyInverse:function(t,e,i){void 0===i&&(i=new s);var r=this.matrix,n=r[0],o=r[1],a=r[2],h=r[3],l=r[4],u=r[5],c=1/(n*h+a*-o);return i.x=h*c*t+-a*c*e+(u*a-l*h)*c,i.y=n*c*e+-o*c*t+(-u*n+l*o)*c,i},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,i){var r=this.getX(t,e);return i&&(r=Math.round(r)),r},getYRound:function(t,e,i){var r=this.getY(t,e);return i&&(r=Math.round(r)),r},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=o},function(t,e,i){var r=i(2);t.exports=function(t,e,i,n,s,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=o.width),void 0===n&&(n=o.height),s||(s={});var a=r(s,"isNotEmpty",!1),h=r(s,"isColliding",!1),l=r(s,"hasInterestingFace",!1);t<0&&(i+=t,t=0),e<0&&(n+=e,e=0),t+i>o.width&&(i=Math.max(o.width-t,0)),e+n>o.height&&(n=Math.max(o.height-e,0));for(var u=[],c=e;c<e+n;c++)for(var d=t;d<t+i;d++){var f=o.data[c][d];if(null!==f){if(a&&-1===f.index)continue;if(h&&!f.collides)continue;if(l&&!f.hasInterestingFace)continue;u.push(f)}}return u}},function(t,e){t.exports=function(t,e,i,r,n,s){var o;void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=1);var a=0,h=t.length;if(1===s)for(o=n;o<h;o++)t[o][e]=i+a*r,a++;else for(o=n;o>=0;o--)t[o][e]=i+a*r,a++;return t}},function(t,e,i){var r=i(35),n=i(13);t.exports=function(t,e,i){e.x=n(i,"x",0),e.y=n(i,"y",0),e.depth=n(i,"depth",0),e.flipX=n(i,"flipX",!1),e.flipY=n(i,"flipY",!1);var s=n(i,"scale",null);"number"==typeof s?e.setScale(s):null!==s&&(e.scaleX=n(s,"x",1),e.scaleY=n(s,"y",1));var o=n(i,"scrollFactor",null);"number"==typeof o?e.setScrollFactor(o):null!==o&&(e.scrollFactorX=n(o,"x",1),e.scrollFactorY=n(o,"y",1)),e.rotation=n(i,"rotation",0);var a=n(i,"angle",null);null!==a&&(e.angle=a),e.alpha=n(i,"alpha",1);var h=n(i,"origin",null);if("number"==typeof h)e.setOrigin(h);else if(null!==h){var l=n(h,"x",.5),u=n(h,"y",.5);e.setOrigin(l,u)}return e.blendMode=n(i,"blendMode",r.NORMAL),e.visible=n(i,"visible",!0),n(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},function(t,e){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n,s){var o=n.alpha*i.alpha;if(o<=0)return!1;var a=r(i,n,s).calc;return e.globalCompositeOperation=t.blendModes[i.blendMode],e.globalAlpha=o,e.save(),a.setToContext(e),e.imageSmoothingEnabled=!(!t.antialias||i.frame&&i.frame.source.scaleMode),!0}},function(t,e,i){var r,n,s,o=i(33),a=i(192),h=[],l=!1;t.exports=(s=function(){var t=0;return h.forEach((function(e){e.parent&&t++})),t},{create2D:function(t,e,i){return r(t,e,i,o.CANVAS)},create:r=function(t,e,i,r,s){var u;void 0===e&&(e=1),void 0===i&&(i=1),void 0===r&&(r=o.CANVAS),void 0===s&&(s=!1);var c=n(r);return null===c?(c={parent:t,canvas:document.createElement("canvas"),type:r},r===o.CANVAS&&h.push(c),u=c.canvas):(c.parent=t,u=c.canvas),s&&(c.parent=u),u.width=e,u.height=i,l&&r===o.CANVAS&&a.disable(u.getContext("2d")),u},createWebGL:function(t,e,i){return r(t,e,i,o.WEBGL)},disableSmoothing:function(){l=!0},enableSmoothing:function(){l=!1},first:n=function(t){if(void 0===t&&(t=o.CANVAS),t===o.WEBGL)return null;for(var e=0;e<h.length;e++){var i=h[e];if(!i.parent&&i.type===t)return i}return null},free:function(){return h.length-s()},pool:h,remove:function(t){var e=t instanceof HTMLCanvasElement;h.forEach((function(i){(e&&i.canvas===t||!e&&i.parent===t)&&(i.parent=null,i.canvas.width=1,i.canvas.height=1)}))},total:s})},function(t,e){var i={};t.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i.extend=function(t,e){var r,n;"boolean"==typeof e?(r=2,n=e):(r=1,n=!0);for(var s=r;s<arguments.length;s++){var o=arguments[s];if(o)for(var a in o)n&&o[a]&&o[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=o[a]:(t[a]=t[a]||{},i.extend(t[a],n,o[a])):t[a]=o[a]}return t},i.clone=function(t,e){return i.extend({},e,t)},i.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},i.values=function(t){var e=[];if(Object.keys){for(var i=Object.keys(t),r=0;r<i.length;r++)e.push(t[i[r]]);return e}for(var n in t)e.push(t[n]);return e},i.get=function(t,e,i,r){e=e.split(".").slice(i,r);for(var n=0;n<e.length;n+=1)t=t[e[n]];return t},i.set=function(t,e,r,n,s){var o=e.split(".").slice(n,s);return i.get(t,e,0,-1)[o[o.length-1]]=r,r},i.shuffle=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(i.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t},i.choose=function(t){return t[Math.floor(i.random()*t.length)]},i.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},i.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isFunction=function(t){return"function"==typeof t},i.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},i.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},i.clamp=function(t,e,i){return t<e?e:t>i?i:t},i.sign=function(t){return t<0?-1:1},i.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-i._nowStartTime},i.random=function(e,i){return i=void 0!==i?i:1,(e=void 0!==e?e:0)+t()*(i-e)};var t=function(){return i._seed=(9301*i._seed+49297)%233280,i._seed/233280};i.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},i.map=function(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r+=1)i.push(e(t[r]));return i},i.topologicalSort=function(t){var e=[],r=[],n=[];for(var s in t)r[s]||n[s]||i._topologicalSort(s,r,n,t,e);return e},i._topologicalSort=function(t,e,r,n,s){var o=n[t]||[];r[t]=!0;for(var a=0;a<o.length;a+=1){var h=o[a];r[h]||e[h]||i._topologicalSort(h,e,r,n,s)}r[t]=!1,e[t]=!0,s.push(t)},i.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var i=arguments[e];i._chained?t.push.apply(t,i._chained):t.push(i)}var r=function(){for(var e,i=new Array(arguments.length),r=0,n=arguments.length;r<n;r++)i[r]=arguments[r];for(r=0;r<t.length;r+=1){var s=t[r].apply(e,i);void 0!==s&&(e=s)}return e};return r._chained=t,r},i.chainPathBefore=function(t,e,r){return i.set(t,e,i.chain(r,i.get(t,e)))},i.chainPathAfter=function(t,e,r){return i.set(t,e,i.chain(i.get(t,e),r))}}()},function(t,e,i){var r={VERSION:"3.55.2",BlendModes:i(35),ScaleModes:i(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=r},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(47),a=new r({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible],initialize:function(t,e,i){void 0===e&&(e="Shape"),s.call(this,t,e),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,i){return void 0===i&&(i=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=a},function(t,e){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,e,i){var r=i(14);t.exports=function(t){return t*r.DEG_TO_RAD}},function(t,e,i){t.exports={DESTROY:i(743),FADE_IN_COMPLETE:i(744),FADE_IN_START:i(745),FADE_OUT_COMPLETE:i(746),FADE_OUT_START:i(747),FLASH_COMPLETE:i(748),FLASH_START:i(749),FOLLOW_UPDATE:i(750),PAN_COMPLETE:i(751),PAN_START:i(752),POST_RENDER:i(753),PRE_RENDER:i(754),ROTATE_COMPLETE:i(755),ROTATE_START:i(756),SHAKE_COMPLETE:i(757),SHAKE_START:i(758),ZOOM_COMPLETE:i(759),ZOOM_START:i(760)}},function(t,e,i){var r=i(0),n=i(103),s=i(328),o=i(188),a=i(329),h=new r({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,i,r)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,i,r,n){return void 0===r&&(r=255),void 0===n&&(n=!0),this._locked=!0,this.red=t,this.green=e,this.blue=i,this.alpha=r,this._locked=!1,this.update(n)},setGLTo:function(t,e,i,r){return void 0===r&&(r=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=i,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,i){return o(t,e,i,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,i=this.g,r=this.b,o=this.a;return this._color=n(e,i,r),this._color32=s(e,i,r,o),this._rgba="rgba("+e+","+i+","+r+","+o/255+")",t&&a(e,i,r,this),this},updateHSV:function(){var t=this.r,e=this.g,i=this.b;return a(t,e,i,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t)),r=Math.floor(t+Math.random()*(e-t)),n=Math.floor(t+Math.random()*(e-t));return this.setTo(i,r,n)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t));return this.setTo(i,i,i)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,i=this.g,r=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),this.setTo(e,i,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,o(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,o(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,o(this._h,this._s,t,this)}}});t.exports=h},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new r(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var i=t.x,r=t.y,n=t.z,s=e.x,o=e.y,a=e.z;return this.x=r*a-n*o,this.y=n*s-i*a,this.z=i*o-r*s,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,r=t.z-this.z||0;return Math.sqrt(e*e+i*i+r*r)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,r=t.z-this.z||0;return e*e+i*i+r*r},length:function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},lengthSq:function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},normalize:function(){var t=this.x,e=this.y,i=this.z,r=t*t+e*e+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=i*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*n-e*o,this.z=e*s-i*n,this},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,r=this.y,n=this.z;return this.x=i+e*(t.x-i),this.y=r+e*(t.y-r),this.z=n+e*(t.z-n),this},applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z,n=t.val;return this.x=n[0]*e+n[3]*i+n[6]*r,this.y=n[1]*e+n[4]*i+n[7]*r,this.z=n[2]*e+n[5]*i+n[8]*r,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=t.val,s=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*s,this},transformMat3:function(t){var e=this.x,i=this.y,r=this.z,n=t.val;return this.x=e*n[0]+i*n[3]+r*n[6],this.y=e*n[1]+i*n[4]+r*n[7],this.z=e*n[2]+i*n[5]+r*n[8],this},transformMat4:function(t){var e=this.x,i=this.y,r=this.z,n=t.val;return this.x=n[0]*e+n[4]*i+n[8]*r+n[12],this.y=n[1]*e+n[5]*i+n[9]*r+n[13],this.z=n[2]*e+n[6]*i+n[10]*r+n[14],this},transformCoordinates:function(t){var e=this.x,i=this.y,r=this.z,n=t.val,s=e*n[0]+i*n[4]+r*n[8]+n[12],o=e*n[1]+i*n[5]+r*n[9]+n[13],a=e*n[2]+i*n[6]+r*n[10]+n[14],h=e*n[3]+i*n[7]+r*n[11]+n[15];return this.x=s/h,this.y=o/h,this.z=a/h,this},transformQuat:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*r-o*i,l=a*i+o*e-n*r,u=a*r+n*i-s*e,c=-n*e-s*i-o*r;return this.x=h*a+c*-n+l*-o-u*-s,this.y=l*a+c*-s+u*-n-h*-o,this.z=u*a+c*-o+h*-s-l*-n,this},project:function(t){var e=this.x,i=this.y,r=this.z,n=t.val,s=n[0],o=n[1],a=n[2],h=n[3],l=n[4],u=n[5],c=n[6],d=n[7],f=n[8],p=n[9],g=n[10],v=n[11],m=n[12],y=n[13],x=n[14],b=1/(e*h+i*d+r*v+n[15]);return this.x=(e*s+i*l+r*f+m)*b,this.y=(e*o+i*u+r*p+y)*b,this.z=(e*a+i*c+r*g+x)*b,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var i=t.x,r=t.y,n=t.z,s=t.w,o=this.x-i,a=s-this.y-1-r,h=this.z;return this.x=2*o/n-1,this.y=2*a/s-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0,0),r.LEFT=new r(-1,0,0),r.UP=new r(0,-1,0),r.DOWN=new r(0,1,0),r.FORWARD=new r(0,0,1),r.BACK=new r(0,0,-1),r.ONE=new r(1,1,1),t.exports=r},function(t,e){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(83),o=i(165),a=i(32),h=i(84),l=i(271);!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(e){var i={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!e.hasOwnProperty("position")&&e.hasOwnProperty("vertices")?e.position=n.centre(e.vertices):e.hasOwnProperty("vertices")||(i.vertices=n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var r=a.extend(i,e);return t(r,e),r.setOnCollideWith=function(t,e){return e?this.onCollideWith[t.id]=e:delete this.onCollideWith[t.id],this},r},r.nextGroup=function(t){return t?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var t=function(t,e){e=e||{},r.set(t,{bounds:t.bounds||h.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var i=t.bounds;if(n.rotate(t.vertices,t.angle,t.position),l.rotate(t.axes,t.angle),h.update(i,t.vertices,t.velocity),r.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia}),1===t.parts.length){var o=t.centerOfMass,a=t.centerOffset,u=i.max.x-i.min.x,c=i.max.y-i.min.y;o.x=-(i.min.x-t.position.x)/u,o.y=-(i.min.y-t.position.y)/c,a.x=u*o.x,a.y=c*o.y}};r.set=function(t,e,i){var n;for(n in"string"==typeof e&&(n=e,(e={})[n]=i),e)if(Object.prototype.hasOwnProperty.call(e,n))switch(i=e[n],n){case"isStatic":r.setStatic(t,i);break;case"isSleeping":o.set(t,i);break;case"mass":r.setMass(t,i);break;case"density":r.setDensity(t,i);break;case"inertia":r.setInertia(t,i);break;case"vertices":r.setVertices(t,i);break;case"position":r.setPosition(t,i);break;case"angle":r.setAngle(t,i);break;case"velocity":r.setVelocity(t,i);break;case"angularVelocity":r.setAngularVelocity(t,i);break;case"parts":r.setParts(t,i);break;case"centre":r.setCentre(t,i);break;default:t[n]=i}},r.setStatic=function(t,e){for(var i=0;i<t.parts.length;i++){var r=t.parts[i];r.isStatic=e,e?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,r._original=null)}},r.setMass=function(t,e){var i=t.inertia/(t.mass/6);t.inertia=i*(e/6),t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},r.setDensity=function(t,e){r.setMass(t,e*t.area),t.density=e},r.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},r.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=n.create(e,t),t.axes=l.fromVertices(t.vertices),t.area=n.area(t.vertices),r.setMass(t,t.density*t.area);var i=n.centre(t.vertices);n.translate(t.vertices,i,-1),r.setInertia(t,r._inertiaScale*n.inertia(t.vertices,t.mass)),n.translate(t.vertices,t.position),h.update(t.bounds,t.vertices,t.velocity)},r.setParts=function(t,e,i){var s;for(e=e.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,s=0;s<e.length;s++){var o=e[s];o!==t&&(o.parent=t,t.parts.push(o))}if(1!==t.parts.length){if(i=void 0===i||i){var a=[];for(s=0;s<e.length;s++)a=a.concat(e[s].vertices);n.clockwiseSort(a);var l=n.hull(a),u=n.centre(l);r.setVertices(t,l),n.translate(t.vertices,u)}var c=r._totalProperties(t),d=c.centre.x,f=c.centre.y,p=t.bounds,g=t.centerOfMass,v=t.centerOffset;h.update(p,t.vertices,t.velocity),g.x=-(p.min.x-d)/(p.max.x-p.min.x),g.y=-(p.min.y-f)/(p.max.y-p.min.y),v.x=d,v.y=f,t.area=c.area,t.parent=t,t.position.x=d,t.position.y=f,t.positionPrev.x=d,t.positionPrev.y=f,r.setMass(t,c.mass),r.setInertia(t,c.inertia),r.setPosition(t,c.centre)}},r.setCentre=function(t,e,i){i?(t.positionPrev.x+=e.x,t.positionPrev.y+=e.y,t.position.x+=e.x,t.position.y+=e.y):(t.positionPrev.x=e.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=e.y-(t.position.y-t.positionPrev.y),t.position.x=e.x,t.position.y=e.y)},r.setPosition=function(t,e){var i=s.sub(e,t.position);t.positionPrev.x+=i.x,t.positionPrev.y+=i.y;for(var r=0;r<t.parts.length;r++){var o=t.parts[r];o.position.x+=i.x,o.position.y+=i.y,n.translate(o.vertices,i),h.update(o.bounds,o.vertices,t.velocity)}},r.setAngle=function(t,e){var i=e-t.angle;t.anglePrev+=i;for(var r=0;r<t.parts.length;r++){var o=t.parts[r];o.angle+=i,n.rotate(o.vertices,i,t.position),l.rotate(o.axes,i),h.update(o.bounds,o.vertices,t.velocity),r>0&&s.rotateAbout(o.position,i,t.position,o.position)}},r.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=s.magnitude(t.velocity)},r.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},r.translate=function(t,e){r.setPosition(t,s.add(t.position,e))},r.rotate=function(t,e,i){if(i){var n=Math.cos(e),s=Math.sin(e),o=t.position.x-i.x,a=t.position.y-i.y;r.setPosition(t,{x:i.x+(o*n-a*s),y:i.y+(o*s+a*n)}),r.setAngle(t,t.angle+e)}else r.setAngle(t,t.angle+e)},r.scale=function(t,e,i,s){var o=0,a=0;s=s||t.position;for(var u=0;u<t.parts.length;u++){var c=t.parts[u];c.scale.x=e,c.scale.y=i,n.scale(c.vertices,e,i,s),c.axes=l.fromVertices(c.vertices),c.area=n.area(c.vertices),r.setMass(c,t.density*c.area),n.translate(c.vertices,{x:-c.position.x,y:-c.position.y}),r.setInertia(c,r._inertiaScale*n.inertia(c.vertices,c.mass)),n.translate(c.vertices,{x:c.position.x,y:c.position.y}),u>0&&(o+=c.area,a+=c.inertia),c.position.x=s.x+(c.position.x-s.x)*e,c.position.y=s.y+(c.position.y-s.y)*i,h.update(c.bounds,c.vertices,t.velocity)}t.parts.length>1&&(t.area=o,t.isStatic||(r.setMass(t,t.density*o),r.setInertia(t,a))),t.circleRadius&&(e===i?t.circleRadius*=e:t.circleRadius=null)},r.update=function(t,e,i,r){var o=Math.pow(e*i*t.timeScale,2),a=1-t.frictionAir*i*t.timeScale,u=t.position.x-t.positionPrev.x,c=t.position.y-t.positionPrev.y;t.velocity.x=u*a*r+t.force.x/t.mass*o,t.velocity.y=c*a*r+t.force.y/t.mass*o,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*a*r+t.torque/t.inertia*o,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var d=0;d<t.parts.length;d++){var f=t.parts[d];n.translate(f.vertices,t.velocity),d>0&&(f.position.x+=t.velocity.x,f.position.y+=t.velocity.y),0!==t.angularVelocity&&(n.rotate(f.vertices,t.angularVelocity,t.position),l.rotate(f.axes,t.angularVelocity),d>0&&s.rotateAbout(f.position,t.angularVelocity,t.position,f.position)),h.update(f.bounds,f.vertices,t.velocity)}},r.applyForce=function(t,e,i){t.force.x+=i.x,t.force.y+=i.y;var r=e.x-t.position.x,n=e.y-t.position.y;t.torque+=r*i.y-n*i.x},r._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===t.parts.length?0:1;i<t.parts.length;i++){var r=t.parts[i],n=r.mass!==1/0?r.mass:1;e.mass+=n,e.area+=r.area,e.inertia+=r.inertia,e.centre=s.add(e.centre,s.mult(r.position,n))}return e.centre=s.div(e.centre,e.mass),e}}()},function(t,e){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX}},function(t,e){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY}},function(t,e){t.exports=function(t,e,i,r,n,s){var o;void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=1);var a=0,h=t.length;if(1===s)for(o=n;o<h;o++)t[o][e]+=i+a*r,a++;else for(o=n;o>=0;o--)t[o][e]+=i+a*r,a++;return t}},function(t,e,i){var r=i(0),n=i(307),s=i(172),o=i(56),a=i(173),h=i(3),l=new r({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=o.LINE,this.x1=t,this.y1=e,this.x2=i,this.y2=r},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,i){return s(this,t,e,i)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x1=t,this.y1=e,this.x2=i,this.y2=r,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=l},function(t,e){t.exports=function(t,e,i,r){var n=i||e.fillColor,s=r||e.fillAlpha,o=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.fillStyle="rgba("+o+","+a+","+h+","+s+")"}},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r){var n=[];r.forEach((function(t){t&&n.push(t)})),this.loader=t,this.type=e,this.key=i,this.multiKeyIndex=t.multiKeyIndex++,this.files=n,this.complete=!1,this.pending=n.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var s=0;s<n.length;s++)n[s].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=r},function(t,e){t.exports=function(t,e,i,r){var n=t-i,s=e-r;return Math.sqrt(n*n+s*s)}},function(t,e,i){t.exports={BOOT:i(922),DESTROY:i(923),DRAG_END:i(924),DRAG_ENTER:i(925),DRAG:i(926),DRAG_LEAVE:i(927),DRAG_OVER:i(928),DRAG_START:i(929),DROP:i(930),GAME_OUT:i(931),GAME_OVER:i(932),GAMEOBJECT_DOWN:i(933),GAMEOBJECT_DRAG_END:i(934),GAMEOBJECT_DRAG_ENTER:i(935),GAMEOBJECT_DRAG:i(936),GAMEOBJECT_DRAG_LEAVE:i(937),GAMEOBJECT_DRAG_OVER:i(938),GAMEOBJECT_DRAG_START:i(939),GAMEOBJECT_DROP:i(940),GAMEOBJECT_MOVE:i(941),GAMEOBJECT_OUT:i(942),GAMEOBJECT_OVER:i(943),GAMEOBJECT_POINTER_DOWN:i(944),GAMEOBJECT_POINTER_MOVE:i(945),GAMEOBJECT_POINTER_OUT:i(946),GAMEOBJECT_POINTER_OVER:i(947),GAMEOBJECT_POINTER_UP:i(948),GAMEOBJECT_POINTER_WHEEL:i(949),GAMEOBJECT_UP:i(950),GAMEOBJECT_WHEEL:i(951),MANAGER_BOOT:i(952),MANAGER_PROCESS:i(953),MANAGER_UPDATE:i(954),POINTER_DOWN:i(955),POINTER_DOWN_OUTSIDE:i(956),POINTER_MOVE:i(957),POINTER_OUT:i(958),POINTER_OVER:i(959),POINTER_UP:i(960),POINTER_UP_OUTSIDE:i(961),POINTER_WHEEL:i(962),POINTERLOCK_CHANGE:i(963),PRE_UPDATE:i(964),SHUTDOWN:i(965),START:i(966),UPDATE:i(967)}},function(t,e){t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},function(t,e){t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},function(t,e){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,e){t.exports=function(t,e,i){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=i&&t.y+t.height>=i}},function(t,e,i){var r=i(0),n=i(175),s=i(9),o=i(374),a=i(2),h=i(69),l=i(91),u=i(141),c=i(12),d=i(375),f=new r({Extends:s,initialize:function(t){s.call(this);var e=t.game,i=e.renderer,r=i.gl;this.name=a(t,"name","WebGLPipeline"),this.game=e,this.renderer=i,this.manager,this.gl=r,this.view=e.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=a(t,"topology",r.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=a(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var t,e=this.gl,i=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=(new h).identity());var n=this.renderTargets,s=a(i,"renderTarget",!1);"boolean"==typeof s&&s&&(s=1);var c=r.width,d=r.height;if("number"==typeof s)for(t=0;t<s;t++)n.push(new u(r,c,d,1,0,!0));else if(Array.isArray(s))for(t=0;t<s.length;t++){var f=a(s[t],"scale",1),p=a(s[t],"minFilter",0),g=a(s[t],"autoClear",1);n.push(new u(r,c,d,f,p,g))}n.length&&(this.currentRenderTarget=n[0]),this.setShadersFromConfig(i);var v=this.shaders,m=0;for(t=0;t<v.length;t++)v[t].vertexSize>m&&(m=v[t].vertexSize);var y=a(i,"batchSize",r.config.batchSize);this.vertexCapacity=6*y;var x=new ArrayBuffer(this.vertexCapacity*m);this.vertexData=x,this.bytes=new Uint8Array(x),this.vertexViewF32=new Float32Array(x),this.vertexViewU32=new Uint32Array(x);var b=a(i,"vertices",null);for(b?(this.vertexViewF32.set(b),this.vertexBuffer=r.createVertexBuffer(x,e.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(x.byteLength,e.DYNAMIC_DRAW),this.setVertexBuffer(),t=v.length-1;t>=0;t--)v[t].rebind();this.hasBooted=!0,r.on(l.RESIZE,this.resize,this),r.on(l.PRE_RENDER,this.onPreRender,this),r.on(l.RENDER,this.onRender,this),r.on(l.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,e){var i=this.renderer;return t===this.currentShader&&i.currentProgram===this.currentShader.program||(this.flush(),i.resetTextures(),this.setVertexBuffer()&&!e&&(e=!0),t.bind(e,!1),this.currentShader=t),this},getShaderByName:function(t){for(var e=this.shaders,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},setShadersFromConfig:function(t){var e,i=this.shaders,r=this.renderer;for(e=0;e<i.length;e++)i[e].destroy();var s="vertShader",o="fragShader",h="attributes",l=a(t,s,null),u=c.parseFragmentShaderMaxTextures(a(t,o,null),r.maxTextures),f=a(t,h,null),p=a(t,"shaders",[]),g=p.length;if(0===g)l&&u&&(this.shaders=[new d(this,"default",l,u,n(f))]);else{var v=[];for(e=0;e<g;e++){var m=p[e],y=a(m,"name","default"),x=a(m,s,l),b=c.parseFragmentShaderMaxTextures(a(m,o,u),r.maxTextures),w=a(m,h,f);x&&b&&v.push(new d(this,y,x,b,n(w)))}this.shaders=v}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(t,e){return void 0===e&&(e=t.frame),this.currentUnit=this.renderer.setTextureSource(e.source),this.currentUnit},shouldFlush:function(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function(t,e){t===this.width&&e===this.height||this.flush(),this.width=t,this.height=e;for(var i=this.renderTargets,r=0;r<i.length;r++)i[r].resize(t,e);return this.setProjectionMatrix(t,e),this.emit(o.RESIZE,t,e,this),this.onResize(t,e),this},setProjectionMatrix:function(t,e){var i=this.projectionMatrix;if(!i)return this;this.projectionWidth=t,this.projectionHeight=e,i.ortho(0,t,e,0,-1e3,1e3);for(var r=this.shaders,n="uProjectionMatrix",s=0;s<r.length;s++){var o=r[s];o.hasUniform(n)&&(o.resetUniform(n),o.setMatrix4fv(n,!1,i.val,o))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,e=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===e||this.setProjectionMatrix(t,e)}},bind:function(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var e=this.setVertexBuffer();return t.bind(e),this.currentShader=t,this.emit(o.BIND,this,t),this.onActive(t),this},rebind:function(t){this.setVertexBuffer();for(var e=this.shaders,i=e.length-1;i>=0;i--){var r=e[i].rebind();t&&r!==t||(this.currentShader=r)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var t=this.gl,e=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==e&&(t.bindBuffer(t.ARRAY_BUFFER,e),!0)},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var e=this.gl,i=this.vertexCount,r=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),i===this.vertexCapacity?e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,i*r)),e.drawArrays(this.topology,0,i)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,e,i,r,n,s,o){var a=this.vertexViewF32,h=this.vertexViewU32,l=this.vertexCount*this.currentShader.vertexComponentCount-1;a[++l]=t,a[++l]=e,a[++l]=i,a[++l]=r,a[++l]=n,a[++l]=s,h[++l]=o,this.vertexCount++},batchQuad:function(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p,g,v,m,y,x){void 0===x&&(x=this.currentUnit);var b=!1;return this.shouldFlush(6)&&(this.flush(),b=!0,x=this.setTexture2D(y)),this.batchVert(e,i,l,u,x,m,f),this.batchVert(r,n,l,d,x,m,g),this.batchVert(s,o,c,d,x,m,v),this.batchVert(e,i,l,u,x,m,f),this.batchVert(s,o,c,d,x,m,v),this.batchVert(a,h,c,u,x,m,p),this.onBatch(t),b},batchTri:function(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p,g,v){void 0===v&&(v=this.currentUnit);var m=!1;return this.shouldFlush(3)&&(this.flush(),m=!0,v=this.setTexture2D(g)),this.batchVert(e,i,a,h,v,p,c),this.batchVert(r,n,a,u,v,p,d),this.batchVert(s,o,l,u,v,p,f),this.onBatch(t),m},drawFillRect:function(t,e,i,r,n,s,o,a){void 0===o&&(o=this.renderer.whiteTexture.glTexture),void 0===a&&(a=!0),t=Math.floor(t),e=Math.floor(e);var h=Math.floor(t+i),l=Math.floor(e+r),u=this.setTexture2D(o),d=c.getTintAppendFloatAlphaAndSwap(n,s),f=0,p=1;a&&(f=1,p=0),this.batchQuad(null,t,e,t,l,h,l,h,e,0,f,1,p,d,d,d,d,0,o,u)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function(t,e){void 0===e&&(e=0);var i=this.gl;return i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),this},bindRenderTarget:function(t,e){return this.bindTexture(t.texture,e)},setTime:function(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1f(t,e),this},set2f:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.set2f(t,e,i),this},set3f:function(t,e,i,r,n){return void 0===n&&(n=this.currentShader),n.set3f(t,e,i,r),this},set4f:function(t,e,i,r,n,s){return void 0===s&&(s=this.currentShader),s.set4f(t,e,i,r,n),this},set1fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1fv(t,e),this},set2fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set2fv(t,e),this},set3fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set3fv(t,e),this},set4fv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set4fv(t,e),this},set1iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1iv(t,e),this},set2iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set2iv(t,e),this},set3iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set3iv(t,e),this},set4iv:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set4iv(t,e),this},set1i:function(t,e,i){return void 0===i&&(i=this.currentShader),i.set1i(t,e),this},set2i:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.set2i(t,e,i),this},set3i:function(t,e,i,r,n){return void 0===n&&(n=this.currentShader),n.set3i(t,e,i,r),this},set4i:function(t,e,i,r,n,s){return void 0===s&&(s=this.currentShader),s.set4i(t,e,i,r,n),this},setMatrix2fv:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix2fv(t,e,i),this},setMatrix3fv:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix3fv(t,e,i),this},setMatrix4fv:function(t,e,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix4fv(t,e,i),this},destroy:function(){var t;this.emit(o.DESTROY,this);var e=this.shaders;for(t=0;t<e.length;t++)e[t].destroy();var i=this.renderTargets;for(t=0;t<i.length;t++)i[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var r=this.renderer;return r.off(l.RESIZE,this.resize,this),r.off(l.PRE_RENDER,this.onPreRender,this),r.off(l.RENDER,this.onRender,this),r.off(l.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=f},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,a,h,l,u,f,p,v=e&&e.length,m=v?e[0]*i:t.length,y=n(t,0,m,i,!0),x=[];if(!y||y.next===y.prev)return x;if(v&&(y=function(t,e,i,r){var o,a,h,l=[];for(o=0,a=e.length;o<a;o++)(h=n(t,e[o]*r,o<a-1?e[o+1]*r:t.length,r,!1))===h.next&&(h.steiner=!0),l.push(g(h));for(l.sort(c),o=0;o<l.length;o++)d(l[o],i),i=s(i,i.next);return i}(t,e,y,i)),t.length>80*i){r=h=t[0],a=l=t[1];for(var b=i;b<m;b+=i)(u=t[b])<r&&(r=u),(f=t[b+1])<a&&(a=f),u>h&&(h=u),f>l&&(l=f);p=0!==(p=Math.max(h-r,l-a))?1/p:0}return o(y,x,i,r,a,p),x}function n(t,e,i,r,n){var s,o;if(n===M(t,e,i,r)>0)for(s=e;s<i;s+=r)o=C(s,t[s],t[s+1],o);else for(s=i-r;s>=e;s-=r)o=C(s,t[s],t[s+1],o);return o&&x(o,o.next)&&(_(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!x(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(_(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function o(t,e,i,r,n,c,d){if(t){!d&&c&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=p(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(h=l;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,l*=2}while(o>1)}(n)}(t,r,n,c);for(var f,g,v=t;t.prev!==t.next;)if(f=t.prev,g=t.next,c?h(t,r,n,c):a(t))e.push(f.i/i),e.push(t.i/i),e.push(g.i/i),_(t),t=g.next,v=g.next;else if((t=g)===v){d?1===d?o(t=l(s(t),e,i),e,i,r,n,c,2):2===d&&u(t,e,i,r,n,c):o(s(t),e,i,r,n,c,1);break}}}function a(t){var e=t.prev,i=t,r=t.next;if(y(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(v(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&y(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,i,r){var n=t.prev,s=t,o=t.next;if(y(n,s,o)>=0)return!1;for(var a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,h=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,l=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,u=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,c=p(a,h,e,i,r),d=p(l,u,e,i,r),f=t.prevZ,g=t.nextZ;f&&f.z>=c&&g&&g.z<=d;){if(f!==t.prev&&f!==t.next&&v(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&y(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,g!==t.prev&&g!==t.next&&v(n.x,n.y,s.x,s.y,o.x,o.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&v(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&y(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;g&&g.z<=d;){if(g!==t.prev&&g!==t.next&&v(n.x,n.y,s.x,s.y,o.x,o.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function l(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!x(n,o)&&b(n,r,r.next,o)&&S(n,o)&&S(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),_(r),_(r.next),r=t=o),r=r.next}while(r!==t);return s(r)}function u(t,e,i,r,n,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&m(h,l)){var u=E(h,l);return h=s(h,h.next),u=s(u,u.next),o(h,e,i,r,n,a),void o(u,e,i,r,n,a)}l=l.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o){if(o=a,a===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===o)return i;var h,l=i,u=i.x,c=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=u&&n!==r.x&&v(s<c?n:o,s,u,c,s<c?o:n,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(n-r.x),S(r,t)&&(h<d||h===d&&(r.x>i.x||r.x===i.x&&f(i,r)))&&(i=r,d=h)),r=r.next}while(r!==l);return i}(t,e),e){var i=E(e,t);s(e,e.next),s(i,i.next)}}function f(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function p(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function v(t,e,i,r,n,s,o,a){return(n-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(n-o)*(r-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(S(t,e)&&S(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||x(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,r){var n=T(y(t,e,i)),s=T(y(t,e,r)),o=T(y(i,r,t)),a=T(y(i,r,e));return n!==s&&o!==a||!(0!==n||!w(t,i,e))||!(0!==s||!w(t,r,e))||!(0!==o||!w(i,t,r))||!(0!==a||!w(i,e,r))}function w(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function T(t){return t>0?1:t<0?-1:0}function S(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function E(t,e){var i=new A(t.i,t.x,t.y),r=new A(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function C(t,e,i,r){var n=new A(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function _(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}r.deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,o=Math.abs(M(t,0,s,i));if(n)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs(M(t,l,u,i))}var c=0;for(a=0;a<r.length;a+=3){var d=r[a]*i,f=r[a+1]*i,p=r[a+2]*i;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i},t.exports=r},function(t,e){t.exports=function(t,e,i,r){var n=i||e.strokeColor,s=r||e.strokeAlpha,o=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.strokeStyle="rgba("+o+","+a+","+h+","+s+")",t.lineWidth=e.lineWidth}},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(6),l=i(7),u=new r({Extends:s,initialize:function(t,e,i,r,o){var u="json";if(l(e)){var c=e;e=a(c,"key"),i=a(c,"url"),r=a(c,"xhrSettings"),u=a(c,"extension",u),o=a(c,"dataKey",o)}var d={type:"json",cache:t.cacheManager.json,extension:u,responseType:"text",key:e,url:i,xhrSettings:r,config:o};s.call(this,t,d),l(i)&&(this.data=o?h(i,o):i,this.state=n.FILE_POPULATED)},onProcess:function(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});o.register("json",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,r,i));return this})),t.exports=u},function(t,e){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,e,i){var r=i(158),n=i(26);t.exports=function(t,e,i,s,o){for(var a=null,h=null,l=null,u=null,c=n(t,e,i,s,null,o),d=0;d<c.length;d++){var f=c[d];f&&(f.collides?(a=r(f.x,f.y-1,!0,o),h=r(f.x,f.y+1,!0,o),l=r(f.x-1,f.y,!0,o),u=r(f.x+1,f.y,!0,o),f.faceTop=!a||!a.collides,f.faceBottom=!h||!h.collides,f.faceLeft=!l||!l.collides,f.faceRight=!u||!u.collides):f.resetFaces())}}},function(t,e,i){var r={};t.exports=r;var n=i(83),s=i(32);r.create=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r],s={x:n.x,y:n.y,index:r,body:e,isInternal:!1,contact:null,offset:null};s.contact={vertex:s,normalImpulse:0,tangentImpulse:0},i.push(s)}return i},r.fromPath=function(t,e){var i=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,e,r){i.push({x:parseFloat(e),y:parseFloat(r)})})),r.create(i,e)},r.centre=function(t){for(var e,i,s,o=r.area(t,!0),a={x:0,y:0},h=0;h<t.length;h++)s=(h+1)%t.length,e=n.cross(t[h],t[s]),i=n.mult(n.add(t[h],t[s]),e),a=n.add(a,i);return n.div(a,6*o)},r.mean=function(t){for(var e={x:0,y:0},i=0;i<t.length;i++)e.x+=t[i].x,e.y+=t[i].y;return n.div(e,t.length)},r.area=function(t,e){for(var i=0,r=t.length-1,n=0;n<t.length;n++)i+=(t[r].x-t[n].x)*(t[r].y+t[n].y),r=n;return e?i/2:Math.abs(i)/2},r.inertia=function(t,e){for(var i,r,s=0,o=0,a=t,h=0;h<a.length;h++)r=(h+1)%a.length,s+=(i=Math.abs(n.cross(a[r],a[h])))*(n.dot(a[r],a[r])+n.dot(a[r],a[h])+n.dot(a[h],a[h])),o+=i;return e/6*(s/o)},r.translate=function(t,e,i){var r;if(i)for(r=0;r<t.length;r++)t[r].x+=e.x*i,t[r].y+=e.y*i;else for(r=0;r<t.length;r++)t[r].x+=e.x,t[r].y+=e.y;return t},r.rotate=function(t,e,i){if(0!==e){for(var r=Math.cos(e),n=Math.sin(e),s=0;s<t.length;s++){var o=t[s],a=o.x-i.x,h=o.y-i.y;o.x=i.x+(a*r-h*n),o.y=i.y+(a*n+h*r)}return t}},r.contains=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=t[(i+1)%t.length];if((e.x-r.x)*(n.y-r.y)+(e.y-r.y)*(r.x-n.x)>0)return!1}return!0},r.scale=function(t,e,i,s){if(1===e&&1===i)return t;var o,a;s=s||r.centre(t);for(var h=0;h<t.length;h++)o=t[h],a=n.sub(o,s),t[h].x=s.x+a.x*e,t[h].y=s.y+a.y*i;return t},r.chamfer=function(t,e,i,r,o){e="number"==typeof e?[e]:e||[8],i=void 0!==i?i:-1,r=r||2,o=o||14;for(var a=[],h=0;h<t.length;h++){var l=t[h-1>=0?h-1:t.length-1],u=t[h],c=t[(h+1)%t.length],d=e[h<e.length?h:e.length-1];if(0!==d){var f=n.normalise({x:u.y-l.y,y:l.x-u.x}),p=n.normalise({x:c.y-u.y,y:u.x-c.x}),g=Math.sqrt(2*Math.pow(d,2)),v=n.mult(s.clone(f),d),m=n.normalise(n.mult(n.add(f,p),.5)),y=n.sub(u,n.mult(m,g)),x=i;-1===i&&(x=1.75*Math.pow(d,.32)),(x=s.clamp(x,r,o))%2==1&&(x+=1);for(var b=Math.acos(n.dot(f,p))/x,w=0;w<x;w++)a.push(n.add(n.rotate(v,b*w),y))}else a.push(u)}return a},r.clockwiseSort=function(t){var e=r.mean(t);return t.sort((function(t,i){return n.angle(e,t)-n.angle(e,i)})),t},r.isConvex=function(t){var e,i,r,n,s=0,o=t.length;if(o<3)return null;for(e=0;e<o;e++)if(r=(e+2)%o,n=(t[i=(e+1)%o].x-t[e].x)*(t[r].y-t[i].y),(n-=(t[i].y-t[e].y)*(t[r].x-t[i].x))<0?s|=1:n>0&&(s|=2),3===s)return!1;return 0!==s||null},r.hull=function(t){var e,i,r=[],s=[];for((t=t.slice(0)).sort((function(t,e){var i=t.x-e.x;return 0!==i?i:t.y-e.y})),i=0;i<t.length;i+=1){for(e=t[i];s.length>=2&&n.cross3(s[s.length-2],s[s.length-1],e)<=0;)s.pop();s.push(e)}for(i=t.length-1;i>=0;i-=1){for(e=t[i];r.length>=2&&n.cross3(r[r.length-2],r[r.length-1],e)<=0;)r.pop();r.push(e)}return r.pop(),s.pop(),r.concat(s)}},function(t,e,i){var r=i(0),n=i(66),s=i(300),o=i(301),a=i(56),h=i(170),l=new r({initialize:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.type=a.CIRCLE,this.x=t,this.y=e,this._radius=i,this._diameter=2*i},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i){return this.x=t,this.y=e,this._radius=i,this._diameter=2*i,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=l},function(t,e){t.exports=function(t,e,i){return t.radius>0&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-i)*(t.y-i)<=t.radius*t.radius}},function(t,e){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,e){t.exports=function(t,e,i){var r=i-e;return e+((t-e)%r+r)%r}},function(t,e,i){var r=i(0),n=i(39),s=1e-6,o=new r({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new o(this)},set:function(t){return this.copy(t)},setValues:function(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p,g){var v=this.val;return v[0]=t,v[1]=e,v[2]=i,v[3]=r,v[4]=n,v[5]=s,v[6]=o,v[7]=a,v[8]=h,v[9]=l,v[10]=u,v[11]=c,v[12]=d,v[13]=f,v[14]=p,v[15]=g,this},copy:function(t){var e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,i){var r=a.fromQuat(i).val,n=e.x,s=e.y,o=e.z;return this.setValues(r[0]*n,r[1]*n,r[2]*n,0,r[4]*s,r[5]*s,r[6]*s,0,r[8]*o,r[9]*o,r[10]*o,0,t.x,t.y,t.z,1)},xyz:function(t,e,i){this.identity();var r=this.val;return r[12]=t,r[13]=e,r[14]=i,this},scaling:function(t,e,i){this.zero();var r=this.val;return r[0]=t,r[5]=e,r[10]=i,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],i=t[2],r=t[3],n=t[6],s=t[7],o=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=n,t[11]=t[14],t[12]=r,t[13]=s,t[14]=o,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],v=t[15],m=e*o-i*s,y=e*a-r*s,x=e*h-n*s,b=i*a-r*o,w=i*h-n*o,T=r*h-n*a,S=l*p-u*f,E=l*g-c*f,C=l*v-d*f,_=u*g-c*p,A=u*v-d*p,M=c*v-d*g,P=m*M-y*A+x*_+b*C-w*E+T*S;return P?(P=1/P,this.setValues((o*M-a*A+h*_)*P,(r*A-i*M-n*_)*P,(p*T-g*w+v*b)*P,(c*w-u*T-d*b)*P,(a*C-s*M-h*E)*P,(e*M-r*C+n*E)*P,(g*x-f*T-v*y)*P,(l*T-c*x+d*y)*P,(s*A-o*C+h*S)*P,(i*C-e*A-n*S)*P,(f*w-p*x+v*m)*P,(u*x-l*w-d*m)*P,(o*E-s*_-a*S)*P,(e*_-i*E+r*S)*P,(p*y-f*b-g*m)*P,(l*b-u*y+c*m)*P)):this},adjoint:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],v=t[15];return this.setValues(o*(c*v-d*g)-u*(a*v-h*g)+p*(a*d-h*c),-(i*(c*v-d*g)-u*(r*v-n*g)+p*(r*d-n*c)),i*(a*v-h*g)-o*(r*v-n*g)+p*(r*h-n*a),-(i*(a*d-h*c)-o*(r*d-n*c)+u*(r*h-n*a)),-(s*(c*v-d*g)-l*(a*v-h*g)+f*(a*d-h*c)),e*(c*v-d*g)-l*(r*v-n*g)+f*(r*d-n*c),-(e*(a*v-h*g)-s*(r*v-n*g)+f*(r*h-n*a)),e*(a*d-h*c)-s*(r*d-n*c)+l*(r*h-n*a),s*(u*v-d*p)-l*(o*v-h*p)+f*(o*d-h*u),-(e*(u*v-d*p)-l*(i*v-n*p)+f*(i*d-n*u)),e*(o*v-h*p)-s*(i*v-n*p)+f*(i*h-n*o),-(e*(o*d-h*u)-s*(i*d-n*u)+l*(i*h-n*o)),-(s*(u*g-c*p)-l*(o*g-a*p)+f*(o*c-a*u)),e*(u*g-c*p)-l*(i*g-r*p)+f*(i*c-r*u),-(e*(o*g-a*p)-s*(i*g-r*p)+f*(i*a-r*o)),e*(o*c-a*u)-s*(i*c-r*u)+l*(i*a-r*o))},determinant:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],v=t[15];return(e*o-i*s)*(c*v-d*g)-(e*a-r*s)*(u*v-d*p)+(e*h-n*s)*(u*g-c*p)+(i*a-r*o)*(l*v-d*f)-(i*h-n*o)*(l*g-c*f)+(r*h-n*a)*(l*p-u*f)},multiply:function(t){var e=this.val,i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=t.val,x=y[0],b=y[1],w=y[2],T=y[3];return e[0]=x*i+b*o+w*u+T*p,e[1]=x*r+b*a+w*c+T*g,e[2]=x*n+b*h+w*d+T*v,e[3]=x*s+b*l+w*f+T*m,x=y[4],b=y[5],w=y[6],T=y[7],e[4]=x*i+b*o+w*u+T*p,e[5]=x*r+b*a+w*c+T*g,e[6]=x*n+b*h+w*d+T*v,e[7]=x*s+b*l+w*f+T*m,x=y[8],b=y[9],w=y[10],T=y[11],e[8]=x*i+b*o+w*u+T*p,e[9]=x*r+b*a+w*c+T*g,e[10]=x*n+b*h+w*d+T*v,e[11]=x*s+b*l+w*f+T*m,x=y[12],b=y[13],w=y[14],T=y[15],e[12]=x*i+b*o+w*u+T*p,e[13]=x*r+b*a+w*c+T*g,e[14]=x*n+b*h+w*d+T*v,e[15]=x*s+b*l+w*f+T*m,this},multiplyLocal:function(t){var e=this.val,i=t.val;return this.setValues(e[0]*i[0]+e[1]*i[4]+e[2]*i[8]+e[3]*i[12],e[0]*i[1]+e[1]*i[5]+e[2]*i[9]+e[3]*i[13],e[0]*i[2]+e[1]*i[6]+e[2]*i[10]+e[3]*i[14],e[0]*i[3]+e[1]*i[7]+e[2]*i[11]+e[3]*i[15],e[4]*i[0]+e[5]*i[4]+e[6]*i[8]+e[7]*i[12],e[4]*i[1]+e[5]*i[5]+e[6]*i[9]+e[7]*i[13],e[4]*i[2]+e[5]*i[6]+e[6]*i[10]+e[7]*i[14],e[4]*i[3]+e[5]*i[7]+e[6]*i[11]+e[7]*i[15],e[8]*i[0]+e[9]*i[4]+e[10]*i[8]+e[11]*i[12],e[8]*i[1]+e[9]*i[5]+e[10]*i[9]+e[11]*i[13],e[8]*i[2]+e[9]*i[6]+e[10]*i[10]+e[11]*i[14],e[8]*i[3]+e[9]*i[7]+e[10]*i[11]+e[11]*i[15],e[12]*i[0]+e[13]*i[4]+e[14]*i[8]+e[15]*i[12],e[12]*i[1]+e[13]*i[5]+e[14]*i[9]+e[15]*i[13],e[12]*i[2]+e[13]*i[6]+e[14]*i[10]+e[15]*i[14],e[12]*i[3]+e[13]*i[7]+e[14]*i[11]+e[15]*i[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.val,r=e.val,n=i[0],s=i[4],o=i[8],a=i[12],h=i[1],l=i[5],u=i[9],c=i[13],d=i[2],f=i[6],p=i[10],g=i[14],v=i[3],m=i[7],y=i[11],x=i[15],b=r[0],w=r[4],T=r[8],S=r[12],E=r[1],C=r[5],_=r[9],A=r[13],M=r[2],P=r[6],k=r[10],O=r[14],R=r[3],L=r[7],I=r[11],F=r[15];return this.setValues(n*b+s*E+o*M+a*R,h*b+l*E+u*M+c*R,d*b+f*E+p*M+g*R,v*b+m*E+y*M+x*R,n*w+s*C+o*P+a*L,h*w+l*C+u*P+c*L,d*w+f*C+p*P+g*L,v*w+m*C+y*P+x*L,n*T+s*_+o*k+a*I,h*T+l*_+u*k+c*I,d*T+f*_+p*k+g*I,v*T+m*_+y*k+x*I,n*S+s*A+o*O+a*F,h*S+l*A+u*O+c*F,d*S+f*A+p*O+g*F,v*S+m*A+y*O+x*F)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,i){var r=this.val;return r[12]=r[0]*t+r[4]*e+r[8]*i+r[12],r[13]=r[1]*t+r[5]*e+r[9]*i+r[13],r[14]=r[2]*t+r[6]*e+r[10]*i+r[14],r[15]=r[3]*t+r[7]*e+r[11]*i+r[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,i){var r=this.val;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*e,r[5]=r[5]*e,r[6]=r[6]*e,r[7]=r[7]*e,r[8]=r[8]*i,r[9]=r[9]*i,r[10]=r[10]*i,r[11]=r[11]*i,this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,o=t.y,a=t.z,h=n*s,l=n*o;return this.setValues(h*s+i,h*o-r*a,h*a+r*o,0,h*o+r*a,l*o+i,l*a-r*s,0,h*a-r*o,l*a+r*s,n*a*a+i,0,0,0,0,1)},rotate:function(t,e){var i=this.val,r=e.x,n=e.y,o=e.z,a=Math.sqrt(r*r+n*n+o*o);if(Math.abs(a)<s)return this;r*=a=1/a,n*=a,o*=a;var h=Math.sin(t),l=Math.cos(t),u=1-l,c=i[0],d=i[1],f=i[2],p=i[3],g=i[4],v=i[5],m=i[6],y=i[7],x=i[8],b=i[9],w=i[10],T=i[11],S=i[12],E=i[13],C=i[14],_=i[15],A=r*r*u+l,M=n*r*u+o*h,P=o*r*u-n*h,k=r*n*u-o*h,O=n*n*u+l,R=o*n*u+r*h,L=r*o*u+n*h,I=n*o*u-r*h,F=o*o*u+l;return this.setValues(c*A+g*M+x*P,d*A+v*M+b*P,f*A+m*M+w*P,p*A+y*M+T*P,c*k+g*O+x*R,d*k+v*O+b*R,f*k+m*O+w*R,p*k+y*O+T*R,c*L+g*I+x*F,d*L+v*I+b*F,f*L+m*I+w*F,p*L+y*I+T*F,S,E,C,_)},rotateX:function(t){var e=this.val,i=Math.sin(t),r=Math.cos(t),n=e[4],s=e[5],o=e[6],a=e[7],h=e[8],l=e[9],u=e[10],c=e[11];return e[4]=n*r+h*i,e[5]=s*r+l*i,e[6]=o*r+u*i,e[7]=a*r+c*i,e[8]=h*r-n*i,e[9]=l*r-s*i,e[10]=u*r-o*i,e[11]=c*r-a*i,this},rotateY:function(t){var e=this.val,i=Math.sin(t),r=Math.cos(t),n=e[0],s=e[1],o=e[2],a=e[3],h=e[8],l=e[9],u=e[10],c=e[11];return e[0]=n*r-h*i,e[1]=s*r-l*i,e[2]=o*r-u*i,e[3]=a*r-c*i,e[8]=n*i+h*r,e[9]=s*i+l*r,e[10]=o*i+u*r,e[11]=a*i+c*r,this},rotateZ:function(t){var e=this.val,i=Math.sin(t),r=Math.cos(t),n=e[0],s=e[1],o=e[2],a=e[3],h=e[4],l=e[5],u=e[6],c=e[7];return e[0]=n*r+h*i,e[1]=s*r+l*i,e[2]=o*r+u*i,e[3]=a*r+c*i,e[4]=h*r-n*i,e[5]=l*r-s*i,e[6]=u*r-o*i,e[7]=c*r-a*i,this},fromRotationTranslation:function(t,e){var i=t.x,r=t.y,n=t.z,s=t.w,o=i+i,a=r+r,h=n+n,l=i*o,u=i*a,c=i*h,d=r*a,f=r*h,p=n*h,g=s*o,v=s*a,m=s*h;return this.setValues(1-(d+p),u+m,c-v,0,u-m,1-(l+p),f+g,0,c+v,f-g,1-(l+d),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,i=t.y,r=t.z,n=t.w,s=e+e,o=i+i,a=r+r,h=e*s,l=e*o,u=e*a,c=i*o,d=i*a,f=r*a,p=n*s,g=n*o,v=n*a;return this.setValues(1-(c+f),l+v,u-g,0,l-v,1-(h+f),d+p,0,u+g,d-p,1-(h+c),0,0,0,0,1)},frustum:function(t,e,i,r,n,s){var o=1/(e-t),a=1/(r-i),h=1/(n-s);return this.setValues(2*n*o,0,0,0,0,2*n*a,0,0,(e+t)*o,(r+i)*a,(s+n)*h,-1,0,0,s*n*2*h,0)},perspective:function(t,e,i,r){var n=1/Math.tan(t/2),s=1/(i-r);return this.setValues(n/e,0,0,0,0,n,0,0,0,0,(r+i)*s,-1,0,0,2*r*i*s,0)},perspectiveLH:function(t,e,i,r){return this.setValues(2*i/t,0,0,0,0,2*i/e,0,0,0,0,-r/(i-r),1,0,0,i*r/(i-r),0)},ortho:function(t,e,i,r,n,s){var o=t-e,a=i-r,h=n-s;return o=0===o?o:1/o,a=0===a?a:1/a,h=0===h?h:1/h,this.setValues(-2*o,0,0,0,0,-2*a,0,0,0,0,2*h,0,(t+e)*o,(r+i)*a,(s+n)*h,1)},lookAtRH:function(t,e,i){var r=this.val;return c.subVectors(t,e),0===c.getLengthSquared()&&(c.z=1),c.normalize(),l.crossVectors(i,c),0===l.getLengthSquared()&&(1===Math.abs(i.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),l.crossVectors(i,c)),l.normalize(),u.crossVectors(c,l),r[0]=l.x,r[1]=l.y,r[2]=l.z,r[4]=u.x,r[5]=u.y,r[6]=u.z,r[8]=c.x,r[9]=c.y,r[10]=c.z,this},lookAt:function(t,e,i){var r=t.x,n=t.y,o=t.z,a=i.x,h=i.y,l=i.z,u=e.x,c=e.y,d=e.z;if(Math.abs(r-u)<s&&Math.abs(n-c)<s&&Math.abs(o-d)<s)return this.identity();var f=r-u,p=n-c,g=o-d,v=1/Math.sqrt(f*f+p*p+g*g),m=h*(g*=v)-l*(p*=v),y=l*(f*=v)-a*g,x=a*p-h*f;(v=Math.sqrt(m*m+y*y+x*x))?(m*=v=1/v,y*=v,x*=v):(m=0,y=0,x=0);var b=p*x-g*y,w=g*m-f*x,T=f*y-p*m;return(v=Math.sqrt(b*b+w*w+T*T))?(b*=v=1/v,w*=v,T*=v):(b=0,w=0,T=0),this.setValues(m,b,f,0,y,w,p,0,x,T,g,0,-(m*r+y*n+x*o),-(b*r+w*n+T*o),-(f*r+p*n+g*o),1)},yawPitchRoll:function(t,e,i){this.zero(),a.zero(),h.zero();var r=this.val,n=a.val,s=h.val,o=Math.sin(i),l=Math.cos(i);return r[10]=1,r[15]=1,r[0]=l,r[1]=o,r[4]=-o,r[5]=l,o=Math.sin(e),l=Math.cos(e),n[0]=1,n[15]=1,n[5]=l,n[10]=l,n[9]=-o,n[6]=o,o=Math.sin(t),l=Math.cos(t),s[5]=1,s[15]=1,s[0]=l,s[2]=-o,s[8]=o,s[10]=l,this.multiplyLocal(a),this.multiplyLocal(h),this},setWorldMatrix:function(t,e,i,r,n){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(i.x,i.y,i.z),h.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(h),r&&this.multiplyLocal(r),n&&this.multiplyLocal(n),this},multiplyToMat4:function(t,e){var i=this.val,r=t.val,n=i[0],s=i[1],o=i[2],a=i[3],h=i[4],l=i[5],u=i[6],c=i[7],d=i[8],f=i[9],p=i[10],g=i[11],v=i[12],m=i[13],y=i[14],x=i[15],b=r[0],w=r[1],T=r[2],S=r[3],E=r[4],C=r[5],_=r[6],A=r[7],M=r[8],P=r[9],k=r[10],O=r[11],R=r[12],L=r[13],I=r[14],F=r[15];return e.setValues(b*n+w*h+T*d+S*v,w*s+w*l+T*f+S*m,T*o+w*u+T*p+S*y,S*a+w*c+T*g+S*x,E*n+C*h+_*d+A*v,E*s+C*l+_*f+A*m,E*o+C*u+_*p+A*y,E*a+C*c+_*g+A*x,M*n+P*h+k*d+O*v,M*s+P*l+k*f+O*m,M*o+P*u+k*p+O*y,M*a+P*c+k*g+O*x,R*n+L*h+I*d+F*v,R*s+L*l+I*f+F*m,R*o+L*u+I*p+F*y,R*a+L*c+I*g+F*x)},fromRotationXYTranslation:function(t,e,i){var r=e.x,n=e.y,s=e.z,o=Math.sin(t.x),a=Math.cos(t.x),h=Math.sin(t.y),l=Math.cos(t.y),u=r,c=n,d=s,f=-o,p=0-f*h,g=0-a*h,v=f*l,m=a*l;return i||(u=l*r+h*s,c=p*r+a*n+v*s,d=g*r+o*n+m*s),this.setValues(l,p,g,0,0,a,o,0,h,v,m,0,u,c,d,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}}),a=new o,h=new o,l=new n,u=new n,c=new n;t.exports=o},function(t,e,i){t.exports={COMPLETE:i(987),DECODED:i(988),DECODED_ALL:i(989),DESTROY:i(990),DETUNE:i(991),GLOBAL_DETUNE:i(992),GLOBAL_MUTE:i(993),GLOBAL_RATE:i(994),GLOBAL_VOLUME:i(995),LOOP:i(996),LOOPED:i(997),MUTE:i(998),PAN:i(999),PAUSE_ALL:i(1e3),PAUSE:i(1001),PLAY:i(1002),RATE:i(1003),RESUME_ALL:i(1004),RESUME:i(1005),SEEK:i(1006),STOP_ALL:i(1007),STOP:i(1008),UNLOCKED:i(1009),VOLUME:i(1010)}},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function t(e,i,r,n,o){var l,u="png";if(h(i)){var c=i;i=a(c,"key"),r=a(c,"url"),l=a(c,"normalMap"),n=a(c,"xhrSettings"),u=a(c,"extension",u),o=a(c,"frameConfig")}Array.isArray(r)&&(l=r[1],r=r[0]);var d={type:"image",cache:e.textureManager,extension:u,responseType:"blob",key:i,url:r,xhrSettings:n,config:o};if(s.call(this,e,d),l){var f=new t(e,this.key,l,n,o);f.type="normalMap",this.setLink(f),e.addFile(f)}},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){s.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(t.data),t.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===n.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});o.register("image",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e){t.exports=function(t,e){e?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,e,i){var r=i(164),n=i(0),s=i(11),o=i(15),a=i(1065),h=new n({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,a],initialize:function(t,e,i,n,s){o.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(n,s),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=h},function(t,e){t.exports=function(t,e){if(!(e>=t.length)){for(var i=t.length-1,r=t[e],n=e;n<i;n++)t[n]=t[n+1];return t.length=i,r}}},function(t,e,i){t.exports={ADDED_TO_SCENE:i(643),DESTROY:i(644),REMOVED_FROM_SCENE:i(645),VIDEO_COMPLETE:i(646),VIDEO_CREATED:i(647),VIDEO_ERROR:i(648),VIDEO_LOOP:i(649),VIDEO_PLAY:i(650),VIDEO_SEEKED:i(651),VIDEO_SEEKING:i(652),VIDEO_STOP:i(653),VIDEO_TIMEOUT:i(654),VIDEO_UNLOCKED:i(655)}},function(t,e){t.exports=function(t,e,i,r){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),r?(i+t)/e:i+t)}},function(t,e){t.exports=function(t){var e={};for(var i in t)Array.isArray(t[i])?e[i]=t[i].slice(0):e[i]=t[i];return e}},function(t,e){t.exports=function(t,e,i,r){var n=t.length;if(e<0||e>n||e>=i||i>n||e+i>n){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,e){function i(t,e){return String(t).localeCompare(e)}function r(t,e,i,r){var n,s,o,a,h,l=t.length,u=0,c=2*i;for(n=0;n<l;n+=c)for(o=(s=n+i)+i,s>l&&(s=l),o>l&&(o=l),a=n,h=s;;)if(a<s&&h<o)e(t[a],t[h])<=0?r[u++]=t[a++]:r[u++]=t[h++];else if(a<s)r[u++]=t[a++];else{if(!(h<o))break;r[u++]=t[h++]}}t.exports=function(t,e){void 0===e&&(e=i);var n=function(t,e){var i=t.length;if(i<=1)return t;for(var n=new Array(i),s=1;s<i;s*=2){r(t,e,s,n);var o=t;t=n,n=o}return t}(t,e);return n!==t&&r(n,null,t.length,t),t}},function(t,e,i){var r=i(134),n=i(205);t.exports=function(t,e){var i=r.Power0;if("string"==typeof t)if(r.hasOwnProperty(t))i=r[t];else{var s="";t.indexOf(".")&&("in"===(s=t.substr(t.indexOf(".")+1)).toLowerCase()?s="easeIn":"out"===s.toLowerCase()?s="easeOut":"inout"===s.toLowerCase()&&(s="easeInOut")),t=n(t.substr(0,t.indexOf(".")+1)+s),r.hasOwnProperty(t)&&(i=r[t])}else"function"==typeof t?i=t:Array.isArray(t)&&t.length;if(!e)return i;var o=e.slice(0);return o.unshift(0),function(t){return o[0]=t,i.apply(this,o)}}},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n,s){var o=t.strokeTint,a=r.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);o.TL=a,o.TR=a,o.BL=a,o.BR=a;var h=e.pathData,l=h.length-1,u=e.lineWidth,c=u/2,d=h[0]-n,f=h[1]-s;e.closePath||(l-=2);for(var p=2;p<l;p+=2){var g=h[p]-n,v=h[p+1]-s;t.batchLine(d,f,g,v,c,c,u,p-2,!!e.closePath&&p===l-1),d=g,f=v}}},function(t,e,i){var r=i(0),n=i(115),s=i(476),o=i(477),a=i(56),h=i(47),l=i(181),u=new r({initialize:function(t,e,i,r,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),this.type=a.TRIANGLE,this.x1=t,this.y1=e,this.x2=i,this.y2=r,this.x3=n,this.y3=s},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,r,n,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),this.x1=t,this.y1=e,this.x2=i,this.y2=r,this.x3=n,this.y3=s,this},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var e;e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var e;e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var e;e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var e;e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}}});t.exports=u},function(t,e){var i={};t.exports=i,i.create=function(t,e){return{x:t||0,y:e||0}},i.clone=function(t){return{x:t.x,y:t.y}},i.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},i.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},i.rotate=function(t,e,i){var r=Math.cos(e),n=Math.sin(e);i||(i={});var s=t.x*r-t.y*n;return i.y=t.x*n+t.y*r,i.x=s,i},i.rotateAbout=function(t,e,i,r){var n=Math.cos(e),s=Math.sin(e);r||(r={});var o=i.x+((t.x-i.x)*n-(t.y-i.y)*s);return r.y=i.y+((t.x-i.x)*s+(t.y-i.y)*n),r.x=o,r},i.normalise=function(t){var e=i.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.cross=function(t,e){return t.x*e.y-t.y*e.x},i.cross3=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},i.add=function(t,e,i){return i||(i={}),i.x=t.x+e.x,i.y=t.y+e.y,i},i.sub=function(t,e,i){return i||(i={}),i.x=t.x-e.x,i.y=t.y-e.y,i},i.mult=function(t,e){return{x:t.x*e,y:t.y*e}},i.div=function(t,e){return{x:t.x/e,y:t.y/e}},i.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},i.neg=function(t){return{x:-t.x,y:-t.y}},i.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]},function(t,e){var i={};t.exports=i,i.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&i.update(e,t),e},i.update=function(t,e,i){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var r=0;r<e.length;r++){var n=e[r];n.x>t.max.x&&(t.max.x=n.x),n.x<t.min.x&&(t.min.x=n.x),n.y>t.max.y&&(t.max.y=n.y),n.y<t.min.y&&(t.min.y=n.y)}i&&(i.x>0?t.max.x+=i.x:t.min.x+=i.x,i.y>0?t.max.y+=i.y:t.min.y+=i.y)},i.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},i.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},i.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},i.shift=function(t,e){var i=t.max.x-t.min.x,r=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+i,t.min.y=e.y,t.max.y=e.y+r}},function(t,e,i){var r=i(29),n=i(0),s=i(11),o=i(502),a=new n({Mixins:[s.Alpha,s.Flip,s.Visible],initialize:function(t,e,i,r,n,s,o,a){this.layer=t,this.index=e,this.x=i,this.y=r,this.width=n,this.height=s,this.right,this.bottom,this.baseWidth=void 0!==o?o:n,this.baseHeight=void 0!==a?a:s,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(t,e){return!(t<this.pixelX||e<this.pixelY||t>this.right||e>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var e=this.tilemapLayer;return e?e.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var e=this.tilemapLayer;return e?this.getLeft(t)+this.width*e.scaleX:this.getLeft(t)+this.width},getTop:function(t){var e=this.tilemapLayer;return e?e.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*e.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var e=this.tilemapLayer;return e?this.getTop(t)+this.height*e.scaleY:this.getTop(t)+this.height},getBounds:function(t,e){return void 0===e&&(e=new o),e.x=this.getLeft(),e.y=this.getTop(),e.width=this.getRight()-e.x,e.height=this.getBottom()-e.y,e},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function(t,e,i,r){return!(i<=this.pixelX||r<=this.pixelY||t>=this.right||e>=this.bottom)},isInteresting:function(t,e){return t&&e?this.canCollide||this.hasInterestingFace:t?this.collides:!!e&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,e,i,r,n){return void 0===e&&(e=t),void 0===i&&(i=t),void 0===r&&(r=t),void 0===n&&(n=!0),this.collideLeft=t,this.collideRight=e,this.collideUp=i,this.collideDown=r,this.faceLeft=t,this.faceRight=e,this.faceTop=i,this.faceBottom=r,n&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,e){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=e),this},setSize:function(t,e,i,r){return void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==i&&(this.baseWidth=i),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){var t=this.layer.orientation;if(t===r.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===r.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===r.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===r.HEXAGONAL){var e=this.layer.hexSideLength,i=(this.baseHeight-e)/2+e;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*i}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var e=t.gidMap[this.index];if(e)return e}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=a},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(32),o=i(41),a=i(84),h=i(83),l=i(1393);r.rectangle=function(t,e,i,r,a){a=a||{};var h={label:"Rectangle Body",position:{x:t,y:e},vertices:n.fromPath("L 0 0 L "+i+" 0 L "+i+" "+r+" L 0 "+r)};if(a.chamfer){var l=a.chamfer;h.vertices=n.chamfer(h.vertices,l.radius,l.quality,l.qualityMin,l.qualityMax),delete a.chamfer}return o.create(s.extend({},h,a))},r.trapezoid=function(t,e,i,r,a,h){h=h||{};var l,u=i*(a*=.5),c=u+(1-2*a)*i,d=c+u;l=a<.5?"L 0 0 L "+u+" "+-r+" L "+c+" "+-r+" L "+d+" 0":"L 0 0 L "+c+" "+-r+" L "+d+" 0";var f={label:"Trapezoid Body",position:{x:t,y:e},vertices:n.fromPath(l)};if(h.chamfer){var p=h.chamfer;f.vertices=n.chamfer(f.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete h.chamfer}return o.create(s.extend({},f,h))},r.circle=function(t,e,i,n,o){n=n||{};var a={label:"Circle Body",circleRadius:i};o=o||25;var h=Math.ceil(Math.max(10,Math.min(o,i)));return h%2==1&&(h+=1),r.polygon(t,e,h,i,s.extend({},a,n))},r.polygon=function(t,e,i,a,h){if(h=h||{},i<3)return r.circle(t,e,a,h);for(var l=2*Math.PI/i,u="",c=.5*l,d=0;d<i;d+=1){var f=c+d*l,p=Math.cos(f)*a,g=Math.sin(f)*a;u+="L "+p.toFixed(3)+" "+g.toFixed(3)+" "}var v={label:"Polygon Body",position:{x:t,y:e},vertices:n.fromPath(u)};if(h.chamfer){var m=h.chamfer;v.vertices=n.chamfer(v.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete h.chamfer}return o.create(s.extend({},v,h))},r.fromVertices=function(t,e,i,a,h,u,c){var d,f,p,g,v,m;for(a=a||{},f=[],h=void 0!==h&&h,u=void 0!==u?u:.01,c=void 0!==c?c:10,l||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(i[0])||(i=[i]),m=0;m<i.length;m+=1)if(g=i[m],(p=n.isConvex(g))||!l)g=p?n.clockwiseSort(g):n.hull(g),f.push({position:{x:t,y:e},vertices:g});else{var y=g.map((function(t){return[t.x,t.y]}));l.makeCCW(y),!1!==u&&l.removeCollinearPoints(y,u);var x=l.quickDecomp(y);for(v=0;v<x.length;v++){var b=x[v].map((function(t){return{x:t[0],y:t[1]}}));c>0&&n.area(b)<c||f.push({position:n.centre(b),vertices:b})}}for(v=0;v<f.length;v++)f[v]=o.create(s.extend(f[v],a));return h&&r.flagCoincidentParts(f,5),f.length>1?(d=o.create(s.extend({parts:f.slice(0)},a)),o.setPosition(d,{x:t,y:e}),d):f[0]},r.flagCoincidentParts=function(t,e){void 0===e&&(e=5);for(var i=0;i<t.length;i++)for(var r=t[i],n=i+1;n<t.length;n++){var s=t[n];if(a.overlaps(r.bounds,s.bounds))for(var o=r.vertices,l=s.vertices,u=0;u<r.vertices.length;u++)for(var c=0;c<s.vertices.length;c++){var d=h.magnitudeSquared(h.sub(o[(u+1)%o.length],l[c])),f=h.magnitudeSquared(h.sub(o[u],l[(c+1)%l.length]));d<e&&f<e&&(o[u].isInternal=!0,l[c].isInternal=!0)}}return t}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,e){t.exports=function(t,e){var i=t.width*t.originX;return t.x=e+i-.5*t.width,t}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,e){t.exports=function(t,e){var i=t.height*t.originY;return t.y=e+i-.5*t.height,t}},function(t,e,i){t.exports={POST_RENDER:i(628),PRE_RENDER:i(629),RENDER:i(630),RESIZE:i(631)}},function(t,e){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,e,i){var r=i(74);t.exports=function(t,e,i,n){var s;if(void 0===n&&(n=t),!Array.isArray(e))return-1!==(s=t.indexOf(e))?(r(t,s),i&&i.call(n,e),e):null;for(var o=e.length-1,a=[];o>=0;){var h=e[o];-1!==(s=t.indexOf(h))&&(r(t,s),a.push(h),i&&i.call(n,h)),o--}return a}},function(t,e,i){var r=i(0),n=i(199),s=i(10),o=i(3),a=new r({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,e){t||(t=new s),void 0===e&&(e=16);var i=this.getLength();e>i&&(e=i/2);var r=Math.max(1,Math.round(i/e));return n(this.getSpacedPoints(r),t)},getDistancePoints:function(t){var e=this.getLength(),i=Math.max(1,e/t);return this.getSpacedPoints(i)},getEndPoint:function(t){return void 0===t&&(t=new o),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],r=this.getPoint(0,this._tmpVec2A),n=0;i.push(0);for(var s=1;s<=t;s++)n+=(e=this.getPoint(s/t,this._tmpVec2B)).distance(r),i.push(n),r.copy(e);return this.cacheArcLengths=i,i},getPointAt:function(t,e){var i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t,e,i){void 0===i&&(i=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var r=0;r<=t;r++)i.push(this.getPoint(r/t));return i},getRandomPoint:function(t){return void 0===t&&(t=new o),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,i){void 0===i&&(i=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var r=0;r<=t;r++){var n=this.getUtoTmapping(r/t,null,t);i.push(this.getPoint(n))}return i},getStartPoint:function(t){return void 0===t&&(t=new o),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new o);var i=1e-4,r=t-i,n=t+i;return r<0&&(r=0),n>1&&(n=1),this.getPoint(r,this._tmpVec2A),this.getPoint(n,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var i=this.getUtoTmapping(t);return this.getTangent(i,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,i){var r,n=this.getLengths(i),s=0,o=n.length;r=e?Math.min(e,n[o-1]):t*n[o-1];for(var a,h=0,l=o-1;h<=l;)if((a=n[s=Math.floor(h+(l-h)/2)]-r)<0)h=s+1;else{if(!(a>0)){l=s;break}l=s-1}if(n[s=l]===r)return s/(o-1);var u=n[s];return(s+(r-u)/(n[s+1]-u))/(o-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=a},function(t,e,i){t.exports={ADD:i(968),COMPLETE:i(969),FILE_COMPLETE:i(970),FILE_KEY_COMPLETE:i(971),FILE_LOAD_ERROR:i(972),FILE_LOAD:i(973),FILE_PROGRESS:i(974),POST_PROCESS:i(975),PROGRESS:i(976),START:i(977)}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=t.x1,s=t.y1,o=t.x2,a=t.y2,h=e.x1,l=e.y1,u=e.x2,c=e.y2,d=(c-l)*(o-n)-(u-h)*(a-s);if(0===d)return!1;var f=((u-h)*(s-l)-(c-l)*(n-h))/d,p=((o-n)*(s-l)-(a-s)*(n-h))/d;return f>=0&&f<=1&&p>=0&&p<=1&&(i.x=n+f*(o-n),i.y=s+f*(a-s),!0)}},function(t,e){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,e,i){var r=i(18);t.exports=function(t,e,i){return(i-e)*(t=r(t,0,1))+e}},function(t,e){t.exports=function(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}},function(t,e){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,e,i){var r=i(0),n=i(315),s=new r({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(n.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var i=[],r=0;r<t.length;r++)i.push(e[t[r]]);return i}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(t)&&(e[i]=this.list[i]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var i in t)this.setValue(i,t[i]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var i=this.get(t);return void 0===i&&(i=0),this.set(t,i+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{var i=this,r=this.list,s=this.events,o=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return r[t]},set:function(e){if(!i._frozen){var a=r[t];r[t]=e,s.emit(n.CHANGE_DATA,o,t,e,a),s.emit(n.CHANGE_DATA_KEY+t,o,e,a)}}}),r[t]=e,s.emit(n.SET_DATA,o,t,e)}return this},each:function(t,e){for(var i=[this.parent,null,void 0],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var n in this.list)i[1]=n,i[2]=this.list[n],t.apply(e,i);return this},merge:function(t,e){for(var i in void 0===e&&(e=!0),t)t.hasOwnProperty(i)&&(e||!e&&!this.has(i))&&this.setValue(i,t[i]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(n.CHANGE_DATA),this.events.off(n.SET_DATA),this.events.off(n.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=s},function(t,e,i){var r=new(i(0))({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var i in e)if(!1===t(i,e[i]))break;return this},contains:function(t){var e=this.entries;for(var i in e)if(e[i]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var i=this.entries,r=t.entries;for(var n in r)i.hasOwnProperty(n)&&e?i[n]=r[n]:this.set(n,r[n]);return this}});t.exports=r},function(t,e){t.exports=function(t,e,i){return t<<16|e<<8|i}},function(t,e,i){t.exports={ENTER_FULLSCREEN:i(800),FULLSCREEN_FAILED:i(801),FULLSCREEN_UNSUPPORTED:i(802),LEAVE_FULLSCREEN:i(803),ORIENTATION_CHANGE:i(804),RESIZE:i(805)}},function(t,e,i){(function(e){var i={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"==typeof importScripts)return i;var t=navigator.userAgent;/Windows/.test(t)?i.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(i.iOS=!0,i.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),i.iOSVersion=parseInt(RegExp.$1,10)):i.macOS=!0:/Android/.test(t)?i.android=!0:/Linux/.test(t)?i.linux=!0:/iP[ao]d|iPhone/i.test(t)?(i.iOS=!0,navigator.appVersion.match(/OS (\d+)/),i.iOSVersion=parseInt(RegExp.$1,10),i.iPhone=-1!==t.toLowerCase().indexOf("iphone"),i.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?i.kindle=!0:/CrOS/.test(t)&&(i.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(i.android=!1,i.iOS=!1,i.macOS=!1,i.windows=!0,i.windowsPhone=!0);var r=/Silk/.test(t);return(i.windows||i.macOS||i.linux&&!r||i.chromeOS)&&(i.desktop=!0),(i.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(i.desktop=!1),navigator.standalone&&(i.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(i.cordova=!0),void 0!==window.ejecta&&(i.ejecta=!0)),void 0!==e&&e.versions&&e.versions.node&&(i.node=!0),i.node&&"object"==typeof e.versions&&(i.nodeWebkit=!!e.versions["node-webkit"],i.electron=!!e.versions.electron),/Crosswalk/.test(t)&&(i.crosswalk=!0),i.pixelRatio=window.devicePixelRatio||1,i}()}).call(this,i(807))},function(t,e,i){t.exports={ADD:i(861),ERROR:i(862),LOAD:i(863),READY:i(864),REMOVE:i(865)}},function(t,e){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,e,i){var r=i(0),n=i(59),s=i(2),o=i(878),a=i(879),h=i(25),l=i(12),u=i(107),c=i(58),d=new r({Extends:c,initialize:function(t){var e=t.game.renderer,i=s(t,"fragShader",o);t.fragShader=l.parseFragmentShaderMaxTextures(i,e.maxTextures),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),c.call(this,t),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){c.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(t,e,i){this.manager.set(this,t);var r=this._tempMatrix1,n=this._tempMatrix2,s=this._tempMatrix3,o=t.frame,a=o.glTexture,h=o.u0,u=o.v0,c=o.u1,d=o.v1,f=o.x,p=o.y,g=o.cutWidth,v=o.cutHeight,m=o.customPivot,y=t.displayOriginX,x=t.displayOriginY,b=-y+f,w=-x+p;if(t.isCropped){var T=t._crop;T.flipX===t.flipX&&T.flipY===t.flipY||o.updateCropUVs(T,t.flipX,t.flipY),h=T.u0,u=T.v0,c=T.u1,d=T.v1,g=T.width,v=T.height,b=-y+(f=T.x),w=-x+(p=T.y)}var S=1,E=1;t.flipX&&(m||(b+=-o.realWidth+2*y),S=-1),(t.flipY||o.source.isGLTexture&&!a.flipY)&&(m||(w+=-o.realHeight+2*x),E=-1),n.applyITRS(t.x,t.y,t.rotation,t.scaleX*S,t.scaleY*E),r.copyFrom(e.matrix),i?(r.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),n.e=t.x,n.f=t.y):(n.e-=e.scrollX*t.scrollFactorX,n.f-=e.scrollY*t.scrollFactorY),r.multiply(n,s);var C=b+g,_=w+v,A=e.roundPixels,M=s.getXRound(b,w,A),P=s.getYRound(b,w,A),k=s.getXRound(b,_,A),O=s.getYRound(b,_,A),R=s.getXRound(C,_,A),L=s.getYRound(C,_,A),I=s.getXRound(C,w,A),F=s.getYRound(C,w,A),D=l.getTintAppendFloatAlpha,B=e.alpha,N=D(t.tintTopLeft,B*t._alphaTL),z=D(t.tintTopRight,B*t._alphaTR),U=D(t.tintBottomLeft,B*t._alphaBL),Y=D(t.tintBottomRight,B*t._alphaBR);this.shouldFlush(6)&&this.flush();var X=this.setGameObject(t,o);this.manager.preBatch(t),this.batchQuad(t,M,P,k,O,R,L,I,F,h,u,c,d,N,z,U,Y,t.tintFill,a,X),this.manager.postBatch(t)},batchTexture:function(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p,g,v,m,y,x,b,w,T,S,E,C,_,A,M,P,k,O){this.manager.set(this,t);var R=this._tempMatrix1,L=this._tempMatrix2,I=this._tempMatrix3,F=m/i+_,D=y/r+A,B=(m+x)/i+_,N=(y+b)/r+A,z=o,U=a,Y=-g,X=-v;if(t.isCropped){var G=t._crop,W=G.width,V=G.height;z=W,U=V,o=W,a=V;var j=m=G.x,H=y=G.y;c&&(j=x-G.x-W),d&&(H=b-G.y-V),F=j/i+_,D=H/r+A,B=(j+W)/i+_,N=(H+V)/r+A,Y=-g+m,X=-v+y}c&&(z*=-1,Y+=o),(d^=!k&&e.isRenderTexture?1:0)&&(U*=-1,X+=a);var q=Y+z,K=X+U;L.applyITRS(n,s,u,h,l),R.copyFrom(M.matrix),P?(R.multiplyWithOffset(P,-M.scrollX*f,-M.scrollY*p),L.e=n,L.f=s):(L.e-=M.scrollX*f,L.f-=M.scrollY*p),R.multiply(L,I);var Z=M.roundPixels,J=I.getXRound(Y,X,Z),$=I.getYRound(Y,X,Z),Q=I.getXRound(Y,K,Z),tt=I.getYRound(Y,K,Z),et=I.getXRound(q,K,Z),it=I.getYRound(q,K,Z),rt=I.getXRound(q,X,Z),nt=I.getYRound(q,X,Z);void 0===O&&(O=this.renderer.setTexture2D(e)),t&&this.manager.preBatch(t),this.batchQuad(t,J,$,Q,tt,et,it,rt,nt,F,D,B,N,w,T,S,E,C,e,O),t&&this.manager.postBatch(t)},batchTextureFrame:function(t,e,i,r,n,s,o){this.manager.set(this);var a=this._tempMatrix1.copyFrom(s),h=this._tempMatrix2,u=e+t.width,c=i+t.height;o?a.multiply(o,h):h=a;var d=h.getX(e,i),f=h.getY(e,i),p=h.getX(e,c),g=h.getY(e,c),v=h.getX(u,c),m=h.getY(u,c),y=h.getX(u,i),x=h.getY(u,i),b=this.renderer.setTextureSource(t.source);r=l.getTintAppendFloatAlpha(r,n),this.batchQuad(null,d,f,p,g,v,m,y,x,t.u0,t.v0,t.u1,t.v1,r,r,r,r,0,t.glTexture,b)},batchFillRect:function(t,e,i,r,n,s){this.renderer.pipelines.set(this);var o=this.calcMatrix;s&&s.multiply(n,o);var a=t+i,h=e+r,l=o.getX(t,e),u=o.getY(t,e),c=o.getX(t,h),d=o.getY(t,h),f=o.getX(a,h),p=o.getY(a,h),g=o.getX(a,e),v=o.getY(a,e),m=this.fillTint;this.batchQuad(null,l,u,c,d,f,p,g,v,0,0,1,1,m.TL,m.TR,m.BL,m.BR,2)},batchFillTriangle:function(t,e,i,r,n,s,o,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(o,h);var l=h.getX(t,e),u=h.getY(t,e),c=h.getX(i,r),d=h.getY(i,r),f=h.getX(n,s),p=h.getY(n,s),g=this.fillTint;this.batchTri(null,l,u,c,d,f,p,0,0,1,1,g.TL,g.TR,g.BL,2)},batchStrokeTriangle:function(t,e,i,r,n,s,o,a,h){var l=this.tempTriangle;l[0].x=t,l[0].y=e,l[0].width=o,l[1].x=i,l[1].y=r,l[1].width=o,l[2].x=n,l[2].y=s,l[2].width=o,l[3].x=t,l[3].y=e,l[3].width=o,this.batchStrokePath(l,o,!1,a,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(e,r);for(var s,o,a=t.length,h=this.polygonCache,l=this.fillTint.TL,u=this.fillTint.TR,c=this.fillTint.BL,d=0;d<a;++d)o=t[d],h.push(o.x,o.y);a=(s=n(h)).length;for(var f=0;f<a;f+=3){var p=2*s[f+0],g=2*s[f+1],v=2*s[f+2],m=h[p+0],y=h[p+1],x=h[g+0],b=h[g+1],w=h[v+0],T=h[v+1],S=r.getX(m,y),E=r.getY(m,y),C=r.getX(x,b),_=r.getY(x,b),A=r.getX(w,T),M=r.getY(w,T);this.batchTri(null,S,E,C,_,A,M,0,0,1,1,l,u,c,2)}h.length=0},batchStrokePath:function(t,e,i,r,n){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,o=0;o<s;o++){var a=t[o],h=t[o+1];this.batchLine(a.x,a.y,h.x,h.y,a.width/2,h.width/2,e,o,!i&&o===s-1,r,n)}},batchLine:function(t,e,i,r,n,s,o,a,h,l,u){this.renderer.pipelines.set(this);var c=this.calcMatrix;u&&u.multiply(l,c);var d=i-t,f=r-e,p=Math.sqrt(d*d+f*f),g=n*(r-e)/p,v=n*(t-i)/p,m=s*(r-e)/p,y=s*(t-i)/p,x=i-m,b=r-y,w=t-g,T=e-v,S=i+m,E=r+y,C=t+g,_=e+v,A=c.getX(x,b),M=c.getY(x,b),P=c.getX(w,T),k=c.getY(w,T),O=c.getX(S,E),R=c.getY(S,E),L=c.getX(C,_),I=c.getY(C,_),F=this.strokeTint,D=F.TL,B=F.TR,N=F.BL,z=F.BR;if(this.batchQuad(null,L,I,P,k,A,M,O,R,0,0,1,1,D,B,N,z,2),!(o<=2)){var U=this.prevQuad,Y=this.firstQuad;a>0&&U[4]?this.batchQuad(null,L,I,P,k,U[0],U[1],U[2],U[3],0,0,1,1,D,B,N,z,2):(Y[0]=L,Y[1]=I,Y[2]=P,Y[3]=k,Y[4]=1),h&&Y[4]?this.batchQuad(null,A,M,O,R,Y[0],Y[1],Y[2],Y[3],0,0,1,1,D,B,N,z,2):(U[0]=A,U[1]=M,U[2]=O,U[3]=R,U[4]=1)}}});t.exports=d},function(t,e,i){var r=i(0),n=i(18),s=i(17),o=new r({initialize:function(t,e,i,r,n,s,o){this.texture=t,this.name=e,this.source=t.source[i],this.sourceIndex=i,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(s,o,r,n)},setSize:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this.cutX=i,this.cutY=r,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var n=this.data,s=n.cut;s.x=i,s.y=r,s.w=t,s.h=e,s.r=i+t,s.b=r+e,n.sourceSize.w=t,n.sourceSize.h=e,n.spriteSourceSize.w=t,n.spriteSourceSize.h=e,n.radius=.5*Math.sqrt(t*t+e*e);var o=n.drawImage;return o.x=i,o.y=r,o.width=t,o.height=e,this.updateUVs()},setTrim:function(t,e,i,r,n,s){var o=this.data,a=o.spriteSourceSize;return o.trim=!0,o.sourceSize.w=t,o.sourceSize.h=e,a.x=i,a.y=r,a.w=n,a.h=s,a.r=i+n,a.b=r+s,this.x=i,this.y=r,this.width=n,this.height=s,this.halfWidth=.5*n,this.halfHeight=.5*s,this.centerX=Math.floor(n/2),this.centerY=Math.floor(s/2),this.updateUVs()},setCropUVs:function(t,e,i,r,s,o,a){var h=this.cutX,l=this.cutY,u=this.cutWidth,c=this.cutHeight,d=this.realWidth,f=this.realHeight,p=h+(e=n(e,0,d)),g=l+(i=n(i,0,f)),v=r=n(r,0,d-e),m=s=n(s,0,f-i),y=this.data;if(y.trim){var x=y.spriteSourceSize,b=e+(r=n(r,0,u-e)),w=i+(s=n(s,0,c-i));if(x.r<e||x.b<i||x.x>b||x.y>w)p=0,g=0,v=0,m=0;else{var T=Math.max(x.x,e),S=Math.max(x.y,i),E=Math.min(x.r,b)-T,C=Math.min(x.b,w)-S;v=E,m=C,p=o?h+(u-(T-x.x)-E):h+(T-x.x),g=a?l+(c-(S-x.y)-C):l+(S-x.y),e=T,i=S,r=E,s=C}}else o&&(p=h+(u-e-r)),a&&(g=l+(c-i-s));var _=this.source.width,A=this.source.height;return t.u0=Math.max(0,p/_),t.v0=Math.max(0,g/A),t.u1=Math.min(1,(p+v)/_),t.v1=Math.min(1,(g+m)/A),t.x=e,t.y=i,t.cx=p,t.cy=g,t.cw=v,t.ch=m,t.width=r,t.height=s,t.flipX=o,t.flipY=a,t},updateCropUVs:function(t,e,i){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,i)},setUVs:function(t,e,i,r,n,s){var o=this.data.drawImage;return o.width=t,o.height=e,this.u0=i,this.v0=r,this.u1=n,this.v1=s,this},updateUVs:function(){var t=this.cutX,e=this.cutY,i=this.cutWidth,r=this.cutHeight,n=this.data.drawImage;n.width=i,n.height=r;var s=this.source.width,o=this.source.height;return this.u0=t/s,this.v0=e/o,this.u1=(t+i)/s,this.v1=(e+r)/o,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new o(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=s(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=o},function(t,e,i){var r=i(208),n=i(0),s=i(1),o=i(79),a=new n({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(t,e){return e?r.Add(this.list,t):r.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,i){return i?r.AddAt(this.list,t,e):r.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),o(this.list,e),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,e){return r.GetRandom(this.list,t,e)},getFirst:function(t,e,i,n){return r.GetFirst(this.list,t,e,i,n)},getAll:function(t,e,i,n){return r.GetAll(this.list,t,e,i,n)},count:function(t,e){return r.CountAllMatching(this.list,t,e)},swap:function(t,e){r.Swap(this.list,t,e)},moveTo:function(t,e){return r.MoveTo(this.list,t,e)},moveAbove:function(t,e){return r.MoveAbove(this.list,t,e)},moveBelow:function(t,e){return r.MoveBelow(this.list,t,e)},remove:function(t,e){return e?r.Remove(this.list,t):r.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?r.RemoveAt(this.list,t):r.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,i){return i?r.RemoveBetween(this.list,t,e):r.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return r.BringToTop(this.list,t)},sendToBack:function(t){return r.SendToBack(this.list,t)},moveUp:function(t){return r.MoveUp(this.list,t),t},moveDown:function(t){return r.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,e){return r.Replace(this.list,t,e)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,n){return r.SetAll(this.list,t,e,i,n),this},each:function(t,e){for(var i=[null],r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],t.apply(e,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=a},function(t,e,i){var r=i(0),n=i(112),s=i(445),o=i(446),a=i(56),h=i(180),l=new r({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=a.ELLIPSE,this.x=t,this.y=e,this.width=i,this.height=r},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return o(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=l},function(t,e){t.exports=function(t,e,i){if(t.width<=0||t.height<=0)return!1;var r=(e-t.x)/t.width,n=(i-t.y)/t.height;return(r*=r)+(n*=n)<.25}},function(t,e,i){var r=i(275),n=i(0),s=i(75),o=i(9),a=i(207),h=i(2),l=i(6),u=i(7),c=i(437),d=i(149),f=i(73),p=new n({Extends:o,initialize:function(t,e,i){o.call(this),i?e&&!Array.isArray(e)&&(e=[e]):Array.isArray(e)?u(e[0])&&(i=e,e=null):u(e)&&(i=e,e=null),this.scene=t,this.children=new d,this.isParent=!0,this.type="Group",this.classType=h(i,"classType",f),this.name=h(i,"name",""),this.active=h(i,"active",!0),this.maxSize=h(i,"maxSize",-1),this.defaultKey=h(i,"defaultKey",null),this.defaultFrame=h(i,"defaultFrame",null),this.runChildUpdate=h(i,"runChildUpdate",!1),this.createCallback=h(i,"createCallback",null),this.removeCallback=h(i,"removeCallback",null),this.createMultipleCallback=h(i,"createMultipleCallback",null),this.internalCreateCallback=h(i,"internalCreateCallback",null),this.internalRemoveCallback=h(i,"internalRemoveCallback",null),e&&this.addMultiple(e),i&&this.createMultiple(i),this.on(s.ADDED_TO_SCENE,this.addedToScene,this),this.on(s.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(t,e,i,r,n,s){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.defaultKey),void 0===r&&(r=this.defaultFrame),void 0===n&&(n=!0),void 0===s&&(s=!0),this.isFull())return null;var o=new this.classType(this.scene,t,e,i,r);return o.addToDisplayList(this.scene.sys.displayList),o.addToUpdateList(),o.visible=n,o.setActive(s),this.add(o),o},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var e=[];if(t[0].key)for(var i=0;i<t.length;i++){var r=this.createFromConfig(t[i]);e=e.concat(r)}return e},createFromConfig:function(t){if(this.isFull())return[];this.classType=h(t,"classType",this.classType);var e=h(t,"key",void 0),i=h(t,"frame",null),n=h(t,"visible",!0),s=h(t,"active",!0),o=[];if(void 0===e)return o;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);var a=h(t,"repeat",0),u=h(t,"randomKey",!1),d=h(t,"randomFrame",!1),f=h(t,"yoyo",!1),p=h(t,"quantity",!1),g=h(t,"frameQuantity",1),v=h(t,"max",0),m=c(e,i,{max:v,qty:p||g,random:u,randomB:d,repeat:a,yoyo:f});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var y=0;y<m.length;y++){var x=this.create(0,0,m[y].a,m[y].b,n,s);if(!x)break;o.push(x)}var b=l(t,"setXY.x",0),w=l(t,"setXY.y",0),T=l(t,"setXY.stepX",0),S=l(t,"setXY.stepY",0);r.SetXY(o,b,w,T,S);var E=l(t,"setRotation.value",0),C=l(t,"setRotation.step",0);r.SetRotation(o,E,C);var _=l(t,"setScale.x",1),A=l(t,"setScale.y",_),M=l(t,"setScale.stepX",0),P=l(t,"setScale.stepY",0);r.SetScale(o,_,A,M,P);var k=l(t,"setOrigin.x",.5),O=l(t,"setOrigin.y",k),R=l(t,"setOrigin.stepX",0),L=l(t,"setOrigin.stepY",0);r.SetOrigin(o,k,O,R,L);var I=l(t,"setAlpha.value",1),F=l(t,"setAlpha.step",0);r.SetAlpha(o,I,F);var D=l(t,"setDepth.value",0),B=l(t,"setDepth.step",0);r.SetDepth(o,D,B);var N=l(t,"setScrollFactor.x",1),z=l(t,"setScrollFactor.y",N),U=l(t,"setScrollFactor.stepX",0),Y=l(t,"setScrollFactor.stepY",0);r.SetScrollFactor(o,N,z,U,Y);var X=h(t,"hitArea",null),G=h(t,"hitAreaCallback",null);X&&r.SetHitArea(o,X,G);var W=h(t,"gridAlign",!1);return W&&r.GridAlign(o,W),this.createMultipleCallback&&this.createMultipleCallback.call(this,o),o},preUpdate:function(t,e){if(this.runChildUpdate&&0!==this.children.size)for(var i=this.children.entries.slice(),r=0;r<i.length;r++){var n=i[r];n.active&&n.update(t,e)}},add:function(t,e){return void 0===e&&(e=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),e&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(s.DESTROY,this.remove,this)),this},addMultiple:function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var i=0;i<t.length;i++)this.add(t[i],e);return this},remove:function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(s.DESTROY,this.remove,this),i?t.destroy():e&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var i=this.children,r=0;r<i.size;r++){var n=i.entries[r];n.off(s.DESTROY,this.remove,this),e?n.destroy():t&&(n.removeFromDisplayList(),n.removeFromUpdateList())}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(t,e,i,r){return a(this.children.entries,t,e,i,r)},getFirst:function(t,e,i,r,n,s,o){return this.getHandler(!0,1,t,e,i,r,n,s,o)},getFirstNth:function(t,e,i,r,n,s,o,a){return this.getHandler(!0,t,e,i,r,n,s,o,a)},getLast:function(t,e,i,r,n,s,o){return this.getHandler(!1,1,t,e,i,r,n,s,o)},getLastNth:function(t,e,i,r,n,s,o,a){return this.getHandler(!1,t,e,i,r,n,s,o,a)},getHandler:function(t,e,i,r,n,s,o,a,h){var l,u;void 0===i&&(i=!1),void 0===r&&(r=!1);var c=0,d=this.children.entries;if(t)for(u=0;u<d.length;u++)if((l=d[u]).active===i){if(++c===e)break}else l=null;else for(u=d.length-1;u>=0;u--)if((l=d[u]).active===i){if(++c===e)break}else l=null;return l?("number"==typeof n&&(l.x=n),"number"==typeof s&&(l.y=s),l):r?this.create(n,s,o,a,h):null},get:function(t,e,i,r,n){return this.getFirst(!1,!0,t,e,i,r,n)},getFirstAlive:function(t,e,i,r,n,s){return this.getFirst(!0,t,e,i,r,n,s)},getFirstDead:function(t,e,i,r,n,s){return this.getFirst(!1,t,e,i,r,n,s)},playAnimation:function(t,e){return r.PlayAnimation(this.children.entries,t,e),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var e=0,i=0;i<this.children.size;i++)this.children.entries[i].active===t&&e++;return e},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,e,i,n,s){return r.PropertyValueSet(this.children.entries,t,e,i,n,s),this},propertyValueInc:function(t,e,i,n,s){return r.PropertyValueInc(this.children.entries,t,e,i,n,s),this},setX:function(t,e){return r.SetX(this.children.entries,t,e),this},setY:function(t,e){return r.SetY(this.children.entries,t,e),this},setXY:function(t,e,i,n){return r.SetXY(this.children.entries,t,e,i,n),this},incX:function(t,e){return r.IncX(this.children.entries,t,e),this},incY:function(t,e){return r.IncY(this.children.entries,t,e),this},incXY:function(t,e,i,n){return r.IncXY(this.children.entries,t,e,i,n),this},shiftPosition:function(t,e,i){return r.ShiftPosition(this.children.entries,t,e,i),this},angle:function(t,e){return r.Angle(this.children.entries,t,e),this},rotate:function(t,e){return r.Rotate(this.children.entries,t,e),this},rotateAround:function(t,e){return r.RotateAround(this.children.entries,t,e),this},rotateAroundDistance:function(t,e,i){return r.RotateAroundDistance(this.children.entries,t,e,i),this},setAlpha:function(t,e){return r.SetAlpha(this.children.entries,t,e),this},setTint:function(t,e,i,n){return r.SetTint(this.children.entries,t,e,i,n),this},setOrigin:function(t,e,i,n){return r.SetOrigin(this.children.entries,t,e,i,n),this},scaleX:function(t,e){return r.ScaleX(this.children.entries,t,e),this},scaleY:function(t,e){return r.ScaleY(this.children.entries,t,e),this},scaleXY:function(t,e,i,n){return r.ScaleXY(this.children.entries,t,e,i,n),this},setDepth:function(t,e){return r.SetDepth(this.children.entries,t,e),this},setBlendMode:function(t){return r.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,e){return r.SetHitArea(this.children.entries,t,e),this},shuffle:function(){return r.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,e,i){return r.SetVisible(this.children.entries,t,e,i),this},toggleVisible:function(){return r.ToggleVisible(this.children.entries),this},destroy:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.scene&&!this.ignoreDestroy&&(this.emit(s.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(e,t),this.scene=void 0,this.children=void 0)}});t.exports=p},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n,s,o){for(var a=r.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),h=i.pathData,l=i.pathIndexes,u=0;u<l.length;u+=3){var c=2*l[u],d=2*l[u+1],f=2*l[u+2],p=h[c+0]-s,g=h[c+1]-o,v=h[d+0]-s,m=h[d+1]-o,y=h[f+0]-s,x=h[f+1]-o,b=e.getX(p,g),w=e.getY(p,g),T=e.getX(v,m),S=e.getY(v,m),E=e.getX(y,x),C=e.getY(y,x);t.batchTri(i,b,w,T,S,E,C,0,0,1,1,a,a,a,2)}}},function(t,e){t.exports=function(t,e,i){var r=t.x3-t.x1,n=t.y3-t.y1,s=t.x2-t.x1,o=t.y2-t.y1,a=e-t.x1,h=i-t.y1,l=r*r+n*n,u=r*s+n*o,c=r*a+n*h,d=s*s+o*o,f=s*a+o*h,p=l*d-u*u,g=0===p?0:1/p,v=(d*c-u*f)*g,m=(l*f-u*c)*g;return v>=0&&m>=0&&v+m<1}},function(t,e,i){var r=i(0),n=i(10),s=i(3);function o(t,e,i,r){var n=t-i,s=e-r,o=n*n+s*s;return Math.sqrt(o)}var a=new r({initialize:function(t,e,i){this.vertex1=t,this.vertex2=e,this.vertex3=i,this.bounds=new n,this._inCenter=new s},getInCenter:function(t){void 0===t&&(t=!0);var e,i,r,n,s,a,h=this.vertex1,l=this.vertex2,u=this.vertex3;t?(e=h.x,i=h.y,r=l.x,n=l.y,s=u.x,a=u.y):(e=h.vx,i=h.vy,r=l.vx,n=l.vy,s=u.vx,a=u.vy);var c=o(s,a,r,n),d=o(e,i,s,a),f=o(r,n,e,i),p=c+d+f;return this._inCenter.set((e*c+r*d+s*f)/p,(i*c+n*d+a*f)/p)},contains:function(t,e,i){var r=this.vertex1,n=this.vertex2,s=this.vertex3,o=r.vx,a=r.vy,h=n.vx,l=n.vy,u=s.vx,c=s.vy;if(i){var d=i.a,f=i.b,p=i.c,g=i.d,v=i.e,m=i.f;o=r.vx*d+r.vy*p+v,a=r.vx*f+r.vy*g+m,h=n.vx*d+n.vy*p+v,l=n.vx*f+n.vy*g+m,u=s.vx*d+s.vy*p+v,c=s.vx*f+s.vy*g+m}var y=u-o,x=c-a,b=h-o,w=l-a,T=t-o,S=e-a,E=y*y+x*x,C=y*b+x*w,_=y*T+x*S,A=b*b+w*w,M=b*T+w*S,P=E*A-C*C,k=0===P?0:1/P,O=(A*_-C*M)*k,R=(E*M-C*_)*k;return O>=0&&R>=0&&O+R<1},isCounterClockwise:function(t){var e=this.vertex1,i=this.vertex2,r=this.vertex3,n=(i.vx-e.vx)*(r.vy-e.vy)-(i.vy-e.vy)*(r.vx-e.vx);return t<=0?n>=0:n<0},load:function(t,e,i,r,n){return i=this.vertex1.load(t,e,i,r,n),i=this.vertex2.load(t,e,i,r,n),this.vertex3.load(t,e,i,r,n)},transformCoordinatesLocal:function(t,e,i,r){return this.vertex1.transformCoordinatesLocal(t,e,i,r),this.vertex2.transformCoordinatesLocal(t,e,i,r),this.vertex3.transformCoordinatesLocal(t,e,i,r),this},updateBounds:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3,r=this.bounds;return r.x=Math.min(t.vx,e.vx,i.vx),r.y=Math.min(t.vy,e.vy,i.vy),r.width=Math.max(t.vx,e.vx,i.vx)-r.x,r.height=Math.max(t.vy,e.vy,i.vy)-r.y,this},isInView:function(t,e,i,r,n,s,o,a,h,l,u){var c=this.vertex1.update(n,s,o,a,h,l,u,r),d=this.vertex2.update(n,s,o,a,h,l,u,r),f=this.vertex3.update(n,s,o,a,h,l,u,r);if(c.ta<=0&&d.ta<=0&&f.ta<=0)return!1;if(e&&!this.isCounterClockwise(i))return!1;var p=this.bounds;p.x=Math.min(c.tx,d.tx,f.tx),p.y=Math.min(c.ty,d.ty,f.ty),p.width=Math.max(c.tx,d.tx,f.tx)-p.x,p.height=Math.max(c.ty,d.ty,f.ty)-p.y;var g=t.x+t.width,v=t.y+t.height;return!(p.width<=0||p.height<=0||t.width<=0||t.height<=0||p.right<t.x||p.bottom<t.y||p.x>g||p.y>v)},translate:function(t,e){void 0===e&&(e=0);var i=this.vertex1,r=this.vertex2,n=this.vertex3;return i.x+=t,i.y+=e,r.x+=t,r.y+=e,n.x+=t,n.y+=e,this},x:{get:function(){return this.getInCenter().x},set:function(t){var e=this.getInCenter();this.translate(t-e.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var e=this.getInCenter();this.translate(0,t-e.y)}},alpha:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.alpha+e.alpha+i.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.vz+e.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=a},function(t,e,i){var r=i(0),n=i(12),s=i(39),o=new r({Extends:s,initialize:function(t,e,i,r,n,o,a,h,l,u){void 0===o&&(o=16777215),void 0===a&&(a=1),void 0===h&&(h=0),void 0===l&&(l=0),void 0===u&&(u=0),s.call(this,t,e,i),this.vx=0,this.vy=0,this.vz=0,this.nx=h,this.ny=l,this.nz=u,this.u=r,this.v=n,this.color=o,this.alpha=a,this.tx=0,this.ty=0,this.ta=0},setUVs:function(t,e){return this.u=t,this.v=e,this},transformCoordinatesLocal:function(t,e,i,r){var n=this.x,s=this.y,o=this.z,a=t.val,h=n*a[0]+s*a[4]+o*a[8]+a[12],l=n*a[1]+s*a[5]+o*a[9]+a[13],u=n*a[2]+s*a[6]+o*a[10]+a[14],c=n*a[3]+s*a[7]+o*a[11]+a[15];this.vx=h/c*e,this.vy=-l/c*i,this.vz=r<=0?u/c:-u/c},update:function(t,e,i,r,n,s,o,a){var h=this.vx*t+this.vy*i+n,l=this.vx*e+this.vy*r+s;return o&&(h=Math.round(h),l=Math.round(l)),this.tx=h,this.ty=l,this.ta=this.alpha*a,this},load:function(t,e,i,r,s){return t[++i]=this.tx,t[++i]=this.ty,t[++i]=this.u,t[++i]=this.v,t[++i]=r,t[++i]=s,e[++i]=n.getTintAppendFloatAlpha(this.color,this.ta),i}});t.exports=o},function(t,e,i){var r={};t.exports=r;var n=i(166),s=i(32),o=i(84),a=i(41);r.create=function(t){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},r.setModified=function(t,e,i,s){if(n.trigger(t,"compositeModified",t),t.isModified=e,i&&t.parent&&r.setModified(t.parent,e,i,s),s)for(var o=0;o<t.composites.length;o++){var a=t.composites[o];r.setModified(a,e,i,s)}},r.add=function(t,e){var i=[].concat(e);n.trigger(t,"beforeAdd",{object:e});for(var o=0;o<i.length;o++){var a=i[o];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(t,a);break;case"constraint":r.addConstraint(t,a);break;case"composite":r.addComposite(t,a);break;case"mouseConstraint":r.addConstraint(t,a.constraint)}}return n.trigger(t,"afterAdd",{object:e}),t},r.remove=function(t,e,i){var s=[].concat(e);n.trigger(t,"beforeRemove",{object:e});for(var o=0;o<s.length;o++){var a=s[o];switch(a.type){case"body":r.removeBody(t,a,i);break;case"constraint":r.removeConstraint(t,a,i);break;case"composite":r.removeComposite(t,a,i);break;case"mouseConstraint":r.removeConstraint(t,a.constraint)}}return n.trigger(t,"afterRemove",{object:e}),t},r.addComposite=function(t,e){return t.composites.push(e),e.parent=t,r.setModified(t,!0,!0,!1),t},r.removeComposite=function(t,e,i){var n=t.composites.indexOf(e);if(-1!==n&&(r.removeCompositeAt(t,n),r.setModified(t,!0,!0,!1)),i)for(var s=0;s<t.composites.length;s++)r.removeComposite(t.composites[s],e,!0);return t},r.removeCompositeAt=function(t,e){return t.composites.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addBody=function(t,e){return t.bodies.push(e),r.setModified(t,!0,!0,!1),t},r.removeBody=function(t,e,i){var n=t.bodies.indexOf(e);if(-1!==n&&(r.removeBodyAt(t,n),r.setModified(t,!0,!0,!1)),i)for(var s=0;s<t.composites.length;s++)r.removeBody(t.composites[s],e,!0);return t},r.removeBodyAt=function(t,e){return t.bodies.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addConstraint=function(t,e){return t.constraints.push(e),r.setModified(t,!0,!0,!1),t},r.removeConstraint=function(t,e,i){var n=t.constraints.indexOf(e);if(-1!==n&&r.removeConstraintAt(t,n),i)for(var s=0;s<t.composites.length;s++)r.removeConstraint(t.composites[s],e,!0);return t},r.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),r.setModified(t,!0,!0,!1),t},r.clear=function(t,e,i){if(i)for(var n=0;n<t.composites.length;n++)r.clear(t.composites[n],e,!0);return e?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,r.setModified(t,!0,!0,!1),t},r.allBodies=function(t){for(var e=[].concat(t.bodies),i=0;i<t.composites.length;i++)e=e.concat(r.allBodies(t.composites[i]));return e},r.allConstraints=function(t){for(var e=[].concat(t.constraints),i=0;i<t.composites.length;i++)e=e.concat(r.allConstraints(t.composites[i]));return e},r.allComposites=function(t){for(var e=[].concat(t.composites),i=0;i<t.composites.length;i++)e=e.concat(r.allComposites(t.composites[i]));return e},r.get=function(t,e,i){var n,s;switch(i){case"body":n=r.allBodies(t);break;case"constraint":n=r.allConstraints(t);break;case"composite":n=r.allComposites(t).concat(t)}return n?0===(s=n.filter((function(t){return t.id.toString()===e.toString()}))).length?null:s[0]:null},r.move=function(t,e,i){return r.remove(t,e),r.add(i,e),t},r.rebase=function(t){for(var e=r.allBodies(t).concat(r.allConstraints(t)).concat(r.allComposites(t)),i=0;i<e.length;i++)e[i].id=s.nextId();return r.setModified(t,!0,!0,!1),t},r.translate=function(t,e,i){for(var n=i?r.allBodies(t):t.bodies,s=0;s<n.length;s++)a.translate(n[s],e);return r.setModified(t,!0,!0,!1),t},r.rotate=function(t,e,i,n){for(var s=Math.cos(e),o=Math.sin(e),h=n?r.allBodies(t):t.bodies,l=0;l<h.length;l++){var u=h[l],c=u.position.x-i.x,d=u.position.y-i.y;a.setPosition(u,{x:i.x+(c*s-d*o),y:i.y+(c*o+d*s)}),a.rotate(u,e)}return r.setModified(t,!0,!0,!1),t},r.scale=function(t,e,i,n,s){for(var o=s?r.allBodies(t):t.bodies,h=0;h<o.length;h++){var l=o[h],u=l.position.x-n.x,c=l.position.y-n.y;a.setPosition(l,{x:n.x+u*e,y:n.y+c*i}),a.scale(l,e,i)}return r.setModified(t,!0,!0,!1),t},r.bounds=function(t){for(var e=r.allBodies(t),i=[],n=0;n<e.length;n+=1){var s=e[n];i.push(s.bounds.min,s.bounds.max)}return o.create(i)}},function(t,e){t.exports=function(t,e,i){return t>=0&&t<i.width&&e>=0&&e<i.height}},function(t,e,i){var r=i(0),n=i(29),s=i(2),o=new r({initialize:function(t){void 0===t&&(t={}),this.name=s(t,"name","layer"),this.x=s(t,"x",0),this.y=s(t,"y",0),this.width=s(t,"width",0),this.height=s(t,"height",0),this.tileWidth=s(t,"tileWidth",0),this.tileHeight=s(t,"tileHeight",0),this.baseTileWidth=s(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=s(t,"baseTileHeight",this.tileHeight),this.orientation=s(t,"orientation",n.ORTHOGONAL),this.widthInPixels=s(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=s(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=s(t,"alpha",1),this.visible=s(t,"visible",!0),this.properties=s(t,"properties",[]),this.indexes=s(t,"indexes",[]),this.collideIndexes=s(t,"collideIndexes",[]),this.callbacks=s(t,"callbacks",[]),this.bodies=s(t,"bodies",[]),this.data=s(t,"data",[]),this.tilemapLayer=s(t,"tilemapLayer",null),this.hexSideLength=s(t,"hexSideLength",0)}});t.exports=o},function(t,e,i){var r=i(0),n=i(29),s=i(2),o=new r({initialize:function(t){void 0===t&&(t={}),this.name=s(t,"name","map"),this.width=s(t,"width",0),this.height=s(t,"height",0),this.infinite=s(t,"infinite",!1),this.tileWidth=s(t,"tileWidth",0),this.tileHeight=s(t,"tileHeight",0),this.widthInPixels=s(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=s(t,"heightInPixels",this.height*this.tileHeight),this.format=s(t,"format",null),this.orientation=s(t,"orientation",n.ORTHOGONAL),this.renderOrder=s(t,"renderOrder","right-down"),this.version=s(t,"version","1"),this.properties=s(t,"properties",{}),this.layers=s(t,"layers",[]),this.images=s(t,"images",[]),this.objects=s(t,"objects",{}),this.collision=s(t,"collision",{}),this.tilesets=s(t,"tilesets",[]),this.imageCollections=s(t,"imageCollections",[]),this.tiles=s(t,"tiles",[]),this.hexSideLength=s(t,"hexSideLength",0)}});t.exports=o},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n,s,o,a){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o={}),void 0===a&&(a={}),this.name=t,this.firstgid=e,this.tileWidth=i,this.tileHeight=r,this.tileMargin=n,this.tileSpacing=s,this.tileProperties=o,this.tileData=a,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var e=this.getTileData(t);return e&&e.objectgroup?e.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,e){return void 0!==t&&(this.tileWidth=t),void 0!==e&&(this.tileHeight=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,e){return void 0!==t&&(this.tileMargin=t),void 0!==e&&(this.tileSpacing=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,e){var i=(e-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i%1==0&&r%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),r=Math.floor(r),this.rows=i,this.columns=r,this.total=i*r,this.texCoordinates.length=0;for(var n=this.tileMargin,s=this.tileMargin,o=0;o<this.rows;o++){for(var a=0;a<this.columns;a++)this.texCoordinates.push({x:n,y:s}),n+=this.tileWidth+this.tileSpacing;n=this.tileMargin,s+=this.tileHeight+this.tileSpacing}return this}});t.exports=r},function(t,e){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),Math.abs(t-e)<i}},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(1068),a=new r({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,o],initialize:function(t,e,i,r,n){s.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,n),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=a},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e,i){var r=i(77);t.exports=function(t,e){var i=r(t);for(var n in e)i.hasOwnProperty(n)||(i[n]=e[n]);return i}},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(83),o=i(165),a=i(84),h=i(271),l=i(32);r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(t){var e=t;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var i=e.bodyA?s.add(e.bodyA.position,e.pointA):e.pointA,r=e.bodyB?s.add(e.bodyB.position,e.pointB):e.pointB,n=s.magnitude(s.sub(i,r));e.length=void 0!==e.length?e.length:n,e.id=e.id||l.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var o={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===e.length&&e.stiffness>.1?(o.type="pin",o.anchors=!1):e.stiffness<.9&&(o.type="spring"),e.render=l.extend(o,e.render),e},r.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var i=t[e],r=i.constraintImpulse;i.isStatic||0===r.x&&0===r.y&&0===r.angle||(i.position.x+=r.x,i.position.y+=r.y,i.angle+=r.angle)}},r.solveAll=function(t,e){for(var i=0;i<t.length;i+=1){var n=t[i],s=!n.bodyA||n.bodyA&&n.bodyA.isStatic,o=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(s||o)&&r.solve(t[i],e)}for(i=0;i<t.length;i+=1)s=!(n=t[i]).bodyA||n.bodyA&&n.bodyA.isStatic,o=!n.bodyB||n.bodyB&&n.bodyB.isStatic,s||o||r.solve(t[i],e)},r.solve=function(t,e){var i=t.bodyA,n=t.bodyB,o=t.pointA,a=t.pointB;if(i||n){i&&!i.isStatic&&(s.rotate(o,i.angle-t.angleA,o),t.angleA=i.angle),n&&!n.isStatic&&(s.rotate(a,n.angle-t.angleB,a),t.angleB=n.angle);var h=o,l=a;if(i&&(h=s.add(i.position,o)),n&&(l=s.add(n.position,a)),h&&l){var u=s.sub(h,l),c=s.magnitude(u);c<r._minLength&&(c=r._minLength);var d,f,p,g,v,m=(c-t.length)/c,y=t.stiffness<1?t.stiffness*e:t.stiffness,x=s.mult(u,m*y),b=(i?i.inverseMass:0)+(n?n.inverseMass:0),w=b+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(t.damping){var T=s.create();p=s.div(u,c),v=s.sub(n&&s.sub(n.position,n.positionPrev)||T,i&&s.sub(i.position,i.positionPrev)||T),g=s.dot(p,v)}i&&!i.isStatic&&(f=i.inverseMass/b,i.constraintImpulse.x-=x.x*f,i.constraintImpulse.y-=x.y*f,i.position.x-=x.x*f,i.position.y-=x.y*f,t.damping&&(i.positionPrev.x-=t.damping*p.x*g*f,i.positionPrev.y-=t.damping*p.y*g*f),d=s.cross(o,x)/w*r._torqueDampen*i.inverseInertia*(1-t.angularStiffness),i.constraintImpulse.angle-=d,i.angle-=d),n&&!n.isStatic&&(f=n.inverseMass/b,n.constraintImpulse.x+=x.x*f,n.constraintImpulse.y+=x.y*f,n.position.x+=x.x*f,n.position.y+=x.y*f,t.damping&&(n.positionPrev.x+=t.damping*p.x*g*f,n.positionPrev.y+=t.damping*p.y*g*f),d=s.cross(a,x)/w*r._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle+=d,n.angle+=d)}}},r.postSolveAll=function(t){for(var e=0;e<t.length;e++){var i=t[e],l=i.constraintImpulse;if(!(i.isStatic||0===l.x&&0===l.y&&0===l.angle)){o.set(i,!1);for(var u=0;u<i.parts.length;u++){var c=i.parts[u];n.translate(c.vertices,l),u>0&&(c.position.x+=l.x,c.position.y+=l.y),0!==l.angle&&(n.rotate(c.vertices,l.angle,i.position),h.rotate(c.axes,l.angle),u>0&&s.rotateAbout(c.position,l.angle,i.position,c.position)),a.update(c.bounds,c.vertices,i.velocity)}l.angle*=r._warming,l.x*=r._warming,l.y*=r._warming}}},r.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},r.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}},function(t,e,i){var r=i(35),n=i(65),s=i(66),o=i(0),a=i(11),h=i(15),l=i(10),u=i(57),c=new o({Extends:h,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(t,e,i,n,s){void 0===n&&(n=1),void 0===s&&(s=n),h.call(this,t,"Zone"),this.setPosition(e,i),this.width=n,this.height=s,this.blendMode=r.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e,i){void 0===i&&(i=!0),this.width=t,this.height=e,this.updateDisplayOrigin();var r=this.input;return i&&r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},setCircleDropZone:function(t){return this.setDropZone(new n(0,0,t),s)},setRectangleDropZone:function(t,e){return this.setDropZone(new l(0,0,t,e),u)},setDropZone:function(t,e){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,e,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(t,e,i){i.addToRenderList(e)},renderWebGL:function(t,e,i){i.addToRenderList(e)}});t.exports=c},function(t,e){t.exports=function(t){return 2*(t.width+t.height)}},function(t,e){t.exports=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t}},function(t,e,i){t.exports={ADD_ANIMATION:i(724),ANIMATION_COMPLETE:i(725),ANIMATION_COMPLETE_KEY:i(726),ANIMATION_REPEAT:i(727),ANIMATION_RESTART:i(728),ANIMATION_START:i(729),ANIMATION_STOP:i(730),ANIMATION_UPDATE:i(731),PAUSE_ALL:i(732),REMOVE_ANIMATION:i(733),RESUME_ALL:i(734)}},function(t,e,i){var r=i(0),n=i(11),s=i(36),o=i(9),a=i(37),h=i(10),l=i(25),u=i(187),c=i(3),d=new r({Extends:o,Mixins:[n.Alpha,n.Visible],initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=t,this._y=e,this._width=i,this._height=r,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new c(i/2,r/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,i){void 0===i&&(i=new c);var r=.5*this.width,n=.5*this.height;return i.x=t-r,i.y=e-n,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,e=.5*this.width,i=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-i}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,i=e[0],r=e[1],n=e[2],s=e[3],o=i*s-r*n;if(!o)return t;var a=e[4],h=e[5],l=this.scrollX,u=this.scrollY,c=this.width,d=this.height,f=this.y,p=f+d,g=this.x,v=g+c,m=this.culledObjects,y=t.length;o=1/o,m.length=0;for(var x=0;x<y;++x){var b=t[x];if(b.hasOwnProperty("width")&&!b.parentContainer){var w=b.width,T=b.height,S=b.x-l*b.scrollFactorX-w*b.originX,E=b.y-u*b.scrollFactorY-T*b.originY;(S+w)*i+(E+T)*n+a>g&&S*i+E*n+a<v&&(S+w)*r+(E+T)*s+h>f&&S*r+E*s+h<p&&m.push(b)}else m.push(b)}return m},getWorldPoint:function(t,e,i){void 0===i&&(i=new c);var r=this.matrix.matrix,n=r[0],s=r[1],o=r[2],a=r[3],h=r[4],l=r[5],u=n*a-s*o;if(!u)return i.x=t,i.y=e,i;var d=a*(u=1/u),f=-s*u,p=-o*u,g=n*u,v=(o*l-a*h)*u,m=(s*h-n*l)*u,y=Math.cos(this.rotation),x=Math.sin(this.rotation),b=this.zoomX,w=this.zoomY,T=this.scrollX,S=this.scrollY,E=t+(T*y-S*x)*b,C=e+(T*x+S*y)*w;return i.x=E*d+C*p+v,i.y=E*f+C*g+m,i},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=e}return this},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,r=.5*e,n=this.zoomX,s=this.zoomY,o=this.matrix,a=t*this.originX,h=e*this.originY,l=this.scrollX,u=this.scrollY;this.useBounds&&(l=this.clampX(l),u=this.clampY(u)),this.roundPixels&&(a=Math.round(a),h=Math.round(h)),this.scrollX=l,this.scrollY=u;var c=l+i,d=u+r;this.midPoint.set(c,d);var f=t/n,p=e/s;this.worldView.setTo(c-f/2,d-p/2,f,p),o.applyITRS(this.x+a,this.y+h,this.rotation,n,s),o.translate(-a,-h)},clampX:function(t){var e=this._bounds,i=this.displayWidth,r=e.x+(i-this.width)/2,n=Math.max(r,r+e.width-i);return t<r?t=r:t>n&&(t=n),t},clampY:function(t){var e=this._bounds,i=this.displayHeight,r=e.y+(i-this.height)/2,n=Math.max(r,r+e.height-i);return t<r?t=r:t>n&&(t=n),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=s(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=u(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,i,r,n){return void 0===n&&(n=!1),this._bounds.setTo(t,e,i,r),this.dirty=!0,this.useBounds=!0,n?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new h);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var e=t.sys;return this.sceneManager=e.game.scene,this.scaleManager=e.scale,this.cameraManager=e.cameras,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},setZoom:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),0===t&&(t=.001),0===e&&(e=.001),this.zoomX=t,this.zoomY=e,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager;t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=d},function(t,e,i){var r=i(334),n=i(335),s=i(336),o=i(337),a=i(338),h=i(339),l=i(340),u=i(341),c=i(342),d=i(343),f=i(344),p=i(345);t.exports={Power0:l,Power1:u.Out,Power2:o.Out,Power3:c.Out,Power4:d.Out,Linear:l,Quad:u.Out,Cubic:o.Out,Quart:c.Out,Quint:d.Out,Sine:f.Out,Expo:h.Out,Circ:s.Out,Elastic:a.Out,Back:r.Out,Bounce:n.Out,Stepped:p,"Quad.easeIn":u.In,"Cubic.easeIn":o.In,"Quart.easeIn":c.In,"Quint.easeIn":d.In,"Sine.easeIn":f.In,"Expo.easeIn":h.In,"Circ.easeIn":s.In,"Elastic.easeIn":a.In,"Back.easeIn":r.In,"Bounce.easeIn":n.In,"Quad.easeOut":u.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":c.Out,"Quint.easeOut":d.Out,"Sine.easeOut":f.Out,"Expo.easeOut":h.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":a.Out,"Back.easeOut":r.Out,"Bounce.easeOut":n.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":c.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":r.InOut,"Bounce.easeInOut":n.InOut}},function(t,e){t.exports=function(t,e,i){return(e-t)*i+t}},function(t,e,i){var r,n=i(105),s={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=(r=navigator.userAgent,/Edge\/\d+/.test(r)?s.edge=!0:/Chrome\/(\d+)/.test(r)&&!n.windowsPhone?(s.chrome=!0,s.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(r)?(s.firefox=!0,s.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(r)&&n.iOS?s.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(r)?(s.ie=!0,s.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(r)?s.opera=!0:/Safari/.test(r)&&!n.windowsPhone?s.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(s.ie=!0,s.trident=!0,s.tridentVersion=parseInt(RegExp.$1,10),s.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(s.silk=!0),s)},function(t,e){t.exports=function(t,e){return Math.random()*(e-t)+t}},function(t,e){t.exports=function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1)}},function(t,e){t.exports=function(t,e,i,r){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),r?(i+t)/e:i+t)}},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=r||0)},clone:function(){return new r(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,i,r){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=r||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,i=this.z,r=this.w;return Math.sqrt(t*t+e*e+i*i+r*r)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,r=this.w;return t*t+e*e+i*i+r*r},normalize:function(){var t=this.x,e=this.y,i=this.z,r=this.w,n=t*t+e*e+i*i+r*r;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n,this.z=i*n,this.w=r*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,r=this.y,n=this.z,s=this.w;return this.x=i+e*(t.x-i),this.y=r+e*(t.y-r),this.z=n+e*(t.z-n),this.w=s+e*(t.w-s),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,r=t.z-this.z||0,n=t.w-this.w||0;return Math.sqrt(e*e+i*i+r*r+n*n)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,r=t.z-this.z||0,n=t.w-this.w||0;return e*e+i*i+r*r+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,s=t.val;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*n,this},transformQuat:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*r-o*i,l=a*i+o*e-n*r,u=a*r+n*i-s*e,c=-n*e-s*i-o*r;return this.x=h*a+c*-n+l*-o-u*-s,this.y=l*a+c*-s+u*-n-h*-o,this.z=u*a+c*-o+h*-s-l*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});r.prototype.sub=r.prototype.subtract,r.prototype.mul=r.prototype.multiply,r.prototype.div=r.prototype.divide,r.prototype.dist=r.prototype.distance,r.prototype.distSq=r.prototype.distanceSq,r.prototype.len=r.prototype.length,r.prototype.lenSq=r.prototype.lengthSq,t.exports=r},function(t,e,i){var r=i(0),n=i(91),s=new r({initialize:function(t,e,i,r,n,s,o){void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=!0),void 0===o&&(o=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=r,this.minFilter=n,this.autoClear=s,this.autoResize=!1,this.resize(e,i),o&&this.setAutoResize(!0)},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(n.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(n.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,e){var i=t*this.scale,r=e*this.scale;if(i!==this.width||r!==this.height){var n=this.renderer;n.deleteFramebuffer(this.framebuffer),n.deleteTexture(this.texture),t*=this.scale,e*=this.scale,(t=Math.round(t))<=0&&(t=1),(e=Math.round(e))<=0&&(e=1),this.texture=n.createTextureFromSource(null,t,e,this.minFilter),this.framebuffer=n.createFramebuffer(t,e,this.texture,!1),this.width=t,this.height=e}return this},bind:function(t,e,i){if(void 0===t&&(t=!1),t&&this.renderer.flush(),e&&i&&this.resize(e,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,e=t.gl;t.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){void 0===t&&(t=!1);var e=this.renderer;return t&&e.flush(),e.popFramebuffer()},destroy:function(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(n.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=s},function(t,e){t.exports=function(t,e){var i;if(e)"string"==typeof e?i=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(i=e);else if(t.parentElement||null===e)return t;return i||(i=document.body),i.appendChild(t),t}},function(t,e){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,e){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,e,i){var r=i(0),n=i(77),s=i(9),o=i(70),a=i(22),h=i(1),l=i(207),u=i(428),c=new r({Extends:s,initialize:function(t){s.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(a.BLUR,this.onGameBlur,this),t.events.on(a.FOCUS,this.onGameFocus,this),t.events.on(a.PRE_STEP,this.update,this),t.events.once(a.DESTROY,this.destroy,this)},add:h,addAudioSprite:function(t,e){void 0===e&&(e={});var i=this.add(t,e);for(var r in i.spritemap=this.jsonCache.get(t).spritemap,i.spritemap)if(i.spritemap.hasOwnProperty(r)){var s=n(e),o=i.spritemap[r];s.loop=!!o.hasOwnProperty("loop")&&o.loop,i.addMarker({name:r,start:o.start,duration:o.end-o.start,config:s})}return i},get:function(t){return u(this.sounds,"key",t)},getAll:function(t){return l(this.sounds,"key",t)},play:function(t,e){var i=this.add(t);return i.once(o.COMPLETE,i.destroy,i),e?e.name?(i.addMarker(e),i.play(e.name)):i.play(e):i.play()},playAudioSprite:function(t,e,i){var r=this.addAudioSprite(t);return r.once(o.COMPLETE,r.destroy,r),r.play(e,i)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeAll:function(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function(t){for(var e=0,i=this.sounds.length-1;i>=0;i--){var r=this.sounds[i];r.key===t&&(r.destroy(),this.sounds.splice(i,1),e++)}return e},pauseAll:function(){this.forEachActiveSound((function(t){t.pause()})),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(t){t.resume()})),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(t){t.stop()})),this.emit(o.STOP_ALL,this)},stopByKey:function(t){var e=0;return this.getAll(t).forEach((function(t){t.stop()&&e++})),e},unlock:h,onBlur:h,onFocus:h,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var i=this.sounds.length-1;i>=0;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach((function(i){i.update(t,e)}))},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,e){var i=this;this.sounds.forEach((function(r,n){r&&!r.pendingRemove&&t.call(e||i,r,n,i.sounds)}))},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(o.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(o.GLOBAL_DETUNE,this,t)}}});t.exports=c},function(t,e,i){var r=i(0),n=i(9),s=i(70),o=i(17),a=i(1),h=new r({Extends:n,initialize:function(t,e,i){n.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,i),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=o(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=o(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if(void 0===t&&(t=""),"object"==typeof t&&(e=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=o(this.currentConfig,e),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,e=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*e},destroy:function(){this.pendingRemove||(this.emit(s.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=h},function(t,e,i){var r=i(209),n=i(435);t.exports=function(t,e){if(void 0===e&&(e=90),!r(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=n(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=n(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t.reverse()}return t}},function(t,e,i){var r=i(0),n=i(18),s=i(11),o=i(15),a=i(1043),h=i(1044),l=i(212),u=i(10),c=i(1045),d=new r({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Texture,s.Tint,s.Transform,s.Visible,c],initialize:function(t,e,i,r,n,s,h){void 0===n&&(n=""),void 0===h&&(h=0),o.call(this,t,"BitmapText"),this.font=r;var l=this.scene.sys.cache.bitmapFont.get(r);l||console.warn("Invalid BitmapText key: "+r),this.fontData=l.data,this._text="",this._fontSize=s||this.fontData.size,this._letterSpacing=0,this._align=h,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=l.fromAtlas,this.setTexture(l.texture,l.frame),this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.setText(n)},setLeftAlign:function(){return this._align=d.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=d.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=d.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=.5),this.dropShadowX=t,this.dropShadowY=e,this.dropShadowColor=i,this.dropShadowAlpha=r,this},setCharacterTint:function(t,e,i,r,s,o,a){void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=!1),void 0===r&&(r=-1),void 0===s&&(s=r,o=r,a=r);var h=this.text.length;-1===e&&(e=h),t<0&&(t=h+t),t=n(t,0,h-1);for(var l=n(t+e,t,h),u=this.charColors,c=t;c<l;c++){var d=u[c];if(-1===r)u[c]=null;else{var f=i?1:0;d?(d.tintEffect=f,d.tintTL=r,d.tintTR=s,d.tintBL=o,d.tintBR=a):u[c]={tintEffect:f,tintTL:r,tintTR:s,tintBL:o,tintBR:a}}}return this},setWordTint:function(t,e,i,r,n,s,o){void 0===e&&(e=1);for(var a=this.getTextBounds().words,h="number"==typeof t,l=0,u=0;u<a.length;u++){var c=a[u];if((h&&u===t||!h&&c.word===t)&&(this.setCharacterTint(c.i,c.word.length,i,r,n,s,o),++l===e))return this}return this},getTextBounds:function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(a(this,t,!0,e),this._dirty=!1),e},getCharacterAt:function(t,e,i){for(var r=this.getLocalPoint(t,e,null,i),n=this.getTextBounds().characters,s=new u,o=0;o<n.length;o++){var a=n[o];if(s.setTo(a.x,a.t,a.r-a.x,a.b),s.contains(r.x,r.y))return a}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,e,i){if(void 0===e&&(e=this._fontSize),void 0===i&&(i=this._align),t!==this.font){var r=this.scene.sys.cache.bitmapFont.get(t);r&&(this.font=t,this.fontData=r.data,this._fontSize=e,this._align=i,this.fromAtlas=!0===r.fromAtlas,this.setTexture(r.texture,r.frame),a(this,!1,!0,this._bounds))}return this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=s.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});d.ALIGN_LEFT=0,d.ALIGN_CENTER=1,d.ALIGN_RIGHT=2,d.ParseFromAtlas=h,d.ParseXMLBitmapFont=l,t.exports=d},function(t,e,i){var r=new(i(0))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var i=0;i<this.entries.length;i++){var r=this.entries[i];if(r[t]===e)return r}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return e>-1&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var i,r=this.entries.slice(),n=r.length;if(e)for(i=0;i<n&&!1!==t.call(e,r[i],i);i++);else for(i=0;i<n&&!1!==t(r[i],i);i++);return this},iterate:function(t,e){var i,r=this.entries.length;if(e)for(i=0;i<r&&!1!==t.call(e,this.entries[i],i);i++);else for(i=0;i<r&&!1!==t(this.entries[i],i);i++);return this},iterateLocal:function(t){var e,i=[];for(e=1;e<arguments.length;e++)i.push(arguments[e]);var r=this.entries.length;for(e=0;e<r;e++){var n=this.entries[e];n[t].apply(n,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var e=new r;return t.entries.forEach((function(t){e.set(t)})),this.entries.forEach((function(t){e.set(t)})),e},intersect:function(t){var e=new r;return this.entries.forEach((function(i){t.contains(i)&&e.set(i)})),e},difference:function(t){var e=new r;return this.entries.forEach((function(i){t.contains(i)||e.set(i)})),e},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=r},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(189),a=i(92),h=i(1182),l=new r({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible,h],initialize:function(t,e,i,r,n,h,l){void 0===r&&(r=16777215),void 0===n&&(n=128),void 0===h&&(h=1),void 0===l&&(l=.1),s.call(this,t,"PointLight"),this.initPipeline(a.POINTLIGHT_PIPELINE),this.setPosition(e,i),this.color=o(r),this.intensity=h,this.attenuation=l,this.width=2*n,this.height=2*n,this._radius=n},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=l},function(t,e){t.exports=function(t,e){var i=e.width/2,r=e.height/2,n=Math.abs(t.x-e.x-i),s=Math.abs(t.y-e.y-r),o=i+t.radius,a=r+t.radius;if(n>o||s>a)return!1;if(n<=i||s<=r)return!0;var h=n-i,l=s-r;return h*h+l*l<=t.radius*t.radius}},function(t,e){t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},function(t,e,i){var r=i(6),n={},s={register:function(t,e,i,r,s){n[t]={plugin:e,mapping:i,settingsKey:r,configKey:s}},getPlugin:function(t){return n[t]},install:function(t){var e=t.scene.sys,i=e.settings.input,s=e.game.config;for(var o in n){var a=n[o].plugin,h=n[o].mapping,l=n[o].settingsKey,u=n[o].configKey;r(i,l,s[u])&&(t[h]=new a(t))}},remove:function(t){n.hasOwnProperty(t)&&delete n[t]}};t.exports=s},function(t,e,i){t.exports={ANY_KEY_DOWN:i(1323),ANY_KEY_UP:i(1324),COMBO_MATCH:i(1325),DOWN:i(1326),KEY_DOWN:i(1327),KEY_UP:i(1328),UP:i(1329)}},function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},function(t,e){t.exports=function(t,e,i,r,n,s){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=""),void 0===r&&(r=""),void 0===n&&(n=0),void 0===s&&(s=!1),{responseType:t,async:e,user:i,password:r,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:s}}},function(t,e,i){var r=i(0),n=i(243),s=i(73),o=new r({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(t,e,i,r,n){s.call(this,t,e,i,r,n),this.body=null}});t.exports=o},function(t,e,i){var r=i(119);t.exports=function(t,e,i,n){if(void 0===i&&(i=!1),r(t,e,n)){var s=n.data[e][t]||null;return s?-1===s.index?i?s:null:s:null}return null}},function(t,e){t.exports=function(t,e,i,r){var n,s,o,a=t.data,h=t.width,l=t.height,u=t.tilemapLayer,c=Math.max(0,e.left),d=Math.min(h,e.right),f=Math.max(0,e.top),p=Math.min(l,e.bottom);if(0===i)for(s=f;s<p;s++)for(n=c;a[s]&&n<d;n++)(o=a[s][n])&&-1!==o.index&&o.visible&&0!==o.alpha&&r.push(o);else if(1===i)for(s=f;s<p;s++)for(n=d;a[s]&&n>=c;n--)(o=a[s][n])&&-1!==o.index&&o.visible&&0!==o.alpha&&r.push(o);else if(2===i)for(s=p;s>=f;s--)for(n=c;a[s]&&n<d;n++)(o=a[s][n])&&-1!==o.index&&o.visible&&0!==o.alpha&&r.push(o);else if(3===i)for(s=p;s>=f;s--)for(n=d;a[s]&&n>=c;n--)(o=a[s][n])&&-1!==o.index&&o.visible&&0!==o.alpha&&r.push(o);return u.tilesDrawn=r.length,u.tilesTotal=h*l,r}},function(t,e){t.exports=function(t,e,i){var r=i.collideIndexes.indexOf(t);e&&-1===r?i.collideIndexes.push(t):e||-1===r||i.collideIndexes.splice(r,1)}},function(t,e,i){var r=i(2);t.exports=function(t,e,i){if(!e)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=e.x+r(e,"startx",0)*t.tilewidth+r(e,"offsetx",0),s=e.y+r(e,"starty",0)*t.tileheight+r(e,"offsety",0);return{i:0,layers:e.layers,name:i.name+e.name+"/",opacity:i.opacity*e.opacity,visible:i.visible&&e.visible,x:i.x+n,y:i.y+s}}},function(t,e){t.exports=function(t,e,i){return t.hasOwnProperty(e)?"function"==typeof t[e]?function(i,r,n,s,o,a){return t[e](i,r,n,s,o,a)}:function(){return t[e]}:"function"==typeof i?i:function(){return i}}},function(t,e,i){var r=i(265),n=i(13),s=i(99),o=i(80),a=i(162),h=i(583),l=i(263),u=i(6),c=i(264),d=i(266),f=i(268);t.exports=function(t,e,i){void 0===i&&(i=r);for(var p=i.targets?i.targets:l(e),g=h(e),v=a(e,"delay",i.delay),m=a(e,"duration",i.duration),y=u(e,"easeParams",i.easeParams),x=o(u(e,"ease",i.ease),y),b=a(e,"hold",i.hold),w=a(e,"repeat",i.repeat),T=a(e,"repeatDelay",i.repeatDelay),S=s(e,"yoyo",i.yoyo),E=s(e,"flipX",i.flipX),C=s(e,"flipY",i.flipY),_=[],A=0;A<g.length;A++)for(var M=g[A].key,P=g[A].value,k=0;k<p.length;k++){var O=c(M,P),R=f(p[k],k,M,O.getEnd,O.getStart,O.getActive,o(u(P,"ease",x),u(P,"easeParams",y)),a(P,"delay",v),a(P,"duration",m),s(P,"yoyo",S),a(P,"hold",b),a(P,"repeat",w),a(P,"repeatDelay",T),s(P,"flipX",E),s(P,"flipY",C));_.push(R)}var L=new d(t,_,p);L.offset=n(e,"offset",null),L.completeDelay=n(e,"completeDelay",0),L.loop=Math.round(n(e,"loop",0)),L.loopDelay=Math.round(n(e,"loopDelay",0)),L.paused=s(e,"paused",!1),L.useFrames=s(e,"useFrames",!1);for(var I=u(e,"callbackScope",L),F=[L,null],D=d.TYPES,B=0;B<D.length;B++){var N=D[B],z=u(e,N,!1);if(z){var U=u(e,N+"Scope",I),Y=u(e,N+"Params",[]);L.setCallback(N,z,F.concat(Y),U)}}return L}},function(t,e,i){var r=i(0),n=i(102),s=i(2),o=i(132),a=i(185),h=new r({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var e=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,e;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];null===this.nextAnim?this.nextAnim=r:this.nextAnimsQueue.push(r)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var e=this.animationManager,i="string"==typeof t?t:s(t,"key",null),r=this.exists(i)?this.get(i):e.get(i);if(r){this.currentAnim=r;var n=r.getTotalFrames(),o=s(t,"frameRate",r.frameRate),a=s(t,"duration",r.duration);r.calculateDuration(this,n,a,o),this.delay=s(t,"delay",r.delay),this.repeat=s(t,"repeat",r.repeat),this.repeatDelay=s(t,"repeatDelay",r.repeatDelay),this.yoyo=s(t,"yoyo",r.yoyo),this.showOnStart=s(t,"showOnStart",r.showOnStart),this.hideOnComplete=s(t,"hideOnComplete",r.hideOnComplete),this.skipMissedFrames=s(t,"skipMissedFrames",r.skipMissedFrames),this.timeScale=s(t,"timeScale",this.timeScale);var h=s(t,"startFrame",0);h>r.getTotalFrames()&&(h=0);var l=r.frames[h];0!==h||this.forward||(l=r.getLastFrame()),this.currentFrame=l}else console.warn("Missing animation: "+i);return this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,e){if(this.isPlaying){var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=e}else this.delayCounter=e,this.play(t,!0);return this.parent},playAfterRepeat:function(t,e){if(void 0===e&&(e=1),this.isPlaying){var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),-1!==this.repeatCounter&&e>this.repeatCounter&&(e=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=e}else this.play(t);return this.parent},play:function(t,e){void 0===e&&(e=!1);var i=this.currentAnim,r=this.parent,n="string"==typeof t?t:t.key;if(e&&this.isPlaying&&i.key===n)return r;if(i&&this.isPlaying){var s=this.animationManager.getMix(i.key,t);if(s>0)return this.playAfterDelay(t,s)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,e){void 0===e&&(e=!1);var i="string"==typeof t?t:t.key;return e&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var e=this.currentAnim,i=this.parent;return e?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,e.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),i):i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,e){var i=this.currentAnim,r=this.currentFrame,n=this.parent,s=r.textureFrame;n.emit(t,i,r,n,s),e&&n.emit(e+i.key,i,r,n,s)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;if(!t)return 0;var e=t.progress;return this.inReverse&&(e*=-1),e},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.currentAnim,r=this.parent;return i?(e&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):r},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,e){var i=this.currentAnim;if(this.isPlaying&&i&&!i.paused){if(this.accumulator+=e*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var r=0;do{this.forward?i.nextFrame(this):i.previousFrame(this),r++}while(this.isPlaying&&this.accumulator>this.nextTick&&r<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),t.setAlpha&&(e.alpha=t.alpha),e.setSizeToFrame(),e._originComponent&&(t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),e},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new a(this,e,t),this.anims||(this.anims=new n),this.anims.set(e,i))),i},generateFrameNames:function(t,e){return this.animationManager.generateFrameNames(t,e)},generateFrameNumbers:function(t,e){return this.animationManager.generateFrameNumbers(t,e)},remove:function(t){var e=this.get(t);return e&&(this.currentAnim===e&&this.stop(),this.anims.delete(t)),e},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=h},function(t,e,i){var r={};t.exports=r;var n=i(166);r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var s=t[n],o=s.speed*s.speed+s.angularSpeed*s.angularSpeed;if(0===s.force.x&&0===s.force.y){var a=Math.min(s.motion,o),h=Math.max(s.motion,o);s.motion=r._minBias*a+(1-r._minBias)*h,s.sleepThreshold>0&&s.motion<r._motionSleepThreshold*i?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold&&r.set(s,!0)):s.sleepCounter>0&&(s.sleepCounter-=1)}else r.set(s,!1)}},r.afterCollisions=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var s=t[n];if(s.isActive){var o=s.collision,a=o.bodyA.parent,h=o.bodyB.parent;if(!(a.isSleeping&&h.isSleeping||a.isStatic||h.isStatic)&&(a.isSleeping||h.isSleeping)){var l=a.isSleeping&&!a.isStatic?a:h,u=l===a?h:a;!l.isStatic&&u.motion>r._motionWakeThreshold*i&&r.set(l,!1)}}}},r.set=function(t,e){var i=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,i||n.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,i&&n.trigger(t,"sleepEnd"))}},function(t,e,i){var r={};t.exports=r;var n=i(32);r.on=function(t,e,i){for(var r,n=e.split(" "),s=0;s<n.length;s++)r=n[s],t.events=t.events||{},t.events[r]=t.events[r]||[],t.events[r].push(i);return i},r.off=function(t,e,i){if(e){"function"==typeof e&&(i=e,e=n.keys(t.events).join(" "));for(var r=e.split(" "),s=0;s<r.length;s++){var o=t.events[r[s]],a=[];if(i&&o)for(var h=0;h<o.length;h++)o[h]!==i&&a.push(o[h]);t.events[r[s]]=a}}else t.events={}},r.trigger=function(t,e,i){var r,s,o,a,h=t.events;if(h&&n.keys(h).length>0){i||(i={}),r=e.split(" ");for(var l=0;l<r.length;l++)if(o=h[s=r[l]]){(a=n.clone(i,!1)).name=s,a.source=t;for(var u=0;u<o.length;u++)o[u].apply(t,[a])}}}},function(t,e,i){var r=i(175),n=i(92),s=i(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=n.MULTI_PIPELINE);var e=this.scene.sys.renderer;if(!e)return!1;var i=e.pipelines;if(this.postPipelines=[],this.pipelineData={},i){var r=i.get(t);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(t,e,i){var n=this.scene.sys.renderer;if(!n)return this;var s=n.pipelines;if(s){var o=s.get(t);o&&(this.pipeline=o),e&&(this.pipelineData=i?r(e):e)}return this},setPostPipeline:function(t,e,i){var n=this.scene.sys.renderer;if(!n)return this;var s=n.pipelines;if(s){Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=s.getPostPipeline(t[o],this);a&&this.postPipelines.push(a)}e&&(this.pipelineData=i?r(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,e){var i=this.pipelineData;return void 0===e?delete i[t]:i[t]=e,this},getPostPipeline:function(t){for(var e=this.postPipelines,i=[],r=0;r<e.length;r++){var n=e[r];("string"==typeof t&&n.name===t||n instanceof t)&&i.push(n)}return 1===i.length?i[0]:i},resetPipeline:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),e&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,i=0;i<e.length;i++)e[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var e=this.postPipelines,i=e.length-1;i>=0;i--){var r=e[i];("string"==typeof t&&r.name===t||"string"!=typeof t&&r instanceof t)&&(r.destroy(),s(e,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=o},function(t,e){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){return void 0===i&&(i=new r),i.x=t.x+t.radius*Math.cos(e),i.y=t.y+t.radius*Math.sin(e),i}},function(t,e,i){var r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=2*Math.PI*Math.random(),n=Math.random()+Math.random(),s=n>1?2-n:n,o=s*Math.cos(i),a=s*Math.sin(i);return e.x=t.x+o*t.radius,e.y=t.y+a*t.radius,e}},function(t,e,i){var r=i(130),n=i(4);t.exports=function(t,e,i){if(void 0===i&&(i=new n),e<=0||e>=1)return i.x=t.x,i.y=t.y,i;var s=r(t)*e;return e>.5?(s-=t.width+t.height)<=t.width?(i.x=t.right-s,i.y=t.bottom):(i.x=t.x,i.y=t.bottom-(s-t.width)):s<=t.width?(i.x=t.x+s,i.y=t.y):(i.x=t.right,i.y=t.y+(s-t.width)),i}},function(t,e,i){var r=i(67),n=i(4);t.exports=function(t,e,i,s){void 0===s&&(s=[]),!e&&i>0&&(e=r(t)/i);for(var o=t.x1,a=t.y1,h=t.x2,l=t.y2,u=0;u<e;u++){var c=u/e,d=o+(h-o)*c,f=a+(l-a)*c;s.push(new n(d,f))}return s}},function(t,e,i){var r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=Math.random();return e.x=t.x1+i*(t.x2-t.x1),e.y=t.y1+i*(t.y2-t.y1),e}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},function(t,e){var i=function(t){var e,r,n;if("object"!=typeof t||null===t)return t;for(n in e=Array.isArray(t)?[]:{},t)r=t[n],e[n]=i(r);return e};t.exports=i},function(t,e){t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s,o,a,h){void 0===h&&(h=new r);var l=Math.sin(s),u=Math.cos(s),c=u*o,d=l*o,f=-l*a,p=u*a,g=1/(c*p+f*-d);return h.x=p*g*t+-f*g*e+(n*f-i*p)*g,h.y=c*g*e+-d*g*t+(-n*c+i*d)*g,h}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,r=0;r<e;r++)i=t.shift(),t.push(i);return i}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,r=0;r<e;r++)i=t.pop(),t.unshift(i);return i}},function(t,e,i){var r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return e.x=t.x+n*Math.cos(i)*t.width/2,e.y=t.y+n*Math.sin(i)*t.height/2,e}},function(t,e,i){var r=i(4);t.exports=function(t,e){void 0===e&&(e=new r);var i=t.x2-t.x1,n=t.y2-t.y1,s=t.x3-t.x1,o=t.y3-t.y1,a=Math.random(),h=Math.random();return a+h>=1&&(a=1-a,h=1-h),e.x=t.x1+(i*a+s*h),e.y=t.y1+(n*a+o*h),e}},function(t,e){t.exports=function(t,e,i,r,n){var s=r+Math.atan2(t.y-i,t.x-e);return t.x=e+n*Math.cos(s),t.y=i+n*Math.sin(s),t}},function(t,e){t.exports=function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(6*t-15)+10)}},function(t,e){t.exports=function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)}},function(t,e,i){var r=i(18),n=i(0),s=i(132),o=i(318),a=i(319),h=i(6),l=i(320),u=new n({initialize:function(t,e,i){this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,h(i,"frames",[]),h(i,"defaultTextureKey",null),h(i,"sortFrames",!0)),this.frameRate=h(i,"frameRate",null),this.duration=h(i,"duration",null),this.msPerFrame,this.skipMissedFrames=h(i,"skipMissedFrames",!0),this.delay=h(i,"delay",0),this.repeat=h(i,"repeat",0),this.repeatDelay=h(i,"repeatDelay",0),this.yoyo=h(i,"yoyo",!1),this.showOnStart=h(i,"showOnStart",!1),this.hideOnComplete=h(i,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,e,i,r){null===i&&null===r?(t.frameRate=24,t.duration=24/e*1e3):i&&null===r?(t.duration=i,t.frameRate=e/(i/1e3)):(t.frameRate=r,t.duration=e/r*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var i=this.getFrames(this.manager.textureManager,e);if(i.length>0){if(0===t)this.frames=i.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(i);else{var r=this.frames.slice(0,t),n=this.frames.slice(t);this.frames=r.concat(i,n)}this.updateFrameSequence()}return this},checkFrame:function(t){return t>=0&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,i,r){void 0===r&&(r=!0);var n,s,o,u,c=[],d=1;if("string"==typeof e){u=e;var f=t.get(u).getFrameNames();r&&l(f),e=[],f.forEach((function(t){e.push({key:u,frame:t})}))}if(!Array.isArray(e)||0===e.length)return c;for(o=0;o<e.length;o++){var p=e[o],g=h(p,"key",i);if(g){var v=h(p,"frame",0),m=t.getFrame(g,v);(s=new a(g,v,d,m)).duration=h(p,"duration",0),s.isFirst=!n,n&&(n.nextFrame=s,s.prevFrame=n),c.push(s),n=s,d++}}if(c.length>0){s.isLast=!0,s.nextFrame=c[0],c[0].prevFrame=s;var y=1/(c.length-1);for(o=0;o<c.length;o++)c[o].progress=o*y}return c},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function(t){return t=r(t,0,1),o(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){if(e||(e=!1),t.inReverse===!e&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=e),void this.repeatAnimation(t);if(t.inReverse===e||0!==t.repeatCounter){t.forward=e;var i=e?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,i)}else t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.setCurrentFrame(e),this.getNextTick(t)},removeFrame:function(t){var e=this.frames.indexOf(t);return-1!==e&&this.removeFrameAt(e),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(e){t.frames.push(e.toJSON())})),t},updateFrameSequence:function(){for(var t,e=this.frames.length,i=1/(e-1),r=0;r<e;r++)(t=this.frames[r]).index=r+1,t.isFirst=!1,t.isLast=!1,t.progress=r*i,0===r?(t.isFirst=!0,1===e?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[e-1],t.nextFrame=this.frames[r+1])):r===e-1&&e>1?(t.isLast=!0,t.prevFrame=this.frames[e-2],t.nextFrame=this.frames[0]):e>1&&(t.prevFrame=this.frames[r-1],t.nextFrame=this.frames[r+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=u},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=" "),void 0===r&&(r=3);var n=0;if(e+1>=(t=t.toString()).length)switch(r){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var s=Math.ceil((n=e-t.length)/2);t=new Array(n-s+1).join(i)+t+new Array(s+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t}},function(t,e,i){var r=i(327),n=i(189),s=i(331),o=i(332);t.exports=function(t){switch(typeof t){case"string":return"rgb"===t.substr(0,3).toLowerCase()?o(t):r(t);case"number":return n(t);case"object":return s(t)}}},function(t,e,i){var r=i(103);function n(t,e,i,r){var n=(t+6*e)%6,s=Math.min(n,4-n,1);return Math.round(255*(r-r*i*Math.max(0,s)))}t.exports=function(t,e,i,s){void 0===e&&(e=1),void 0===i&&(i=1);var o=n(5,t,e,i),a=n(3,t,e,i),h=n(1,t,e,i);return s?s.setTo?s.setTo(o,a,h,s.alpha,!1):(s.r=o,s.g=a,s.b=h,s.color=r(o,a,h),s):{r:o,g:a,b:h,color:r(o,a,h)}}},function(t,e,i){var r=i(38),n=i(330);t.exports=function(t){var e=n(t);return new r(e.r,e.g,e.b,e.a)}},function(t,e){t.exports=function(t,e,i){return t.x=e-t.width/2,t.y=i-t.height/2,t}},function(t,e,i){var r=i(105),n=i(136),s=i(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"==typeof importScripts)return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch(t){o.localStorage=!1}o.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),o.fileSystem=!!window.requestFileSystem;var t,e,i,a=!1;return o.webGL=function(){if(window.WebGLRenderingContext)try{var t=s.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),i=s.create2D(this),r=i.getContext("2d").createImageData(1,1);return a=r.data instanceof Uint8ClampedArray,s.remove(t),s.remove(i),!!e}catch(t){return!1}return!1}(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(o.getUserMedia=!1),!r.iOS&&(n.ie||n.firefox||n.chrome)&&(o.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(o.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===i[0]||2712847316!==i[0]&&null)),o.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==o.littleEndian&&a,o}()},function(t,e){var i,r="";t.exports={disable:function(t){return""===r&&(r=i(t)),r&&(t[r]=!1),t},enable:function(t){return""===r&&(r=i(t)),r&&(t[r]=!0),t},getPrefix:i=function(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var r=e[i]+"mageSmoothingEnabled";if(r in t)return r}return null},isEnabled:function(t){return null!==r?t[r]:null}}},function(t,e,i){var r=i(14),n=i(17),s={Angle:i(812),Distance:i(821),Easing:i(826),Fuzzy:i(827),Interpolation:i(830),Pow2:i(835),Snap:i(837),RandomDataGenerator:i(839),Average:i(840),Bernstein:i(356),Between:i(195),CatmullRom:i(194),CeilTo:i(841),Clamp:i(18),DegToRad:i(36),Difference:i(842),Euler:i(843),Factorial:i(357),FloatBetween:i(137),FloorTo:i(844),FromPercent:i(98),GetSpeed:i(845),IsEven:i(846),IsEvenStrict:i(847),Linear:i(135),MaxAdd:i(848),Median:i(849),MinSub:i(850),Percent:i(851),RadToDeg:i(196),RandomXY:i(852),RandomXYZ:i(853),RandomXYZW:i(854),Rotate:i(362),RotateAround:i(308),RotateAroundDistance:i(182),RotateTo:i(855),RoundAwayFromZero:i(363),RoundTo:i(856),SinCosTableGenerator:i(857),SmootherStep:i(183),SmoothStep:i(184),ToXY:i(858),TransformXY:i(177),Within:i(859),Wrap:i(68),Vector2:i(3),Vector3:i(39),Vector4:i(140),Matrix3:i(364),Matrix4:i(69),Quaternion:i(365),RotateVec3:i(860)};s=n(!1,s,r),t.exports=s},function(t,e){t.exports=function(t,e,i,r,n){var s=.5*(r-e),o=.5*(n-i),a=t*t;return(2*i-2*r+s+o)*(t*a)+(-3*i+3*r-2*s-o)*a+s*t+i}},function(t,e){t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,i){var r=i(14);t.exports=function(t){return t*r.RAD_TO_DEG}},function(t,e,i){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,e,i){var r=new(i(0))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(t){return this._matrix=t,this._dirty=!0,this},reset:function(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=2*t/3+1,r=-.5*(i-1);return this.multiply([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=.213,s=.715,o=.072;return this.multiply([n+.787*i+r*-n,s+i*-s+r*-s,o+i*-o+.928*r,0,0,n+i*-n+.143*r,s+i*(1-s)+.14*r,o+i*-o+-.283*r,0,0,n+i*-n+-.787*r,s+i*-s+r*s,o+.928*i+r*o,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=t+1,r=-.5*(i-1);return this.multiply([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function(t,e){e||this.reset();for(var i=this._matrix,r=[],n=0;n<20;n++)r[n]=i[n];return i[0]=r[0]*t[0]+r[1]*t[5]+r[2]*t[10]+r[3]*t[15],i[1]=r[0]*t[1]+r[1]*t[6]+r[2]*t[11]+r[3]*t[16],i[2]=r[0]*t[2]+r[1]*t[7]+r[2]*t[12]+r[3]*t[17],i[3]=r[0]*t[3]+r[1]*t[8]+r[2]*t[13]+r[3]*t[18],i[4]=r[0]*t[4]+r[1]*t[9]+r[2]*t[14]+r[3]*t[19]+r[4],i[5]=r[5]*t[0]+r[6]*t[5]+r[7]*t[10]+r[8]*t[15],i[6]=r[5]*t[1]+r[6]*t[6]+r[7]*t[11]+r[8]*t[16],i[7]=r[5]*t[2]+r[6]*t[7]+r[7]*t[12]+r[8]*t[17],i[8]=r[5]*t[3]+r[6]*t[8]+r[7]*t[13]+r[8]*t[18],i[9]=r[5]*t[4]+r[6]*t[9]+r[7]*t[14]+r[8]*t[19]+r[9],i[10]=r[10]*t[0]+r[11]*t[5]+r[12]*t[10]+r[13]*t[15],i[11]=r[10]*t[1]+r[11]*t[6]+r[12]*t[11]+r[13]*t[16],i[12]=r[10]*t[2]+r[11]*t[7]+r[12]*t[12]+r[13]*t[17],i[13]=r[10]*t[3]+r[11]*t[8]+r[12]*t[13]+r[13]*t[18],i[14]=r[10]*t[4]+r[11]*t[9]+r[12]*t[14]+r[13]*t[19]+r[14],i[15]=r[15]*t[0]+r[16]*t[5]+r[17]*t[10]+r[18]*t[15],i[16]=r[15]*t[1]+r[16]*t[6]+r[17]*t[11]+r[18]*t[16],i[17]=r[15]*t[2]+r[16]*t[7]+r[17]*t[12]+r[18]*t[17],i[18]=r[15]*t[3]+r[16]*t[8]+r[17]*t[13]+r[18]*t[18],i[19]=r[15]*t[4]+r[16]*t[9]+r[17]*t[14]+r[18]*t[19]+r[19],this._dirty=!0,this}});t.exports=r},function(t,e,i){var r=i(10),n=i(14);t.exports=function(t,e){if(void 0===e&&(e=new r),0===t.length)return e;for(var i,s,o,a=Number.MAX_VALUE,h=Number.MAX_VALUE,l=n.MIN_SAFE_INTEGER,u=n.MIN_SAFE_INTEGER,c=0;c<t.length;c++)i=t[c],Array.isArray(i)?(s=i[0],o=i[1]):(s=i.x,o=i.y),a=Math.min(a,s),h=Math.min(h,o),l=Math.max(l,s),u=Math.max(u,o);return e.x=a,e.y=h,e.width=l-a,e.height=u-h,e}},function(t,e,i){var r=i(0),n=i(1),s=new r({initialize:function(t,e,i){this._rgb=[0,0,0],this.onChangeCallback=n,this.dirty=!1,this.set(t,e,i)},set:function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._rgb=[t,e,i],this.onChange(),this},equals:function(t,e,i){var r=this._rgb;return r.r===t&&r.g===e&&r.b===i},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=s},function(t,e,i){var r={CENTER:i(403),ORIENTATION:i(404),SCALE_MODE:i(405),ZOOM:i(406)};t.exports=r},function(t,e){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,e,i){var r=i(0),n=i(144),s=i(197),o=i(20),a=i(419),h=i(420),l=i(33),u=i(1),c=i(421),d=new r({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.config=e,this.settings=c.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=u},init:function(t){this.settings.status=n.INIT,this.sceneUpdate=u,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var e=t.plugins;this.plugins=e,e.addToScene(this,s.Global,[s.CoreScene,h(this),a(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(t,e){var i=this.events;i.emit(o.PRE_UPDATE,t,e),i.emit(o.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),i.emit(o.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.events.emit(o.PRE_RENDER,t),this.cameras.render(t,e),this.events.emit(o.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var e=this.events,i=this.settings;return this.settings.active&&(i.status=n.PAUSED,i.active=!1,e.emit(o.PAUSE,this,t)),this},resume:function(t){var e=this.events,i=this.settings;return this.settings.active||(i.status=n.RUNNING,i.active=!0,e.emit(o.RESUME,this,t)),this},sleep:function(t){var e=this.events,i=this.settings;return i.status=n.SLEEPING,i.active=!1,i.visible=!1,e.emit(o.SLEEP,this,t),this},wake:function(t){var e=this.events,i=this.settings;return i.status=n.RUNNING,i.active=!0,i.visible=!0,e.emit(o.WAKE,this,t),i.isTransition&&e.emit(o.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===n.SLEEPING},isActive:function(){return this.settings.status===n.RUNNING},isPaused:function(){return this.settings.status===n.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){var e=this.events,i=this.settings;t&&(i.data=t),i.status=n.START,i.active=!0,i.visible=!0,e.emit(o.START,this),e.emit(o.READY,this,t)},shutdown:function(t){var e=this.events,i=this.settings;e.off(o.TRANSITION_INIT),e.off(o.TRANSITION_START),e.off(o.TRANSITION_COMPLETE),e.off(o.TRANSITION_OUT),i.status=n.SHUTDOWN,i.active=!1,i.visible=!1,this.renderer===l.WEBGL&&this.renderer.resetTextures(!0),e.emit(o.SHUTDOWN,this,t)},destroy:function(){var t=this.events,e=this.settings;e.status=n.DESTROYED,e.active=!1,e.visible=!1,t.emit(o.DESTROY,this),t.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],r=0;r<i.length;r++)this[i[r]]=null}});t.exports=d},function(t,e){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,e,i){var r=i(33),n=i(0),s=i(109),o=i(424),a="Texture.frame missing: ",h=new n({initialize:function(t,e,i,r,n){Array.isArray(i)||(i=[i]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var s=0;s<i.length;s++)this.source.push(new o(this,i[s],r,n))},add:function(t,e,i,r,n,o){if(this.has(t))return null;var a=new s(this,t,e,i,r,n,o);return this.frames[t]=a,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,a},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames[t]},get:function(t){t||(t=this.firstFrame);var e=this.frames[t];return e||(console.warn(a+t),e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var i=[];for(var r in this.frames)if("__BASE"!==r||e){var n=this.frames[r];n.sourceIndex===t&&i.push(n)}return i},getFrameNames:function(t){void 0===t&&(t=!1);var e=Object.keys(this.frames);if(!t){var i=e.indexOf("__BASE");-1!==i&&e.splice(i,1)}return e},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t];return e?e.source.image:(console.warn(a+t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e,i=this.frames[t];return i?e=i.sourceIndex:(console.warn(a+t),e=this.frames.__BASE.sourceIndex),this.dataSource[e].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=this.source[e];this.dataSource.push(new o(this,t[e],i.width,i.height))}},setFilter:function(t){var e;for(e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var e in this.frames)this.frames[e].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var i=this.manager.game.renderer;i&&i.type===r.WEBGL&&i.resetTextures(!0),this.manager=null}});t.exports=h},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var o=[];if(r(t,n,s))for(var a=n;a<s;a++){var h=t[a];(!e||e&&void 0===i&&h.hasOwnProperty(e)||e&&void 0!==i&&h[e]===i)&&o.push(h)}return o}},function(t,e,i){t.exports={Matrix:i(1013),Add:i(1021),AddAt:i(1022),BringToTop:i(1023),CountAllMatching:i(1024),Each:i(1025),EachInRange:i(1026),FindClosestInSorted:i(318),GetAll:i(207),GetFirst:i(428),GetRandom:i(210),MoveDown:i(1027),MoveTo:i(1028),MoveUp:i(1029),MoveAbove:i(1030),MoveBelow:i(1031),NumberArray:i(322),NumberArrayStep:i(1032),QuickSelect:i(436),Range:i(437),Remove:i(93),RemoveAt:i(1033),RemoveBetween:i(1034),RemoveRandomElement:i(1035),Replace:i(1036),RotateLeft:i(178),RotateRight:i(179),SafeRange:i(78),SendToBack:i(1037),SetAll:i(1038),Shuffle:i(131),SortByDigits:i(320),SpliceOne:i(74),StableSort:i(79),Swap:i(1039)}},function(t,e){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var e=t[0].length,i=1;i<t.length;i++)if(t[i].length!==e)return!1;return!0}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var r=e+Math.floor(Math.random()*i);return void 0===t[r]?null:t[r]}},function(t,e,i){var r=i(0),n=i(9),s=i(438),o=new r({Extends:n,initialize:function(){n.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,e=this._destroy,i=t.length;i--;)e.push(t[i]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var t,e,i=this._destroy,r=this._active;for(t=0;t<i.length;t++){e=i[t];var n=r.indexOf(e);-1!==n&&(r.splice(n,1),this.emit(s.PROCESS_QUEUE_REMOVE,e))}for(i.length=0,i=this._pending,t=0;t<i.length;t++)e=i[t],(!this.checkQueue||this.checkQueue&&-1===r.indexOf(e))&&(r.push(e),this.emit(s.PROCESS_QUEUE_ADD,e));return i.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=o},function(t,e){function i(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,r,n,s){void 0===r&&(r=0),void 0===n&&(n=0);var o=e.cutX,a=e.cutY,h=e.source.width,l=e.source.height,u=e.sourceIndex,c={},d=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=i(d,"size"),c.lineHeight=i(f,"lineHeight")+n,c.chars={};var p=t.getElementsByTagName("char"),g=void 0!==e&&e.trimmed;if(g)var v=e.height,m=e.width;for(var y=0;y<p.length;y++){var x=p[y],b=i(x,"id"),w=String.fromCharCode(b),T=i(x,"x"),S=i(x,"y"),E=i(x,"width"),C=i(x,"height");g&&(T<m&&(m=T),S<v&&(v=S)),g&&0!==v&&0!==m&&(T-=e.x,S-=e.y);var _=(o+T)/h,A=(a+S)/l,M=(o+T+E)/h,P=(a+S+C)/l;if(c.chars[b]={x:T,y:S,width:E,height:C,centerX:Math.floor(E/2),centerY:Math.floor(C/2),xOffset:i(x,"xoffset"),yOffset:i(x,"yoffset"),xAdvance:i(x,"xadvance")+r,data:{},kerning:{},u0:_,v0:A,u1:M,v1:P},s&&0!==E&&0!==C){var k=s.add(w,u,T,S,E,C);k&&k.setUVs(E,C,_,A,M,P)}}var O=t.getElementsByTagName("kerning");for(y=0;y<O.length;y++){var R=O[y],L=i(R,"first"),I=i(R,"second"),F=i(R,"amount");c.chars[I].kerning[L]=F}return c}},function(t,e,i){var r=i(1049),n=i(440),s=i(0),o=i(11),a=i(109),h=i(15),l=i(110),u=new s({Extends:h,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,r],initialize:function(t,e,i,r,n){h.call(this,t,"Blitter"),this.setTexture(r,n),this.setPosition(e,i),this.initPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(t,e,i,r,s){void 0===r&&(r=!0),void 0===s&&(s=this.children.length),void 0===i?i=this.frame:i instanceof a||(i=this.texture.get(i));var o=new n(this,t,e,i,r);return this.children.addAt(o,s,!1),this.dirty=!0,o},createFromCallback:function(t,e,i,r){for(var n=this.createMultiple(e,i,r),s=0;s<n.length;s++){var o=n[s];t.call(this,o,s)}return n},createMultiple:function(t,e,i){void 0===e&&(e=this.frame.name),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);var r=[],n=this;return e.forEach((function(e){for(var s=0;s<t;s++)r.push(n.create(0,0,e,i))})),r},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=u},function(t,e,i){var r=i(208),n=i(35),s=i(0),o=i(11),a=i(75),h=i(15),l=i(10),u=i(1052),c=i(441),d=i(3),f=new s({Extends:h,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,u],initialize:function(t,e,i,r){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(e,i),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),r&&this.add(r)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new l),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var i=this.list,r=new l,n=!1;t.setEmpty();for(var s=0;s<i.length;s++){var o=i[s];o.getBounds&&(o.getBounds(r),n?c(r,t,t):(t.setTo(r.x,r.y,r.width,r.height),n=!0))}}return t},addHandler:function(t){t.once(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(a.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new d(t.x,t.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return r.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return r.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,i){return e[t]-i[t]}),r.StableSort(this.list,e),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,e){return r.GetRandom(this.list,t,e)},getFirst:function(t,e,i,n){return r.GetFirst(this.list,t,e,i,n)},getAll:function(t,e,i,n){return r.GetAll(this.list,t,e,i,n)},count:function(t,e,i,n){return r.CountAllMatching(this.list,t,e,i,n)},swap:function(t,e){return r.Swap(this.list,t,e),this},moveTo:function(t,e){return r.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return r.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return r.MoveBelow(this.list,t,e),this},remove:function(t,e){var i=r.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)i[n].destroy()}return this},removeAt:function(t,e){var i=r.RemoveAt(this.list,t,this.removeHandler,this);return e&&i&&i.destroy(),this},removeBetween:function(t,e,i){var n=r.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var s=0;s<n.length;s++)n[s].destroy();return this},removeAll:function(t){var e=r.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var i=0;i<e.length;i++)e[i].destroy();return this},bringToTop:function(t){return r.BringToTop(this.list,t),this},sendToBack:function(t){return r.SendToBack(this.list,t),this},moveUp:function(t){return r.MoveUp(this.list,t),this},moveDown:function(t){return r.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,e,i){return r.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,i,n){return r.SetAll(this.list,t,e,i,n),this},each:function(t,e){var i,r=[null],n=this.list.slice(),s=n.length;for(i=2;i<arguments.length;i++)r.push(arguments[i]);for(i=0;i<s;i++)r[0]=n[i],t.apply(e,r);return this},iterate:function(t,e){var i,r=[null];for(i=2;i<arguments.length;i++)r.push(arguments[i]);for(i=0;i<this.list.length;i++)r[0]=this.list[i],t.apply(e,r);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(r.SetAll(this.list,"scrollFactorX",t),r.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=f},function(t,e,i){var r=i(148),n=i(0),s=i(1057),o=new n({Extends:r,Mixins:[s],initialize:function(t,e,i,n,s,o,a){r.call(this,t,e,i,n,s,o,a),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=o},function(t,e,i){var r=i(133),n=i(0),s=i(217),o=i(303),a=i(304),h=i(305),l=i(309),u=i(167),c=i(312),d=i(313),f=i(314),p=i(111),g=i(15),v=i(2),m=i(6),y=i(14),x=i(1063),b=new n({Extends:g,Mixins:[o,a,h,l,u,d,f,c,x],initialize:function(t,e){var i=m(e,"x",0),r=m(e,"y",0);g.call(this,t,"Graphics"),this.setPosition(i,r),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(e)},setDefaultStyles:function(t){return m(t,"lineStyle",null)&&(this.defaultStrokeWidth=m(t,"lineStyle.width",1),this.defaultStrokeColor=m(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(t,"fillStyle",null)&&(this.defaultFillColor=m(t,"fillStyle.color",16777215),this.defaultFillAlpha=m(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,i){return void 0===i&&(i=1),this.commandBuffer.push(s.LINE_STYLE,t,e,i),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(s.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,i,r,n,o,a,h){return void 0===n&&(n=1),void 0===o&&(o=n),void 0===a&&(a=n),void 0===h&&(h=n),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,n,o,a,h,t,e,i,r),this},lineGradientStyle:function(t,e,i,r,n,o){return void 0===o&&(o=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,t,o,e,i,r,n),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,y.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,i,r){return this.commandBuffer.push(s.FILL_RECT,t,e,i,r),this},strokeRect:function(t,e,i,r){var n=this._lineWidth/2,s=t-n,o=t+n;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+r),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+r),this.strokePath(),this.beginPath(),this.moveTo(s,e),this.lineTo(o+i,e),this.strokePath(),this.beginPath(),this.moveTo(s,e+r),this.lineTo(o+i,e+r),this.strokePath(),this},fillRoundedRect:function(t,e,i,r,n){void 0===n&&(n=20);var s=n,o=n,a=n,h=n;return"number"!=typeof n&&(s=v(n,"tl",20),o=v(n,"tr",20),a=v(n,"bl",20),h=v(n,"br",20)),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-o,e),this.arc(t+i-o,e+o,o,-y.TAU,0),this.lineTo(t+i,e+r-h),this.arc(t+i-h,e+r-h,h,0,y.TAU),this.lineTo(t+a,e+r),this.arc(t+a,e+r-a,a,y.TAU,Math.PI),this.lineTo(t,e+s),this.arc(t+s,e+s,s,-Math.PI,-y.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,i,r,n){void 0===n&&(n=20);var s=n,o=n,a=n,h=n;return"number"!=typeof n&&(s=v(n,"tl",20),o=v(n,"tr",20),a=v(n,"bl",20),h=v(n,"br",20)),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-o,e),this.moveTo(t+i-o,e),this.arc(t+i-o,e+o,o,-y.TAU,0),this.lineTo(t+i,e+r-h),this.moveTo(t+i,e+r-h),this.arc(t+i-h,e+r-h,h,0,y.TAU),this.lineTo(t+a,e+r),this.moveTo(t+a,e+r),this.arc(t+a,e+r-a,a,y.TAU,Math.PI),this.lineTo(t,e+s),this.moveTo(t,e+s),this.arc(t+s,e+s,s,-Math.PI,-y.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,i){return!i||i<1?i=1:(t-=i/2,e-=i/2),this.commandBuffer.push(s.FILL_RECT,t,e,i,i),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,i,r,n,o){return this.commandBuffer.push(s.FILL_TRIANGLE,t,e,i,r,n,o),this},strokeTriangle:function(t,e,i,r,n,o){return this.commandBuffer.push(s.STROKE_TRIANGLE,t,e,i,r,n,o),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,r){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,r),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(s.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(s.MOVE_TO,t,e),this},strokePoints:function(t,e,i,r){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var n=1;n<r;n++)this.lineTo(t[n].x,t[n].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,r){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var n=1;n<r;n++)this.lineTo(t[n].x,t[n].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,r,n){void 0===n&&(n=32);var s=new p(t,e,i,r).getPoints(n);return this.strokePoints(s,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,r,n){void 0===n&&(n=32);var s=new p(t,e,i,r).getPoints(n);return this.fillPoints(s,!0)},arc:function(t,e,i,r,n,o,a){return void 0===o&&(o=!1),void 0===a&&(a=0),this.commandBuffer.push(s.ARC,t,e,i,r,n,o,a),this},slice:function(t,e,i,r,n,o,a){return void 0===o&&(o=!1),void 0===a&&(a=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,t,e),this.commandBuffer.push(s.ARC,t,e,i,r,n,o,a),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(s.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(s.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(s.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var r,n,s=this.scene.sys,o=s.game.renderer;if(void 0===e&&(e=s.scale.width),void 0===i&&(i=s.scale.height),b.TargetCamera.setScene(this.scene),b.TargetCamera.setViewport(0,0,e,i),b.TargetCamera.scrollX=this.x,b.TargetCamera.scrollY=this.y,"string"==typeof t)if(s.textures.exists(t)){var a=(r=s.textures.get(t)).getSourceImage();a instanceof HTMLCanvasElement&&(n=a.getContext("2d"))}else n=(r=s.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(n=t.getContext("2d"));return n&&(this.renderCanvas(o,this,b.TargetCamera,null,n,!1),r&&r.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});b.TargetCamera=new r,t.exports=b},function(t,e){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=t.width/2,s=t.height/2;return i.x=t.x+n*Math.cos(e),i.y=t.y+s*Math.sin(e),i}},function(t,e,i){var r=i(35),n=i(0),s=i(11),o=i(176),a=i(101),h=i(9),l=i(75),u=i(110),c=i(1071),d=i(20),f=i(79),p=new n({Extends:u,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.Visible,h,c],initialize:function(t,e){u.call(this,t),h.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),e&&this.add(e),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(t,e){return this.data||(this.data=new a(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new a(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new a(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new a(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return i.unshift(this.displayList.getIndex(t)),i},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(l.ADDED_TO_SCENE,t,this.scene),this.events.emit(d.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(l.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(l.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=p},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(450),a=i(110),h=i(452),l=i(1075),u=new r({Extends:s,Mixins:[n.Depth,n.Mask,n.Pipeline,n.Transform,n.Visible,l],initialize:function(t,e,i,r){if(s.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=typeof i&&!Array.isArray(i)||(r=i,i=null),this.setTexture(e,i),this.initPipeline(),this.emitters=new a(this),this.wells=new a(this),r){Array.isArray(r)||(r=[r]);for(var n=0;n<r.length;n++)this.createEmitter(r[n])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return e.forEach((function(t){i.push(t.name)})),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);var i=e.frames;i.length=0;for(var r=0;r<t.length;r++){var n=t[r];-1!==this.frameNames.indexOf(n)&&i.push(this.texture.get(n))}return i.length>0?e.defaultFrame=i[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new h(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new o(t))},emitParticle:function(t,e,i){for(var r=this.emitters.list,n=0;n<r.length;n++){var s=r[n];s.active&&s.emitParticle(t,e,i)}return this},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var i=this.emitters.list,r=0;r<i.length;r++){var n=i[r];n.active&&n.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=u},function(t,e,i){var r=i(35),n=i(133),s=i(31),o=i(0),a=i(11),h=i(33),l=i(109),u=i(15),c=i(1),d=i(92),f=i(1079),p=i(141),g=i(12),v=i(222),m=new o({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,f],initialize:function(t,e,i,r,o,a,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=32),void 0===o&&(o=32),u.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===a?(this.canvas=s.create2D(this,r,o),this.texture=t.sys.textures.addCanvas(v(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(a),this.frame=this.texture.get(l),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new n(0,0,r,o),this.renderTarget=null;var f=this.renderer;f?f.type===h.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new p(f,r,o,1,0,!1)):f.type===h.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=c,this.camera.setScene(t),this.setPosition(e,i),void 0===a&&this.setSize(r,o),this.setOrigin(0,0),this.initPipeline(d.SINGLE_PIPELINE)},setSize:function(t,e){return this.resize(t,e)},resize:function(t,e){void 0===e&&(e=t);var i=this.frame;if(t!==this.width||e!==this.height){if("__BASE"===i.name){this.canvas.width=t,this.canvas.height=e,this.texture.width=t,this.texture.height=e;var r=this.renderTarget;r&&(r.resize(t,e),i.glTexture=r.texture,i.source.isRenderTexture=!0,i.source.isGLTexture=!0,i.source.glTexture=r.texture),this.camera.setSize(t,e),i.source.width=t,i.source.height=e,i.setSize(t,e),this.width=t,this.height=e}}else{var n=this.texture.getSourceImage();i.cutX+t>n.width&&(t=n.width-i.cutX),i.cutY+e>n.height&&(e=n.height-i.cutY),i.setSize(t,e,i.cutX,i.cutY)}this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=e),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,e,i,r,n,s){var o=this.frame,a=this.camera,h=this.renderer;void 0===e&&(e=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=o.cutWidth),void 0===s&&(s=o.cutHeight);var l=(t>>16&255)/255,u=(t>>8&255)/255,c=(255&t)/255,d=this.renderTarget;if(a.preRender(),d){d.bind(!0);var f=this.pipeline;f.manager.set(f);var p=d.width,v=d.height,m=h.width/p,y=h.height/v;f.drawFillRect(i*m,r*y,n*m,s*y,g.getTintFromFloats(c,u,l,1),e),d.unbind(!0)}else{var x=this.context;h.setContext(x),x.fillStyle="rgba("+l+","+u+","+c+","+e+")",x.fillRect(i+o.cutX,r+o.cutY,n,s),h.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var e=this.context;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),e.restore()}this.dirty=!1}return this},erase:function(t,e,i){return this._eraseMode=!0,this.draw(t,e,i,1,16777215),this._eraseMode=!1,this},draw:function(t,e,i,r,n){return this.beginDraw(),this.batchDraw(t,e,i,r,n),this.endDraw(),this},drawFrame:function(t,e,i,r,n,s){return this.beginDraw(),this.batchDrawFrame(t,e,i,r,n,s),this.endDraw(),this},beginDraw:function(){var t=this.camera,e=this.renderer,i=this.renderTarget;return t.preRender(),i?e.beginCapture(i.width,i.height):e.setContext(this.context),this},batchDraw:function(t,e,i,r,n){return void 0===r&&(r=this.globalAlpha),n=void 0===n?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(n>>16)+(65280&n)+((255&n)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,e,i,r,n),this},batchDrawFrame:function(t,e,i,r,n,s){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=this.globalAlpha),s=void 0===s?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(s>>16)+(65280&s)+((255&s)<<16);var o=this.textureManager.getFrame(t,e);return o&&(this.renderTarget?this.pipeline.batchTextureFrame(o,i,r,s,n,this.camera.matrix,null):this.batchTextureFrame(o,i+this.frame.cutX,r+this.frame.cutY,n,s)),this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var e=this.renderer,i=this.renderTarget;if(i){var r=e.endCapture();e.pipelines.setUtility().blitFrame(r,i,1,!1,!1,t),e.resetScissor(),e.resetViewport()}else e.setContext();return this.dirty=!0,this},batchList:function(t,e,i,r,n){for(var s=0;s<t.length;s++){var o=t[s];o&&o!==this&&(o.renderWebGL||o.renderCanvas?this.drawGameObject(o,e,i):o.isParent||o.list?this.batchGroup(o.getChildren(),e,i):"string"==typeof o?this.batchTextureFrameKey(o,null,e,i,r,n):o instanceof l?this.batchTextureFrame(o,e,i,r,n):Array.isArray(o)&&this.batchList(o,e,i,r,n))}},batchGroup:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY;for(var r=0;r<t.length;r++){var n=t[r];if(n.willRender(this.camera)){var s=n.x+e,o=n.y+i;this.drawGameObject(n,s,o)}}},batchGameObjectWebGL:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var r=t.x,n=t.y;t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(r,n)},batchGameObjectCanvas:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var n=t.x,s=t.y;if(this._eraseMode){var o=t.blendMode;t.blendMode=r.ERASE}t.setPosition(e+this.frame.cutX,i+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(n,s),this._eraseMode&&(t.blendMode=o)},batchTextureFrameKey:function(t,e,i,r,n,s){var o=this.textureManager.getFrame(t,e);o&&this.batchTextureFrame(o,i,r,n,s)},batchTextureFrame:function(t,e,i,r,n){if(void 0===e&&(e=0),void 0===i&&(i=0),e+=this.frame.cutX,i+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,e,i,n,r,this.camera.matrix,null);else{var s=this.context,o=t.canvasData,a=t.source.image,h=this.camera.matrix;s.save(),s.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",s.globalAlpha=r,h.setToContext(s),s.drawImage(a,o.x,o.y,o.width,o.height,e,i,o.width,o.height),s.restore()}},snapshotArea:function(t,e,i,r,n,s,o){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,n,!1,t,e,i,r,s,o):this.renderer.snapshotCanvas(this.canvas,n,!1,t,e,i,r,s,o),this},snapshot:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,e,i):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,e,i),this},snapshotPixel:function(t,e,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!0,t,e):this.renderer.snapshotCanvas(this.canvas,i,!0,t,e),this},preDestroy:function(){this._saved||(s.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=m},function(t,e){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t,e,i){var r=i(164),n=i(0),s=i(11),o=i(15),a=i(92),h=i(1085),l=i(3),u=new n({Extends:o,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Flip,s.Mask,s.Pipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,h],initialize:function(t,e,i,n,s,h,u,c,d){void 0===n&&(n="__DEFAULT"),void 0===h&&(h=2),void 0===u&&(u=!0),o.call(this,t,"Rope"),this.anims=new r(this),this.points=h,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===n,this.dirty=!1,this.horizontal=u,this._flipX=!1,this._flipY=!1,this._perp=new l,this.debugCallback=null,this.debugGraphic=null,this.setTexture(n,s),this.setPosition(e,i),this.setSizeToFrame(),this.initPipeline(a.ROPE_PIPELINE),Array.isArray(h)&&this.resizeArrays(h.length),this.setPoints(h,c,d),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){var i=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(t,e,i){return this.anims.play(t,e,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,i))},setVertical:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,i)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,e){var i=this.points.length;if(i<1)return this;var r,n=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]);var s=0;if(void 0!==e)for(r=0;r<i;r++)n[s=2*r]=t,n[s+1]=e;else if(t.length===i)for(r=0;r<i;r++)n[s=2*r]=t[r],n[s+1]=t[r];else{var o=t[0];for(r=0;r<i;r++)s=2*r,t.length>s&&(o=t[s]),n[s]=o,t.length>s+1&&(o=t[s+1]),n[s+1]=o}return this},setColors:function(t){var e=this.points.length;if(e<1)return this;var i,r=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var n=0;if(t.length===e)for(i=0;i<e;i++)r[n=2*i]=t[i],r[n+1]=t[i];else{var s=t[0];for(i=0;i<e;i++)n=2*i,t.length>n&&(s=t[n]),r[n]=s,t.length>n+1&&(s=t[n+1]),r[n+1]=s}return this},setPoints:function(t,e,i){if(void 0===t&&(t=2),"number"==typeof t){var r,n,s,o=t;if(o<2&&(o=2),t=[],this.horizontal)for(s=-this.frame.halfWidth,n=this.frame.width/(o-1),r=0;r<o;r++)t.push({x:s+r*n,y:0});else for(s=-this.frame.halfHeight,n=this.frame.height/(o-1),r=0;r<o;r++)t.push({x:0,y:s+r*n})}var a=t.length,h=this.points.length;return a<1?(console.warn("Rope: Not enough points given"),this):(1===a&&(t.unshift({x:0,y:0}),a++),h!==a&&this.resizeArrays(a),this.points=t,this.updateUVs(),null!=e&&this.setColors(e),null!=i&&this.setAlphas(i),this)},updateUVs:function(){for(var t=this.uv,e=this.points.length,i=this.frame.u0,r=this.frame.v0,n=this.frame.u1,s=this.frame.v1,o=(n-i)/(e-1),a=(s-r)/(e-1),h=0;h<e;h++){var l,u,c,d,f=4*h;this.horizontal?(this._flipX?(l=n-h*o,c=n-h*o):(l=i+h*o,c=i+h*o),this._flipY?(u=s,d=r):(u=r,d=s)):(this._flipX?(l=i,c=n):(l=n,c=i),this._flipY?(u=s-h*a,d=s-h*a):(u=r+h*a,d=r+h*a)),t[f+0]=l,t[f+1]=u,t[f+2]=c,t[f+3]=d}return this},resizeArrays:function(t){var e=this.colors,i=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),e=new Uint32Array(2*t),i=new Float32Array(2*t);for(var r=0;r<2*t;r++)e[r]=16777215,i[r]=1;return this.colors=e,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,i=this.vertices,r=e.length;if(this.dirty=!1,!(r<1)){for(var n,s=e[0],o=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,a=0;a<r;a++){var h=e[a],l=4*a;n=a<r-1?e[a+1]:h,t.x=n.y-s.y,t.y=-(n.x-s.x);var u=t.length();t.x/=u,t.y/=u,t.x*=o,t.y*=o,i[l]=h.x+t.x,i[l+1]=h.y+t.y,i[l+2]=h.x-t.x,i[l+3]=h.y-t.y,s=h}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,i){var r=t.debugGraphic,n=i[0],s=i[1],o=i[2],a=i[3];r.lineBetween(n,s,o,a);for(var h=4;h<e;h+=4){var l=i[h+0],u=i[h+1],c=i[h+2],d=i[h+3];r.lineBetween(n,s,l,u),r.lineBetween(o,a,c,d),r.lineBetween(o,a,l,u),r.lineBetween(l,u,c,d),n=l,s=u,o=c,a=d}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=u},function(t,e,i){var r=i(142),n=i(31),s=i(0),o=i(11),a=i(22),h=i(15),l=i(458),u=i(6),c=i(202),d=i(1088),f=i(459),p=new s({Extends:h,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,d],initialize:function(t,e,i,r,s){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=n.create(this),this.context=this.canvas.getContext("2d"),this.style=new f(this,s),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(r),s&&s.padding&&this.setPadding(s.padding),s&&s.lineSpacing&&this.setLineSpacing(s.lineSpacing),t.sys.game.events.on(a.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var r="",n=t.replace(/ +/gi," ").split(this.splitRegExp),s=n.length,o=0;o<s;o++){var a=n[o],h="";if(a=a.replace(/^ *|\s*$/gi,""),e.measureText(a).width<i)r+=a+"\n";else{for(var l=i,u=a.split(" "),c=0;c<u.length;c++){var d=u[c],f=d+" ",p=e.measureText(f).width;if(p>l){if(0===c){for(var g=f;g.length&&(g=g.slice(0,-1),!((p=e.measureText(g).width)<=l)););if(!g.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var v=d.substr(g.length);u[c]=v,h+=g}var m=u[c].length?c:c+1,y=u.slice(m).join(" ").replace(/[ \n]*$/gi,"");n[o+1]=y+" "+(n[o+1]||""),s=n.length;break}h+=f,l-=p}r+=h.replace(/[ \n]*$/gi,"")+"\n"}}return r.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var r="",n=t.split(this.splitRegExp),s=n.length-1,o=e.measureText(" ").width,a=0;a<=s;a++){for(var h=i,l=n[a].split(" "),u=l.length-1,c=0;c<=u;c++){var d=l[c],f=e.measureText(d).width,p=f;c<u&&(p+=o),p>h&&c>0&&(r+="\n",h=i),r+=d,c<u?(r+=" ",h-=p):h-=f}a<s&&(r+="\n")}return r},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,r,n,s){return this.style.setShadow(t,e,i,r,n,s)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,i,r){if("object"==typeof t){var n=t,s=u(n,"x",null);null!==s?(t=s,i=s):(t=u(n,"left",0),i=u(n,"right",t));var o=u(n,"y",null);null!==o?(e=o,r=o):(e=u(n,"top",0),r=u(n,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===r&&(r=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=r,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,r=i.resolution,n=i.metrics;i.syncFont(t,e);var s=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(s=this.runWordWrap(this._text));var o,a=s.split(this.splitRegExp),h=l(this,n,a),u=this.padding;0===i.fixedWidth?(this.width=h.width+u.left+u.right,o=h.width):(this.width=i.fixedWidth,(o=this.width-u.left-u.right)<h.width&&(o=h.width)),0===i.fixedHeight?this.height=h.height+u.top+u.bottom:this.height=i.fixedHeight;var c,d,f=this.width,p=this.height;this.updateDisplayOrigin(),f*=r,p*=r,f=Math.max(f,1),p=Math.max(p,1),t.width!==f||t.height!==p?(t.width=f,t.height=p,this.frame.setSize(f,p),i.syncFont(t,e)):e.clearRect(0,0,f,p),e.save(),e.scale(r,r),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,f,p)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(u.left,u.top);for(var g=0;g<h.lines;g++){if(c=i.strokeThickness/2,d=i.strokeThickness/2+g*h.lineHeight+n.ascent,g>0&&(d+=h.lineSpacing*g),i.rtl)c=f-c;else if("right"===i.align)c+=o-h.lineWidths[g];else if("center"===i.align)c+=(o-h.lineWidths[g])/2;else if("justify"===i.align&&h.lineWidths[g]/h.width>=.85){var v=h.width-h.lineWidths[g],m=e.measureText(" ").width,y=a[g].trim(),x=y.split(" ");v+=(a[g].length-y.length)*m;for(var b=Math.floor(v/m),w=0;b>0;)x[w]+=" ",w=(w+1)%(x.length-1||1),--b;a[g]=x.join(" ")}this.autoRound&&(c=Math.round(c),d=Math.round(d)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(a[g],c,d)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(a[g],c,d))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var T=this.input;return T&&!T.customHitArea&&(T.hitArea.width=this.width,T.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=o.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&c(this.canvas),n.remove(this.canvas),this.texture.destroy()}});t.exports=p},function(t,e,i){var r=i(31),n=i(0),s=i(11),o=i(22),a=i(15),h=i(361),l=i(192),u=i(1091),c=i(3),d=new n({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,u],initialize:function(t,e,i,n,s,l,u){var d=t.sys.renderer;a.call(this,t,"TileSprite");var f=t.sys.textures.get(l),p=f.get(u);n&&s?(n=Math.floor(n),s=Math.floor(s)):(n=p.width,s=p.height),this._tilePosition=new c,this._tileScale=new c(1,1),this.dirty=!1,this.renderer=d,this.canvas=r.create(this,n,s),this.context=this.canvas.getContext("2d"),this.displayTexture=f,this.displayFrame=p,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(p.width),this.potHeight=h(p.height),this.fillCanvas=r.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,i),this.setSize(n,s),this.setFrame(u),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(o.CONTEXT_RESTORED,(function(t){if(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=h(e.width),this.potHeight=h(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var e=this.fillContext,i=this.fillCanvas,r=this.potWidth,n=this.potHeight;this.renderer&&this.renderer.gl||(r=t.cutWidth,n=t.cutHeight),e.clearRect(0,0,r,n),i.width=r,i.height=n,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,r,n),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||l.disable(e);var i=this._tileScale.x,r=this._tileScale.y,n=this._tilePosition.x,s=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(i,r),e.translate(-n,-s),e.fillStyle=this.fillPattern,e.fillRect(n,s,this.width/i,this.height/r),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),r.remove(this.canvas),r.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=d},function(t,e,i){var r=i(0),n=i(18),s=i(11),o=i(75),a=i(22),h=i(51),l=i(15),u=i(70),c=i(222),d=i(1094),f=i(14),p=new r({Extends:l,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,d],initialize:function(t,e,i,r){l.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=c(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=f.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(e,i),this.initPipeline(),r&&this.changeSource(r,!1);var n=t.sys.game.events;n.on(a.PAUSE,this.globalPause,this),n.on(a.RESUME,this.globalResume,this);var s=t.sys.sound;s&&s.on(u.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(t,e,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var r=this.video;if(!r)return console.warn("Video not loaded"),this;void 0===t&&(t=r.loop);var n=this.scene.sys.sound;n&&n.mute&&this.setMute(!0),isNaN(e)||(this._markerIn=e),!isNaN(i)&&i>e&&(this._markerOut=i),r.loop=t;var s=this._callbacks,o=r.play();return void 0!==o?o.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(r.addEventListener("playing",s.play,!0),r.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),r.addEventListener("ended",s.end,!0),r.addEventListener("timeupdate",s.time,!0),r.addEventListener("seeking",s.seeking,!0),r.addEventListener("seeked",s.seeked,!0),this},changeSource:function(t,e,i,r,n){void 0===e&&(e=!0),this.video&&this.stop();var s=this.scene.sys.cache.video.get(t);return s?(this.video=s,this._cacheKey=t,this._codePaused=s.paused,this._codeMuted=s.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,s,s.videoWidth,s.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,s.videoWidth,s.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,s.videoWidth,s.videoHeight)):this.updateTexture(),s.currentTime=0,this._lastUpdate=0,e&&this.play(i,r,n)):this.video=null,this},addMarker:function(t,e,i){return!isNaN(e)&&e>=0&&!isNaN(i)&&(this.markers[t]=[e,i]),this},playMarker:function(t,e){var i=this.markers[t];return i&&this.play(e,i[0],i[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,i,r,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===r&&(r=this.height),void 0===n&&(n=i),void 0===s&&(s=r);var o=this.video,a=this.snapshotTexture;return a?(a.setSize(n,s),o&&a.context.drawImage(o,t,e,i,r,0,0,n,s)):(a=this.scene.sys.textures.createCanvas(c(),n,s),this.snapshotTexture=a,o&&a.context.drawImage(o,t,e,i,r,0,0,n,s)),a.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");return r.controls=!1,i&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0),r.src=t,r.load(),this.video=r,this},loadMediaStream:function(t,e,i){void 0===e&&(e="loadeddata"),void 0===i&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");r.controls=!1,i&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0);try{r.srcObject=t}catch(e){r.src=window.URL.createObjectURL(t)}return r.load(),this.video=r,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once(h.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,t)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(o.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t=this.video;if(t){var e=t.currentTime;e!==this._lastUpdate&&(this._lastUpdate=e,this.updateTexture(),e>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=e,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var t=this.video,e=t.videoWidth,i=t.videoHeight;if(this.videoTexture){var r=this.videoTextureSource;r.source!==t&&(r.source=t,r.width=e,r.height=i),r.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,e,i),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,e,i),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,e,i)},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var e=this.video;if(e){var i=e.duration;if(i!==1/0&&!isNaN(i)){var r=i*t;this.setCurrentTime(r)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e=this.video;if(e){if("string"==typeof t){var i=t[0],r=parseFloat(t.substr(1));"+"===i?t=e.currentTime+r:"-"===i&&(t=e.currentTime-r)}e.currentTime=t,this._lastUpdate=t}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var e=t.currentTime,i=t.duration;if(i!==1/0&&!isNaN(i))return e/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var i=this.video;i&&(i.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var e=this.video;return this._codePaused=t,e&&(t?e.paused||e.pause():t||e.paused&&!this._systemPaused&&e.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=n(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=e,this.videoTextureSource&&this.videoTextureSource.setFlipY(e),this.videoTexture},stop:function(){var t=this.video;if(t){var e=this._callbacks;for(var i in e)t.removeEventListener(i,e[i],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(a.PAUSE,this.globalPause,this),t.off(a.RESUME,this.globalResume,this);var e=this.scene.sys.sound;e&&e.off(u.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=p},function(t,e,i){var r=i(0),n=i(228),s=i(470),o=i(56),a=new r({initialize:function(t){this.type=o.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return n(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var e,i=Number.MAX_VALUE,r=0;r<t.length;r++)e={x:0,y:0},"number"==typeof t[r]||"string"==typeof t[r]?(e.x=parseFloat(t[r]),e.y=parseFloat(t[r+1]),r++):Array.isArray(t[r])?(e.x=t[r][0],e.y=t[r][1]):(e.x=t[r].x,e.y=t[r].y),this.points.push(e),e.y<i&&(i=e.y);return this.calculateArea(i),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,e,i=0,r=0;r<this.points.length-1;r++)t=this.points[r],i+=((e=this.points[r+1]).x-t.x)*(t.y+e.y);return t=this.points[0],e=this.points[this.points.length-1],i+=(t.x-e.x)*(e.y+t.y),this.area=.5*-i,this.area},getPoints:function(t,e,i){return s(this,t,e,i)}});t.exports=a},function(t,e){t.exports=function(t,e,i){for(var r=!1,n=-1,s=t.points.length-1;++n<t.points.length;s=n){var o=t.points[n].x,a=t.points[n].y,h=t.points[s].x,l=t.points[s].y;(a<=i&&i<l||l<=i&&i<a)&&e<(h-o)*(i-a)/(l-a)+o&&(r=!r)}return r}},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(2),a=i(17),h=i(478),l=i(1176),u=i(25),c=new r({Extends:s,Mixins:[n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.ScrollFactor,n.Transform,n.Visible,l],initialize:function(t,e,i,r,n,o,a,h){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=128),void 0===o&&(o=128),s.call(this,t,"Shader"),this.blendMode=-1,this.shader;var l=t.sys.renderer;this.renderer=l,this.gl=l.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=l.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=l.width,this._rendererHeight=l.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,r),this.setSize(n,o),this.setOrigin(.5,.5),this.setShader(e,a,h)},willRender:function(t){return!!this.renderToTexture||!(s.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){if(void 0===e&&(e=!1),!this.renderToTexture){var i=this.width,r=this.height,n=this.renderer;this.glTexture=n.createTextureFromSource(null,i,r,0),this.glTexture.flipY=e,this.framebuffer=n.createFramebuffer(i,r,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=r,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,i,r))}return this.shader&&(n.pipelines.clear(),this.load(),this.flush(),n.pipelines.rebind()),this},setShader:function(t,e,i){if(void 0===e&&(e=[]),"string"==typeof t){var r=this.scene.sys.cache.shader;if(!r.has(t))return console.warn("Shader missing: "+t),this;this.shader=r.get(t)}else this.shader=t;var n=this.gl,s=this.renderer;this.program&&n.deleteProgram(this.program);var o=s.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);n.uniformMatrix4fv(n.getUniformLocation(o,"uViewMatrix"),!1,this.viewMatrix),n.uniformMatrix4fv(n.getUniformLocation(o,"uProjectionMatrix"),!1,this.projectionMatrix),n.uniform2f(n.getUniformLocation(o,"uResolution"),this.width,this.height),this.program=o;var h=new Date,l={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[h.getFullYear(),h.getMonth(),h.getDate(),60*h.getHours()*60+60*h.getMinutes()+h.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(!0,{},this.shader.uniforms,l):this.uniforms=l;for(var u=0;u<4;u++)e[u]&&this.setSampler2D("iChannel"+u,e[u],u,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,i,r){var n=1/(t-e),s=1/(i-r),o=this.projectionMatrix;o[0]=-2*n,o[5]=-2*s,o[10]=-.001,o[12]=(t+e)*n,o[13]=(r+i)*s,o[14]=-0;var a=this.program,h=this.gl;this.renderer.setProgram(a),h.uniformMatrix4fv(h.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=i},initUniforms:function(){var t=this.gl,e=this.renderer.glFuncMap,i=this.program;for(var r in this._textureCount=0,this.uniforms){var n=this.uniforms[r],s=n.type,o=e[s];n.uniformLocation=t.getUniformLocation(i,r),"sampler2D"!==s&&(n.glMatrix=o.matrix,n.glValueLength=o.length,n.glFunc=o.func)}},setSampler2DBuffer:function(t,e,i,r,n,s){void 0===n&&(n=0),void 0===s&&(s={});var o=this.uniforms[t];return o.value=e,s.width=i,s.height=r,o.textureData=s,this._textureCount=n,this.initSampler2D(o),this},setSampler2D:function(t,e,i,r){void 0===i&&(i=0);var n=this.scene.sys.textures;if(n.exists(e)){var s=n.getFrame(e);if(s.glTexture&&s.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,s.glTexture,s.width,s.height,i,r);var o=this.uniforms[t],a=s.source;o.textureKey=e,o.source=a.image,o.value=s.glTexture,a.isGLTexture&&(r||(r={}),r.width=a.width,r.height=a.height),r&&(o.textureData=r),this._textureCount=i,this.initSampler2D(o)}return this},setUniform:function(t,e){return h(this.uniforms,t,e),this},getUniform:function(t){return o(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){if(t.value){var e=this.gl;e.activeTexture(e.TEXTURE0+this._textureCount),e.bindTexture(e.TEXTURE_2D,t.value);var i=t.textureData;if(i&&!t.value.isRenderTexture){var r=e[o(i,"magFilter","linear").toUpperCase()],n=e[o(i,"minFilter","linear").toUpperCase()],s=e[o(i,"wrapS","repeat").toUpperCase()],a=e[o(i,"wrapT","repeat").toUpperCase()],h=e[o(i,"format","rgba").toUpperCase()];if(i.repeat&&(s=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var l=o(i,"width",512),u=o(i,"height",2),c=o(i,"border",0);e.texImage2D(e.TEXTURE_2D,0,h,l,u,c,h,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,h,e.RGBA,e.UNSIGNED_BYTE,t.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}this.renderer.setProgram(this.program),e.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var t,e,i,r,n,s=this.gl,o=this.uniforms,a=0;for(var h in o)i=(t=o[h]).glFunc,e=t.glValueLength,r=t.uniformLocation,null!==(n=t.value)&&(1===e?t.glMatrix?i.call(s,r,t.transpose,n):i.call(s,r,n):2===e?i.call(s,r,n.x,n.y):3===e?i.call(s,r,n.x,n.y,n.z):4===e?i.call(s,r,n.x,n.y,n.z,n.w):"sampler2D"===t.type&&(s.activeTexture(s.TEXTURE0+a),s.bindTexture(s.TEXTURE_2D,n),s.uniform1i(r,a),a++))},load:function(t){var e=this.gl,i=this.width,r=this.height,n=this.renderer,s=this.program,o=this.viewMatrix;if(!this.renderToTexture){var a=-this._displayOriginX,h=-this._displayOriginY;o[0]=t[0],o[1]=t[1],o[4]=t[2],o[5]=t[3],o[8]=t[4],o[9]=t[5],o[12]=o[0]*a+o[4]*h,o[13]=o[1]*a+o[5]*h}e.useProgram(s),e.uniformMatrix4fv(e.getUniformLocation(s,"uViewMatrix"),!1,o),e.uniform2f(e.getUniformLocation(s,"uResolution"),this.width,this.height);var l=this.uniforms,u=l.resolution;u.value.x=i,u.value.y=r,l.time.value=n.game.loop.getDuration();var c=this.pointer;if(c){var d=l.mouse,f=c.x/i,p=1-c.y/r;d.value.x=f.toFixed(2),d.value.y=p.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,e=this.height,i=this.program,r=this.gl,n=this.vertexBuffer,s=this.renderer,o=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(s.setFramebuffer(this.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),r.bindBuffer(r.ARRAY_BUFFER,n);var a=r.getAttribLocation(i,"inPosition");-1!==a&&(r.enableVertexAttribArray(a),r.vertexAttribPointer(a,2,r.FLOAT,!1,o,0));var h=this.vertexViewF32;h[3]=e,h[4]=t,h[5]=e,h[8]=t,h[9]=e,h[10]=t,r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,6*o)),r.drawArrays(r.TRIANGLES,0,6),this.renderToTexture&&s.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=c},function(t,e,i){var r=i(0),n=i(11),s=i(36),o=i(116),a=i(15),h=i(479),l=i(480),u=i(19),c=i(69),d=i(1179),f=i(79),p=i(39),g=i(117),v=new r({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,d],initialize:function(t,e,i,r,n,s,o,h,l,u,d,f){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r="__WHITE"),a.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new p,this.modelScale=new p(1,1,1),this.modelRotation=new p,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new c,this.viewPosition=new p,this.viewMatrix=new c,this.projectionMatrix=new c,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var g=t.sys.renderer;this.setPosition(e,i),this.setTexture(r,n),this.setSize(g.width,g.height),this.initPipeline(),this.setPerspective(g.width,g.height),s&&this.addVertices(s,o,h,l,u,d,f)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(p.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=p.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,e,i,r,n){return void 0===i&&(i=45),void 0===r&&(r=.01),void 0===n&&(n=1e3),this.projectionMatrix.perspective(s(i),t/e,r,n),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,e,i,r){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===e&&(e=1),void 0===i&&(i=-1e3),void 0===r&&(r=1e3),this.projectionMatrix.ortho(-t,t,-e,e,i,r),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,e,i,r,n,s,o,a,h){var u=this.scene.sys.cache.obj.get(t);return u&&l(u,this,e,i,r,n,s,o,a,h),this},sortByDepth:function(t,e){return t.depth-e.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(t,e,i,r,n,s,o){var a=new g(t,e,i,r,n,s,o);return this.vertices.push(a),a},addFace:function(t,e,i){var r=new o(t,e,i);return this.faces.push(r),this.dirtyCache[9]=-1,r},addVertices:function(t,e,i,r,n,s,o){var a=h(t,e,i,r,n,s,o);return a&&(this.faces=this.faces.concat(a.faces),this.vertices=this.vertices.concat(a.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},getFaceAt:function(t,e,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var r=u(this,i).calc,n=this.faces,s=[],o=0;o<n.length;o++){var a=n[o];a.contains(t,e,r)&&s.push(a)}return f(s,this.sortByDepth)},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,e=this.modelRotation,i=this.modelScale,r=this.dirtyCache,n=t.x,s=t.y,o=t.z,a=e.x,h=e.y,l=e.z,u=i.x,c=i.y,d=i.z,f=this.getFaceCount(),p=r[0],g=r[1],v=r[2],m=r[3],y=r[4],x=r[5],b=r[6],w=r[7],T=r[8],S=r[9];return r[0]=n,r[1]=s,r[2]=o,r[3]=a,r[4]=h,r[5]=l,r[6]=u,r[7]=c,r[8]=d,r[9]=f,p!==n||g!==s||v!==o||m!==a||y!==h||x!==l||b!==u||w!==c||T!==d||S!==f},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var e=this.width,i=this.height,r=this.viewMatrix,n=this.viewPosition;t[10]&&(r.identity(),r.translate(n),r.invert(),t[10]=0);var s=this.transformMatrix;s.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var o=n.z,a=this.faces,h=0;h<a.length;h++)a[h].transformCoordinatesLocal(s,e,i,o);this.depthSort()}},renderDebug:function(t,e){for(var i=t.debugGraphic,r=0;r<e.length;r++){var n=e[r],s=n.vertex1.tx,o=n.vertex1.ty,a=n.vertex2.tx,h=n.vertex2.ty,l=n.vertex3.tx,u=n.vertex3.ty;i.strokeTriangle(s,o,a,h,l,u)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=v},function(t,e,i){var r=i(50);t.exports=function(t,e){return r(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},function(t,e,i){var r=i(4),n=i(233);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s,o,a=t.x1,h=t.y1,l=t.x2,u=t.y2,c=e.x,d=e.y,f=e.radius,p=l-a,g=u-h,v=a-c,m=h-d,y=p*p+g*g,x=2*(p*v+g*m),b=x*x-4*y*(v*v+m*m-f*f);if(0===b){var w=-x/(2*y);s=a+w*p,o=h+w*g,w>=0&&w<=1&&i.push(new r(s,o))}else if(b>0){var T=(-x-Math.sqrt(b))/(2*y);s=a+T*p,o=h+T*g,T>=0&&T<=1&&i.push(new r(s,o));var S=(-x+Math.sqrt(b))/(2*y);s=a+S*p,o=h+S*g,S>=0&&S<=1&&i.push(new r(s,o))}}return i}},function(t,e,i){var r=i(66),n=new(i(4));t.exports=function(t,e,i){if(void 0===i&&(i=n),r(e,t.x1,t.y1))return i.x=t.x1,i.y=t.y1,!0;if(r(e,t.x2,t.y2))return i.x=t.x2,i.y=t.y2,!0;var s=t.x2-t.x1,o=t.y2-t.y1,a=e.x-t.x1,h=e.y-t.y1,l=s*s+o*o,u=s,c=o;if(l>0){var d=(a*s+h*o)/l;u*=d,c*=d}return i.x=t.x1+u,i.y=t.y1+c,u*u+c*c<=l&&u*s+c*o>=0&&r(e,i.x,i.y)}},function(t,e,i){var r=i(4),n=i(96),s=i(488);t.exports=function(t,e,i){if(void 0===i&&(i=[]),s(t,e))for(var o=e.getLineA(),a=e.getLineB(),h=e.getLineC(),l=e.getLineD(),u=[new r,new r,new r,new r],c=[n(o,t,u[0]),n(a,t,u[1]),n(h,t,u[2]),n(l,t,u[3])],d=0;d<4;d++)c[d]&&i.push(u[d]);return i}},function(t,e){t.exports=function(t,e,i,r){void 0===i&&(i=!1),void 0===r&&(r=[]);for(var n,s,o,a,h,l,u=t.x3-t.x1,c=t.y3-t.y1,d=t.x2-t.x1,f=t.y2-t.y1,p=u*u+c*c,g=u*d+c*f,v=d*d+f*f,m=p*v-g*g,y=0===m?0:1/m,x=t.x1,b=t.y1,w=0;w<e.length&&(s=(p*(l=d*(o=e[w].x-x)+f*(a=e[w].y-b))-g*(h=u*o+c*a))*y,!((n=(v*h-g*l)*y)>=0&&s>=0&&n+s<1&&(r.push({x:e[w].x,y:e[w].y}),i)));w++);return r}},function(t,e){t.exports=function(t,e,i,r){var n=Math.cos(r),s=Math.sin(r),o=t.x1-e,a=t.y1-i;return t.x1=o*n-a*s+e,t.y1=o*s+a*n+i,o=t.x2-e,a=t.y2-i,t.x2=o*n-a*s+e,t.y2=o*s+a*n+i,t}},function(t,e){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,e){t.exports=function(t,e,i,r){var n=Math.cos(r),s=Math.sin(r),o=t.x1-e,a=t.y1-i;return t.x1=o*n-a*s+e,t.y1=o*s+a*n+i,o=t.x2-e,a=t.y2-i,t.x2=o*n-a*s+e,t.y2=o*s+a*n+i,o=t.x3-e,a=t.y3-i,t.x3=o*n-a*s+e,t.y3=o*s+a*n+i,t}},function(t,e,i){t.exports={BUTTON_DOWN:i(1310),BUTTON_UP:i(1311),CONNECTED:i(1312),DISCONNECTED:i(1313),GAMEPAD_BUTTON_DOWN:i(1314),GAMEPAD_BUTTON_UP:i(1315)}},function(t,e,i){var r=i(17),n=i(156);t.exports=function(t,e){var i=void 0===t?n():r({},t);if(e)for(var s in e)void 0!==e[s]&&(i[s]=e[s]);return i}},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=i(408),u=new r({Extends:s,initialize:function(t,e,i,r){var n="xml";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var l={type:"xml",cache:t.cacheManager.xml,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new u(this,t[r]));else this.addFile(new u(this,t,e,i));return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r){var n="text",o="txt",l=t.cacheManager.text;if(h(e)){var u=e;e=a(u,"key"),i=a(u,"url"),r=a(u,"xhrSettings"),o=a(u,"extension",o),n=a(u,"type",n),l=a(u,"cache",l)}var c={type:n,cache:l,extension:o,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){t.exports={Acceleration:i(1368),Angular:i(1369),Bounce:i(1370),Debug:i(1371),Drag:i(1372),Enable:i(1373),Friction:i(1374),Gravity:i(1375),Immovable:i(1376),Mass:i(1377),OverlapCirc:i(523),OverlapRect:i(244),Pushable:i(1378),Size:i(1379),Velocity:i(1380)}},function(t,e){t.exports=function(t,e,i,r,n,s,o){void 0===s&&(s=!0),void 0===o&&(o=!1);var a=[],h=[],l=t.treeMinMax;if(l.minX=e,l.minY=i,l.maxX=e+r,l.maxY=i+n,o&&(h=t.staticTree.search(l)),s&&t.useTree)a=t.tree.search(l);else if(s){var u=t.bodies,c={position:{x:e,y:i},left:e,top:i,right:e+r,bottom:i+n,isCircle:!1},d=t.intersects;u.iterate((function(t){d(t,c)&&a.push(t)}))}return h.concat(a)}},function(t,e,i){t.exports={COLLIDE:i(1381),OVERLAP:i(1382),PAUSE:i(1383),RESUME:i(1384),TILE_COLLIDE:i(1385),TILE_OVERLAP:i(1386),WORLD_BOUNDS:i(1387),WORLD_STEP:i(1388)}},function(t,e,i){var r=i(62);t.exports=function(t,e,i,n){var s=0,o=t.deltaAbsX()+e.deltaAbsX()+n;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?(s=t.right-e.x)>o&&!i||!1===t.checkCollision.right||!1===e.checkCollision.left?s=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(-(s=t.x-e.width-e.x)>o&&!i||!1===t.checkCollision.left||!1===e.checkCollision.right?s=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=s,e.overlapX=s,s}},function(t,e,i){var r=i(62);t.exports=function(t,e,i,n){var s=0,o=t.deltaAbsY()+e.deltaAbsY()+n;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?(s=t.bottom-e.y)>o&&!i||!1===t.checkCollision.down||!1===e.checkCollision.up?s=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(-(s=t.y-e.bottom)>o&&!i||!1===t.checkCollision.up||!1===e.checkCollision.down?s=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=s,e.overlapY=s,s}},function(t,e){t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},function(t,e,i){t.exports={Bounce:i(1495),Collision:i(1496),Force:i(1497),Friction:i(1498),Gravity:i(1499),Mass:i(1500),Sensor:i(1501),SetBody:i(1502),Sleep:i(1503),Static:i(1520),Transform:i(1521),Velocity:i(1522)}},function(t,e){var i={};t.exports=i,i.create=function(t,e){var r=t.bodyA,n=t.bodyB,s={id:i.id(r,n),bodyA:r,bodyB:n,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||n.isSensor,timeCreated:e,timeUpdated:e,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(s,t,e),s},i.update=function(t,e,r){if(t.collision=e,e.collided){var n=e.supports,s=t.activeContacts,o=e.parentA,a=e.parentB;t.inverseMass=o.inverseMass+a.inverseMass,t.friction=Math.min(o.friction,a.friction),t.frictionStatic=Math.max(o.frictionStatic,a.frictionStatic),t.restitution=Math.max(o.restitution,a.restitution),t.slop=Math.max(o.slop,a.slop);for(var h=0;h<n.length;h++)s[h]=n[h].contact;var l=n.length;l<s.length&&(s.length=l),t.separation=e.depth,i.setActive(t,!0,r)}else!0===t.isActive&&i.setActive(t,!1,r)},i.setActive=function(t,e,i){e?(t.isActive=!0,t.timeUpdated=i):(t.isActive=!1,t.activeContacts.length=0)},i.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}},function(t,e,i){t.exports={CalculateFacesAt:i(252),CalculateFacesWithin:i(63),CheckIsoBounds:i(541),Copy:i(1420),CreateFromTiles:i(1421),CullBounds:i(543),CullTiles:i(544),Fill:i(1422),FilterTiles:i(1423),FindByIndex:i(1424),FindTile:i(1425),ForEachTile:i(1426),GetCullTilesFunction:i(1427),GetTileAt:i(158),GetTileAtWorldXY:i(1428),GetTilesWithin:i(26),GetTilesWithinShape:i(1429),GetTilesWithinWorldXY:i(529),GetTileToWorldXFunction:i(1430),GetTileToWorldXYFunction:i(1431),GetTileToWorldYFunction:i(1432),GetWorldToTileXFunction:i(1433),GetWorldToTileXYFunction:i(1434),GetWorldToTileYFunction:i(1435),HasTileAt:i(562),HasTileAtWorldXY:i(1436),HexagonalCullBounds:i(546),HexagonalCullTiles:i(545),HexagonalTileToWorldXY:i(550),HexagonalTileToWorldY:i(554),HexagonalWorldToTileXY:i(556),HexagonalWorldToTileY:i(560),IsInLayerBounds:i(119),IsometricCullTiles:i(547),IsometricTileToWorldXY:i(551),IsometricWorldToTileXY:i(557),PutTileAt:i(257),PutTileAtWorldXY:i(1437),PutTilesAt:i(1438),Randomize:i(1439),RemoveTileAt:i(563),RemoveTileAtWorldXY:i(1440),RenderDebug:i(1441),ReplaceByIndex:i(542),RunCull:i(159),SetCollision:i(1442),SetCollisionBetween:i(1443),SetCollisionByExclusion:i(1444),SetCollisionByProperty:i(1445),SetCollisionFromCollisionGroup:i(1446),SetLayerCollisionIndex:i(160),SetTileCollision:i(72),SetTileIndexCallback:i(1447),SetTileLocationCallback:i(1448),Shuffle:i(1449),StaggeredCullBounds:i(549),StaggeredCullTiles:i(548),StaggeredTileToWorldXY:i(552),StaggeredTileToWorldY:i(555),StaggeredWorldToTileXY:i(558),StaggeredWorldToTileY:i(561),SwapByIndex:i(1450),TileToWorldX:i(253),TileToWorldXY:i(553),TileToWorldY:i(254),WeightedRandomize:i(1451),WorldToTileX:i(255),WorldToTileXY:i(559),WorldToTileY:i(256)}},function(t,e,i){var r=i(158);t.exports=function(t,e,i){var n=r(t,e,!0,i),s=r(t,e-1,!0,i),o=r(t,e+1,!0,i),a=r(t-1,e,!0,i),h=r(t+1,e,!0,i),l=n&&n.collides;return l&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),s&&s.collides&&(l&&(n.faceTop=!1),s.faceBottom=!l),o&&o.collides&&(l&&(n.faceBottom=!1),o.faceTop=!l),a&&a.collides&&(l&&(n.faceLeft=!1),a.faceRight=!l),h&&h.collides&&(l&&(n.faceRight=!1),h.faceLeft=!l),n&&!n.collides&&n.resetFaces(),n}},function(t,e){t.exports=function(t,e,i){var r=i.baseTileWidth,n=i.tilemapLayer,s=0;return n&&(e||(e=n.scene.cameras.main),s=n.x+e.scrollX*(1-n.scrollFactorX),r*=n.scaleX),s+t*r}},function(t,e){t.exports=function(t,e,i){var r=i.baseTileHeight,n=i.tilemapLayer,s=0;return n&&(e||(e=n.scene.cameras.main),s=n.y+e.scrollY*(1-n.scrollFactorY),r*=n.scaleY),s+t*r}},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=!0);var n=r.baseTileWidth,s=r.tilemapLayer;return s&&(i||(i=s.scene.cameras.main),t-=s.x+i.scrollX*(1-s.scrollFactorX),n*=s.scaleX),e?Math.floor(t/n):t/n}},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=!0);var n=r.baseTileHeight,s=r.tilemapLayer;return s&&(i||(i=s.scene.cameras.main),t-=s.y+i.scrollY*(1-s.scrollFactorY),n*=s.scaleY),e?Math.floor(t/n):t/n}},function(t,e,i){var r=i(85),n=i(119),s=i(252),o=i(72);t.exports=function(t,e,i,a,h){if(void 0===a&&(a=!0),!n(e,i,h))return null;var l=h.data[i][e],u=l&&l.collides;if(t instanceof r)null===h.data[i][e]&&(h.data[i][e]=new r(h,t.index,e,i,h.tileWidth,h.tileHeight)),h.data[i][e].copy(t);else{var c=t;null===h.data[i][e]?h.data[i][e]=new r(h,c,e,i,h.tileWidth,h.tileHeight):h.data[i][e].index=c}var d=h.data[i][e],f=-1!==h.collideIndexes.indexOf(d.index);return o(d,f),a&&u!==d.collides&&s(e,i,h),d}},function(t,e,i){var r=i(29);t.exports=function(t){return"isometric"===(t=t.toLowerCase())?r.ISOMETRIC:"staggered"===t?r.STAGGERED:"hexagonal"===t?r.HEXAGONAL:r.ORTHOGONAL}},function(t,e,i){var r=i(40),n=i(120),s=i(121),o=i(85);t.exports=function(t,e,i,a,h){for(var l=new n({tileWidth:i,tileHeight:a}),u=new s({name:t,tileWidth:i,tileHeight:a,format:r.ARRAY_2D,layers:[l]}),c=[],d=e.length,f=0,p=0;p<e.length;p++){c[p]=[];for(var g=e[p],v=0;v<g.length;v++){var m=parseInt(g[v],10);isNaN(m)||-1===m?c[p][v]=h?null:new o(l,-1,v,p,i,a):c[p][v]=new o(l,m,v,p,i,a)}0===f&&(f=g.length)}return u.width=l.width=f,u.height=l.height=d,u.widthInPixels=l.widthInPixels=f*i,u.heightInPixels=l.heightInPixels=d*a,l.data=c,u}},function(t,e,i){var r=i(571),n=i(261),s=function(t){return{x:t.x,y:t.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var a=r(t,o);if(a.x+=e,a.y+=i,t.gid){var h=n(t.gid);a.gid=h.gid,a.flippedHorizontal=h.flippedHorizontal,a.flippedVertical=h.flippedVertical,a.flippedAntiDiagonal=h.flippedAntiDiagonal}else t.polyline?a.polyline=t.polyline.map(s):t.polygon?a.polygon=t.polygon.map(s):t.ellipse?a.ellipse=t.ellipse:t.text?a.text=t.text:t.point?a.point=!0:a.rectangle=!0;return a}},function(t,e){t.exports=function(t){var e=Boolean(2147483648&t),i=Boolean(1073741824&t),r=Boolean(536870912&t);t&=536870911;var n=0,s=!1;return e&&i&&r?(n=Math.PI/2,s=!0):e&&i&&!r?(n=Math.PI,s=!1):e&&!i&&r?(n=Math.PI/2,s=!1):!e||i||r?!e&&i&&r?(n=3*Math.PI/2,s=!1):e||!i||r?e||i||!r?e||i||r||(n=0,s=!1):(n=3*Math.PI/2,s=!0):(n=Math.PI,s=!0):(n=0,s=!0),{gid:t,flippedHorizontal:e,flippedVertical:i,flippedAntiDiagonal:r,rotation:n,flipped:s}}},function(t,e,i){var r=i(40),n=i(121),s=i(564),o=i(580);t.exports=function(t,e,i,a,h,l,u,c){void 0===i&&(i=32),void 0===a&&(a=32),void 0===h&&(h=10),void 0===l&&(l=10),void 0===c&&(c=!1);var d=null;if(Array.isArray(u))d=s(void 0!==e?e:"map",r.ARRAY_2D,u,i,a,c);else if(void 0!==e){var f=t.cache.tilemap.get(e);f?d=s(e,f.format,f.data,i,a,c):console.warn("No map data found for key "+e)}return null===d&&(d=new n({tileWidth:i,tileHeight:a,width:h,height:l})),new o(t,d)}},function(t,e,i){var r=i(6);t.exports=function(t){var e=r(t,"targets",null);return null===e||("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e])),e}},function(t,e){function i(t){return!!t.getActive&&"function"==typeof t.getActive}function r(t){return!!t.getStart&&"function"==typeof t.getStart}function n(t){return!!t.getEnd&&"function"==typeof t.getEnd}var s=function(t,e){var o,a,h=function(t,e,i){return i},l=function(t,e,i){return i},u=null,c=typeof e;if("number"===c)h=function(){return e};else if("string"===c){var d=e[0],f=parseFloat(e.substr(2));switch(d){case"+":h=function(t,e,i){return i+f};break;case"-":h=function(t,e,i){return i-f};break;case"*":h=function(t,e,i){return i*f};break;case"/":h=function(t,e,i){return i/f};break;default:h=function(){return parseFloat(e)}}}else if("function"===c)h=e;else if("object"===c)if(r(a=e)||n(a)||i(a))i(e)&&(u=e.getActive),n(e)&&(h=e.getEnd),r(e)&&(l=e.getStart);else if(e.hasOwnProperty("value"))o=s(t,e.value);else{var p=e.hasOwnProperty("to"),g=e.hasOwnProperty("from"),v=e.hasOwnProperty("start");if(p&&(g||v)){if(o=s(t,e.to),v){var m=s(t,e.start);o.getActive=m.getEnd}if(g){var y=s(t,e.from);o.getStart=y.getEnd}}}return o||(o={getActive:u,getEnd:h,getStart:l}),o};t.exports=s},function(t,e){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,e,i){var r=i(0),n=i(9),s=i(267),o=i(16),a=i(5),h=i(100),l=i(14),u=new r({Extends:n,initialize:function(t,e,i){n.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=e,this.totalData=e.length,this.targets=i,this.totalTargets=i.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=h.PENDING_ADD,this._pausedState=h.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},isPaused:function(){return this.state===h.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,i){void 0===i&&(i=!1);for(var r=0;r<this.totalData;r++){var n=this.data[r];n.key===t&&(n.end=e,i&&(n.start=n.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===h.ACTIVE?this.seek(0):this.state===h.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===h.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,e=l.MAX_SAFE_INTEGER,i=this.data,r=0;r<this.totalData;r++){var n=i[r];n.t1=n.duration+n.hold,n.yoyo&&(n.t1+=n.duration),n.t2=n.t1+n.repeatDelay,n.totalDuration=n.delay+n.t1,-1===n.repeat?n.totalDuration+=999999999999*n.t2:n.repeat>0&&(n.totalDuration+=n.t2*n.repeat),n.totalDuration>t&&(t=n.totalDuration),n.delay<e&&(e=n.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=e},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=h.PENDING_ADD,this._pausedState=h.INIT,!1;for(var t=this.data,e=this.totalTargets,i=0;i<this.totalData;i++){var r=t[i],n=r.target,s=r.gen,o=r.key,a=r.index;r.delay=s.delay(n,o,0,a,e,this),r.duration=Math.max(s.duration(n,o,0,a,e,this),.001),r.hold=s.hold(n,o,0,a,e,this),r.repeat=s.repeat(n,o,0,a,e,this),r.repeatDelay=s.repeatDelay(n,o,0,a,e,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=h.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===h.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED),this},play:function(t){void 0===t&&(t=!1);var e=this.state;return e!==h.INIT||this.parentIsTimeline?e===h.ACTIVE||e===h.PENDING_ADD&&this._pausedState===h.PENDING_ADD?this:this.parentIsTimeline||e!==h.PENDING_REMOVE&&e!==h.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=h.ACTIVE:(this.countdown=this.calculatedOffset,this.state=h.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=h.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=h.ACTIVE,this)},resetTweenData:function(t){for(var e=this.data,i=this.totalData,r=this.totalTargets,n=0;n<i;n++){var s=e[n],o=s.target,a=s.key,l=s.index;s.progress=0,s.elapsed=0,s.repeatCounter=-1===s.repeat?999999999999:s.repeat,t?(s.start=s.getStartValue(o,a,s.start,l,r,this),s.end=s.getEndValue(o,a,s.end,l,r,this),s.current=s.start,s.state=h.PLAYING_FORWARD):s.state=h.PENDING_RENDER,s.delay>0&&(s.elapsed=s.delay,s.state=h.DELAY),s.getActiveValue&&(o[a]=s.getActiveValue(s.target,s.key,s.start))}},resume:function(){return this.state===h.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,e){void 0===e&&(e=16.6),this.state===h.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var i=this.data,r=this.totalTargets,n=0;n<this.totalData;n++){var s=i[n],o=s.target,a=s.gen,l=s.key,u=s.index;s.progress=0,s.elapsed=0,s.repeatCounter=-1===s.repeat?999999999999:s.repeat,s.delay=a.delay(o,l,0,u,r,this),s.duration=Math.max(a.duration(o,l,0,u,r,this),.001),s.hold=a.hold(o,l,0,u,r,this),s.repeat=a.repeat(o,l,0,u,r,this),s.repeatDelay=a.repeatDelay(o,l,0,u,r,this),s.current=s.start,s.state=h.PLAYING_FORWARD,this.updateTweenData(this,s,0,u,r),s.delay>0&&(s.elapsed=s.delay,s.state=h.DELAY)}this.calcDuration();var c=!1;this.state===h.PAUSED&&(c=!0,this.state=h.ACTIVE),this.isSeeking=!0;do{this.update(0,e)}while(this.totalProgress<t);return this.isSeeking=!1,c&&(this.state=h.PAUSED),this},setCallback:function(t,e,i,r){return this.callbacks[t]={func:e,scope:r,params:i},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=h.COMPLETE_DELAY,this.countdown=t):(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===h.ACTIVE&&void 0!==t&&this.seek(t),this.state!==h.REMOVED&&(this.state!==h.PAUSED&&this.state!==h.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(s.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=h.PENDING_REMOVE),this},update:function(t,e){if(this.state===h.PAUSED)return!1;switch(this.useFrames&&(e=1*this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var i=!1,r=0;r<this.totalData;r++){var n=this.data[r];this.updateTweenData(this,n,e)&&(i=!0)}i||this.nextState();break;case h.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case h.OFFSET_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.ACTIVE);break;case h.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===h.PENDING_REMOVE},dispatchTweenDataEvent:function(t,e,i){this.isSeeking||(this.emit(t,this,i.key,i.target,i.current,i.previous),e&&(e.params[1]=i.target,e.func.apply(e.scope,e.params)))},dispatchTweenEvent:function(t,e){this.isSeeking||(this.emit(t,this,this.targets),e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)))},setStateFromEnd:function(t,e,i){return e.yoyo?(e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,t.callbacks.onYoyo,e),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),h.PLAYING_BACKWARD):e.repeatCounter>0?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},setStateFromStart:function(t,e,i){return e.repeatCounter>0?(e.repeatCounter--,e.elapsed=i,e.progress=i/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-i,e.current=e.start,e.target[e.key]=e.current,h.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e),h.PLAYING_FORWARD)):h.COMPLETE},updateTweenData:function(t,e,i){var r=e.target;switch(e.state){case h.PLAYING_FORWARD:case h.PLAYING_BACKWARD:if(!r){e.state=h.COMPLETE;break}var n=e.elapsed,o=e.duration,a=0;(n+=i)>o&&(a=n-o,n=o);var l=e.state===h.PLAYING_FORWARD,u=n/o;if(e.elapsed=n,e.progress=u,e.previous=e.current,1===u)l?(e.current=e.end,r[e.key]=e.end,e.hold>0?(e.elapsed=e.hold-a,e.state=h.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,a)):(e.current=e.start,r[e.key]=e.start,e.state=this.setStateFromStart(t,e,a));else{var c=l?e.ease(u):e.ease(1-u);e.current=e.start+(e.end-e.start)*c,r[e.key]=e.current}this.dispatchTweenDataEvent(s.TWEEN_UPDATE,t.callbacks.onUpdate,e);break;case h.DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PENDING_RENDER);break;case h.REPEAT_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=h.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,t.callbacks.onRepeat,e));break;case h.HOLD_DELAY:e.elapsed-=i,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case h.PENDING_RENDER:r?(e.start=e.getStartValue(r,e.key,r[e.key],e.index,t.totalTargets,t),e.end=e.getEndValue(r,e.key,e.start,e.index,t.totalTargets,t),e.current=e.start,r[e.key]=e.start,e.state=h.PLAYING_FORWARD):e.state=h.COMPLETE}return e.state!==h.COMPLETE}});u.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],a.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),o.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=u},function(t,e,i){t.exports={TIMELINE_COMPLETE:i(1466),TIMELINE_LOOP:i(1467),TIMELINE_PAUSE:i(1468),TIMELINE_RESUME:i(1469),TIMELINE_START:i(1470),TIMELINE_UPDATE:i(1471),TWEEN_ACTIVE:i(1472),TWEEN_COMPLETE:i(1473),TWEEN_LOOP:i(1474),TWEEN_REPEAT:i(1475),TWEEN_START:i(1476),TWEEN_STOP:i(1477),TWEEN_UPDATE:i(1478),TWEEN_YOYO:i(1479)}},function(t,e){t.exports=function(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p){return{target:t,index:e,key:i,getActiveValue:s,getEndValue:r,getStartValue:n,ease:o,duration:0,totalDuration:0,delay:0,yoyo:l,hold:0,repeat:0,repeatDelay:0,flipX:f,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:a,duration:h,hold:u,repeat:c,repeatDelay:d},state:0}}},function(t,e,i){var r=i(68);t.exports=function(t){return r(t,-Math.PI,Math.PI)}},function(t,e,i){var r=i(68);t.exports=function(t){return r(t,-180,180)}},function(t,e,i){var r={};t.exports=r;var n=i(83),s=i(32);r.fromVertices=function(t){for(var e={},i=0;i<t.length;i++){var r=(i+1)%t.length,o=n.normalise({x:t[r].y-t[i].y,y:t[i].x-t[r].x}),a=0===o.y?1/0:o.x/o.y;e[a=a.toFixed(3).toString()]=o}return s.values(e)},r.rotate=function(t,e){if(0!==e)for(var i=Math.cos(e),r=Math.sin(e),n=0;n<t.length;n++){var s,o=t[n];s=o.x*i-o.y*r,o.y=o.x*r+o.y*i,o.x=s}}},function(t,e,i){t.exports={AFTER_ADD:i(1504),AFTER_REMOVE:i(1505),AFTER_UPDATE:i(1506),BEFORE_ADD:i(1507),BEFORE_REMOVE:i(1508),BEFORE_UPDATE:i(1509),COLLISION_ACTIVE:i(1510),COLLISION_END:i(1511),COLLISION_START:i(1512),DRAG_END:i(1513),DRAG:i(1514),DRAG_START:i(1515),PAUSE:i(1516),RESUME:i(1517),SLEEP_END:i(1518),SLEEP_START:i(1519)}},function(t,e,i){var r={};t.exports=r;var n=i(274),s=i(250),o=i(84);r.collisions=function(t,e){for(var i=[],a=e.pairs.table,h=e.metrics,l=0;l<t.length;l++){var u=t[l][0],c=t[l][1];if((!u.isStatic&&!u.isSleeping||!c.isStatic&&!c.isSleeping)&&r.canCollide(u.collisionFilter,c.collisionFilter)&&(h.midphaseTests+=1,o.overlaps(u.bounds,c.bounds)))for(var d=u.parts.length>1?1:0;d<u.parts.length;d++)for(var f=u.parts[d],p=c.parts.length>1?1:0;p<c.parts.length;p++){var g=c.parts[p];if(f===u&&g===c||o.overlaps(f.bounds,g.bounds)){var v,m=a[s.id(f,g)];v=m&&m.isActive?m.collision:null;var y=n.collides(f,g,v);h.narrowphaseTests+=1,y.reused&&(h.narrowReuseCount+=1),y.collided&&(i.push(y),h.narrowDetections+=1)}}}return i},r.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!=(t.mask&e.category)&&0!=(e.mask&t.category)}},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(83);r.collides=function(t,e,i){var o,a,h,l,u=!1;if(i){var c=t.parent,d=e.parent,f=c.speed*c.speed+c.angularSpeed*c.angularSpeed+d.speed*d.speed+d.angularSpeed*d.angularSpeed;u=i&&i.collided&&f<.2,l=i}else l={collided:!1,bodyA:t,bodyB:e};if(i&&u){var p=l.axisBody,g=p===t?e:t,v=[p.axes[i.axisNumber]];if(h=r._overlapAxes(p.vertices,g.vertices,v),l.reused=!0,h.overlap<=0)return l.collided=!1,l}else{if((o=r._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return l.collided=!1,l;if((a=r._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return l.collided=!1,l;o.overlap<a.overlap?(h=o,l.axisBody=t):(h=a,l.axisBody=e),l.axisNumber=h.axisNumber}l.bodyA=t.id<e.id?t:e,l.bodyB=t.id<e.id?e:t,l.collided=!0,l.depth=h.overlap,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent,t=l.bodyA,e=l.bodyB,s.dot(h.axis,s.sub(e.position,t.position))<0?l.normal={x:h.axis.x,y:h.axis.y}:l.normal={x:-h.axis.x,y:-h.axis.y},l.tangent=s.perp(l.normal),l.penetration=l.penetration||{},l.penetration.x=l.normal.x*l.depth,l.penetration.y=l.normal.y*l.depth;var m=r._findSupports(t,e,l.normal),y=[];if(n.contains(t.vertices,m[0])&&y.push(m[0]),n.contains(t.vertices,m[1])&&y.push(m[1]),y.length<2){var x=r._findSupports(e,t,s.neg(l.normal));n.contains(e.vertices,x[0])&&y.push(x[0]),y.length<2&&n.contains(e.vertices,x[1])&&y.push(x[1])}return y.length<1&&(y=[m[0]]),l.supports=y,l},r._overlapAxes=function(t,e,i){for(var n,o,a=s._temp[0],h=s._temp[1],l={overlap:Number.MAX_VALUE},u=0;u<i.length;u++){if(o=i[u],r._projectToAxis(a,t,o),r._projectToAxis(h,e,o),(n=Math.min(a.max-h.min,h.max-a.min))<=0)return l.overlap=n,l;n<l.overlap&&(l.overlap=n,l.axis=o,l.axisNumber=u)}return l},r._projectToAxis=function(t,e,i){for(var r=s.dot(e[0],i),n=r,o=1;o<e.length;o+=1){var a=s.dot(e[o],i);a>n?n=a:a<r&&(r=a)}t.min=r,t.max=n},r._findSupports=function(t,e,i){for(var r,n,o,a,h=Number.MAX_VALUE,l=s._temp[0],u=e.vertices,c=t.position,d=0;d<u.length;d++)n=u[d],l.x=n.x-c.x,l.y=n.y-c.y,(r=-s.dot(i,l))<h&&(h=r,o=n);return n=u[o.index-1>=0?o.index-1:u.length-1],l.x=n.x-c.x,l.y=n.y-c.y,h=-s.dot(i,l),a=n,n=u[(o.index+1)%u.length],l.x=n.x-c.x,l.y=n.y-c.y,(r=-s.dot(i,l))<h&&(a=n),[o,a]}},function(t,e,i){t.exports={AlignTo:i(601),Angle:i(602),Call:i(603),GetFirst:i(604),GetLast:i(605),GridAlign:i(606),IncAlpha:i(678),IncX:i(679),IncXY:i(680),IncY:i(681),PlaceOnCircle:i(682),PlaceOnEllipse:i(683),PlaceOnLine:i(684),PlaceOnRectangle:i(685),PlaceOnTriangle:i(686),PlayAnimation:i(687),PropertyValueInc:i(46),PropertyValueSet:i(27),RandomCircle:i(688),RandomEllipse:i(689),RandomLine:i(690),RandomRectangle:i(691),RandomTriangle:i(692),Rotate:i(693),RotateAround:i(694),RotateAroundDistance:i(695),ScaleX:i(696),ScaleXY:i(697),ScaleY:i(698),SetAlpha:i(699),SetBlendMode:i(700),SetDepth:i(701),SetHitArea:i(702),SetOrigin:i(703),SetRotation:i(704),SetScale:i(705),SetScaleX:i(706),SetScaleY:i(707),SetScrollFactor:i(708),SetScrollFactorX:i(709),SetScrollFactorY:i(710),SetTint:i(711),SetVisible:i(712),SetX:i(713),SetXY:i(714),SetY:i(715),ShiftPosition:i(716),Shuffle:i(717),SmootherStep:i(718),SmoothStep:i(719),Spread:i(720),ToggleVisible:i(721),WrapInRectangle:i(722)}},function(t,e,i){var r=i(123),n=[];n[r.BOTTOM_CENTER]=i(277),n[r.BOTTOM_LEFT]=i(278),n[r.BOTTOM_RIGHT]=i(279),n[r.LEFT_BOTTOM]=i(280),n[r.LEFT_CENTER]=i(281),n[r.LEFT_TOP]=i(282),n[r.RIGHT_BOTTOM]=i(283),n[r.RIGHT_CENTER]=i(284),n[r.RIGHT_TOP]=i(285),n[r.TOP_CENTER]=i(286),n[r.TOP_LEFT]=i(287),n[r.TOP_RIGHT]=i(288),t.exports=function(t,e,i,r,s){return n[i](t,e,r,s)}},function(t,e,i){var r=i(42),n=i(87),s=i(88),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)+i),o(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(43),s=i(53),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)-i),o(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(44),s=i(54),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,n(e)+i),o(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(43),s=i(55),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)+a),t}},function(t,e,i){var r=i(89),n=i(43),s=i(90),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)+a),t}},function(t,e,i){var r=i(43),n=i(45),s=i(54),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)-i),o(t,n(e)-a),t}},function(t,e,i){var r=i(42),n=i(44),s=i(55),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(89),n=i(44),s=i(90),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(44),n=i(45),s=i(53),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)+i),o(t,n(e)-a),t}},function(t,e,i){var r=i(87),n=i(45),s=i(55),o=i(88);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)-a),t}},function(t,e,i){var r=i(43),n=i(45),s=i(55),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)-i),s(t,n(e)-a),t}},function(t,e,i){var r=i(44),n=i(45),s=i(55),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,r(e)+i),s(t,n(e)-a),t}},function(t,e,i){var r=i(123),n=[];n[r.BOTTOM_CENTER]=i(290),n[r.BOTTOM_LEFT]=i(291),n[r.BOTTOM_RIGHT]=i(292),n[r.CENTER]=i(293),n[r.LEFT_CENTER]=i(295),n[r.RIGHT_CENTER]=i(296),n[r.TOP_CENTER]=i(297),n[r.TOP_LEFT]=i(298),n[r.TOP_RIGHT]=i(299),n[r.LEFT_BOTTOM]=n[r.BOTTOM_LEFT],n[r.LEFT_TOP]=n[r.TOP_LEFT],n[r.RIGHT_BOTTOM]=n[r.BOTTOM_RIGHT],n[r.RIGHT_TOP]=n[r.TOP_RIGHT],t.exports=function(t,e,i,r,s){return n[i](t,e,r,s)}},function(t,e,i){var r=i(42),n=i(87),s=i(55),o=i(88);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(43),s=i(55),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)+a),t}},function(t,e,i){var r=i(42),n=i(44),s=i(55),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(294),n=i(87),s=i(89);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)+i,s(e)+o),t}},function(t,e,i){var r=i(88),n=i(90);t.exports=function(t,e,i){return r(t,e),n(t,i)}},function(t,e,i){var r=i(89),n=i(43),s=i(90),o=i(53);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)-i),s(t,r(e)+a),t}},function(t,e,i){var r=i(89),n=i(44),s=i(90),o=i(54);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),o(t,n(e)+i),s(t,r(e)+a),t}},function(t,e,i){var r=i(87),n=i(45),s=i(88),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)+i),o(t,n(e)-a),t}},function(t,e,i){var r=i(43),n=i(45),s=i(53),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)-i),o(t,n(e)-a),t}},function(t,e,i){var r=i(44),n=i(45),s=i(54),o=i(52);t.exports=function(t,e,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),s(t,r(e)+i),o(t,n(e)-a),t}},function(t,e,i){var r=i(169),n=i(98),s=i(14),o=i(4);t.exports=function(t,e,i){void 0===i&&(i=new o);var a=n(e,0,s.PI2);return r(t,a,i)}},function(t,e,i){var r=i(302),n=i(169),s=i(98),o=i(14);t.exports=function(t,e,i,a){void 0===a&&(a=[]),!e&&i>0&&(e=r(t)/i);for(var h=0;h<e;h++){var l=s(h/e,0,o.PI2);a.push(n(t,l))}return a}},function(t,e){t.exports=function(t){return Math.PI*t.radius*2}},function(t,e,i){var r=i(18),n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=r(t,0,1);this._alpha=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=n},function(t,e,i){var r=i(35),n={_blendMode:r.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=r[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=n},function(t,e){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,e,i){var r=i(171),n=i(130);t.exports=function(t,e,i,s){void 0===s&&(s=[]),!e&&i>0&&(e=n(t)/i);for(var o=0;o<e;o++){var a=o/e;s.push(r(t,a))}return s}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){return void 0===i&&(i=new r),i.x=t.x1+(t.x2-t.x1)*e,i.y=t.y1+(t.y2-t.y1)*e,i}},function(t,e){t.exports=function(t,e,i,r){var n=Math.cos(r),s=Math.sin(r),o=t.x-e,a=t.y-i;return t.x=o*n-a*s+e,t.y=o*s+a*n+i,t}},function(t,e,i){var r=i(310),n=i(311),s={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new r(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new n(this.scene,t)}};t.exports=s},function(t,e,i){var r=i(0),n=i(22),s=i(91),o=new r({initialize:function(t,e){var i=t.sys.renderer;this.renderer=i,this.bitmapMask=e,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(n.CONTEXT_RESTORED,this.createMask,this),i&&i.on(s.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var e=t.width,i=t.height,r=0==(e&e-1)&&0==(i&i-1),n=t.gl,s=r?n.REPEAT:n.CLAMP_TO_EDGE,o=n.LINEAR;this.mainTexture=t.createTexture2D(0,o,o,s,s,n.RGBA,null,e,i),this.maskTexture=t.createTexture2D(0,o,o,s,s,n.RGBA,null,e,i),this.mainFramebuffer=t.createFramebuffer(e,i,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(e,i,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,i){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,i)},postRenderWebGL:function(t,e){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(s.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=o},function(t,e,i){var r=new(i(0))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,i){var r=t.gl;t.flush(),0===t.maskStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:i}),this.applyStencil(t,i,!0),t.maskCount++},applyStencil:function(t,e,i){var r=t.gl,n=this.geometryMask,s=t.maskCount;r.colorMask(!1,!1,!1,!1),i?(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),n.renderWebGL(t,n,e),t.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),i?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,s+1,255):r.stencilFunc(r.EQUAL,s+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,s,255):r.stencilFunc(r.EQUAL,s,255)},postRenderWebGL:function(t){var e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var i=t.currentMask;if(0===t.maskStack.length)i.mask=null,e.disable(e.STENCIL_TEST);else{var r=t.maskStack[t.maskStack.length-1];r.mask.applyStencil(t,r.camera,!1),t.currentCameraMask.mask!==r.mask?(i.mask=r.mask,i.camera=r.camera):i.mask=null}},preRenderCanvas:function(t,e,i){var r=this.geometryMask;t.currentContext.save(),r.renderCanvas(t,r,i,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=r},function(t,e){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},function(t,e,i){var r=i(14),n=i(25),s=i(177),o=i(269),a=i(270),h=i(3),l={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return a(this._rotation*r.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*r.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=o(t)}},setPosition:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.z=i,this.w=r,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),this.x=t+Math.random()*i,this.y=e+Math.random()*r,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new n),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new n),void 0===e&&(e=new n);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)e.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),e.multiply(t,t),i=i.parentContainer;return t},getLocalPoint:function(t,e,i,r){i||(i=new h),r||(r=this.scene.sys.cameras.main);var n=r.scrollX,o=r.scrollY,a=t+n*this.scrollFactorX-n,l=e+o*this.scrollFactorY-o;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,l,i):s(a,l,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=l},function(t,e){t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},function(t,e,i){t.exports={CHANGE_DATA:i(638),CHANGE_DATA_KEY:i(639),DESTROY:i(640),REMOVE_DATA:i(641),SET_DATA:i(642)}},function(t,e,i){var r=i(130),n=i(4);t.exports=function(t,e,i,s){if(void 0===s&&(s=[]),!e&&!i)return s;e?i=Math.round(r(t)/e):e=r(t)/i;for(var o=t.x,a=t.y,h=0,l=0;l<i;l++)switch(s.push(new n(o,a)),h){case 0:(o+=e)>=t.right&&(h=1,a+=o-t.right,o=t.right);break;case 1:(a+=e)>=t.bottom&&(h=2,o-=a-t.bottom,a=t.bottom);break;case 2:(o-=e)<=t.left&&(h=3,a-=t.left-o,o=t.left);break;case 3:(a-=e)<=t.top&&(h=0,a=t.top)}return s}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=[]);var r=Math.round(t.x1),n=Math.round(t.y1),s=Math.round(t.x2),o=Math.round(t.y2),a=Math.abs(s-r),h=Math.abs(o-n),l=r<s?1:-1,u=n<o?1:-1,c=a-h;i.push({x:r,y:n});for(var d=1;r!==s||n!==o;){var f=c<<1;f>-h&&(c-=h,r+=l),f<a&&(c+=a,n+=u),d%e==0&&i.push({x:r,y:n}),d++}return i}},function(t,e){t.exports=function(t,e,i){if(!e.length)return NaN;if(1===e.length)return e[0];var r,n,s=1;if(i){if(t<e[0][i])return e[0];for(;e[s][i]<t;)s++}else for(;e[s]<t;)s++;return s>e.length&&(s=e.length),i?(r=e[s-1][i],(n=e[s][i])-t<=t-r?e[s]:e[s-1]):(r=e[s-1],(n=e[s])-t<=t-r?n:r)}},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n){void 0===n&&(n=!1),this.textureKey=t,this.textureFrame=e,this.index=i,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=n},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=r},function(t,e){t.exports=function(t){var e=/\D/g;return t.sort((function(t,i){return parseInt(t.replace(e,""),10)-parseInt(i.replace(e,""),10)})),t}},function(t,e,i){var r=i(185),n=i(0),s=i(102),o=i(9),a=i(132),h=i(22),l=i(2),u=i(6),c=i(186),d=i(322),f=new n({Extends:o,initialize:function(t){o.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.mixes=new s,this.paused=!1,this.name="AnimationManager",t.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},addMix:function(t,e,i){var r=this.anims,n=this.mixes,s="string"==typeof t?t:t.key,o="string"==typeof e?e:e.key;if(r.has(s)&&r.has(o)){var a=n.get(s);a||(a={}),a[o]=i,n.set(s,a)}return this},removeMix:function(t,e){var i=this.mixes,r="string"==typeof t?t:t.key,n=i.get(r);if(n)if(e){var s="string"==typeof e?e:e.key;n.hasOwnProperty(s)&&delete n[s]}else e||i.delete(r);return this},getMix:function(t,e){var i=this.mixes,r="string"==typeof t?t:t.key,n="string"==typeof e?e:e.key,s=i.get(r);return s&&s.hasOwnProperty(n)?s[n]:0},add:function(t,e){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(e.key=t,this.anims.set(t,e),this.emit(a.ADD_ANIMATION,t,e),this)},exists:function(t){return this.anims.has(t)},createFromAseprite:function(t,e){var i=[],r=this.game.cache.json.get(t);if(!r)return i;var n=this,s=u(r,"meta",null),o=u(r,"frames",null);return s&&o&&u(s,"frameTags",[]).forEach((function(r){var s=[],a=l(r,"name",null),h=l(r,"from",0),u=l(r,"to",0),c=l(r,"direction","forward");if(a&&(!e||e&&e.indexOf(a)>-1)){for(var d=[],f=Number.MAX_SAFE_INTEGER,p=h;p<=u;p++){var g=p.toString(),v=o[g];if(v){var m=l(v,"duration",Number.MAX_SAFE_INTEGER);m<f&&(f=m),d.push({frame:g,duration:m})}}d.forEach((function(e){s.push({key:t,frame:e.frame,duration:f-e.duration})}));var y=f*s.length;"reverse"===c&&(s=s.reverse());var x={key:a,frames:s,duration:y,yoyo:"pingpong"===c},b=n.create(x);b&&i.push(b)}})),i},create:function(t){var e=t.key,i=!1;return e&&((i=this.get(e))||(i=new r(this,e,t),this.anims.set(e,i),this.emit(a.ADD_ANIMATION,e,i))),i},fromJSON:function(t,e){void 0===e&&(e=!1),e&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var i=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var r=0;r<t.anims.length;r++)i.push(this.create(t.anims[r]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&i.push(this.create(t));return i},generateFrameNames:function(t,e){var i,r=u(e,"prefix",""),n=u(e,"start",0),s=u(e,"end",0),o=u(e,"suffix",""),a=u(e,"zeroPad",0),h=u(e,"outputArray",[]),l=u(e,"frames",!1),f=this.textureManager.get(t);if(!f)return h;if(e)for(l||(l=d(n,s)),i=0;i<l.length;i++){var p=r+c(l[i],a,"0",1)+o;f.has(p)?h.push({key:t,frame:p}):console.warn("generateFrameNames: Frame missing: "+p+" from texture: "+t)}else for(l=f.getFrameNames(),i=0;i<l.length;i++)h.push({key:t,frame:l[i]});return h},generateFrameNumbers:function(t,e){var i=u(e,"start",0),r=u(e,"end",-1),n=u(e,"first",!1),s=u(e,"outputArray",[]),o=u(e,"frames",!1),a=this.textureManager.get(t);if(!a)return s;n&&a.has(n)&&s.push({key:t,frame:n}),o||(-1===r&&(r=a.frameTotal-2),o=d(i,r));for(var h=0;h<o.length;h++)a.has(o[h])?s.push({key:t,frame:o[h]}):console.warn("generateFrameNumbers: Frame "+h+" missing from texture: "+t);return s},get:function(t){return this.anims.get(t)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)e[i].anims.play(t);return this},staggerPlay:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=!0),Array.isArray(e)||(e=[e]);var n=e.length;r||n--;for(var s=0;s<e.length;s++){var o=i<0?Math.abs(i)*(n-s):i*s;e[s].anims.playAfterDelay(t,o)}return this},remove:function(t){var e=this.get(t);return e&&(this.emit(a.REMOVE_ANIMATION,t,e),this.anims.delete(t),this.removeMix(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(t){var e={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?e.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,i){e.anims.push(i.toJSON())})),e},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=f},function(t,e){t.exports=function(t,e,i,r){var n,s=[],o=!1;if((i||r)&&(o=!0,i||(i=""),r||(r="")),e<t)for(n=t;n>=e;n--)o?s.push(i+n.toString()+r):s.push(n);else for(n=t;n<=e;n++)o?s.push(i+n.toString()+r):s.push(n);return s}},function(t,e,i){var r=i(0),n=i(102),s=i(9),o=i(324),a=new r({initialize:function(){this.entries=new n,this.events=new s},add:function(t,e){return this.entries.set(t,e),this.events.emit(o.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(o.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=a},function(t,e,i){t.exports={ADD:i(736),REMOVE:i(737)}},function(t,e,i){var r=i(323),n=i(0),s=i(22),o=new n({initialize:function(t){this.game=t,this.binary=new r,this.bitmapFont=new r,this.json=new r,this.physics=new r,this.shader=new r,this.audio=new r,this.video=new r,this.text=new r,this.html=new r,this.obj=new r,this.tilemap=new r,this.xml=new r,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new r),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<t.length;e++)this[t[e]].destroy(),this[t[e]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});t.exports=o},function(t,e,i){var r=i(133),n=i(190),s=i(18),o=i(0),a=i(11),h=i(333),l=i(37),u=i(135),c=i(10),d=i(3),f=new o({Extends:r,Mixins:[a.Flip,a.Tint,a.Pipeline],initialize:function(t,e,i,n){r.call(this,t,e,i,n),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new h.Fade(this),this.flashEffect=new h.Flash(this),this.shakeEffect=new h.Shake(this),this.panEffect=new h.Pan(this),this.rotateToEffect=new h.RotateTo(this),this.zoomEffect=new h.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null},setDeadzone:function(t,e){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new c(0,0,t,e),this._follow){var i=this.width/2,r=this.height/2,s=this._follow.x-this.followOffset.x,o=this._follow.y-this.followOffset.y;this.midPoint.set(s,o),this.scrollX=s-i,this.scrollY=o-r}n(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,e,i,r,n,s){return this.fadeEffect.start(!1,t,e,i,r,!0,n,s)},fadeOut:function(t,e,i,r,n,s){return this.fadeEffect.start(!0,t,e,i,r,!0,n,s)},fadeFrom:function(t,e,i,r,n,s,o){return this.fadeEffect.start(!1,t,e,i,r,n,s,o)},fade:function(t,e,i,r,n,s,o){return this.fadeEffect.start(!0,t,e,i,r,n,s,o)},flash:function(t,e,i,r,n,s,o){return this.flashEffect.start(t,e,i,r,n,s,o)},shake:function(t,e,i,r,n){return this.shakeEffect.start(t,e,i,r,n)},pan:function(t,e,i,r,n,s,o){return this.panEffect.start(t,e,i,r,n,s,o)},rotateTo:function(t,e,i,r,n,s,o){return this.rotateToEffect.start(t,e,i,r,n,s,o)},zoomTo:function(t,e,i,r,n,s){return this.zoomEffect.start(t,e,i,r,n,s)},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,r=.5*e,s=this.zoom,o=this.matrix,a=t*this.originX,h=e*this.originY,c=this._follow,d=this.deadzone,f=this.scrollX,p=this.scrollY;d&&n(d,this.midPoint.x,this.midPoint.y);var g=!1;if(c&&!this.panEffect.isRunning){var v=c.x-this.followOffset.x,m=c.y-this.followOffset.y;d?(v<d.x?f=u(f,f-(d.x-v),this.lerp.x):v>d.right&&(f=u(f,f+(v-d.right),this.lerp.x)),m<d.y?p=u(p,p-(d.y-m),this.lerp.y):m>d.bottom&&(p=u(p,p+(m-d.bottom),this.lerp.y))):(f=u(f,v-a,this.lerp.x),p=u(p,m-h,this.lerp.y)),g=!0}this.useBounds&&(f=this.clampX(f),p=this.clampY(p)),this.roundPixels&&(a=Math.round(a),h=Math.round(h),f=Math.round(f),p=Math.round(p)),this.scrollX=f,this.scrollY=p;var y=f+i,x=p+r;this.midPoint.set(y,x);var b=t/s,w=e/s,T=y-b/2,S=x-w/2;this.roundPixels&&(T=Math.round(T),S=Math.round(S)),this.worldView.setTo(T,S,b,w),o.applyITRS(this.x+a,this.y+h,this.rotation,s,s),o.translate(-a,-h),this.shakeEffect.preRender(),g&&this.emit(l.FOLLOW_UPDATE,this,c)},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,i,r,n,o){void 0===e&&(e=!1),void 0===i&&(i=1),void 0===r&&(r=i),void 0===n&&(n=0),void 0===o&&(o=n),this._follow=t,this.roundPixels=e,i=s(i,0,1),r=s(r,0,1),this.lerp.set(i,r),this.followOffset.set(n,o);var a=this.width/2,h=this.height/2,l=t.x-n,u=t.y-o;return this.midPoint.set(l,u),this.scrollX=l-a,this.scrollY=u-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.resetFX(),r.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=f},function(t,e,i){var r=i(38);t.exports=function(t){var e=new r;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,r){return e+e+i+i+r+r}));var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(i){var n=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);e.setTo(n,s,o)}return e}},function(t,e){t.exports=function(t,e,i,r){return r<<24|t<<16|e<<8|i}},function(t,e){t.exports=function(t,e,i,r){void 0===r&&(r={h:0,s:0,v:0}),t/=255,e/=255,i/=255;var n=Math.min(t,e,i),s=Math.max(t,e,i),o=s-n,a=0,h=0===s?0:o/s,l=s;return s!==n&&(s===t?a=(e-i)/o+(e<i?6:0):s===e?a=(i-t)/o+2:s===i&&(a=(t-e)/o+4),a/=6),r.hasOwnProperty("_h")?(r._h=a,r._s=h,r._v=l):(r.h=a,r.s=h,r.v=l),r}},function(t,e){t.exports=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,e,i){var r=i(38);t.exports=function(t){return new r(t.r,t.g,t.b,t.a)}},function(t,e,i){var r=i(38);t.exports=function(t){var e=new r,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(i){var n=parseInt(i[1],10),s=parseInt(i[2],10),o=parseInt(i[3],10),a=void 0!==i[4]?parseFloat(i[4]):1;e.setTo(n,s,o,255*a)}return e}},function(t,e,i){t.exports={Fade:i(761),Flash:i(762),Pan:i(763),Shake:i(796),RotateTo:i(797),Zoom:i(798)}},function(t,e,i){t.exports={In:i(764),Out:i(765),InOut:i(766)}},function(t,e,i){t.exports={In:i(767),Out:i(768),InOut:i(769)}},function(t,e,i){t.exports={In:i(770),Out:i(771),InOut:i(772)}},function(t,e,i){t.exports={In:i(773),Out:i(774),InOut:i(775)}},function(t,e,i){t.exports={In:i(776),Out:i(777),InOut:i(778)}},function(t,e,i){t.exports={In:i(779),Out:i(780),InOut:i(781)}},function(t,e,i){t.exports=i(782)},function(t,e,i){t.exports={In:i(783),Out:i(784),InOut:i(785)}},function(t,e,i){t.exports={In:i(786),Out:i(787),InOut:i(788)}},function(t,e,i){t.exports={In:i(789),Out:i(790),InOut:i(791)}},function(t,e,i){t.exports={In:i(792),Out:i(793),InOut:i(794)}},function(t,e,i){t.exports=i(795)},function(t,e,i){var r=i(0),n=i(33),s=i(347),o=i(2),a=i(6),h=i(7),l=i(193),u=i(1),c=i(197),d=i(187),f=new r({initialize:function(t){void 0===t&&(t={}),this.width=a(t,"width",1024),this.height=a(t,"height",768),this.zoom=a(t,"zoom",1),this.parent=a(t,"parent",void 0),this.scaleMode=a(t,"scaleMode",0),this.expandParent=a(t,"expandParent",!0),this.autoRound=a(t,"autoRound",!1),this.autoCenter=a(t,"autoCenter",0),this.resizeInterval=a(t,"resizeInterval",500),this.fullscreenTarget=a(t,"fullscreenTarget",null),this.minWidth=a(t,"minWidth",0),this.maxWidth=a(t,"maxWidth",0),this.minHeight=a(t,"minHeight",0),this.maxHeight=a(t,"maxHeight",0);var e=a(t,"scale",null);e&&(this.width=a(e,"width",this.width),this.height=a(e,"height",this.height),this.zoom=a(e,"zoom",this.zoom),this.parent=a(e,"parent",this.parent),this.scaleMode=a(e,"mode",this.scaleMode),this.expandParent=a(e,"expandParent",this.expandParent),this.autoRound=a(e,"autoRound",this.autoRound),this.autoCenter=a(e,"autoCenter",this.autoCenter),this.resizeInterval=a(e,"resizeInterval",this.resizeInterval),this.fullscreenTarget=a(e,"fullscreenTarget",this.fullscreenTarget),this.minWidth=a(e,"min.width",this.minWidth),this.maxWidth=a(e,"max.width",this.maxWidth),this.minHeight=a(e,"min.height",this.minHeight),this.maxHeight=a(e,"max.height",this.maxHeight)),this.renderType=a(t,"type",n.AUTO),this.canvas=a(t,"canvas",null),this.context=a(t,"context",null),this.canvasStyle=a(t,"canvasStyle",null),this.customEnvironment=a(t,"customEnvironment",!1),this.sceneConfig=a(t,"scene",null),this.seed=a(t,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=a(t,"title",""),this.gameURL=a(t,"url","https://phaser.io"),this.gameVersion=a(t,"version",""),this.autoFocus=a(t,"autoFocus",!0),this.domCreateContainer=a(t,"dom.createContainer",!1),this.domBehindCanvas=a(t,"dom.behindCanvas",!1),this.domPointerEvents=a(t,"dom.pointerEvents","none"),this.inputKeyboard=a(t,"input.keyboard",!0),this.inputKeyboardEventTarget=a(t,"input.keyboard.target",window),this.inputKeyboardCapture=a(t,"input.keyboard.capture",[]),this.inputMouse=a(t,"input.mouse",!0),this.inputMouseEventTarget=a(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=a(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=a(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=a(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=a(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=a(t,"input.touch",s.input.touch),this.inputTouchEventTarget=a(t,"input.touch.target",null),this.inputTouchCapture=a(t,"input.touch.capture",!0),this.inputActivePointers=a(t,"input.activePointers",1),this.inputSmoothFactor=a(t,"input.smoothFactor",0),this.inputWindowEvents=a(t,"input.windowEvents",!0),this.inputGamepad=a(t,"input.gamepad",!1),this.inputGamepadEventTarget=a(t,"input.gamepad.target",window),this.disableContextMenu=a(t,"disableContextMenu",!1),this.audio=a(t,"audio",{}),this.hideBanner=!1===a(t,"banner",null),this.hidePhaser=a(t,"banner.hidePhaser",!1),this.bannerTextColor=a(t,"banner.text","#ffffff"),this.bannerBackgroundColor=a(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(t,"fps",null);var i=a(t,"render",t);this.pipeline=a(i,"pipeline",null),this.antialias=a(i,"antialias",!0),this.antialiasGL=a(i,"antialiasGL",!0),this.mipmapFilter=a(i,"mipmapFilter","LINEAR"),this.desynchronized=a(i,"desynchronized",!1),this.roundPixels=a(i,"roundPixels",!1),this.pixelArt=a(i,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=a(i,"transparent",!1),this.clearBeforeRender=a(i,"clearBeforeRender",!0),this.preserveDrawingBuffer=a(i,"preserveDrawingBuffer",!1),this.premultipliedAlpha=a(i,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=a(i,"failIfMajorPerformanceCaveat",!1),this.powerPreference=a(i,"powerPreference","default"),this.batchSize=a(i,"batchSize",4096),this.maxTextures=a(i,"maxTextures",-1),this.maxLights=a(i,"maxLights",10);var r=a(t,"backgroundColor",0);this.backgroundColor=d(r),this.transparent&&(this.backgroundColor=d(0),this.backgroundColor.alpha=0),this.preBoot=a(t,"callbacks.preBoot",u),this.postBoot=a(t,"callbacks.postBoot",u),this.physics=a(t,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(t,"loader.baseURL",""),this.loaderPath=a(t,"loader.path","");var f=s.os.android?6:32;this.loaderMaxParallelDownloads=a(t,"loader.maxParallelDownloads",f),this.loaderCrossOrigin=a(t,"loader.crossOrigin",void 0),this.loaderResponseType=a(t,"loader.responseType",""),this.loaderAsync=a(t,"loader.async",!0),this.loaderUser=a(t,"loader.user",""),this.loaderPassword=a(t,"loader.password",""),this.loaderTimeout=a(t,"loader.timeout",0),this.loaderWithCredentials=a(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var p=a(t,"plugins",null),g=c.DefaultScene;p&&(Array.isArray(p)?this.defaultPlugins=p:h(p)&&(this.installGlobalPlugins=o(p,"global",[]),this.installScenePlugins=o(p,"scene",[]),Array.isArray(p.default)?g=p.default:Array.isArray(p.defaultMerge)&&(g=g.concat(p.defaultMerge)))),this.defaultPlugins=g;var v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(t,"images.default",v+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(t,"images.missing",v+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=a(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=n.WEBGL:window.FORCE_CANVAS&&(this.renderType=n.CANVAS))}});t.exports=f},function(t,e,i){t.exports={os:i(105),browser:i(136),features:i(191),input:i(808),audio:i(809),video:i(810),fullscreen:i(811),canvasFeatures:i(348)}},function(t,e,i){var r,n,s,o=i(31),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=(r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(s=new Image).onload=function(){var t=new Image;t.onload=function(){var e=o.create(t,6,1).getContext("2d");if(e.globalCompositeOperation="multiply",e.drawImage(s,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var i=e.getImageData(2,0,1,1).data;o.remove(t),a.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},t.src=r+"/wCKxvRF"+n},s.src=r+"AP804Oa6"+n,!1),a.supportInverseAlpha=function(){var t=o.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var i=t.getImageData(1,0,1,1);return i.data[0]===e.data[0]&&i.data[1]===e.data[1]&&i.data[2]===e.data[2]&&i.data[3]===e.data[3]}()),a)},function(t,e){t.exports=function(t,e,i,r){return Math.atan2(r-e,i-t)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},function(t,e){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}},function(t,e){t.exports=function(t,e,i,r){var n=t-i,s=e-r;return n*n+s*s}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t>e-i}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=1e-4),t<e+i}},function(t,e,i){var r=i(357);t.exports=function(t,e){return r(t)/r(e)/r(t-e)}},function(t,e){t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},function(t,e){t.exports=function(t,e,i,r,n){return function(t,e){var i=1-t;return i*i*i*e}(t,e)+function(t,e){var i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,n)}},function(t,e){t.exports=function(t,e,i,r){return function(t,e){var i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,r)}},function(t,e,i){var r=i(184);t.exports=function(t,e,i){return e+(i-e)*r(t,0,1)}},function(t,e){t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},function(t,e){t.exports=function(t,e){var i=t.x,r=t.y;return t.x=i*Math.cos(e)-r*Math.sin(e),t.y=i*Math.sin(e)+r*Math.cos(e),t}},function(t,e){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,e,i){var r=new(i(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,i=t.val;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},fromMat4:function(t){var e=t.val,i=this.val;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],i=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=i,t[7]=r,this},invert:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=l*s-o*h,c=-l*n+o*a,d=h*n-s*a,f=e*u+i*c+r*d;return f?(f=1/f,t[0]=u*f,t[1]=(-l*i+r*h)*f,t[2]=(o*i-r*s)*f,t[3]=c*f,t[4]=(l*e-r*a)*f,t[5]=(-o*e+r*n)*f,t[6]=d*f,t[7]=(-h*e+i*a)*f,t[8]=(s*e-i*n)*f,this):null},adjoint:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return t[0]=s*l-o*h,t[1]=r*h-i*l,t[2]=i*o-r*s,t[3]=o*a-n*l,t[4]=e*l-r*a,t[5]=r*n-e*o,t[6]=n*h-s*a,t[7]=i*a-e*h,t[8]=e*s-i*n,this},determinant:function(){var t=this.val,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*(l*s-o*h)+i*(-l*n+o*a)+r*(h*n-s*a)},multiply:function(t){var e=this.val,i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],u=e[8],c=t.val,d=c[0],f=c[1],p=c[2],g=c[3],v=c[4],m=c[5],y=c[6],x=c[7],b=c[8];return e[0]=d*i+f*s+p*h,e[1]=d*r+f*o+p*l,e[2]=d*n+f*a+p*u,e[3]=g*i+v*s+m*h,e[4]=g*r+v*o+m*l,e[5]=g*n+v*a+m*u,e[6]=y*i+x*s+b*h,e[7]=y*r+x*o+b*l,e[8]=y*n+x*a+b*u,this},translate:function(t){var e=this.val,i=t.x,r=t.y;return e[6]=i*e[0]+r*e[3]+e[6],e[7]=i*e[1]+r*e[4]+e[7],e[8]=i*e[2]+r*e[5]+e[8],this},rotate:function(t){var e=this.val,i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=Math.sin(t),l=Math.cos(t);return e[0]=l*i+h*s,e[1]=l*r+h*o,e[2]=l*n+h*a,e[3]=l*s-h*i,e[4]=l*o-h*r,e[5]=l*a-h*n,this},scale:function(t){var e=this.val,i=t.x,r=t.y;return e[0]=i*e[0],e[1]=i*e[1],e[2]=i*e[2],e[3]=r*e[3],e[4]=r*e[4],e[5]=r*e[5],this},fromQuat:function(t){var e=t.x,i=t.y,r=t.z,n=t.w,s=e+e,o=i+i,a=r+r,h=e*s,l=e*o,u=e*a,c=i*o,d=i*a,f=r*a,p=n*s,g=n*o,v=n*a,m=this.val;return m[0]=1-(c+f),m[3]=l+v,m[6]=u-g,m[1]=l-v,m[4]=1-(h+f),m[7]=d+p,m[2]=u+g,m[5]=d-p,m[8]=1-(h+c),this},normalFromMat4:function(t){var e=t.val,i=this.val,r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],p=e[11],g=e[12],v=e[13],m=e[14],y=e[15],x=r*h-n*a,b=r*l-s*a,w=r*u-o*a,T=n*l-s*h,S=n*u-o*h,E=s*u-o*l,C=c*v-d*g,_=c*m-f*g,A=c*y-p*g,M=d*m-f*v,P=d*y-p*v,k=f*y-p*m,O=x*k-b*P+w*M+T*A-S*_+E*C;return O?(O=1/O,i[0]=(h*k-l*P+u*M)*O,i[1]=(l*A-a*k-u*_)*O,i[2]=(a*P-h*A+u*C)*O,i[3]=(s*P-n*k-o*M)*O,i[4]=(r*k-s*A+o*_)*O,i[5]=(n*A-r*P-o*C)*O,i[6]=(v*E-m*S+y*T)*O,i[7]=(m*w-g*E-y*b)*O,i[8]=(g*S-v*w+y*x)*O,this):null}});t.exports=r},function(t,e,i){var r=i(0),n=i(364),s=i(1),o=i(39),a=1e-6,h=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),u=new o(1,0,0),c=new o(0,1,0),d=new o,f=new n,p=new r({initialize:function(t,e,i,r){this.onChangeCallback=s,this.set(t,e,i,r)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,i,r,n){return void 0===n&&(n=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=i||0,this._w=r||0),n&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,i=this.z,r=this.w;return Math.sqrt(t*t+e*e+i*i+r*r)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,r=this.w;return t*t+e*e+i*i+r*r},normalize:function(){var t=this.x,e=this.y,i=this.z,r=this.w,n=t*t+e*e+i*i+r*r;return n>0&&(n=1/Math.sqrt(n),this._x=t*n,this._y=e*n,this._z=i*n,this._w=r*n),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var i=this.x,r=this.y,n=this.z,s=this.w;return this.set(i+e*(t.x-i),r+e*(t.y-r),n+e*(t.z-n),s+e*(t.w-s))},rotationTo:function(t,e){var i=t.x*e.x+t.y*e.y+t.z*e.z;return i<-.999999?(d.copy(u).cross(t).length()<a&&d.copy(c).cross(t),d.normalize(),this.setAxisAngle(d,Math.PI)):i>.999999?this.set(0,0,0,1):(d.copy(t).cross(e),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+i,this.normalize())},setAxes:function(t,e,i){var r=f.val;return r[0]=e.x,r[3]=e.y,r[6]=e.z,r[1]=i.x,r[4]=i.y,r[7]=i.z,r[2]=-t.x,r[5]=-t.y,r[8]=-t.z,this.fromMat3(f).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var i=Math.sin(e);return this.set(i*t.x,i*t.y,i*t.z,Math.cos(e))},multiply:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,s=t.x,o=t.y,a=t.z,h=t.w;return this.set(e*h+n*s+i*a-r*o,i*h+n*o+r*s-e*a,r*h+n*a+e*o-i*s,n*h-e*s-i*o-r*a)},slerp:function(t,e){var i=this.x,r=this.y,n=this.z,s=this.w,o=t.x,h=t.y,l=t.z,u=t.w,c=i*o+r*h+n*l+s*u;c<0&&(c=-c,o=-o,h=-h,l=-l,u=-u);var d=1-e,f=e;if(1-c>a){var p=Math.acos(c),g=Math.sin(p);d=Math.sin((1-e)*p)/g,f=Math.sin(e*p)/g}return this.set(d*i+f*o,d*r+f*h,d*n+f*l,d*s+f*u)},invert:function(){var t=this.x,e=this.y,i=this.z,r=this.w,n=t*t+e*e+i*i+r*r,s=n?1/n:0;return this.set(-t*s,-e*s,-i*s,r*s)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o+n*s,i*o+r*s,r*o-i*s,n*o-e*s)},rotateY:function(t){t*=.5;var e=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o-r*s,i*o+n*s,r*o+e*s,n*o-i*s)},rotateZ:function(t){t*=.5;var e=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(t),o=Math.cos(t);return this.set(e*o+i*s,i*o-e*s,r*o+n*s,n*o-r*s)},calculateW:function(){var t=this.x,e=this.y,i=this.z;return this.w=-Math.sqrt(1-t*t-e*e-i*i),this},setFromEuler:function(t,e){var i=t.x/2,r=t.y/2,n=t.z/2,s=Math.cos(i),o=Math.cos(r),a=Math.cos(n),h=Math.sin(i),l=Math.sin(r),u=Math.sin(n);switch(t.order){case"XYZ":this.set(h*o*a+s*l*u,s*l*a-h*o*u,s*o*u+h*l*a,s*o*a-h*l*u,e);break;case"YXZ":this.set(h*o*a+s*l*u,s*l*a-h*o*u,s*o*u-h*l*a,s*o*a+h*l*u,e);break;case"ZXY":this.set(h*o*a-s*l*u,s*l*a+h*o*u,s*o*u+h*l*a,s*o*a-h*l*u,e);break;case"ZYX":this.set(h*o*a-s*l*u,s*l*a+h*o*u,s*o*u-h*l*a,s*o*a+h*l*u,e);break;case"YZX":this.set(h*o*a+s*l*u,s*l*a+h*o*u,s*o*u-h*l*a,s*o*a-h*l*u,e);break;case"XZY":this.set(h*o*a-s*l*u,s*l*a-h*o*u,s*o*u+h*l*a,s*o*a+h*l*u,e)}return this},setFromRotationMatrix:function(t){var e,i=t.val,r=i[0],n=i[4],s=i[8],o=i[1],a=i[5],h=i[9],l=i[2],u=i[6],c=i[10],d=r+a+c;return d>0?(e=.5/Math.sqrt(d+1),this.set((u-h)*e,(s-l)*e,(o-n)*e,.25/e)):r>a&&r>c?(e=2*Math.sqrt(1+r-a-c),this.set(.25*e,(n+o)/e,(s+l)/e,(u-h)/e)):a>c?(e=2*Math.sqrt(1+a-r-c),this.set((n+o)/e,.25*e,(h+u)/e,(s-l)/e)):(e=2*Math.sqrt(1+c-r-a),this.set((s+l)/e,(h+u)/e,.25*e,(o-n)/e)),this},fromMat3:function(t){var e,i=t.val,r=i[0]+i[4]+i[8];if(r>0)e=Math.sqrt(r+1),this.w=.5*e,e=.5/e,this._x=(i[7]-i[5])*e,this._y=(i[2]-i[6])*e,this._z=(i[3]-i[1])*e;else{var n=0;i[4]>i[0]&&(n=1),i[8]>i[3*n+n]&&(n=2);var s=h[n],o=h[s];e=Math.sqrt(i[3*n+n]-i[3*s+s]-i[3*o+o]+1),l[n]=.5*e,e=.5/e,l[s]=(i[3*s+n]+i[3*n+s])*e,l[o]=(i[3*o+n]+i[3*n+o])*e,this._x=l[0],this._y=l[1],this._z=l[2],this._w=(i[3*o+s]-i[3*s+o])*e}return this.onChangeCallback(this),this}});t.exports=p},function(t,e,i){var r=i(367),n=i(31),s=i(33),o=i(191);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===s.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==s.HEADLESS)if(e.renderType===s.CANVAS||e.renderType!==s.CANVAS&&!o.webGL){if(!o.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");e.renderType=s.CANVAS}else e.renderType=s.WEBGL;e.antialias||n.disableSmoothing();var a,h,l=t.scale.baseSize,u=l.width,c=l.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=u,t.canvas.height=c):t.canvas=n.create(t,u,c,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||r.setCrisp(t.canvas),e.renderType!==s.HEADLESS&&(a=i(368),h=i(371),e.renderType===s.WEBGL?t.renderer=new h(t):(t.renderer=new a(t),t.context=t.renderer.gameContext))}},function(t,e){t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(e){t.style["image-rendering"]=e})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,e,i){var r=i(37),n=i(369),s=i(0),o=i(33),a=i(9),h=i(91),l=i(370),u=i(104),c=i(106),d=i(25),f=new s({Extends:a,initialize:function(t){a.call(this);var e=t.config;this.config={clearBeforeRender:e.clearBeforeRender,backgroundColor:e.backgroundColor,antialias:e.antialias,roundPixels:e.roundPixels},this.game=t,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var i={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=e.context?e.context:this.gameCanvas.getContext("2d",i),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=l(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(c.READY,this.boot,this)},boot:function(){var t=this.game,e=t.scale.baseSize;this.width=e.width,this.height=e.height,this.isBooted=!0,t.scale.on(u.RESIZE,this.onResize,this),this.resize(e.width,e.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.emit(h.RESIZE,t,e)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,i=this.width,r=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&(t.clearRect(0,0,i,r),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i,r))),t.save(),this.drawCount=0,this.emit(h.PRE_RENDER)},render:function(t,e,i){var n=e.length;this.emit(h.RENDER,t,i);var s=i.x,o=i.y,a=i.width,l=i.height,u=i.renderToTexture?i.context:t.sys.context;u.save(),this.game.scene.customViewports&&(u.beginPath(),u.rect(s,o,a,l),u.clip()),this.currentContext=u;var c=i.mask;c&&c.preRenderCanvas(this,null,i._maskCamera),i.transparent||(u.fillStyle=i.backgroundColor.rgba,u.fillRect(s,o,a,l)),u.globalAlpha=i.alpha,u.globalCompositeOperation="source-over",this.drawCount+=n,i.renderToTexture&&i.emit(r.PRE_RENDER,i),i.matrix.copyToContext(u);for(var d=0;d<n;d++){var f=e[d];f.mask&&f.mask.preRenderCanvas(this,f,i),f.renderCanvas(this,f,i),f.mask&&f.mask.postRenderCanvas(this,f,i)}u.setTransform(1,0,0,1,0,0),u.globalCompositeOperation="source-over",u.globalAlpha=1,i.flashEffect.postRenderCanvas(u),i.fadeEffect.postRenderCanvas(u),i.dirty=!1,c&&c.postRenderCanvas(this),u.restore(),i.renderToTexture&&(i.emit(r.POST_RENDER,i),i.renderToGame&&t.sys.context.drawImage(i.canvas,s,o))},postRender:function(){this.gameContext.restore(),this.emit(h.POST_RENDER);var t=this.snapshotState;t.callback&&(n(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,e,i,r,s,o,a,h,l){void 0===i&&(i=!1),this.snapshotArea(r,s,o,a,e,h,l);var u=this.snapshotState;return u.getPixel=i,n(this.canvas,u),u.callback=null,this},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,i)},snapshotArea:function(t,e,i,r,n,s,o){var a=this.snapshotState;return a.callback=n,a.type=s,a.encoder=o,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(i,this.gameCanvas.width),a.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,i,r){var n=i.alpha*t.alpha;if(0!==n){var s=this.currentContext,o=this._tempMatrix1,a=this._tempMatrix2,h=e.canvasData,l=h.x,u=h.y,c=e.cutWidth,d=e.cutHeight,f=e.customPivot,p=e.source.resolution,g=t.displayOriginX,v=t.displayOriginY,m=-g+e.x,y=-v+e.y;if(t.isCropped){var x=t._crop;x.flipX===t.flipX&&x.flipY===t.flipY||e.updateCropUVs(x,t.flipX,t.flipY),c=x.cw,d=x.ch,l=x.cx,u=x.cy,m=-g+x.x,y=-v+x.y,t.flipX&&(m>=0?m=-(m+c):m<0&&(m=Math.abs(m)-c)),t.flipY&&(y>=0?y=-(y+d):y<0&&(y=Math.abs(y)-d))}var b=1,w=1;t.flipX&&(f||(m+=-e.realWidth+2*g),b=-1),t.flipY&&(f||(y+=-e.realHeight+2*v),w=-1),a.applyITRS(t.x,t.y,t.rotation,t.scaleX*b,t.scaleY*w),o.copyFrom(i.matrix),r?(o.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=i.scrollX*t.scrollFactorX,a.f-=i.scrollY*t.scrollFactorY),o.multiply(a),s.save(),o.setToContext(s),s.globalCompositeOperation=this.blendModes[t.blendMode],s.globalAlpha=n,s.imageSmoothingEnabled=!(!this.antialias||e.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,i),s.drawImage(e.source.image,l,u,c,d,m,y,c/p,d/p),t.mask&&t.mask.postRenderCanvas(this,t,i),s.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=f},function(t,e,i){var r=i(31),n=i(38),s=i(2);t.exports=function(t,e){var i=s(e,"callback"),o=s(e,"type","image/png"),a=s(e,"encoder",.92),h=Math.abs(Math.round(s(e,"x",0))),l=Math.abs(Math.round(s(e,"y",0))),u=s(e,"width",t.width),c=s(e,"height",t.height);if(s(e,"getPixel",!1)){var d=t.getContext("2d").getImageData(h,l,1,1).data;i.call(null,new n(d[0],d[1],d[2],d[3]/255))}else if(0!==h||0!==l||u!==t.width||c!==t.height){var f=r.createWebGL(this,u,c);f.getContext("2d").drawImage(t,h,l,u,c,0,0,u,c);var p=new Image;p.onerror=function(){i.call(null),r.remove(f)},p.onload=function(){i.call(null,p),r.remove(f)},p.src=f.toDataURL(o,a)}else{var g=new Image;g.onerror=function(){i.call(null)},g.onload=function(){i.call(null,g)},g.src=t.toDataURL(o,a)}}},function(t,e,i){var r=i(35),n=i(348);t.exports=function(){var t=[],e=n.supportNewBlendModes,i="source-over";return t[r.NORMAL]=i,t[r.ADD]="lighter",t[r.MULTIPLY]=e?"multiply":i,t[r.SCREEN]=e?"screen":i,t[r.OVERLAY]=e?"overlay":i,t[r.DARKEN]=e?"darken":i,t[r.LIGHTEN]=e?"lighten":i,t[r.COLOR_DODGE]=e?"color-dodge":i,t[r.COLOR_BURN]=e?"color-burn":i,t[r.HARD_LIGHT]=e?"hard-light":i,t[r.SOFT_LIGHT]=e?"soft-light":i,t[r.DIFFERENCE]=e?"difference":i,t[r.EXCLUSION]=e?"exclusion":i,t[r.HUE]=e?"hue":i,t[r.SATURATION]=e?"saturation":i,t[r.COLOR]=e?"color":i,t[r.LUMINOSITY]=e?"luminosity":i,t[r.ERASE]="destination-out",t[r.SOURCE_IN]="source-in",t[r.SOURCE_OUT]="source-out",t[r.SOURCE_ATOP]="source-atop",t[r.DESTINATION_OVER]="destination-over",t[r.DESTINATION_IN]="destination-in",t[r.DESTINATION_OUT]="destination-out",t[r.DESTINATION_ATOP]="destination-atop",t[r.LIGHTER]="lighter",t[r.COPY]="copy",t[r.XOR]="xor",t}},function(t,e,i){var r=i(93),n=i(37),s=i(0),o=i(33),a=i(9),h=i(91),l=i(22),u=i(138),c=i(69),d=i(1),f=i(372),p=i(141),g=i(104),v=i(106),m=i(12),y=i(383),x=new s({Extends:a,initialize:function(t){a.call(this);var e=t.config,i={alpha:e.transparent,desynchronized:e.desynchronized,depth:!1,antialias:e.antialiasGL,premultipliedAlpha:e.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,powerPreference:e.powerPreference,preserveDrawingBuffer:e.preserveDrawingBuffer};this.config={clearBeforeRender:e.clearBeforeRender,antialias:e.antialias,backgroundColor:e.backgroundColor,contextCreation:i,roundPixels:e.roundPixels,maxTextures:e.maxTextures,maxTextureSize:e.maxTextureSize,batchSize:e.batchSize,maxLights:e.maxLights,mipmapFilter:e.mipmapFilter},this.game=t,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=d,this.contextRestoredHandler=d,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(t){var e,i=this.game,r=this.canvas,n=t.backgroundColor;if(!(e=i.config.context?i.config.context:r.getContext("webgl",t.contextCreation)||r.getContext("experimental-webgl",t.contextCreation))||e.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=e;var s=this;this.contextLostHandler=function(t){s.contextLost=!0,s.game.events.emit(l.CONTEXT_LOST,s),t.preventDefault()},this.contextRestoredHandler=function(){s.contextLost=!1,s.init(s.config),s.game.events.emit(l.CONTEXT_RESTORED,s)},r.addEventListener("webglcontextlost",this.contextLostHandler,!1),r.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),i.context=e;for(var a=0;a<=27;a++)this.blendModes.push({func:[e.ONE,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_ADD});this.blendModes[1].func=[e.ONE,e.DST_ALPHA],this.blendModes[2].func=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[e.ONE,e.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[e.ZERO,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=e.BYTE,this.glFormats[1]=e.SHORT,this.glFormats[2]=e.UNSIGNED_BYTE,this.glFormats[3]=e.UNSIGNED_SHORT,this.glFormats[4]=e.FLOAT,this.glFuncMap={mat2:{func:e.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:e.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:e.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:e.uniform1f,length:1},"1fv":{func:e.uniform1fv,length:1},"1i":{func:e.uniform1i,length:1},"1iv":{func:e.uniform1iv,length:1},"2f":{func:e.uniform2f,length:2},"2fv":{func:e.uniform2fv,length:1},"2i":{func:e.uniform2i,length:2},"2iv":{func:e.uniform2iv,length:1},"3f":{func:e.uniform3f,length:3},"3fv":{func:e.uniform3fv,length:1},"3i":{func:e.uniform3i,length:3},"3iv":{func:e.uniform3iv,length:1},"4f":{func:e.uniform4f,length:4},"4fv":{func:e.uniform4fv,length:1},"4i":{func:e.uniform4i,length:4},"4iv":{func:e.uniform4iv,length:1}};var h=e.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE));var u="WEBGL_compressed_texture_",d="WEBKIT_"+u;this.compression.ETC1=e.getExtension(u+"etc1")||e.getExtension(d+"etc1"),this.compression.PVRTC=e.getExtension(u+"pvrtc")||e.getExtension(d+"pvrtc"),this.compression.S3TC=e.getExtension(u+"s3tc")||e.getExtension(d+"s3tc"),this.supportedExtensions=h;var p="ANGLE_instanced_arrays";this.instancedArraysExtension=h.indexOf(p)>-1?e.getExtension(p):null;var g="OES_vertex_array_object";this.vaoExtension=h.indexOf(g)>-1?e.getExtension(g):null,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.clearColor(n.redGL,n.greenGL,n.blueGL,n.alphaGL),this.mipmapFilter=e[t.mipmapFilter],this.maxTextures=m.checkShaderMax(e,t.maxTextures),this.textureIndexes=[];var y=this.tempTextures;if(Array.isArray(y))for(var x=0;a<this.maxTextures;x++)e.deleteTexture(y[x]);else y=new Array(this.maxTextures);for(var b=0;b<this.maxTextures;b++){var w=e.createTexture();e.activeTexture(e.TEXTURE0+b),e.bindTexture(e.TEXTURE_2D,w),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),y[b]=w,this.textureIndexes.push(b)}return this.tempTextures=y,this.currentActiveTexture=1,this.startActiveTexture++,e.activeTexture(e.TEXTURE1),this.pipelines=new f(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=(new c).identity(),i.textures.once(v.READY,this.boot,this),this},boot:function(){var t=this.game,e=this.pipelines,i=t.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,this.renderTarget=new p(this,this.width,this.height,1,0,!0,!0),e.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),t.scale.on(g.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},beginCapture:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.renderTarget.bind(!0,t,e),this.setProjectionMatrix(t,e),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,e){var i=this.gl;return this.width=t,this.height=e,this.setProjectionMatrix(t,e),i.viewport(0,0,t,e),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-e,t,e),this.defaultScissor[2]=t,this.defaultScissor[3]=e,this.emit(h.RESIZE,t,e),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,e){return t===this.projectionWidth&&e===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=e,this.projectionMatrix.ortho(0,t,e,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,e,i,r,n){void 0===n&&(n=this.drawingBufferHeight);var s=[t,e,i,r];return this.scissorStack.push(s),this.setScissor(t,e,i,r,n),this.currentScissor=s,s},setScissor:function(t,e,i,r,n){void 0===n&&(n=this.drawingBufferHeight);var s=this.gl,o=this.currentScissor,a=i>0&&r>0;if(o&&a){var h=o[0],l=o[1],u=o[2],c=o[3];a=h!==t||l!==e||u!==i||c!==r}a&&(this.flush(),s.scissor(t,n-e-r,i,r))},resetScissor:function(){var t=this.gl;t.enable(t.SCISSOR_TEST);var e=this.currentScissor;if(e){var i=e[0],r=e[1],n=e[2],s=e[3];n>0&&s>0&&t.scissor(i,this.drawingBufferHeight-r-s,n,s)}},popScissor:function(){var t=this.scissorStack;t.pop();var e=t[t.length-1];e&&this.setScissor(e[0],e[1],e[2],e[3]),this.currentScissor=e},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,e){void 0===e&&(e=!1);var i=this.gl,r=this.blendModes[t];return!!(e||t!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(r.equation),r.func.length>2?i.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):i.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,i){return this.blendModes[t]&&(this.blendModes[t].func=e,i&&(this.blendModes[t].equation=i)),this},removeBlendMode:function(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var e=this.gl,i=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(t.glIndex=i,e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function(t,e){return this.textureZero!==t||this.normalTexture!==e},setTextureZero:function(t,e){if(this.textureZero!==t){e&&this.flush();var i=this.gl;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(t){if(this.normalTexture!==t){var e=this.gl;e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var t=this.gl,e=this.tempTextures,i=0;i<e.length;i++)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var e=this.gl,i=this.tempTextures;if(t){for(var r=0;r<i.length;r++)e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,i[r]);e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i[1]),this.isTextureClean=!0}else e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i[0]),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var e=this.gl,i=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(t.glIndex=i,e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function(t,e,i,r){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,e,i,r))},setFramebuffer:function(t,e,i,r){if(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=!0),t===this.currentFramebuffer)return this;var n=this.gl,s=this.width,o=this.height;return t&&t.renderTexture&&r?(s=t.renderTexture.width,o=t.renderTexture.height):this.flush(),n.bindFramebuffer(n.FRAMEBUFFER,t),r&&n.viewport(0,0,s,o),e&&(t?(this.drawingBufferHeight=o,this.pushScissor(0,0,s,o)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,i&&this.resetTextures(),this},popFramebuffer:function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!0);var r=this.fboStack;r.pop();var n=r[r.length-1];return n||(n=null),this.setFramebuffer(n,t,e,i),n},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(t,e,i,r){var n=this.gl,s=n.NEAREST,a=n.NEAREST,h=n.CLAMP_TO_EDGE;e=t?t.width:e,i=t?t.height:i;var l=u(e,i);return l&&(h=n.REPEAT),r===o.ScaleModes.LINEAR&&this.config.antialias&&(s=l?this.mipmapFilter:n.LINEAR,a=n.LINEAR),t||"number"!=typeof e||"number"!=typeof i?this.createTexture2D(0,s,a,h,h,n.RGBA,t):this.createTexture2D(0,s,a,h,h,n.RGBA,null,e,i)},createTexture2D:function(t,e,i,r,n,s,o,a,h,l,c,d){l=null==l||l,void 0===c&&(c=!1),void 0===d&&(d=!1);var f=this.gl,p=f.createTexture();f.activeTexture(f.TEXTURE0);var g=f.getParameter(f.TEXTURE_BINDING_2D);return f.bindTexture(f.TEXTURE_2D,p),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,n),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,r),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,d),null==o?f.texImage2D(f.TEXTURE_2D,t,s,a,h,0,s,f.UNSIGNED_BYTE,null):(c||(a=o.width,h=o.height),f.texImage2D(f.TEXTURE_2D,t,s,s,f.UNSIGNED_BYTE,o)),u(a,h)&&f.generateMipmap(f.TEXTURE_2D),g&&f.bindTexture(f.TEXTURE_2D,g),p.isAlphaPremultiplied=l,p.isRenderTexture=!1,p.width=a,p.height=h,p.glIndex=0,p.glIndexCounter=-1,p},createFramebuffer:function(t,e,i,r){var n,s=this.gl,o=s.createFramebuffer();if(this.setFramebuffer(o),r){var a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t,e),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),(n=s.checkFramebufferStatus(s.FRAMEBUFFER))!==s.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[n]);return o.renderTexture=i,this.setFramebuffer(null),this.resetTextures(),o},createProgram:function(t,e){var i=this.gl,r=i.createProgram(),n=i.createShader(i.VERTEX_SHADER),s=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(n,t),i.shaderSource(s,e),i.compileShader(n),i.compileShader(s),!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+i.getShaderInfoLog(n));if(!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+i.getShaderInfoLog(s));if(i.attachShader(r,n),i.attachShader(r,s),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error("Link Program failed:\n"+i.getProgramInfoLog(r));return i.useProgram(r),r},createVertexBuffer:function(t,e){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,r),i.bufferData(i.ARRAY_BUFFER,t,e),i.bindBuffer(i.ARRAY_BUFFER,null),r},createIndexBuffer:function(t,e){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,e),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),r},deleteTexture:function(t,e){return e&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function(t){return t&&(this.gl.deleteFramebuffer(t),r(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var e=t.x,i=t.y,r=t.width,s=t.height,o=t.backgroundColor;t.emit(n.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(e,i,r,s),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),o.alphaGL>0&&this.pipelines.setMulti().drawFillRect(e,i,r,s,m.getTintFromFloats(o.blueGL,o.greenGL,o.redGL,1),o.alphaGL)},getCurrentStencilMask:function(){var t=null,e=this.maskStack,i=this.currentCameraMask;return e.length>0?t=e[e.length-1]:i.mask&&i.mask.isStencil&&(t=i),t},postRenderCamera:function(t){var e=t.flashEffect,i=t.fadeEffect;if(e.isRunning||i.isRunning||i.isComplete){var r=this.pipelines.setMulti();e.postRenderWebGL(r,m.getTintFromFloats),i.postRenderWebGL(r,m.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(n.POST_RENDER,t)},preRender:function(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var e=this.config.backgroundColor;t.clearColor(e.redGL,e.greenGL,e.blueGL,e.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(h.PRE_RENDER)}},render:function(t,e,i){if(!this.contextLost){var r=e.length;if(this.emit(h.RENDER,t,i),this.preRenderCamera(i),0===r)return this.setBlendMode(o.BlendModes.NORMAL),void this.postRenderCamera(i);this.currentType="";for(var n=this.currentMask,s=0;s<r;s++){this.finalType=s===r-1;var a=e[s],l=a.mask;(n=this.currentMask).mask&&n.mask!==l&&n.mask.postRenderWebGL(this,n.camera),l&&n.mask!==l&&l.preRenderWebGL(this,a,i),a.blendMode!==this.currentBlendMode&&this.setBlendMode(a.blendMode);var u=a.type;u!==this.currentType&&(this.newType=!0,this.currentType=u),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=e[s+1].type===this.currentType,a.renderWebGL(this,a,i),this.newType=!1}(n=this.currentMask).mask&&n.mask.postRenderWebGL(this,n.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(h.POST_RENDER);var t=this.snapshotState;t.callback&&(y(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,i)},snapshotArea:function(t,e,i,r,n,s,o){var a=this.snapshotState;return a.callback=n,a.type=s,a.encoder=o,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(i,this.gl.drawingBufferWidth),a.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,e,i,r,n,s,o,a,h,l,u){void 0===n&&(n=!1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=e),void 0===h&&(h=i);var c=this.currentFramebuffer;this.snapshotArea(s,o,a,h,r,l,u);var d=this.snapshotState;return d.getPixel=n,d.isFramebuffer=!0,d.bufferWidth=e,d.bufferHeight=i,this.setFramebuffer(t),y(this.canvas,d),this.setFramebuffer(c),d.callback=null,d.isFramebuffer=!1,this},canvasToTexture:function(t,e,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e?this.updateCanvasTexture(t,e,r):this.createCanvasTexture(t,i,r)},createCanvasTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var r=this.gl,n=r.NEAREST,s=r.NEAREST,o=t.width,a=t.height,h=r.CLAMP_TO_EDGE,l=u(o,a);return!e&&l&&(h=r.REPEAT),this.config.antialias&&(n=l?this.mipmapFilter:r.LINEAR,s=r.LINEAR),this.createTexture2D(0,n,s,h,h,r.RGBA,t,o,a,!0,!1,i)},updateCanvasTexture:function(t,e,i){void 0===i&&(i=!1);var r=this.gl,n=t.width,s=t.height;if(n>0&&s>0){r.activeTexture(r.TEXTURE0);var o=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,e),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.width=n,e.height=s,o&&r.bindTexture(r.TEXTURE_2D,o)}return e},createVideoTexture:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var r=this.gl,n=r.NEAREST,s=r.NEAREST,o=t.videoWidth,a=t.videoHeight,h=r.CLAMP_TO_EDGE,l=u(o,a);return!e&&l&&(h=r.REPEAT),this.config.antialias&&(n=l?this.mipmapFilter:r.LINEAR,s=r.LINEAR),this.createTexture2D(0,n,s,h,h,r.RGBA,t,o,a,!0,!0,i)},updateVideoTexture:function(t,e,i){void 0===i&&(i=!1);var r=this.gl,n=t.videoWidth,s=t.videoHeight;if(n>0&&s>0){r.activeTexture(r.TEXTURE0);var o=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,e),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.width=n,e.height=s,o&&r.bindTexture(r.TEXTURE_2D,o)}return e},setTextureFilter:function(t,e){var i=this.gl,r=[i.LINEAR,i.NEAREST][e];i.activeTexture(i.TEXTURE0);var n=i.getParameter(i.TEXTURE_BINDING_2D);return i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),n&&i.bindTexture(i.TEXTURE_2D,n),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,e=this.tempTextures,i=0;i<e.length;i++)t.deleteTexture(e[i]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=x},function(t,e,i){var r=i(0),n=i(92),s=i(102),o=i(373),a=i(376),h=i(377),l=i(108),u=i(378),c=i(379),d=i(380),f=i(381),p=new r({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new s([[n.UTILITY_PIPELINE,f],[n.MULTI_PIPELINE,l],[n.BITMAPMASK_PIPELINE,o],[n.SINGLE_PIPELINE,d],[n.ROPE_PIPELINE,c],[n.LIGHT_PIPELINE,h],[n.POINTLIGHT_PIPELINE,u],[n.GRAPHICS_PIPELINE,a]]),this.postPipelineClasses=new s,this.pipelines=new s,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(t){var e,i,r=this,s=this.game;if(this.classes.each((function(t,i){e=r.add(t,new i({game:s})),t===n.UTILITY_PIPELINE&&(r.UTILITY_PIPELINE=e,r.fullFrame1=e.fullFrame1,r.fullFrame2=e.fullFrame2,r.halfFrame1=e.halfFrame1,r.halfFrame2=e.halfFrame2)})),this.MULTI_PIPELINE=this.get(n.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(n.BITMAPMASK_PIPELINE),t)for(i in t){var o=t[i];(e=new o(s)).isPostFX?this.postPipelineClasses.set(i,o):this.has(i)||(this.classes.set(i,o),this.add(i,e))}},add:function(t,e){if(!e.isPostFX){var i=this.pipelines,r=this.renderer;return i.has(t)?console.warn("Pipeline exists: "+t):(e.name=t,e.manager=this,i.set(t,e)),e.hasBooted||e.boot(),0!==r.width&&0!==r.height&&e.resize(r.width,r.height),e}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(t,e){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,e)},flush:function(){this.current&&this.current.flush()},has:function(t){var e=this.pipelines;return"string"==typeof t?e.has(t):!!e.contains(t)},get:function(t){var e=this.pipelines;return"string"==typeof t?e.get(t):e.contains(t)?t:void 0},getPostPipeline:function(t,e){var i,r=this.postPipelineClasses;if("string"==typeof t?i=r.get(t):"function"==typeof t?r.contains(t)&&(i=t):"object"==typeof t&&(i=r.get(t.name)),i){var n=new i(this.game);return e&&(n.gameObject=e),n}},remove:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.pipelines.delete(t),e&&this.classes.delete(t),i&&this.postPipelineClasses.delete(t)},set:function(t,e,i){if(!t.isPostFX)return this.isCurrent(t,i)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(i)),t.updateProjectionMatrix(),t.onBind(e),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;i>=0;i--){var r=e[i];r.active&&r.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var r=e[i];r.active&&r.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;i>=0;i--){var r=e[i];r.active&&r.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var r=e[i];r.active&&r.postBatch(t)}}},isCurrent:function(t,e){var i=this.renderer,r=this.current;return r&&!e&&(e=r.currentShader),!(r!==t||e.program!==i.currentProgram)},copyFrame:function(t,e,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,e,i,r,n),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,e,i,r){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,e,i,r),this},blendFrames:function(t,e,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,e,i,r,n),this},blendFramesAdditive:function(t,e,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,e,i,r,n),this},clearFrame:function(t,e){return this.UTILITY_PIPELINE.clearFrame(t,e),this},blitFrame:function(t,e,i,r,n,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,e,i,r,n,s),this},copyFrameRect:function(t,e,i,r,n,s,o,a){return this.UTILITY_PIPELINE.copyFrameRect(t,e,i,r,n,s,o,a),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var e=this.renderer,i=e.gl;i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),e.hasActiveStencilMask()?i.clear(i.DEPTH_BUFFER_BIT):(i.disable(i.STENCIL_TEST),i.clear(i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)),i.viewport(0,0,e.width,e.height),e.currentProgram=null,e.setBlendMode(0,!0);var r=this.pipelines.entries;for(var n in r)r[n].glReset=!0;t&&(this.current=t,t.rebind()),e.resetTextures()},clear:function(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=p},function(t,e,i){var r=i(0),n=i(2),s=i(866),o=i(867),a=i(107),h=i(58),l=new r({Extends:h,initialize:function(t){t.fragShader=n(t,"fragShader",s),t.vertShader=n(t,"vertShader",o),t.batchSize=n(t,"batchSize",1),t.vertices=n(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=n(t,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),h.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,e){h.prototype.resize.call(this,t,e),this.set2f("uResolution",t,e)},beginMask:function(t,e,i){var r=this.gl;if(t.bitmapMask&&r){var n=this.renderer;n.flush(),n.pushFramebuffer(t.mainFramebuffer),r.disable(r.STENCIL_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),n.currentCameraMask.mask!==t&&(n.currentMask.mask=t,n.currentMask.camera=i)}},endMask:function(t,e){var i=this.gl,r=this.renderer,n=t.bitmapMask;if(n&&i){r.flush(),r.pushFramebuffer(t.maskFramebuffer),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),n.renderWebGL(r,n,e),r.flush(),r.popFramebuffer(),r.popFramebuffer();var s=r.getCurrentStencilMask();s?(i.enable(i.STENCIL_TEST),s.mask.applyStencil(r,s.camera,!0)):r.currentMask.mask=null,r.pipelines.set(this),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.maskTexture),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),i.drawArrays(this.topology,0,3),r.resetTextures()}}});t.exports=l},function(t,e,i){t.exports={AFTER_FLUSH:i(868),BEFORE_FLUSH:i(869),BIND:i(870),BOOT:i(871),DESTROY:i(872),REBIND:i(873),RESIZE:i(874)}},function(t,e,i){var r=i(0),n=i(2),s=i(107),o=new r({initialize:function(t,e,i,r,n){this.pipeline=t,this.name=e,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(i,r),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(n),this.createUniforms()},createAttributes:function(t){var e=0,i=0,r=[];this.vertexComponentCount=0;for(var o=0;o<t.length;o++){var a=t[o],h=a.name,l=n(a,"size",1),u=n(a,"type",s.FLOAT),c=u.enum,d=u.size,f=!!a.normalized;r.push({name:h,size:l,type:c,normalized:f,offset:i,enabled:!1,location:-1}),4===d?e+=l:e++,i+=l*d}this.vertexSize=i,this.vertexComponentCount=e,this.attributes=r},bind:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),e&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var e=this.gl,i=this.vertexSize,r=this.attributes,n=this.program,s=0;s<r.length;s++){var o=r[s],a=o.size,h=o.type,l=o.offset,u=o.enabled,c=o.location,d=!!o.normalized;if(t){var f=e.getAttribLocation(n,o.name);f>=0?(e.enableVertexAttribArray(f),e.vertexAttribPointer(f,a,h,d,i,l),o.enabled=!0,o.location=f):-1!==f&&e.disableVertexAttribArray(f)}else u?e.vertexAttribPointer(c,a,h,d,i,l):!u&&c>-1&&(e.disableVertexAttribArray(c),o.location=-1)}return this},createUniforms:function(){var t,e,i,r=this.gl,n=this.program,s=this.uniforms,o=r.getProgramParameter(n,r.ACTIVE_UNIFORMS);for(t=0;t<o;t++){var a=r.getActiveUniform(n,t);if(a){e=a.name,null!==(i=r.getUniformLocation(n,e))&&(s[e]={name:e,location:i,value1:null,value2:null,value3:null,value4:null});var h=e.indexOf("[");h>0&&(e=e.substr(0,h),s.hasOwnProperty(e)||null!==(i=r.getUniformLocation(n,e))&&(s[e]={name:e,location:i,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var e=this.uniforms[t];return e&&(e.value1=null,e.value2=null,e.value3=null,e.value4=null),this},setUniform1:function(t,e,i,r){var n=this.uniforms[e];return n?((r||n.value1!==i)&&(n.value1=i,this.renderer.setProgram(this.program),t.call(this.gl,n.location,i),this.pipeline.currentShader=this),this):this},setUniform2:function(t,e,i,r,n){var s=this.uniforms[e];return s?((n||s.value1!==i||s.value2!==r)&&(s.value1=i,s.value2=r,this.renderer.setProgram(this.program),t.call(this.gl,s.location,i,r),this.pipeline.currentShader=this),this):this},setUniform3:function(t,e,i,r,n,s){var o=this.uniforms[e];return o?((s||o.value1!==i||o.value2!==r||o.value3!==n)&&(o.value1=i,o.value2=r,o.value3=n,this.renderer.setProgram(this.program),t.call(this.gl,o.location,i,r,n),this.pipeline.currentShader=this),this):this},setUniform4:function(t,e,i,r,n,s,o){var a=this.uniforms[e];return a?((o||a.value1!==i||a.value2!==r||a.value3!==n||a.value4!==s)&&(a.value1=i,a.value2=r,a.value3=n,a.value4=s,this.renderer.setProgram(this.program),t.call(this.gl,a.location,i,r,n,s),this.pipeline.currentShader=this),this):this},set1f:function(t,e){return this.setUniform1(this.gl.uniform1f,t,e)},set2f:function(t,e,i){return this.setUniform2(this.gl.uniform2f,t,e,i)},set3f:function(t,e,i,r){return this.setUniform3(this.gl.uniform3f,t,e,i,r)},set4f:function(t,e,i,r,n){return this.setUniform4(this.gl.uniform4f,t,e,i,r,n)},set1fv:function(t,e){return this.setUniform1(this.gl.uniform1fv,t,e,!0)},set2fv:function(t,e){return this.setUniform1(this.gl.uniform2fv,t,e,!0)},set3fv:function(t,e){return this.setUniform1(this.gl.uniform3fv,t,e,!0)},set4fv:function(t,e){return this.setUniform1(this.gl.uniform4fv,t,e,!0)},set1iv:function(t,e){return this.setUniform1(this.gl.uniform1iv,t,e,!0)},set2iv:function(t,e){return this.setUniform1(this.gl.uniform2iv,t,e,!0)},set3iv:function(t,e){return this.setUniform1(this.gl.uniform3iv,t,e,!0)},set4iv:function(t,e){return this.setUniform1(this.gl.uniform4iv,t,e,!0)},set1i:function(t,e){return this.setUniform1(this.gl.uniform1i,t,e)},set2i:function(t,e,i){return this.setUniform2(this.gl.uniform2i,t,e,i)},set3i:function(t,e,i,r){return this.setUniform3(this.gl.uniform3i,t,e,i,r)},set4i:function(t,e,i,r,n){return this.setUniform4(this.gl.uniform4i,t,e,i,r,n)},setMatrix2fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix2fv,t,e,i,!0)},setMatrix3fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix3fv,t,e,i,!0)},setMatrix4fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix4fv,t,e,i,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=o},function(t,e,i){var r=i(0),n=i(59),s=i(2),o=i(875),a=i(876),h=i(25),l=i(107),u=i(58),c=new r({Extends:u,initialize:function(t){t.fragShader=s(t,"fragShader",o),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),u.call(this,t),this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(t,e,i,r,n,s){this.renderer.pipelines.set(this);var o=this.calcMatrix;s&&s.multiply(n,o);var a=t+i,h=e+r,l=o.getX(t,e),u=o.getY(t,e),c=o.getX(t,h),d=o.getY(t,h),f=o.getX(a,h),p=o.getY(a,h),g=o.getX(a,e),v=o.getY(a,e),m=this.fillTint;this.batchQuad(l,u,c,d,f,p,g,v,m.TL,m.TR,m.BL,m.BR)},batchFillTriangle:function(t,e,i,r,n,s,o,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(o,h);var l=h.getX(t,e),u=h.getY(t,e),c=h.getX(i,r),d=h.getY(i,r),f=h.getX(n,s),p=h.getY(n,s),g=this.fillTint;this.batchTri(l,u,c,d,f,p,g.TL,g.TR,g.BL)},batchStrokeTriangle:function(t,e,i,r,n,s,o,a,h){var l=this.tempTriangle;l[0].x=t,l[0].y=e,l[0].width=o,l[1].x=i,l[1].y=r,l[1].width=o,l[2].x=n,l[2].y=s,l[2].width=o,l[3].x=t,l[3].y=e,l[3].width=o,this.batchStrokePath(l,o,!1,a,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(e,r);for(var s,o,a=t.length,h=this.polygonCache,l=this.fillTint.TL,u=this.fillTint.TR,c=this.fillTint.BL,d=0;d<a;++d)o=t[d],h.push(o.x,o.y);a=(s=n(h)).length;for(var f=0;f<a;f+=3){var p=2*s[f+0],g=2*s[f+1],v=2*s[f+2],m=h[p+0],y=h[p+1],x=h[g+0],b=h[g+1],w=h[v+0],T=h[v+1],S=r.getX(m,y),E=r.getY(m,y),C=r.getX(x,b),_=r.getY(x,b),A=r.getX(w,T),M=r.getY(w,T);this.batchTri(S,E,C,_,A,M,l,u,c)}h.length=0},batchStrokePath:function(t,e,i,r,n){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,o=0;o<s;o++){var a=t[o],h=t[o+1];this.batchLine(a.x,a.y,h.x,h.y,a.width/2,h.width/2,e,o,!i&&o===s-1,r,n)}},batchLine:function(t,e,i,r,n,s,o,a,h,l,u){this.renderer.pipelines.set(this);var c=this.calcMatrix;u&&u.multiply(l,c);var d=i-t,f=r-e,p=Math.sqrt(d*d+f*f),g=n*(r-e)/p,v=n*(t-i)/p,m=s*(r-e)/p,y=s*(t-i)/p,x=i-m,b=r-y,w=t-g,T=e-v,S=i+m,E=r+y,C=t+g,_=e+v,A=c.getX(x,b),M=c.getY(x,b),P=c.getX(w,T),k=c.getY(w,T),O=c.getX(S,E),R=c.getY(S,E),L=c.getX(C,_),I=c.getY(C,_),F=this.strokeTint,D=F.TL,B=F.TR,N=F.BL,z=F.BR;if(this.batchQuad(L,I,P,k,A,M,O,R,D,B,N,z),!(o<=2)){var U=this.prevQuad,Y=this.firstQuad;a>0&&U[4]?this.batchQuad(L,I,P,k,U[0],U[1],U[2],U[3],D,B,N,z):(Y[0]=L,Y[1]=I,Y[2]=P,Y[3]=k,Y[4]=1),h&&Y[4]?this.batchQuad(A,M,O,R,Y[0],Y[1],Y[2],Y[3],D,B,N,z):(U[0]=A,U[1]=M,U[2]=O,U[3]=R,U[4]=1)}},batchVert:function(t,e,i){var r=this.vertexViewF32,n=this.vertexViewU32,s=this.vertexCount*this.currentShader.vertexComponentCount-1;r[++s]=t,r[++s]=e,n[++s]=i,this.vertexCount++},batchQuad:function(t,e,i,r,n,s,o,a,h,l,u,c){var d=!1;return this.shouldFlush(6)&&(this.flush(),d=!0),this.batchVert(t,e,h),this.batchVert(i,r,u),this.batchVert(n,s,c),this.batchVert(t,e,h),this.batchVert(n,s,c),this.batchVert(o,a,l),d},batchTri:function(t,e,i,r,n,s,o,a,h){var l=!1;return this.shouldFlush(3)&&(this.flush(),l=!0),this.batchVert(t,e,o),this.batchVert(i,r,a),this.batchVert(n,s,h),l},destroy:function(){return u.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=c},function(t,e,i){var r=i(0),n=i(2),s=i(877),o=i(108),a=i(3),h=i(58),l=10,u=new a,c=new r({Extends:o,initialize:function(t){l=t.game.renderer.config.maxLights;for(var e=n(t,"fragShader",s),i=[],r=1;r<=l;r++)i.push({name:"lights"+r,fragShader:e.replace("%LIGHT_COUNT%",r.toString())});t.shaders=i,o.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){h.prototype.boot.call(this);var t=this.gl,e=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:e};for(var i=0;i<this.shaders.length;i++)this["lightShader"+(i+1)]=this.shaders[i]},onRender:function(t,e){var i=t.sys.lights;if(this.lightsActive=!1,i&&i.active){var r=i.getLights(e),n=r.length;if(0!==n){var s;this.lightsActive=!0,this.setShader(this["lightShader"+n],!0);var o=this.renderer.height,a=e.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",e.x,e.y,e.rotation,e.zoom),this.set3f("uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),s=0;s<n;s++){var h=r[s].light,l=h.color,c="uLights["+s+"].";a.transformPoint(h.x,h.y,u),this.set2f(c+"position",u.x-e.scrollX*h.scrollFactorX*e.zoom,o-(u.y-e.scrollY*h.scrollFactorY*e.zoom)),this.set3f(c+"color",l.r,l.g,l.b),this.set1f(c+"intensity",h.intensity),this.set1f(c+"radius",h.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var e=this.inverseRotationMatrix;if(t){var i=-t,r=Math.cos(i),n=Math.sin(i);e[1]=n,e[3]=-n,e[0]=e[4]=r}else e[0]=e[4]=1,e[1]=e[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t}},setTexture2D:function(t,e){var i=this.renderer;void 0===t&&(t=i.tempTextures[0]);var r=this.getNormalMap(e);i.isNewNormalMap(t,r)&&(this.flush(),i.setTextureZero(t),i.setNormalMap(r));var n=e?e.rotation:0;return this.setNormalMapRotation(n),this.currentUnit=0,0},setGameObject:function(t,e){void 0===e&&(e=t.frame);var i=this.renderer,r=e.glTexture,n=this.getNormalMap(t);return i.isNewNormalMap()&&(this.flush(),i.setTextureZero(r),i.setNormalMap(n)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function(t){var e;return t?t.displayTexture?e=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?e=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(e=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):e=this.defaultNormalMap,e||(e=this.defaultNormalMap),e.glTexture},batchSprite:function(t,e,i){this.lightsActive&&o.prototype.batchSprite.call(this,t,e,i)},batchTexture:function(t,e,i,r,n,s,a,h,l,u,c,d,f,p,g,v,m,y,x,b,w,T,S,E,C,_,A,M,P,k,O,R){this.lightsActive&&o.prototype.batchTexture.call(this,t,e,i,r,n,s,a,h,l,u,c,d,f,p,g,v,m,y,x,b,w,T,S,E,C,_,A,M,P,k,O,R)},batchTextureFrame:function(t,e,i,r,n,s,a){this.lightsActive&&o.prototype.batchTextureFrame.call(this,t,e,i,r,n,s,a)}});c.LIGHT_COUNT=l,t.exports=c},function(t,e,i){var r=i(0),n=i(2),s=i(880),o=i(881),a=i(58),h=new r({Extends:a,initialize:function(t){t.vertShader=n(t,"vertShader",o),t.fragShader=n(t,"fragShader",s),t.attributes=n(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,t)},onRender:function(t,e){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",e.zoom)},batchPointLight:function(t,e,i,r,n,s,o,a,h,l,u,c){var d=t.color,f=t.intensity,p=t.radius,g=t.attenuation,v=d.r*f,m=d.g*f,y=d.b*f,x=e.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,r,u,c,p,g,v,m,y,x),this.batchLightVert(n,s,u,c,p,g,v,m,y,x),this.batchLightVert(o,a,u,c,p,g,v,m,y,x),this.batchLightVert(i,r,u,c,p,g,v,m,y,x),this.batchLightVert(o,a,u,c,p,g,v,m,y,x),this.batchLightVert(h,l,u,c,p,g,v,m,y,x)},batchLightVert:function(t,e,i,r,n,s,o,a,h,l){var u=this.vertexViewF32,c=this.vertexCount*this.currentShader.vertexComponentCount-1;u[++c]=t,u[++c]=e,u[++c]=i,u[++c]=r,u[++c]=n,u[++c]=s,u[++c]=o,u[++c]=a,u[++c]=h,u[++c]=l,this.vertexCount++}});t.exports=h},function(t,e,i){var r=i(0),n=i(2),s=i(108),o=new r({Extends:s,initialize:function(t){t.topology=5,t.batchSize=n(t,"batchSize",256),s.call(this,t)}});t.exports=o},function(t,e,i){var r=i(0),n=i(2),s=i(108),o=i(882),a=i(883),h=i(58),l=new r({Extends:s,initialize:function(t){t.fragShader=n(t,"fragShader",o),t.vertShader=n(t,"vertShader",a),t.forceZero=!0,s.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=l},function(t,e,i){var r=i(884),n=i(35),s=i(0),o=i(198),a=i(885),h=i(886),l=i(2),u=i(887),c=i(382),d=i(58),f=new s({Extends:d,initialize:function(t){t.renderTarget=l(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=l(t,"vertShader",c),t.shaders=l(t,"shaders",[{name:"Copy",fragShader:h},{name:"AddBlend",fragShader:r},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:a}]),t.attributes=l(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,d.call(this,t),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var t=this.shaders,e=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=e[0],this.fullFrame2=e[1],this.halfFrame1=e[2],this.halfFrame2=e[3]},copyFrame:function(t,e,i,r,n){void 0===i&&(i=1),void 0===r&&(r=!0),void 0===n&&(n=!0);var s=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture),e?(s.viewport(0,0,e.width,e.height),s.bindFramebuffer(s.FRAMEBUFFER,e.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e.texture,0)):s.viewport(0,0,t.width,t.height),r&&(n?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT)),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blitFrame:function(t,e,i,r,s,o){void 0===i&&(i=1),void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!1);var a=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),t.height>e.height)a.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e);else{var h=e.height-t.height;a.viewport(0,h,t.width,t.height)}if(a.bindFramebuffer(a.FRAMEBUFFER,e.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e.texture,0),r&&(s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),o){var l=this.renderer.currentBlendMode;this.renderer.setBlendMode(n.ERASE)}a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),o&&this.renderer.setBlendMode(l),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,e,i,r,n,s,o,a){void 0===o&&(o=!0),void 0===a&&(a=!0);var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,t.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t.texture,0),o&&(a?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,e.texture),h.copyTexSubImage2D(h.TEXTURE_2D,0,0,0,i,r,n,s),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},copyToGame:function(t){var e=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.texture),e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(t,e,i,r){void 0===i&&(i=!0),void 0===r&&(r=this.colorMatrix);var n=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.texture),e?(n.viewport(0,0,e.width,e.height),n.bindFramebuffer(n.FRAMEBUFFER,e.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.texture,0)):n.viewport(0,0,t.width,t.height),i?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)},blendFrames:function(t,e,i,r,n,s){void 0===r&&(r=1),void 0===n&&(n=!0),void 0===s&&(s=this.linearShader);var o=this.gl;this.setShader(s),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",r),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,e.texture),i?(o.bindFramebuffer(o.FRAMEBUFFER,i.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i.texture,0),o.viewport(0,0,i.width,i.height)):o.viewport(0,0,t.width,t.height),n?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)},blendFramesAdditive:function(t,e,i,r,n){this.blendFrames(t,e,i,r,n,this.addShader)},clearFrame:function(t,e){void 0===e&&(e=!0);var i=this.gl;i.viewport(0,0,t.width,t.height),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer),e?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);var r=this.renderer.currentFramebuffer;i.bindFramebuffer(i.FRAMEBUFFER,r)},setUVs:function(t,e,i,r,n,s,o,a){var h=this.vertexViewF32;h[2]=t,h[3]=e,h[6]=i,h[7]=r,h[10]=n,h[11]=s,h[14]=t,h[15]=e,h[18]=n,h[19]=s,h[22]=o,h[23]=a},setTargetUVs:function(t,e){var i=e.height/t.height;i=i>.5?.5-(i-.5):.5-i+.5,this.setUVs(0,i,0,1+i,1,1+i,1,i)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=f},function(t,e){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,e,i){var r=i(31),n=i(38),s=i(2);t.exports=function(t,e){var i=t.getContext("experimental-webgl"),o=s(e,"callback"),a=s(e,"type","image/png"),h=s(e,"encoder",.92),l=s(e,"x",0),u=s(e,"y",0),c=s(e,"getPixel",!1),d=s(e,"isFramebuffer",!1),f=d?s(e,"bufferWidth",1):i.drawingBufferWidth,p=d?s(e,"bufferHeight",1):i.drawingBufferHeight;if(c){var g=new Uint8Array(4),v=d?u:p-u;i.readPixels(l,v,1,1,i.RGBA,i.UNSIGNED_BYTE,g),o.call(null,new n(g[0],g[1],g[2],g[3]/255))}else{var m=s(e,"width",f),y=s(e,"height",p),x=new Uint8Array(m*y*4);i.readPixels(l,p-u-y,m,y,i.RGBA,i.UNSIGNED_BYTE,x);for(var b=r.createWebGL(this,m,y),w=b.getContext("2d"),T=w.getImageData(0,0,m,y),S=T.data,E=0;E<y;E++)for(var C=0;C<m;C++){var _=4*((y-E-1)*m+C),A=4*(E*m+C);S[A+0]=x[_+0],S[A+1]=x[_+1],S[A+2]=x[_+2],S[A+3]=x[_+3]}w.putImageData(T,0,0);var M=new Image;M.onerror=function(){o.call(null),r.remove(b)},M.onload=function(){o.call(null,M),r.remove(b)},M.src=b.toDataURL(a,h)}}},function(t,e,i){var r=i(33);t.exports=function(t){var e=t.config;if(!e.hideBanner){var i="WebGL";e.renderType===r.CANVAS?i="Canvas":e.renderType===r.HEADLESS&&(i="Headless");var n,s=e.audio,o=t.device.audio;if(n=o.webAudio&&!s.disableWebAudio?"Web Audio":s.noAudio||!o.webAudio&&!o.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+r.VERSION+" / https://phaser.io");else{var a,h="",l=[h];Array.isArray(e.bannerBackgroundColor)?(e.bannerBackgroundColor.forEach((function(t){h=h.concat("%c "),l.push("background: "+t),a=t})),l[l.length-1]="color: "+e.bannerTextColor+"; background: "+a):(h=h.concat("%c "),l.push("color: "+e.bannerTextColor+"; background: "+e.bannerBackgroundColor)),l.push("background: transparent"),e.gameTitle&&(h=h.concat(e.gameTitle),e.gameVersion&&(h=h.concat(" v"+e.gameVersion)),e.hidePhaser||(h=h.concat(" / "))),e.hidePhaser||(h=h.concat("Phaser v"+r.VERSION+" ("+i+" | "+n+")")),h=h.concat(" %c "+e.gameURL),l[0]=h,console.log.apply(console,l)}}}},function(t,e,i){var r=i(0),n=i(6),s=i(1),o=i(386),a=new r({initialize:function(t,e){this.game=t,this.raf=new o,this.started=!1,this.running=!1,this.minFps=n(e,"min",5),this.targetFps=n(e,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=n(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=n(e,"deltaHistory",10),this.panicMax=n(e,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=n(e,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now();this.now=t;var e=t-this.lastTime;e<0&&(e=0),this.rawDelta=e;var i=this.deltaIndex,r=this.deltaHistory,n=this.deltaSmoothingMax,s=e,o=e;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,s=Math.min(s,this._target)),s>this._min&&(s=r[i],s=Math.min(s,this._min)),r[i]=s,this.deltaIndex++,this.deltaIndex>n&&(this.deltaIndex=0),o=0;for(var a=0;a<n;a++)o+=r[a];o/=n}this.delta=o,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var h=o/this._target;this.callback(t,o,h),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});t.exports=a},function(t,e,i){var r=i(0),n=i(1),s=new r({initialize:function(){this.isRunning=!1,this.callback=n,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function e(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var i=Date.now(),r=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(e,r)}},start:function(t,e,i){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.target=i,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=n}});t.exports=s},function(t,e,i){var r=i(22);t.exports=function(t){var e,i=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")})),e&&document.addEventListener(e,(function(t){document.hidden||"pause"===t.type?i.emit(r.HIDDEN):i.emit(r.VISIBLE)}),!1),window.onblur=function(){i.emit(r.BLUR)},window.onfocus=function(){i.emit(r.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,e,i){var r=i(389),n=i(31),s=i(6);t.exports=function(t){var e=s(t,"data",[]),i=s(t,"canvas",null),o=s(t,"palette",r),a=s(t,"pixelWidth",1),h=s(t,"pixelHeight",a),l=s(t,"resizeCanvas",!0),u=s(t,"clearCanvas",!0),c=s(t,"preRender",null),d=s(t,"postRender",null),f=Math.floor(Math.abs(e[0].length*a)),p=Math.floor(Math.abs(e.length*h));i||(i=n.create2D(this,f,p),l=!1,u=!1),l&&(i.width=f,i.height=p);var g=i.getContext("2d");u&&g.clearRect(0,0,f,p),c&&c(i,g);for(var v=0;v<e.length;v++)for(var m=e[v],y=0;y<m.length;y++){var x=m[y];"."!==x&&" "!==x&&(g.fillStyle=o[x],g.fillRect(y*a,v*h,a,h))}return d&&d(i,g),i}},function(t,e){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,e,i){var r=i(0),n=i(358),s=i(94),o=i(3),a=new r({Extends:s,initialize:function(t,e,i,r){s.call(this,"CubicBezierCurve"),Array.isArray(t)&&(r=new o(t[6],t[7]),i=new o(t[4],t[5]),e=new o(t[2],t[3]),t=new o(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i,this.p3=r},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.p0,r=this.p1,s=this.p2,a=this.p3;return e.set(n(t,i.x,r.x,s.x,a.x),n(t,i.y,r.y,s.y,a.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(t){var e=t.points,i=new o(e[0],e[1]),r=new o(e[2],e[3]),n=new o(e[4],e[5]),s=new o(e[6],e[7]);return new a(i,r,n,s)},t.exports=a},function(t,e,i){var r=i(0),n=i(94),s=i(36),o=i(6),a=i(196),h=i(3),l=new r({Extends:n,initialize:function(t,e,i,r,a,l,u,c){if("object"==typeof t){var d=t;t=o(d,"x",0),e=o(d,"y",0),i=o(d,"xRadius",0),r=o(d,"yRadius",i),a=o(d,"startAngle",0),l=o(d,"endAngle",360),u=o(d,"clockwise",!1),c=o(d,"rotation",0)}else void 0===r&&(r=i),void 0===a&&(a=0),void 0===l&&(l=360),void 0===u&&(u=!1),void 0===c&&(c=0);n.call(this,"EllipseCurve"),this.p0=new h(t,e),this._xRadius=i,this._yRadius=r,this._startAngle=s(a),this._endAngle=s(l),this._clockwise=u,this._rotation=s(c)},getStartPoint:function(t){return void 0===t&&(t=new h),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new h);for(var i=2*Math.PI,r=this._endAngle-this._startAngle,n=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=n?0:i),this._clockwise&&!n&&(r===i?r=-i:r-=i);var s=this._startAngle+t*r,o=this.p0.x+this._xRadius*Math.cos(s),a=this.p0.y+this._yRadius*Math.sin(s);if(0!==this._rotation){var l=Math.cos(this._rotation),u=Math.sin(this._rotation),c=o-this.p0.x,d=a-this.p0.y;o=c*l-d*u+this.p0.x,a=c*u+d*l+this.p0.y}return e.set(o,a)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return a(this._startAngle)},set:function(t){this._startAngle=s(t)}},endAngle:{get:function(){return a(this._endAngle)},set:function(t){this._endAngle=s(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return a(this._rotation)},set:function(t){this._rotation=s(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});l.fromJSON=function(t){return new l(t)},t.exports=l},function(t,e,i){var r=i(0),n=i(94),s=i(199),o=i(10),a=i(3),h=new r({Extends:n,initialize:function(t,e){n.call(this,"LineCurve"),Array.isArray(t)&&(e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new o),s([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new a),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(t,e){return void 0===e&&(e=new a),e.copy(this.p1).subtract(this.p0).normalize(),e},getUtoTmapping:function(t,e,i){var r;if(e){var n=this.getLengths(i),s=n[n.length-1];r=Math.min(e,s)/s}else r=t;return r},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});h.fromJSON=function(t){var e=t.points,i=new a(e[0],e[1]),r=new a(e[2],e[3]);return new h(i,r)},t.exports=h},function(t,e,i){var r=i(0),n=i(3),s=new r({initialize:function(t,e){this.active=!1,this.p0=new n(t,e)},getPoint:function(t,e){return void 0===e&&(e=new n),e.copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=s},function(t,e,i){var r=i(0),n=i(94),s=i(359),o=i(3),a=new r({Extends:n,initialize:function(t,e,i){n.call(this,"QuadraticBezier"),Array.isArray(t)&&(i=new o(t[4],t[5]),e=new o(t[2],t[3]),t=new o(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.p0,r=this.p1,n=this.p2;return e.set(s(t,i.x,r.x,n.x),s(t,i.y,r.y,n.y))},draw:function(t,e){void 0===e&&(e=32);var i=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(t){var e=t.points,i=new o(e[0],e[1]),r=new o(e[2],e[3]),n=new o(e[4],e[5]);return new a(i,r,n)},t.exports=a},function(t,e,i){var r=i(194),n=i(0),s=i(94),o=i(3),a=new n({Extends:s,initialize:function(t){void 0===t&&(t=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var i=new o;"number"==typeof t[e]?(i.x=t[e],i.y=t[e+1],e++):Array.isArray(t[e])?(i.x=t[e][0],i.y=t[e][1]):(i.x=t[e].x,i.y=t[e].y),this.points.push(i)}return this},addPoint:function(t,e){var i=new o(t,e);return this.points.push(i),i},getStartPoint:function(t){return void 0===t&&(t=new o),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new o);var i=this.points,n=(i.length-1)*t,s=Math.floor(n),a=n-s,h=i[0===s?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],c=i[s>i.length-3?i.length-1:s+2];return e.set(r(a,h.x,l.x,u.x,c.x),r(a,h.y,l.y,u.y,c.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});a.fromJSON=function(t){return new a(t.points)},t.exports=a},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),i&&""!==i||(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===r&&(r=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=i,this.uniforms=r}});t.exports=r},function(t,e,i){var r=i(38);r.ColorSpectrum=i(909),r.ColorToRGBA=i(910),r.ComponentToHex=i(398),r.GetColor=i(103),r.GetColor32=i(328),r.HexStringToColor=i(327),r.HSLToColor=i(911),r.HSVColorWheel=i(912),r.HSVToRGB=i(188),r.HueToComponent=i(399),r.IntegerToColor=i(189),r.IntegerToRGB=i(330),r.Interpolate=i(913),r.ObjectToColor=i(331),r.RandomRGB=i(914),r.RGBStringToColor=i(332),r.RGBToHSV=i(329),r.RGBToString=i(915),r.ValueToColor=i(187),t.exports=r},function(t,e){t.exports=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},function(t,e){t.exports=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}},function(t,e,i){var r=i(105);t.exports=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var e=function(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()};document.body?r.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)}else t()}},function(t,e){t.exports=function(t){if(!t)return window.innerHeight;var e=Math.abs(window.orientation),i={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),i.w=90===e?r.offsetHeight:window.innerWidth,i.h=90===e?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,90!==Math.abs(window.orientation)?i.h:i.w}},function(t,e,i){var r=i(201);t.exports=function(t,e){var i=window.screen,n=!!i&&(i.orientation||i.mozOrientation||i.msOrientation);return n&&"string"==typeof n.type?n.type:"string"==typeof n?n:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?r.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?r.ORIENTATION.LANDSCAPE:void 0:e>t?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE}},function(t,e){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,e){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,e){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,e){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,e){t.exports=function(t){var e;return""!==t&&("string"==typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e||(e=document.body),e}},function(t,e){t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},function(t,e,i){var r=i(0),n=i(203),s=i(9),o=i(51),a=i(22),h=i(410),l=i(411),u=i(412),c=i(413),d=i(25),f=i(177),p=new r({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new h(this):null,this.mouse=e.inputMouse?new l(this):null,this.touch=e.inputTouch?new c(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var i=0;i<=this.pointersTotal;i++){var r=new u(this,i);r.smoothFactor=e.inputSmoothFactor,this.pointers.push(r)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(a.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(a.PRE_RENDER,this.preRender,this),this.game.events.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(o.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(o.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(o.MANAGER_UPDATE);for(var r=0;r<i.length;r++){var n=i[r];if(n.sys.input&&n.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var i=0;i<t;i++){var r=this.pointers.length,n=new u(this,r);n.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(n),this.pointersTotal++,e.push(n)}return e},updateInputPlugins:function(t,e){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var r=0;r<i.length;r++){var n=i[r];if(n.sys.input&&(n.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var e=this.pointers,i=[],r=0;r<t.changedTouches.length;r++)for(var s=t.changedTouches[r],o=1;o<this.pointersTotal;o++){var a=e[o];if(!a.active){a.touchstart(s,t),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(n.TOUCH_START,i)},onTouchMove:function(t){for(var e=this.pointers,i=[],r=0;r<t.changedTouches.length;r++)for(var s=t.changedTouches[r],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchmove(s,t),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(n.TOUCH_MOVE,i)},onTouchEnd:function(t){for(var e=this.pointers,i=[],r=0;r<t.changedTouches.length;r++)for(var s=t.changedTouches[r],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchend(s,t),i.push(a);break}}this.updateInputPlugins(n.TOUCH_END,i)},onTouchCancel:function(t){for(var e=this.pointers,i=[],r=0;r<t.changedTouches.length;r++)for(var s=t.changedTouches[r],o=1;o<this.pointersTotal;o++){var a=e[o];if(a.active&&a.identifier===s.identifier){a.touchcancel(s,t),i.push(a);break}}this.updateInputPlugins(n.TOUCH_CANCEL,i)},onMouseDown:function(t){var e=this.mousePointer;e.down(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var e=this.mousePointer;e.move(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var e=this.mousePointer;e.up(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var e=this.mousePointer;e.wheel(t),this.activePointer=e,this.updateInputPlugins(n.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(o.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var i=t.input;if(!i||!i.enabled||!i.alwaysEnabled&&!t.willRender(e))return!1;var r=!0,n=t.parentContainer;if(n)do{if(!n.willRender(e)){r=!1;break}n=n.parentContainer}while(n);return r},hitTest:function(t,e,i,r){void 0===r&&(r=this._tempHitTest);var n=this._tempPoint,s=i.scrollX,o=i.scrollY;r.length=0;var a=t.x,h=t.y;i.getWorldPoint(a,h,n),t.worldX=n.x,t.worldY=n.y;for(var l={x:0,y:0},u=this._tempMatrix,c=this._tempMatrix2,d=0;d<e.length;d++){var p=e[d];if(this.inputCandidate(p,i)){var g=n.x+s*p.scrollFactorX-s,v=n.y+o*p.scrollFactorY-o;p.parentContainer?(p.getWorldTransformMatrix(u,c),u.applyInverse(g,v,l)):f(g,v,p.x,p.y,p.rotation,p.scaleX,p.scaleY,l),this.pointWithinHitArea(p,l.x,l.y)&&r.push(p)}}return r},pointWithinHitArea:function(t,e,i){e+=t.displayOriginX,i+=t.displayOriginY;var r=t.input;return!(!r||!r.hitAreaCallback(r.hitArea,e,i,t)||(r.localX=e,r.localY=i,0))},pointWithinInteractiveObject:function(t,e,i){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,i+=t.gameObject.displayOriginY,t.localX=e,t.localY=i,t.hitAreaCallback(t.hitArea,e,i,t))},transformPointer:function(t,e,i,r){var n=t.position,s=t.prevPosition;s.x=n.x,s.y=n.y;var o=this.scaleManager.transformX(e),a=this.scaleManager.transformY(i),h=t.smoothFactor;r&&0!==h?(n.x=o*h+s.x*(1-h),n.y=a*h+s.y*(1-h)):(n.x=o,n.y=a)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=p},function(t,e,i){var r=i(93),n=i(0),s=i(22),o=i(51),a=i(143),h=i(1),l=new n({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,t.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(o.MANAGER_PROCESS);var i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!i&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}},this.onKeyUp=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(o.MANAGER_PROCESS);var i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!i&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var r=t[i];"string"==typeof r&&(r=a[r.trim().toUpperCase()]),-1===e.indexOf(r)&&e.push(r)}this.preventDefault=e.length>0},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var n=t[i];"string"==typeof n&&(n=a[n.toUpperCase()]),r(e,n)}this.preventDefault=e.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=l},function(t,e,i){var r=i(0),n=i(191),s=i(51),o=i(1),a=new r({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){if(n.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){n.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var e=this,i=this.manager,r=i.canvas,s=window&&window.focus&&i.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseMove(t),e.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){s&&window.focus(),!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseDown(t),e.preventDefaultDown&&t.target===r&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==r&&i.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onMouseUp(t),e.preventDefaultUp&&t.target===r&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==r&&i.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.onMouseWheel(t),e.preventDefaultWheel&&t.target===r&&t.preventDefault()};var o={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,o),t.addEventListener("mouseout",this.onMouseOut,o),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,o),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,o),window.top.addEventListener("mouseup",this.onMouseUpWindow,o)}catch(t){window.addEventListener("mousedown",this.onMouseDownWindow,o),window.addEventListener("mouseup",this.onMouseUpWindow,o),this.isTop=!1}n.pointerLock&&(this.pointerLockChange=function(t){var r=e.target;e.locked=document.pointerLockElement===r||document.mozPointerLockElement===r||document.webkitPointerLockElement===r,i.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),n.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},function(t,e,i){var r=i(349),n=i(0),s=i(50),o=i(124),a=i(360),h=i(3),l=i(105),u=new n({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new h,this.prevPosition=new h,this.midPoint=new h(-1,-1),this.velocity=new h,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var e=t.getWorldPoint(this.x,this.y);return this.worldX=e.x,this.worldY=e.y,this},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t=this.position.x,e=this.position.y,i=this.midPoint.x,n=this.midPoint.y;if(t!==i||e!==n){var s=a(this.motionFactor,i,t),h=a(this.motionFactor,n,e);o(s,t,.1)&&(s=t),o(h,e,.1)&&(h=e),this.midPoint.set(s,h);var l=t-s,u=e-h;this.velocity.set(l,u),this.angle=r(s,h,t,e),this.distance=Math.sqrt(l*l+u*u)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),l.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=e.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=e.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var i=this.prevPosition.x,r=this.prevPosition.y,n=this.position.x,s=this.position.y,o=0;o<t;o++){var h=1/t*o;e[o]={x:a(h,i,n),y:a(h,r,s)}}return e},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=u},function(t,e,i){var r=i(0),n=i(51),s=i(1),o=new r({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.onTouchOver=s,this.onTouchOut=s,t.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this,e=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(r){i&&window.focus(),!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(r),t.capture&&r.cancelable&&r.target===e&&r.preventDefault())},this.onTouchStartWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchStart(i)},this.onTouchMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(e),t.capture&&e.cancelable&&e.preventDefault())},this.onTouchEnd=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(i),t.capture&&i.cancelable&&i.target===e&&i.preventDefault())},this.onTouchEndWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&i.target!==e&&t.manager.onTouchEnd(i)},this.onTouchCancel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(e),t.capture&&e.preventDefault())},this.onTouchCancelWindow=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(e)},this.onTouchOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onTouchOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)};var r=this.target;if(r){var n={passive:!0},s={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?s:n),r.addEventListener("touchmove",this.onTouchMove,this.capture?s:n),r.addEventListener("touchend",this.onTouchEnd,this.capture?s:n),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?s:n),r.addEventListener("touchover",this.onTouchOver,this.capture?s:n),r.addEventListener("touchout",this.onTouchOut,this.capture?s:n),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,s),window.addEventListener("touchend",this.onTouchEndWindow,s),window.addEventListener("touchcancel",this.onTouchCancelWindow,s)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=o},function(t,e,i){var r=i(0),n=i(22),s=i(9),o=i(8),a=i(16),h=i(5),l=i(2),u=i(24),c=i(93),d=new r({Extends:s,initialize:function(t){s.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(n.BOOT,this.boot,this)},boot:function(){var t,e,i,r,s,o,a,h=this.game.config,u=h.installGlobalPlugins;for(u=u.concat(this._pendingGlobal),t=0;t<u.length;t++)e=u[t],i=l(e,"key",null),r=l(e,"plugin",null),s=l(e,"start",!1),o=l(e,"mapping",null),a=l(e,"data",null),i&&(r?this.install(i,r,s,o,a):console.warn("Missing `plugin` for key: "+i));for(u=(u=h.installScenePlugins).concat(this._pendingScene),t=0;t<u.length;t++)e=u[t],i=l(e,"key",null),r=l(e,"plugin",null),o=l(e,"mapping",null),i&&(r?this.installScenePlugin(i,r,o):console.warn("Missing `plugin` for key: "+i));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(n.DESTROY,this.destroy,this)},addToScene:function(t,e,i){var r,n,s,o=this.game,a=t.scene,h=t.settings.map,l=t.settings.isBooted;for(r=0;r<e.length;r++)o[n=e[r]]?(t[n]=o[n],h.hasOwnProperty(n)&&(a[h[n]]=t[n])):"game"===n&&h.hasOwnProperty(n)&&(a[h[n]]=o);for(var c=0;c<i.length;c++)for(s=i[c],r=0;r<s.length;r++)if(n=s[r],u.hasCore(n)){var d=u.getCore(n),f=d.mapping,p=new d.plugin(a,this,f);t[f]=p,d.custom?a[f]=p:h.hasOwnProperty(f)&&(a[h[f]]=p),l&&p.boot()}for(s=this.plugins,r=0;r<s.length;r++){var g=s[r];g.mapping&&(a[g.mapping]=g.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t.concat(this.scenePlugins)},installScenePlugin:function(t,e,i,r,n){if(void 0===n&&(n=!1),"function"==typeof e){if(u.hasCore(t)){if(!n&&u.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else u.register(t,e,i,!0),this.scenePlugins.push(t);if(r){var s=new e(r,this,t);r.sys[t]=s,i&&""!==i&&(r[i]=s),s.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,e,i,r,n){if(void 0===i&&(i=!1),void 0===r&&(r=null),void 0===n&&(n=null),"function"!=typeof e)return console.warn("Invalid Plugin: "+t),null;if(u.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==r&&(i=!0),this.game.isBooted){if(u.registerCustom(t,e,r,n),i)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:i,mapping:r,data:n});return null},getIndex:function(t){for(var e=this.plugins,i=0;i<e.length;i++)if(e[i].key===t)return i;return-1},getEntry:function(t){var e=this.getIndex(t);if(-1!==e)return this.plugins[e]},isActive:function(t){var e=this.getEntry(t);return e&&e.active},start:function(t,e){void 0===e&&(e=t);var i=this.getEntry(e);return i&&!i.active?(i.active=!0,i.plugin.start()):i||(i=this.createEntry(t,e)),i?i.plugin:null},createEntry:function(t,e){var i=u.getCustom(t);if(i){var r=new i.plugin(this);i={key:e,plugin:r,active:!0,mapping:i.mapping,data:i.data},this.plugins.push(i),r.init(i.data),r.start()}return i},stop:function(t){var e=this.getEntry(t);return e&&e.active&&(e.active=!1,e.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var i=this.getEntry(t);if(i)return i.plugin;var r=this.getClass(t);return r&&e?(i=this.createEntry(t,t))?i.plugin:null:r||null},getClass:function(t){return u.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&c(this.plugins,e),u.removeCustom(t)},removeScenePlugin:function(t){c(this.scenePlugins,t),u.remove(t)},registerGameObject:function(t,e,i){return e&&h.register(t,e),i&&a.register(t,i),this},removeGameObject:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),e&&h.remove(t),i&&a.remove(t),this},registerFileType:function(t,e,i){o.register(t,e),i&&i.sys.load&&(i.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=d},function(t,e,i){var r=i(201),n=i(0),s=i(9),o=i(104),a=i(22),h=i(401),l=i(407),u=i(402),c=i(1),d=i(10),f=i(416),p=i(76),g=i(3),v=new n({Extends:s,initialize:function(t){s.call(this),this.game=t,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new f,this.gameSize=new f,this.baseSize=new f,this.displaySize=new f,this.scaleMode=r.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=r.CENTER.NO_CENTER,this.orientation=r.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:c,windowResize:c,fullScreenChange:c,fullScreenError:c}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(a.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==r.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===r.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(a.PRE_STEP,this.step,this),t.events.once(a.READY,this.refresh,this),t.events.once(a.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e=t.width,i=t.height,n=t.scaleMode,s=t.zoom,o=t.autoRound;if("string"==typeof e){var a=this.parentSize.width;0===a&&(a=window.innerWidth);var h=parseInt(e,10)/100;e=Math.floor(a*h)}if("string"==typeof i){var l=this.parentSize.height;0===l&&(l=window.innerHeight);var c=parseInt(i,10)/100;i=Math.floor(l*c)}this.scaleMode=n,this.autoRound=o,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,o&&(e=Math.floor(e),i=Math.floor(i)),this.gameSize.setSize(e,i),s===r.ZOOM.MAX_ZOOM&&(s=this.getMaxZoom()),this.zoom=s,1!==s&&(this._resetZoom=!0),this.baseSize.setSize(e,i),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*s,t.minHeight*s),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*s,t.maxHeight*s),this.displaySize.setSize(e,i),this.orientation=u(e,i)},getParent:function(t){var e=t.parent;if(null!==e){if(this.parent=l(e),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==r.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();(this.parentIsWindow||0===i.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",i=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==i.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,e=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(e.height=h(!0));var i=e.width,r=e.height;return(t.width!==i||t.height!==r)&&(t.setSize(i,r),!0)},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e.call(screen,t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var i=this.autoRound;i&&(t=Math.floor(t),e=Math.floor(e));var r=this.width,n=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t,e),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,n)},resize:function(t,e){var i=this.zoom,r=this.autoRound;r&&(t=Math.floor(t),e=Math.floor(e));var n=this.width,s=this.height;this.gameSize.resize(t,e),this.baseSize.resize(t,e),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*i,e*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var o=this.canvas.style,a=t*i,h=e*i;return r&&(a=Math.floor(a),h=Math.floor(h)),a===t&&h===e||(o.width=a+"px",o.height=h+"px"),this.refresh(n,s)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var r=this.canvas.style,n=i.style;n.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",n.marginLeft=r.marginLeft,n.marginTop=r.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,e),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var t=u(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(o.ORIENTATION_CHANGE,t))}},updateScale:function(){var t,e,i=this.canvas.style,n=this.gameSize.width,s=this.gameSize.height,o=this.zoom,a=this.autoRound;this.scaleMode===r.SCALE_MODE.NONE?(this.displaySize.setSize(n*o,s*o),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this._resetZoom&&(i.width=t+"px",i.height=e+"px",this._resetZoom=!1)):this.scaleMode===r.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),i.width=t+"px",i.height=e+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=p(this.parentSize.width,this.gameSize.width,0,!0),e=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t=this.autoCenter;if(t!==r.CENTER.NO_CENTER){var e=this.canvas,i=e.style,n=e.getBoundingClientRect(),s=n.width,o=n.height,a=Math.floor((this.parentSize.width-s)/2),h=Math.floor((this.parentSize.height-o)/2);t===r.CENTER.CENTER_HORIZONTALLY?h=0:t===r.CENTER.CENTER_VERTICALLY&&(a=0),i.marginLeft=a+"px",i.marginTop=h+"px"}},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e=this.fullscreen;if(e.available){if(!e.active){var i=this.getFullscreenTarget();e.keyboard?i[e.request](Element.ALLOW_KEYBOARD_INPUT):i[e.request](t)}}else this.emit(o.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var e=t.parentNode;e.insertBefore(this.canvas,t),e.removeChild(t)}}},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,e=this.listeners;e.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},e.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",e.orientationChange,!1),window.addEventListener("resize",e.windowResize,!1),this.fullscreen.available&&(e.fullScreenChange=function(e){return t.onFullScreenChange(e)},e.fullScreenError=function(e){return t.onFullScreenError(e)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",e.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.addEventListener("MSFullscreenError",e.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,e){this.parent&&(this._lastCheck+=e,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(e){document.removeEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(e+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===r.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===r.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=v},function(t,e,i){var r=i(18),n=i(0),s=i(76),o=i(3),a=new n({initialize:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===r&&(r=null),this._width=t,this._height=e,this._parent=r,this.aspectMode=i,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=r(t,0,this.maxWidth),this.minHeight=r(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=r(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=r(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case a.NONE:this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(s(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(t,e,!0);break;case a.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(s(t,this.snapTo.x)),this._height=this.getNewHeight(s(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=r(t,this.minWidth,this.maxWidth),e&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=r(t,this.minHeight,this.maxHeight),e&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var r=this.snapTo,n=0===e?1:t/e;return i&&this.aspectRatio>n||!i&&this.aspectRatio<n?(e=(t=s(t,r.x))/this.aspectRatio,r.y>0&&(t=(e=s(e,r.y))*this.aspectRatio)):(i&&this.aspectRatio<n||!i&&this.aspectRatio>n)&&(t=(e=s(e,r.y))*this.aspectRatio,r.x>0&&(e=(t=s(t,r.x))*(1/this.aspectRatio))),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,t.exports=a},function(t,e,i){var r=i(0),n=i(144),s=i(20),o=i(22),a=i(6),h=i(95),l=i(1),u=i(418),c=i(204),d=new r({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this._pending.push({key:"default",scene:e[i],autoStart:0===i,data:{}})}t.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,e,i,r;for(t=0;t<this._pending.length;t++){var n;i=(e=this._pending[t]).key,(r=e.scene)instanceof u?n=this.createSceneFromInstance(i,r):"object"==typeof r?n=this.createSceneFromObject(i,r):"function"==typeof r&&(n=this.createSceneFromFunction(i,r)),i=n.sys.settings.key,this.keys[i]=n,this.scenes.push(n),this._data[i]&&(n.sys.settings.data=this._data[i].data,this._data[i].autoStart&&(e.autoStart=!0)),(e.autoStart||n.sys.settings.active)&&this._start.push(i)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)e=this._start[t],this.start(e);this._start.length=0}},processQueue:function(){var t=this._pending.length,e=this._queue.length;if(0!==t||0!==e){var i,r;if(t){for(i=0;i<t;i++)r=this._pending[i],this.add(r.key,r.scene,r.autoStart,r.data);for(i=0;i<this._start.length;i++)r=this._start[i],this.start(r);return this._start.length=0,void(this._pending.length=0)}for(i=0;i<this._queue.length;i++)this[(r=this._queue[i]).op](r.keyA,r.keyB);this._queue.length=0}},add:function(t,e,i,r){return void 0===i&&(i=!1),void 0===r&&(r={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:i,data:r}),this.isBooted||(this._data[t]={data:r}),null):(t=this.getKey(t,e),e instanceof u?n=this.createSceneFromInstance(t,e):"object"==typeof e?(e.key=t,n=this.createSceneFromObject(t,e)):"function"==typeof e&&(n=this.createSceneFromFunction(t,e)),n.sys.settings.data=r,t=n.sys.settings.key,this.keys[t]=n,this.scenes.push(n),(i||n.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),n);var n},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var e=this.getScene(t);if(!e||e.sys.isTransitioning())return this;var i=this.scenes.indexOf(e),r=e.sys.settings.key;i>-1&&(delete this.keys[r],this.scenes.splice(i,1),this._start.indexOf(r)>-1&&(i=this._start.indexOf(r),this._start.splice(i,1)),e.sys.destroy())}return this},bootScene:function(t){var e,i=t.sys,r=i.settings;i.sceneUpdate=l,t.init&&(t.init.call(t,r.data),r.status=n.INIT,r.isTransition&&i.events.emit(s.TRANSITION_INIT,r.transitionFrom,r.transitionDuration)),i.load&&(e=i.load).reset(),e&&t.preload?(t.preload.call(t),0===e.list.size?this.create(t):(r.status=n.LOADING,e.once(h.COMPLETE,this.loadComplete,this),e.start())):this.create(t)},loadComplete:function(t){this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var r=this.scenes[i].sys;r.settings.status>n.START&&r.settings.status<=n.RUNNING&&r.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var i=this.scenes[e].sys;i.settings.visible&&i.settings.status>=n.LOADING&&i.settings.status<n.SLEEPING&&i.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,i=e.settings;t.create&&(i.status=n.CREATING,t.create.call(t,i.data),i.status===n.DESTROYED)||(i.isTransition&&e.events.emit(s.TRANSITION_START,i.transitionFrom,i.transitionDuration),t.update&&(e.sceneUpdate=t.update),i.status=n.RUNNING,e.events.emit(s.CREATE,t))},createSceneFromFunction:function(t,e){var i=new e;if(i instanceof u){var r=i.sys.settings.key;if(""!==r&&(t=r),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,i)}return i.sys=new c(i),i.sys.settings.key=t,i.sys.init(this.game),i},createSceneFromInstance:function(t,e){return""===e.sys.settings.key&&(e.sys.settings.key=t),e.sys.init(this.game),e},createSceneFromObject:function(t,e){var i=new u(e),r=i.sys.settings.key;""!==r?t=r:i.sys.settings.key=t,i.sys.init(this.game);for(var n=["init","preload","create","update","render"],s=0;s<n.length;s++){var o=a(e,n[s],null);o&&(i[n[s]]=o)}if(e.hasOwnProperty("extend"))for(var h in e.extend)if(e.extend.hasOwnProperty(h)){var l=e.extend[h];"data"===h&&i.hasOwnProperty("data")&&"object"==typeof l?i.data.merge(l):"sys"!==h&&(i[h]=l)}return i},getKey:function(t,e){if(t||(t="default"),"function"==typeof e)return t;if(e instanceof u?t=e.sys.settings.key:"object"==typeof e&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var i=[],r=this.scenes,n=0;n<r.length;n++){var s=r[n];s&&(!t||t&&s.sys.isActive())&&i.push(s)}return e?i.reverse():i},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){var e=this.getScene(t);return e?e.sys.isActive():null},isPaused:function(t){var e=this.getScene(t);return e?e.sys.isPaused():null},isVisible:function(t){var e=this.getScene(t);return e?e.sys.isVisible():null},isSleeping:function(t){var e=this.getScene(t);return e?e.sys.isSleeping():null},pause:function(t,e){var i=this.getScene(t);return i&&i.sys.pause(e),this},resume:function(t,e){var i=this.getScene(t);return i&&i.sys.resume(e),this},sleep:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.sleep(e),this},wake:function(t,e){var i=this.getScene(t);return i&&i.sys.wake(e),this},run:function(t,e){var i=this.getScene(t);if(!i){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===t){this.queueOp("start",t,e);break}return this}i.sys.isSleeping()?i.sys.wake(e):i.sys.isPaused()?i.sys.resume(e):this.start(t,e)},start:function(t,e){if(!this.isBooted)return this._data[t]={autoStart:!0,data:e},this;var i=this.getScene(t);if(i){var r,s=i.sys;if(s.isActive()||s.isPaused())s.shutdown(),s.sceneUpdate=l,s.start(e);else if(s.sceneUpdate=l,s.start(e),s.load&&(r=s.load),r&&s.settings.hasOwnProperty("pack")&&(r.reset(),r.addPack({payload:s.settings.pack})))return s.settings.status=n.LOADING,r.once(h.COMPLETE,this.payloadComplete,this),r.start(),this;this.bootScene(i)}return this},stop:function(t,e){var i=this.getScene(t);return i&&!i.sys.isTransitioning()&&i.sys.shutdown(e),this},switch:function(t,e){var i=this.getScene(t),r=this.getScene(e);return i&&r&&i!==r&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var e=this.getScene(t);return this.scenes.indexOf(e)},bringToTop:function(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e<this.scenes.length){var i=this.getScene(t);this.scenes.splice(e,1),this.scenes.push(i)}}return this},sendToBack:function(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e>0){var i=this.getScene(t);this.scenes.splice(e,1),this.scenes.unshift(i)}}return this},moveDown:function(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e>0){var i=e-1,r=this.getScene(t),n=this.getAt(i);this.scenes[e]=n,this.scenes[i]=r}}return this},moveUp:function(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e<this.scenes.length-1){var i=e+1,r=this.getScene(t),n=this.getAt(i);this.scenes[e]=n,this.scenes[i]=r}}return this},moveAbove:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:e});else{var i=this.getIndex(t),r=this.getIndex(e);if(-1!==i&&-1!==r){var n=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(i+1,0,n)}}return this},moveBelow:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:e});else{var i=this.getIndex(t),r=this.getIndex(e);if(-1!==i&&-1!==r){var n=this.getAt(r);this.scenes.splice(r,1),0===i?this.scenes.unshift(n):this.scenes.splice(i,0,n)}}return this},queueOp:function(t,e,i){return this._queue.push({op:t,keyA:e,keyB:i}),this},swapPosition:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:e});else{var i=this.getIndex(t),r=this.getIndex(e);if(i!==r&&-1!==i&&-1!==r){var n=this.getAt(i);this.scenes[i]=this.scenes[r],this.scenes[r]=n}}return this},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var r=this.scenes[i].sys,s=!r.settings.visible||r.settings.status!==n.RUNNING&&r.settings.status!==n.PAUSED?"[-] ":"[*] ";s+=r.settings.key+" ("+e[r.settings.status]+")",t.push(s)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=l,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=d},function(t,e,i){var r=i(0),n=i(204),s=new r({initialize:function(t){this.sys=new n(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=s},function(t,e,i){var r=i(2),n=i(205);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,i=r(t.settings,"physics",!1);if(e||i){var s=[];if(e&&s.push(n(e+"Physics")),i)for(var o in i)o=n(o.concat("Physics")),-1===s.indexOf(o)&&s.push(o);return s}}},function(t,e,i){var r=i(2);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),i=r(t.settings,"plugins",!1);return Array.isArray(i)?i:e||[]}},function(t,e,i){var r=i(144),n=i(6),s=i(127),o=i(978),a={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:r.PENDING,key:n(t,"key",""),active:n(t,"active",!1),visible:n(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:n(t,"pack",!1),cameras:n(t,"cameras",null),map:n(t,"map",s(o,n(t,"mapAdd",{}))),physics:n(t,"physics",{}),loader:n(t,"loader",{}),plugins:n(t,"plugins",!1),input:n(t,"input",{})}}};t.exports=a},function(t,e,i){var r=i(31),n=i(423),s=i(0),o=i(38),a=i(33),h=i(9),l=i(106),u=i(22),c=i(388),d=i(6),f=i(425),p=i(206),g=new s({Extends:h,initialize:function(t){h.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=r.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(l.LOAD,this.updatePending,this),this.on(l.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(u.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(l.LOAD),this.off(l.ERROR),this.emit(l.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(l.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){if(this.checkKey(t)){var i=this,r=new Image;r.onerror=function(){i.emit(l.ERROR,t)},r.onload=function(){var e=i.create(t,r);f.Image(e,0),i.emit(l.ADD,t,e),i.emit(l.LOAD,t,e)},r.src=e}return this},getBase64:function(t,e,i,n){void 0===i&&(i="image/png"),void 0===n&&(n=.92);var s="",o=this.getFrame(t,e);if(o&&(o.source.isRenderTexture||o.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(o){var a=o.canvasData,h=r.create2D(this,a.width,a.height);h.getContext("2d").drawImage(o.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),s=h.toDataURL(i,n),r.remove(h)}return s},addImage:function(t,e,i){var r=null;return this.checkKey(t)&&(r=this.create(t,e),f.Image(r,0),i&&r.setDataSource(i),this.emit(l.ADD,t,r)),r},addGLTexture:function(t,e,i,r){var n=null;return this.checkKey(t)&&(void 0===i&&(i=e.width),void 0===r&&(r=e.height),(n=this.create(t,e,i,r)).add("__BASE",0,0,0,i,r),this.emit(l.ADD,t,n)),n},addRenderTexture:function(t,e){var i=null;return this.checkKey(t)&&((i=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(l.ADD,t,i)),i},generate:function(t,e){if(this.checkKey(t)){var i=r.create(this,1,1);return e.canvas=i,c(e),this.addCanvas(t,i)}return null},createCanvas:function(t,e,i){if(void 0===e&&(e=256),void 0===i&&(i=256),this.checkKey(t)){var n=r.create(this,e,i,a.CANVAS,!0);return this.addCanvas(t,n)}return null},addCanvas:function(t,e,i){void 0===i&&(i=!1);var r=null;return i?r=new n(this,t,e,e.width,e.height):this.checkKey(t)&&(r=new n(this,t,e,e.width,e.height),this.list[t]=r,this.emit(l.ADD,t,r)),r},addAtlas:function(t,e,i,r){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(t,e,i,r):this.addAtlasJSONHash(t,e,i,r)},addAtlasJSONArray:function(t,e,i,r){var n=null;if(this.checkKey(t)){if(n=this.create(t,e),Array.isArray(i))for(var s=1===i.length,o=0;o<n.source.length;o++){var a=s?i[0]:i[o];f.JSONArray(n,o,a)}else f.JSONArray(n,0,i);r&&n.setDataSource(r),this.emit(l.ADD,t,n)}return n},addAtlasJSONHash:function(t,e,i,r){var n=null;if(this.checkKey(t)){if(n=this.create(t,e),Array.isArray(i))for(var s=0;s<i.length;s++)f.JSONHash(n,s,i[s]);else f.JSONHash(n,0,i);r&&n.setDataSource(r),this.emit(l.ADD,t,n)}return n},addAtlasXML:function(t,e,i,r){var n=null;return this.checkKey(t)&&(n=this.create(t,e),f.AtlasXML(n,0,i),r&&n.setDataSource(r),this.emit(l.ADD,t,n)),n},addUnityAtlas:function(t,e,i,r){var n=null;return this.checkKey(t)&&(n=this.create(t,e),f.UnityYAML(n,0,i),r&&n.setDataSource(r),this.emit(l.ADD,t,n)),n},addSpriteSheet:function(t,e,i){var r=null;if(this.checkKey(t)){var n=(r=this.create(t,e)).source[0].width,s=r.source[0].height;f.SpriteSheet(r,0,0,0,n,s,i),this.emit(l.ADD,t,r)}return r},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var i=d(e,"atlas",null),r=d(e,"frame",null);if(i&&r){var n=this.get(i).get(r);if(n){var s=this.create(t,n.source.image);return n.trimmed?f.SpriteSheetFromAtlas(s,n,e):f.SpriteSheet(s,0,n.cutX,n.cutY,n.cutWidth,n.cutHeight,e),this.emit(l.ADD,t,s),s}}},create:function(t,e,i,r){var n=null;return this.checkKey(t)&&(n=new p(this,t,e,i,r),this.list[t]=n),n},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof p?t:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,i,r){var n=this.getFrame(i,r);if(n){t-=n.x,e-=n.y;var s=n.data.cut;if(t+=s.x,e+=s.y,t>=s.x&&t<s.r&&e>=s.y&&e<s.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(n.source.image,t,e,1,1,0,0,1,1);var h=a.getImageData(0,0,1,1);return new o(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(t,e,i,r){var n=this.getFrame(i,r);if(n){t-=n.x,e-=n.y;var s=n.data.cut;if(t+=s.x,e+=s.y,t>=s.x&&t<s.r&&e>=s.y&&e<s.b){var o=this._tempContext;return o.clearRect(0,0,1,1),o.drawImage(n.source.image,t,e,1,1,0,0,1,1),o.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,i){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(i)),t},renameTexture:function(t,e){var i=this.get(t);return!(!i||t===e||(i.key=e,this.list[e]=i,delete this.list[t],0))},each:function(t,e){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var n in this.list)i[0]=this.list[n],t.apply(e,i)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,r.remove(this._tempCanvas)}});t.exports=g},function(t,e,i){var r=i(0),n=i(18),s=i(38),o=i(33),a=i(138),h=i(206),l=new r({Extends:h,initialize:function(t,e,i,r,n){h.call(this,t,e,i,r,n),this.add("__BASE",0,0,0,r,n),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=r,this.height=n,this.imageData=this.context.getImageData(0,0,r,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(t,e,i){return this.context.drawImage(i,t,e),this.update()},drawFrame:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=this.manager.getFrame(t,e);if(n){var s=n.canvasData,o=n.cutWidth,a=n.cutHeight,h=n.source.resolution;return this.context.drawImage(n.source.image,s.x,s.y,o,a,i,r,o/h,a/h),this.update()}return this},setPixel:function(t,e,i,r,n,s){if(void 0===s&&(s=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),this.getIndex(t,e)>-1){var o=this.context.getImageData(t,e,1,1);o.data[0]=i,o.data[1]=r,o.data[2]=n,o.data[3]=s,this.context.putImageData(o,t,e)}return this},putData:function(t,e,i,r,n,s,o){return void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=t.width),void 0===o&&(o=t.height),this.context.putImageData(t,e,i,r,n,s,o),this},getData:function(t,e,i,r){return t=n(Math.floor(t),0,this.width-1),e=n(Math.floor(e),0,this.height-1),i=n(i,1,this.width-t),r=n(r,1,this.height-e),this.context.getImageData(t,e,i,r)},getPixel:function(t,e,i){i||(i=new s);var r=this.getIndex(t,e);if(r>-1){var n=this.data,o=n[r+0],a=n[r+1],h=n[r+2],l=n[r+3];i.setTo(o,a,h,l)}return i},getPixels:function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===r&&(r=i),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var o=n(t,0,this.width),a=n(t+i,0,this.width),h=n(e,0,this.height),l=n(e+r,0,this.height),u=new s,c=[],d=h;d<l;d++){for(var f=[],p=o;p<a;p++)u=this.getPixel(p,d,u),f.push({x:p,y:d,color:u.color,alpha:u.alphaGL});c.push(f)}return c},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===r&&(r=this.height),this.context.clearRect(t,e,i,r),this.update()},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=a(t,e),this.frames.__BASE.setSize(t,e,0,0),this.width=t,this.height=e,this.refresh()),this},destroy:function(){h.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=l},function(t,e,i){var r=i(31),n=i(0),s=i(138),o=i(168),a=new n({initialize:function(t,e,i,r,n){void 0===n&&(n=!1);var a=t.manager.game;this.renderer=a.renderer,this.texture=t,this.source=e,this.image=e,this.compressionAlgorithm=null,this.resolution=1,this.width=i||e.naturalWidth||e.videoWidth||e.width||0,this.height=r||e.naturalHeight||e.videoHeight||e.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&e instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===e.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&e instanceof WebGLTexture,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=n,this.init(a)},init:function(t){var e=this.renderer;e&&(e.gl?this.isCanvas?this.glTexture=e.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=e.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=e.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=e.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&r.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=a},function(t,e,i){t.exports={AtlasXML:i(979),Canvas:i(980),Image:i(981),JSONArray:i(982),JSONHash:i(983),SpriteSheet:i(984),SpriteSheetFromAtlas:i(985),UnityYAML:i(986)}},function(t,e,i){var r=i(427),n=i(430),s=i(432),o={create:function(t){var e=t.config.audio,i=t.device.audio;return e.noAudio||!i.webAudio&&!i.audioData?new n(t):i.webAudio&&!e.disableWebAudio?new s(t):new r(t)}};t.exports=o},function(t,e,i){var r=i(145),n=i(0),s=i(70),o=i(429),a=new n({Extends:r,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,r.call(this,t)},add:function(t,e){var i=new o(this,t,e);return this.sounds.push(i),i},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(e,i){for(var r=0;r<i.length;r++)if("true"===i[r].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var e=!1,i=function(){e=!0},r=function(){if(e)e=!1;else{document.body.removeEventListener("touchmove",i),document.body.removeEventListener("touchend",r);var n=[];if(t.game.cache.audio.entries.each((function(t,e){for(var i=0;i<e.length;i++){var r=e[i];"true"===r.dataset.locked&&n.push(r)}return!0})),0!==n.length){var s=n[n.length-1];s.oncanplaythrough=function(){s.oncanplaythrough=null,n.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},n.forEach((function(t){t.load()}))}}};this.once(s.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",i,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){r.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,i){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:i}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(s.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(s.GLOBAL_VOLUME,this,t)}}});t.exports=a},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=t.length),r(t,n,s))for(var o=n;o<s;o++){var a=t[o];if(!e||e&&void 0===i&&a.hasOwnProperty(e)||e&&void 0!==i&&a[e]===i)return a}return null}},function(t,e,i){var r=i(146),n=i(0),s=i(70),o=i(18),a=new n({Extends:r,initialize:function(t,e,i){if(void 0===i&&(i={}),this.tags=t.game.cache.audio.get(e),!this.tags)throw new Error('There is no audio asset with key "'+e+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,r.call(this,t,e,i)},play:function(t,e){return!(this.manager.isLocked(this,"play",[t,e])||!r.prototype.play.call(this,t,e)||!this.pickAndPlayAudioTag()||(this.emit(s.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!r.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!r.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(s.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!r.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(s.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,e=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=i,this.audio.currentTime=i,this.applyConfig(),0===e?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*e,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var e=this.tags[t];if("false"===e.dataset.used)return e.dataset.used="true",this.audio=e,!0}if(!this.manager.override)return!1;var i=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&i.push(t)}),this),i.sort((function(t,e){return t.loop===e.loop?e.seek/e.duration-t.seek/t.duration:t.loop?1:-1}));var r=i[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){r.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var e=this.currentMarker?this.currentMarker.start:0,i=e+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=i-this.manager.loopEndOffset?(this.audio.currentTime=e+Math.max(0,r-i),r=this.audio.currentTime):r<e&&(this.audio.currentTime+=e,r=this.audio.currentTime),r<this.previousTime&&this.emit(s.LOOPED,this);else if(r>=i)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(s.COMPLETE,this);this.previousTime=r}},destroy:function(){r.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){r.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(s.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(s.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,s.RATE,t)||(this.calculateRate(),this.emit(s.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,s.DETUNE,t)||(this.calculateRate(),this.emit(s.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(s.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(s.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(s.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=a},function(t,e,i){var r=i(145),n=i(0),s=i(9),o=i(431),a=i(1),h=new n({Extends:s,initialize:function(t){s.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,e){var i=new o(this,t,e);return this.sounds.push(i),i},addAudioSprite:function(t,e){var i=this.add(t,e);return i.spritemap={},i},play:function(t,e){return!1},playAudioSprite:function(t,e,i){return!1},remove:function(t){return r.prototype.remove.call(this,t)},removeByKey:function(t){return r.prototype.removeByKey.call(this,t)},pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,forEachActiveSound:function(t,e){r.prototype.forEachActiveSound.call(this,t,e)},destroy:function(){r.prototype.destroy.call(this)}});t.exports=h},function(t,e,i){var r=i(146),n=i(0),s=i(9),o=i(17),a=function(){return!1},h=function(){return this},l=new n({Extends:s,initialize:function(t,e,i){void 0===i&&(i={}),s.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},i),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:a,updateMarker:a,removeMarker:function(){return null},play:a,pause:a,resume:a,stop:a,destroy:function(){r.prototype.destroy.call(this)},setMute:h,setVolume:h,setRate:h,setDetune:h,setSeek:h,setLoop:h,setPan:h});t.exports=l},function(t,e,i){var r=i(433),n=i(145),s=i(0),o=i(70),a=i(22),h=i(434),l=new s({Extends:n,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),n.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(a.BOOT,this.unlock,this)},createAudioContext:function(t){var e=t.config.audio;return e.context?(e.context.resume(),e.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,e){var i=new h(this,t,e);return this.sounds.push(i),i},decodeAudio:function(t,e){var i;i=Array.isArray(t)?t:[{key:t,data:e}];for(var n=this.game.cache.audio,s=i.length,a=0;a<i.length;a++){var h=i[a],l=h.key,u=h.data;"string"==typeof u&&(u=r(u));var c=function(t,e){n.add(t,e),this.emit(o.DECODED,t),0==--s&&this.emit(o.DECODED_ALL)}.bind(this,l),d=function(t,e){console.error("Error decoding audio: "+t+" - ",e?e.message:""),0==--s&&this.emit(o.DECODED_ALL)}.bind(this,l);this.context.decodeAudioData(u,c,d)}},unlock:function(){var t=this,e=document.body,i=function i(){if(t.context&&e){var r=e.removeEventListener;t.context.resume().then((function(){r("touchstart",i),r("touchend",i),r("click",i),r("keydown",i),t.unlocked=!0}),(function(){r("touchstart",i),r("touchend",i),r("click",i),r("keydown",i)}))}};e&&(e.addEventListener("touchstart",i,!1),e.addEventListener("touchend",i,!1),e.addEventListener("click",i,!1),e.addEventListener("keydown",i,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function(t,e){n.prototype.update.call(this,t,e);var i=this.context;i&&"interrupted"===i.state&&i.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}n.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(o.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(o.GLOBAL_VOLUME,this,t)}}});t.exports=l},function(t,e){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<i.length;n++)r[i.charCodeAt(n)]=n;t.exports=function(t){var e,i,n,s,o=(t=t.substr(t.indexOf(",")+1)).length,a=.75*o,h=0;"="===t[o-1]&&(a--,"="===t[o-2]&&a--);for(var l=new ArrayBuffer(a),u=new Uint8Array(l),c=0;c<o;c+=4)e=r[t.charCodeAt(c)],i=r[t.charCodeAt(c+1)],n=r[t.charCodeAt(c+2)],s=r[t.charCodeAt(c+3)],u[h++]=e<<2|i>>4,u[h++]=(15&i)<<4|n>>2,u[h++]=(3&n)<<6|63&s;return l}},function(t,e,i){var r=i(146),n=i(0),s=i(70),o=new n({Extends:r,initialize:function(t,e,i){if(void 0===i&&(i={}),this.audioBuffer=t.game.cache.audio.get(e),!this.audioBuffer)throw new Error('Audio key "'+e+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,r.call(this,t,e,i)},play:function(t,e){return!!r.prototype.play.call(this,t,e)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(s.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!r.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!r.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(s.RESUME,this),0))},stop:function(){return!!r.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(s.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,i=this.manager.context.currentTime+e,r=(this.currentMarker?this.currentMarker.start:0)+t,n=this.duration-t;this.playTime=i-t,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,r),Math.max(0,n)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,i))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),r.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,r.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(s.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(s.LOOPED,this))},destroy:function(){r.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){r.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++)t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate;return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-t)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(s.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(s.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(s.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(s.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(s.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(s.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(s.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=o},function(t,e){t.exports=function(t){for(var e=t.length,i=t[0].length,r=new Array(i),n=0;n<i;n++){r[n]=new Array(e);for(var s=e-1;s>-1;s--)r[n][s]=t[s][n]}return r}},function(t,e){function i(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t,e,s,o,a){for(void 0===s&&(s=0),void 0===o&&(o=t.length-1),void 0===a&&(a=r);o>s;){if(o-s>600){var h=o-s+1,l=e-s+1,u=Math.log(h),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(h-c)/h)*(l-h/2<0?-1:1),f=Math.max(s,Math.floor(e-l*c/h+d)),p=Math.min(o,Math.floor(e+(h-l)*c/h+d));n(t,e,f,p,a)}var g=t[e],v=s,m=o;for(i(t,s,e),a(t[o],g)>0&&i(t,s,o);v<m;){for(i(t,v,m),v++,m--;a(t[v],g)<0;)v++;for(;a(t[m],g)>0;)m--}0===a(t[s],g)?i(t,s,m):i(t,++m,o),m<=e&&(s=m+1),e<=m&&(o=m-1)}};t.exports=n},function(t,e,i){var r=i(6),n=i(131),s=function(t,e,i){for(var r=[],n=0;n<t.length;n++)for(var s=0;s<e.length;s++)for(var o=0;o<i;o++)r.push({a:t[n],b:e[s]});return r};t.exports=function(t,e,i){var o=r(i,"max",0),a=r(i,"qty",1),h=r(i,"random",!1),l=r(i,"randomB",!1),u=r(i,"repeat",0),c=r(i,"yoyo",!1),d=[];if(l&&n(e),-1===u)if(0===o)u=0;else{var f=t.length*e.length*a;c&&(f*=2),u=Math.ceil(o/f)}for(var p=0;p<=u;p++){var g=s(t,e,a);h&&n(g),d=d.concat(g),c&&(g.reverse(),d=d.concat(g))}return o&&d.splice(o),d}},function(t,e,i){t.exports={PROCESS_QUEUE_ADD:i(1041),PROCESS_QUEUE_REMOVE:i(1042)}},function(t,e,i){var r=i(13);t.exports=function(t,e){var i=r(e,"anims",null);if(null===i)return t;if("string"==typeof i)t.anims.play(i);else if("object"==typeof i){var n=t.anims,s=r(i,"key",void 0);if(s){var o=r(i,"startFrame",void 0),a=r(i,"delay",0),h=r(i,"repeat",0),l=r(i,"repeatDelay",0),u=r(i,"yoyo",!1),c=r(i,"play",!1),d=r(i,"delayedPlay",0),f={key:s,delay:a,repeat:h,repeatDelay:l,yoyo:u,startFrame:o};c?n.play(f):d>0?n.playAfterDelay(f,d):n.load(f)}}return t}},function(t,e,i){var r=i(0),n=i(109),s=new r({initialize:function(t,e,i,r,n){this.parent=t,this.x=e,this.y=i,this.frame=r,this.data={},this.tint=16777215,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof n&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,i){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=s},function(t,e,i){var r=i(10);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=Math.min(t.x,e.x),s=Math.min(t.y,e.y),o=Math.max(t.right,e.right)-n,a=Math.max(t.bottom,e.bottom)-s;return i.setTo(n,s,o,a)}},function(t,e,i){var r=i(0),n=i(11),s=i(1055),o=i(15),a=i(7),h=i(202),l=i(20),u=i(140),c=new r({Extends:o,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Origin,n.ScrollFactor,n.Transform,n.Visible,s],initialize:function(t,e,i,r,n,s){o.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,i),"string"==typeof r?"#"===r[0]?this.setElement(r.substr(1),n,s):this.createElement(r,n,s):r&&this.setElement(r,n,s),t.sys.events.on(l.SLEEP,this.handleSceneEvent,this),t.sys.events.on(l.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(t){var e=this.node,i=e.style;e&&(i.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,i){return this.setElement(document.createElement(t),e,i)},setElement:function(t,e,i){var r;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),r=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(r=t),!r)return this;if(this.node=r,e&&a(e))for(var n in e)r.style[n]=e[n];else"string"==typeof e&&(r.style=e);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),i&&(r.innerText=i),this.updateSize()},createFromCache:function(t,e){var i=this.cache.get(t);return i&&this.createFromHTML(i,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var i=document.createElement(e);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),i.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(h(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var i=this.node.querySelectorAll("*"),r=0;r<i.length;r++)if(i[r][t]===e)return i[r];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this)}});t.exports=c},function(t,e,i){var r=i(1056),n=i(15),s=i(25),o=new s,a=new s,h=new s;t.exports=function(t,e,i,s){if(e.node){var l=e.node.style,u=e.scene.sys.settings;if(!l||!u.visible||n.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&i.id||e.parentContainer&&!e.parentContainer.willRender())l.display="none";else{var c=e.parentContainer,d=i.alpha*e.alpha;c&&(d*=c.alpha);var f=o,p=a,g=h,v=0,m=0,y="0%",x="0%";s?(v=e.width*e.scaleX*e.originX,m=e.height*e.scaleY*e.originY,p.applyITRS(e.x-v,e.y-m,e.rotation,e.scaleX,e.scaleY),f.copyFrom(i.matrix),f.multiplyWithOffset(s,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),p.e=e.x-v,p.f=e.y-m,f.multiply(p,g)):(v=e.width*e.originX,m=e.height*e.originY,p.applyITRS(e.x-v,e.y-m,e.rotation,e.scaleX,e.scaleY),f.copyFrom(i.matrix),y=100*e.originX+"%",x=100*e.originY+"%",p.e-=i.scrollX*e.scrollFactorX,p.f-=i.scrollY*e.scrollFactorY,f.multiply(p,g)),e.transformOnly||(l.display="block",l.opacity=d,l.zIndex=e._depth,l.pointerEvents=e.pointerEvents,l.mixBlendMode=r[e._blendMode]),l.transform=g.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",l.transformOrigin=y+" "+x}}}},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(1060),a=new r({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.Origin,n.ScrollFactor,n.Size,n.Texture,n.Tint,n.Transform,n.Visible,o],initialize:function(t){s.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=a},function(t,e,i){var r=i(218),n=i(98),s=i(14),o=i(4);t.exports=function(t,e,i){void 0===i&&(i=new o);var a=n(e,0,s.PI2);return r(t,a,i)}},function(t,e,i){var r=i(447),n=i(218),s=i(98),o=i(14);t.exports=function(t,e,i,a){void 0===a&&(a=[]),!e&&i>0&&(e=r(t)/i);for(var h=0;h<e;h++){var l=s(h/e,0,o.PI2);a.push(n(t,l))}return a}},function(t,e){t.exports=function(t){var e=t.width/2,i=t.height/2,r=Math.pow(e-i,2)/Math.pow(e+i,2);return Math.PI*(e+i)*(1+3*r/(10+Math.sqrt(4-3*r)))}},function(t,e,i){var r=i(217),n=i(30);t.exports=function(t,e,i,s,o,a){var h=e.commandBuffer,l=h.length,u=o||t.currentContext;if(0!==l&&n(t,u,e,i,s)){i.addToRenderList(e);var c=1,d=1,f=0,p=0,g=1,v=0,m=0,y=0;u.beginPath();for(var x=0;x<l;++x)switch(h[x]){case r.ARC:u.arc(h[x+1],h[x+2],h[x+3],h[x+4],h[x+5],h[x+6]),x+=7;break;case r.LINE_STYLE:g=h[x+1],f=h[x+2],c=h[x+3],v=(16711680&f)>>>16,m=(65280&f)>>>8,y=255&f,u.strokeStyle="rgba("+v+","+m+","+y+","+c+")",u.lineWidth=g,x+=3;break;case r.FILL_STYLE:p=h[x+1],d=h[x+2],v=(16711680&p)>>>16,m=(65280&p)>>>8,y=255&p,u.fillStyle="rgba("+v+","+m+","+y+","+d+")",x+=2;break;case r.BEGIN_PATH:u.beginPath();break;case r.CLOSE_PATH:u.closePath();break;case r.FILL_PATH:a||u.fill();break;case r.STROKE_PATH:a||u.stroke();break;case r.FILL_RECT:a?u.rect(h[x+1],h[x+2],h[x+3],h[x+4]):u.fillRect(h[x+1],h[x+2],h[x+3],h[x+4]),x+=4;break;case r.FILL_TRIANGLE:u.beginPath(),u.moveTo(h[x+1],h[x+2]),u.lineTo(h[x+3],h[x+4]),u.lineTo(h[x+5],h[x+6]),u.closePath(),a||u.fill(),x+=6;break;case r.STROKE_TRIANGLE:u.beginPath(),u.moveTo(h[x+1],h[x+2]),u.lineTo(h[x+3],h[x+4]),u.lineTo(h[x+5],h[x+6]),u.closePath(),a||u.stroke(),x+=6;break;case r.LINE_TO:u.lineTo(h[x+1],h[x+2]),x+=2;break;case r.MOVE_TO:u.moveTo(h[x+1],h[x+2]),x+=2;break;case r.LINE_FX_TO:u.lineTo(h[x+1],h[x+2]),x+=5;break;case r.MOVE_FX_TO:u.moveTo(h[x+1],h[x+2]),x+=5;break;case r.SAVE:u.save();break;case r.RESTORE:u.restore();break;case r.TRANSLATE:u.translate(h[x+1],h[x+2]),x+=2;break;case r.SCALE:u.scale(h[x+1],h[x+2]),x+=2;break;case r.ROTATE:u.rotate(h[x+1]),x+=1;break;case r.GRADIENT_FILL_STYLE:x+=5;break;case r.GRADIENT_LINE_STYLE:x+=6}u.restore()}}},function(t,e,i){var r=i(0),n=i(137),s=i(80),o=i(2),a=i(68),h=new r({initialize:function(t,e,i,r){void 0===r&&(r=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=r,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=o(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=typeof t;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var i=this.has(t,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(t,"ease")?t.ease:"Linear";this.ease=s(r,t.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===e&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===e&&this.has(t,"random")){var n=t.random;Array.isArray(n)&&(this.start=n[0],this.end=n[1]),this.onEmit=this.randomRangedValueEmit}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var i=n(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i),i},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=a(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var i=t.data[e];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(t,e,i){var r=t.data[e];return(r.max-r.min)*this.ease(i)+r.min}});t.exports=h},function(t,e,i){var r=i(0),n=i(2),s=new r({initialize:function(t,e,i,r,s){if("object"==typeof t){var o=t;t=n(o,"x",0),e=n(o,"y",0),i=n(o,"power",0),r=n(o,"epsilon",100),s=n(o,"gravity",50)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=100),void 0===s&&(s=50);this.x=t,this.y=e,this.active=!0,this._gravity=s,this._power=0,this._epsilon=0,this.power=i,this.epsilon=r},update:function(t,e){var i=this.x-t.x,r=this.y-t.y,n=i*i+r*r;if(0!==n){var s=Math.sqrt(n);n<this._epsilon&&(n=this._epsilon);var o=this._power*e/(n*s)*100;t.velocityX+=i*o,t.velocityY+=r*o}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=s},function(t,e,i){var r=i(0),n=i(36),s=i(50),o=new r({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),this.x+=void 0===t?i.x.onEmit(this,"x"):t,this.y+=void 0===e?i.y.onEmit(this,"y"):e,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=i.speedX.onEmit(this,"speedX"),o=i.speedY?i.speedY.onEmit(this,"speedY"):r;if(i.radial){var a=n(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(a)*Math.abs(r),this.velocityY=Math.sin(a)*Math.abs(o)}else if(i.moveTo){var h=i.moveToX.onEmit(this,"moveToX"),l=i.moveToY?i.moveToY.onEmit(this,"moveToY"):h,u=Math.atan2(l-this.y,h-this.x),c=s(this.x,this.y,h,l)/(this.life/1e3);this.velocityX=Math.cos(u)*c,this.velocityY=Math.sin(u)*c}else this.velocityX=r,this.velocityY=o;i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=n(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(t,e,i,r){var n=this.velocityX,s=this.velocityY,o=this.accelerationX,a=this.accelerationY,h=this.maxVelocityX,l=this.maxVelocityY;n+=t.gravityX*i,s+=t.gravityY*i,o&&(n+=o*i),a&&(s+=a*i),n>h?n=h:n<-h&&(n=-h),s>l?s=l:s<-l&&(s=-l),this.velocityX=n,this.velocityY=s;for(var u=0;u<r.length;u++)r[u].update(this,e,i)},checkBounds:function(t){var e=t.bounds,i=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=i):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=i),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=i):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=i)},update:function(t,e,i){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var r=this.emitter,s=1-this.lifeCurrent/this.life;return this.lifeT=s,this.computeVelocity(r,t,e,i),this.x+=this.velocityX*e,this.y+=this.velocityY*e,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",s,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",s,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",s,this.angle),this.rotation=n(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",s,this.alpha),this.tint=r.tint.onUpdate(this,"tint",s,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=o},function(t,e,i){var r=i(35),n=i(0),s=i(11),o=i(453),a=i(454),h=i(449),l=i(2),u=i(210),c=i(455),d=i(126),f=i(451),p=i(456),g=i(10),v=i(79),m=i(3),y=i(68),x=new n({Mixins:[s.BlendMode,s.Mask,s.ScrollFactor,s.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=f,this.x=new h(e,"x",0,!0),this.y=new h(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new h(e,"accelerationX",0,!0),this.accelerationY=new h(e,"accelerationY",0,!0),this.maxVelocityX=new h(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new h(e,"maxVelocityY",1e4,!0),this.speedX=new h(e,"speedX",0,!0),this.speedY=new h(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new h(e,"moveToX",0,!0),this.moveToY=new h(e,"moveToY",0,!0),this.bounce=new h(e,"bounce",0,!0),this.scaleX=new h(e,"scaleX",1),this.scaleY=new h(e,"scaleY",1),this.tint=new h(e,"tint",16777215),this.alpha=new h(e,"alpha",1),this.lifespan=new h(e,"lifespan",1e3,!0),this.angle=new h(e,"angle",{min:0,max:360},!0),this.rotate=new h(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new h(e,"quantity",1,!0),this.delay=new h(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=r.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e=0,i="";for(e=0;e<this.configFastMap.length;e++)i=this.configFastMap[e],d(t,i)&&(this[i]=l(t,i));for(e=0;e<this.configOpMap.length;e++)i=this.configOpMap[e],d(t,i)&&this[i].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,d(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(c(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),d(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),d(t,"callbackScope")){var r=l(t,"callbackScope",null);this.emitCallbackScope=r,this.deathCallbackScope=r}return d(t,"emitZone")&&this.setEmitZone(t.emitZone),d(t,"deathZone")&&this.setDeathZone(t.deathZone),d(t,"bounds")&&this.setBounds(t.bounds),d(t,"followOffset")&&this.followOffset.setFromObject(l(t,"followOffset",0)),d(t,"frame")&&this.setFrame(t.frame),d(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,r){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return u(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=y(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var r=typeof t;if(Array.isArray(t)||"string"===r||"number"===r)this.manager.setEmitterFrames(t,this);else if("object"===r){var n=t;(t=l(n,"frames",null))&&this.manager.setEmitterFrames(t,this);var s=l(n,"cycle",!1);this.randomFrame=!s,this.frameQuantity=l(n,"quantity",i)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,r){if("object"==typeof t){var n=t;t=n.x,e=n.y,i=d(n,"w")?n.w:n.width,r=d(n,"h")?n.h:n.height}return this.bounds?this.bounds.setTo(t,e,i,r):this.bounds=new g(t,e,i,r),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=l(t,"type","random"),i=l(t,"source",null);switch(e){case"random":this.emitZone=new p(i);break;case"edge":var r=l(t,"quantity",1),n=l(t,"stepRate",0),s=l(t,"yoyo",!1),o=l(t,"seamless",!0);this.emitZone=new a(i,r,n,s,o)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=l(t,"type","onEnter"),i=l(t,"source",null);if(i&&"function"==typeof i.contains){var r="onEnter"===e;this.deathZone=new o(i,r)}}return this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,r=i.length,n=0;n<r;++n)t.call(e,i[n],this);return this},forEachDead:function(t,e){for(var i=this.dead,r=i.length,n=0;n<r;++n)t.call(e,i[n],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return v(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var r=this.dead,n=this.follow?this.follow.x+this.followOffset.x:e,s=this.follow?this.follow.y+this.followOffset.y:i,o=0;o<t;o++){var a=r.pop();if(a||(a=new this.particleClass(this)),a.fire(n,s),this.particleBringToTop?this.alive.push(a):this.alive.unshift(a),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,a,this),this.atLimit())break}return a}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var r=this.manager.getProcessors(),n=this.alive,s=this.dead,o=0,a=[],h=n.length;for(o=0;o<h;o++){var l=n[o];l.update(e,i,r)&&a.push({index:o,particle:l})}if((h=a.length)>0){var u=this.deathCallback,c=this.deathCallbackScope;for(o=h-1;o>=0;o--){var d=a[o];n.splice(d.index,1),s.push(d.particle),u&&u.call(c,d.particle),d.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=x},function(t,e,i){var r=new(i(0))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=r},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n){void 0===r&&(r=!1),void 0===n&&(n=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=i,this.yoyo=r,this.counter=-1,this.seamless=n,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],e=this.points[this.points.length-1];t.x===e.x&&t.y===e.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=r},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(t.hasOwnProperty(e[i]))return!0;return!1}},function(t,e,i){var r=i(0),n=i(3),s=new r({initialize:function(t){this.source=t,this._tempVec=new n},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=s},function(t,e,i){var r=i(0),n=i(11),s=i(73),o=new r({Extends:s,Mixins:[n.PathFollower],initialize:function(t,e,i,r,n,o){s.call(this,t,i,r,n,o),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=o},function(t,e){t.exports=function(t,e,i){var r=t.canvas,n=t.context,s=t.style,o=[],a=0,h=i.length;s.maxLines>0&&s.maxLines<i.length&&(h=s.maxLines),s.syncFont(r,n);for(var l=0;l<h;l++){var u=s.strokeThickness;u+=n.measureText(i[l]).width,s.wordWrap&&(u-=n.measureText(" ").width),o[l]=Math.ceil(u),a=Math.max(a,o[l])}var c=e.fontSize+s.strokeThickness,d=c*h,f=t.lineSpacing;return h>1&&(d+=f*(h-1)),{width:a,height:d,lines:h,lineWidths:o,lineSpacing:f,lineHeight:c}}},function(t,e,i){var r=i(0),n=i(13),s=i(6),o=i(460),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},h=new r({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0);var i=s(e,"metrics",!1);this.metrics=i?{ascent:s(i,"ascent",0),descent:s(i,"descent",0),fontSize:s(i,"fontSize",0)}:o(this)},setStyle:function(t,e,i){for(var r in void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),a){var o=i?a[r][1]:this[r];this[r]="wordWrapCallback"===r||"wordWrapCallbackScope"===r?s(t,a[r][0],o):n(t,a[r][0],o)}var h=s(t,"font",null);null!==h&&this.setFont(h,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var l=s(t,"fill",null);return null!==l&&(this.color=l),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var i=t,r="",n="";if("string"!=typeof t)i=s(t,"fontFamily","Courier"),r=s(t,"fontSize","16px"),n=s(t,"fontStyle","");else{var o=t.split(" "),a=0;n=o.length>2?o[a++]:"",r=o[a++]||"16px",i=o[a++]||"Courier"}return i===this.fontFamily&&r===this.fontSize&&n===this.fontStyle||(this.fontFamily=i,this.fontSize=r,this.fontStyle=n,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,i,r,n,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===r&&(r=0),void 0===n&&(n=!1),void 0===s&&(s=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=r,this.shadowStroke=n,this.shadowFill=s,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in a)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=h},function(t,e,i){var r=i(31);t.exports=function(t){var e=r.create(this),i=e.getContext("2d");t.syncFont(e,i);var n=i.measureText(t.testString);if("actualBoundingBoxAscent"in n){var s=n.actualBoundingBoxAscent,o=n.actualBoundingBoxDescent;return r.remove(e),{ascent:s,descent:o,fontSize:s+o}}var a=Math.ceil(n.width*t.baselineX),h=a,l=2*h;h=h*t.baselineY|0,e.width=a,e.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,h);var u={ascent:0,descent:0,fontSize:0},c=i.getImageData(0,0,a,l);if(!c)return u.ascent=h,u.descent=h+6,u.fontSize=u.ascent+u.descent,r.remove(e),u;var d,f,p=c.data,g=p.length,v=4*a,m=0,y=!1;for(d=0;d<h;d++){for(f=0;f<v;f+=4)if(255!==p[m+f]){y=!0;break}if(y)break;m+=v}for(u.ascent=h-d,m=g-v,y=!1,d=l;d>h;d--){for(f=0;f<v;f+=4)if(255!==p[m+f]){y=!0;break}if(y)break;m-=v}return u.descent=d-h,u.fontSize=u.ascent+u.descent,r.remove(e),u}},function(t,e,i){var r=i(1097),n=i(0),s=i(36),o=i(59),a=i(65),h=i(14),l=i(34),u=new n({Extends:l,Mixins:[r],initialize:function(t,e,i,r,n,s,o,h,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===n&&(n=0),void 0===s&&(s=360),void 0===o&&(o=!1),l.call(this,t,"Arc",new a(0,0,r)),this._startAngle=n,this._endAngle=s,this._anticlockwise=o,this._iterations=.01,this.setPosition(e,i);var c=2*this.geom.radius;this.setSize(c,c),void 0!==h&&this.setFillStyle(h,u),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var e=2*t;this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,i=this.geom.radius,r=s(this._startAngle),n=s(this._endAngle),a=i,l=i;n-=r,this._anticlockwise?n<-h.PI2?n=-h.PI2:n>0&&(n=-h.PI2+n%h.PI2):n>h.PI2?n=h.PI2:n<0&&(n=h.PI2+n%h.PI2);for(var u,c=[a+Math.cos(r)*i,l+Math.sin(r)*i];e<1;)u=n*e+r,c.push(a+Math.cos(u)*i,l+Math.sin(u)*i),e+=t;return u=n+r,c.push(a+Math.cos(u)*i,l+Math.sin(u)*i),c.push(a+Math.cos(r)*i,l+Math.sin(r)*i),this.pathIndexes=o(c),this.pathData=c,this}});t.exports=u},function(t,e,i){var r=i(0),n=i(1100),s=i(59),o=i(10),a=i(34),h=new r({Extends:a,Mixins:[n],initialize:function(t,e,i,r,n,s){void 0===e&&(e=0),void 0===i&&(i=0),a.call(this,t,"Curve",r),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(e,i),void 0!==n&&this.setFillStyle(n,s),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var i=[],r=this.geom.getPoints(e),n=0;n<r.length;n++)i.push(r[n].x,r[n].y);return i.push(r[0].x,r[0].y),this.pathIndexes=s(i),this.pathData=i,this}});t.exports=h},function(t,e,i){var r=i(0),n=i(59),s=i(1103),o=i(111),a=i(34),h=new r({Extends:a,Mixins:[s],initialize:function(t,e,i,r,n,s,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===n&&(n=128),a.call(this,t,"Ellipse",new o(r/2,n/2,r,n)),this._smoothness=64,this.setPosition(e,i),this.width=r,this.height=n,void 0!==s&&this.setFillStyle(s,h),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setPosition(t/2,e/2),this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=n(t),this.pathData=t,this}});t.exports=h},function(t,e,i){var r=i(0),n=i(34),s=i(1106),o=new r({Extends:n,Mixins:[s],initialize:function(t,e,i,r,s,o,a,h,l,u,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===s&&(s=128),void 0===o&&(o=32),void 0===a&&(a=32),n.call(this,t,"Grid",null),this.cellWidth=o,this.cellHeight=a,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,i),this.setSize(r,s),this.setFillStyle(h,l),void 0!==u&&this.setOutlineStyle(u,c),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=o},function(t,e,i){var r=i(1109),n=i(0),s=i(34),o=new n({Extends:s,Mixins:[r],initialize:function(t,e,i,r,n,o,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=48),void 0===n&&(n=32),void 0===o&&(o=15658734),void 0===a&&(a=10066329),void 0===h&&(h=13421772),s.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=o,this.fillLeft=a,this.fillRight=h,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,i),this.setSize(r,n),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=o},function(t,e,i){var r=i(0),n=i(1112),s=i(34),o=new r({Extends:s,Mixins:[n],initialize:function(t,e,i,r,n,o,a,h,l){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=48),void 0===n&&(n=32),void 0===o&&(o=!1),void 0===a&&(a=15658734),void 0===h&&(h=10066329),void 0===l&&(l=13421772),s.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=a,this.fillLeft=h,this.fillRight=l,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=o,this.isFilled=!0,this.setPosition(e,i),this.setSize(r,n),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=o},function(t,e,i){var r=i(0),n=i(34),s=i(47),o=i(1115),a=new r({Extends:n,Mixins:[o],initialize:function(t,e,i,r,o,a,h,l,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===h&&(h=0),n.call(this,t,"Line",new s(r,o,a,h));var c=Math.max(1,this.geom.right-this.geom.left),d=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,i),this.setSize(c,d),void 0!==l&&this.setStrokeStyle(1,l,u),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,i,r){return this.geom.setTo(t,e,i,r),this}});t.exports=a},function(t,e,i){var r=i(1118),n=i(0),s=i(59),o=i(469),a=i(227),h=i(34),l=i(472),u=new n({Extends:h,Mixins:[r],initialize:function(t,e,i,r,n,s){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Polygon",new a(r));var l=o(this.geom);this.setPosition(e,i),this.setSize(l.width,l.height),void 0!==n&&this.setFillStyle(n,s),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)l(this.geom);return this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=s(t),this.pathData=t,this}});t.exports=u},function(t,e,i){var r=i(10);t.exports=function(t,e){void 0===e&&(e=new r);for(var i,n=1/0,s=1/0,o=-n,a=-s,h=0;h<t.points.length;h++)i=t.points[h],n=Math.min(n,i.x),s=Math.min(s,i.y),o=Math.max(o,i.x),a=Math.max(a,i.y);return e.x=n,e.y=s,e.width=o-n,e.height=a-s,e}},function(t,e,i){var r=i(67),n=i(47),s=i(471);t.exports=function(t,e,i,o){void 0===o&&(o=[]);var a=t.points,h=s(t);!e&&i>0&&(e=h/i);for(var l=0;l<e;l++)for(var u=h*(l/e),c=0,d=0;d<a.length;d++){var f=a[d],p=a[(d+1)%a.length],g=new n(f.x,f.y,p.x,p.y),v=r(g);if(!(u<c||u>c+v)){var m=g.getPoint((u-c)/v);o.push(m);break}c+=v}return o}},function(t,e,i){var r=i(67),n=i(47);t.exports=function(t){for(var e=t.points,i=0,s=0;s<e.length;s++){var o=e[s],a=e[(s+1)%e.length],h=new n(o.x,o.y,a.x,a.y);i+=r(h)}return i}},function(t,e){var i=function(t,e){return t[0]=e[0],t[1]=e[1],t};t.exports=function(t){var e,r=[],n=t.points;for(e=0;e<n.length;e++)r.push([n[e].x,n[e].y]);var s=[];for(r.length>0&&s.push(i([0,0],r[0])),e=0;e<r.length-1;e++){var o=r[e],a=r[e+1],h=o[0],l=o[1],u=a[0],c=a[1];s.push([.85*h+.15*u,.85*l+.15*c]),s.push([.15*h+.85*u,.15*l+.85*c])}return r.length>1&&s.push(i([0,0],r[r.length-1])),t.setTo(s)}},function(t,e,i){var r=i(0),n=i(10),s=i(34),o=i(1121),a=new r({Extends:s,Mixins:[o],initialize:function(t,e,i,r,o,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===o&&(o=128),s.call(this,t,"Rectangle",new n(0,0,r,o)),this.setPosition(e,i),this.setSize(r,o),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),e.getLineD(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=a},function(t,e,i){var r=i(1124),n=i(0),s=i(59),o=i(34),a=new n({Extends:o,Mixins:[r],initialize:function(t,e,i,r,n,s,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=5),void 0===n&&(n=32),void 0===s&&(s=64),o.call(this,t,"Star",null),this._points=r,this._innerRadius=n,this._outerRadius=s,this.setPosition(e,i),this.setSize(2*s,2*s),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,i=this._innerRadius,r=this._outerRadius,n=Math.PI/2*3,o=Math.PI/e,a=r,h=r;t.push(a,h+-r);for(var l=0;l<e;l++)t.push(a+Math.cos(n)*r,h+Math.sin(n)*r),n+=o,t.push(a+Math.cos(n)*i,h+Math.sin(n)*i),n+=o;return t.push(a,h+-r),this.pathIndexes=s(t),this.pathData=t,this}});t.exports=a},function(t,e,i){var r=i(0),n=i(34),s=i(82),o=i(1127),a=new r({Extends:n,Mixins:[o],initialize:function(t,e,i,r,o,a,h,l,u,c,d){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=128),void 0===a&&(a=64),void 0===h&&(h=0),void 0===l&&(l=128),void 0===u&&(u=128),n.call(this,t,"Triangle",new s(r,o,a,h,l,u));var f=this.geom.right-this.geom.left,p=this.geom.bottom-this.geom.top;this.setPosition(e,i),this.setSize(f,p),void 0!==c&&this.setFillStyle(c,d),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,i,r,n,s){return this.geom.setTo(t,e,i,r,n,s),this.updateData()},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=a},function(t,e,i){var r=i(4),n=i(67);t.exports=function(t,e,i){void 0===i&&(i=new r);var s=t.getLineA(),o=t.getLineB(),a=t.getLineC();if(e<=0||e>=1)return i.x=s.x1,i.y=s.y1,i;var h=n(s),l=n(o),u=n(a),c=(h+l+u)*e,d=0;return c<h?(d=c/h,i.x=s.x1+(s.x2-s.x1)*d,i.y=s.y1+(s.y2-s.y1)*d):c>h+l?(d=(c-=h+l)/u,i.x=a.x1+(a.x2-a.x1)*d,i.y=a.y1+(a.y2-a.y1)*d):(d=(c-=h)/l,i.x=o.x1+(o.x2-o.x1)*d,i.y=o.y1+(o.y2-o.y1)*d),i}},function(t,e,i){var r=i(67),n=i(4);t.exports=function(t,e,i,s){void 0===s&&(s=[]);var o=t.getLineA(),a=t.getLineB(),h=t.getLineC(),l=r(o),u=r(a),c=r(h),d=l+u+c;!e&&i>0&&(e=d/i);for(var f=0;f<e;f++){var p=d*(f/e),g=0,v=new n;p<l?(g=p/l,v.x=o.x1+(o.x2-o.x1)*g,v.y=o.y1+(o.y2-o.y1)*g):p>l+u?(g=(p-=l+u)/c,v.x=h.x1+(h.x2-h.x1)*g,v.y=h.y1+(h.y2-h.y1)*g):(g=(p-=l)/u,v.x=a.x1+(a.x2-a.x1)*g,v.y=a.y1+(a.y2-a.y1)*g),s.push(v)}return s}},function(t,e){t.exports=function(t,e,i){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(e))return t[e]=i,!0;if(-1!==e.indexOf(".")){for(var r=e.split("."),n=t,s=t,o=0;o<r.length;o++){if(!n.hasOwnProperty(r[o]))return!1;s=n,n=n[r[o]]}return s[r[r.length-1]]=i,!0}return!1}},function(t,e,i){var r=i(116),n=i(117);t.exports=function(t,e,i,s,o,a,h){if(void 0===s&&(s=!1),void 0===a&&(a=16777215),void 0===h&&(h=1),t.length===e.length){var l,u,c,d,f,p,g,v,m,y,x,b={faces:[],vertices:[]},w=s?3:2,T=Array.isArray(a),S=Array.isArray(h);if(Array.isArray(i)&&i.length>0)for(l=0;l<i.length;l++){var E=i[l],C=2*i[l],_=i[l]*w;u=t[_],c=t[_+1],d=s?t[_+2]:0,f=e[C],p=e[C+1],g=T?a[E]:a,v=S?h[E]:h,m=0,y=0,x=0,o&&(m=o[_],y=o[_+1],x=s?o[_+2]:0),b.vertices.push(new n(u,c,d,f,p,g,v,m,y,x))}else{var A=0,M=0;for(l=0;l<t.length;l+=w)u=t[l],c=t[l+1],d=s?t[l+2]:0,f=e[A],p=e[A+1],g=T?a[M]:a,v=S?h[M]:h,m=0,y=0,x=0,o&&(m=o[l],y=o[l+1],x=s?o[l+2]:0),b.vertices.push(new n(u,c,d,f,p,g,v,m,y,x)),A+=2,M++}for(l=0;l<b.vertices.length;l+=3){var P=b.vertices[l],k=b.vertices[l+1],O=b.vertices[l+2];b.faces.push(new r(P,k,O))}return b}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,e,i){var r=i(116),n=i(69),s=i(39),o=i(117),a=new s,h=new s,l=new n;t.exports=function(t,e,i,n,s,u,c,d,f,p){void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===u&&(u=0),void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=!0);var g={faces:[],verts:[]},v=t.materials;a.set(n,s,u),h.set(c,d,f),l.fromRotationXYTranslation(h,a,p);for(var m=0;m<t.models.length;m++)for(var y=t.models[m],x=y.vertices,b=y.textureCoords,w=y.faces,T=0;T<w.length;T++){var S=w[T],E=S.vertices[0],C=S.vertices[1],_=S.vertices[2],A=x[E.vertexIndex],M=x[C.vertexIndex],P=x[_.vertexIndex],k=E.textureCoordsIndex,O=C.textureCoordsIndex,R=_.textureCoordsIndex,L=-1===k?{u:0,v:1}:b[k],I=-1===O?{u:0,v:0}:b[O],F=-1===R?{u:1,v:1}:b[R],D=16777215;""!==S.material&&v[S.material]&&(D=v[S.material]);var B=new o(A.x*i,A.y*i,A.z*i,L.u,L.v,D).transformMat4(l),N=new o(M.x*i,M.y*i,M.z*i,I.u,I.v,D).transformMat4(l),z=new o(P.x*i,P.y*i,P.z*i,F.u,F.v,D).transformMat4(l);g.verts.push(B,N,z),g.faces.push(new r(B,N,z))}return e&&(e.faces=e.faces.concat(g.faces),e.vertices=e.vertices.concat(g.verts)),g}},function(t,e,i){var r=i(65),n=i(0),s=i(11),o=i(200),a=i(12),h=new n({Extends:r,Mixins:[s.ScrollFactor,s.Visible],initialize:function(t,e,i,n,s,a,h){r.call(this,t,e,i),this.color=new o(n,s,a),this.intensity=h,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(t){return!(h.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var e=a.getFloatsFromUintRGB(t);return this.color.set(e[0],e[1],e[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});h.RENDER_MASK=15,t.exports=h},function(t,e,i){var r=i(151),n=i(0),s=i(50),o=i(481),a=i(150),h=i(200),l=i(74),u=i(79),c=i(12),d=new n({initialize:function(){this.lights=[],this.ambientColor=new h(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,e,i,r,n,s){return this.systems.displayList.add(new a(this.scene,t,e,i,r,n,s))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var e=this.lights,i=t.worldView,n=[],o=0;o<e.length;o++){var a=e[o];a.willRender(t)&&r(a,i)&&n.push({light:a,distance:s(a.x,a.y,i.centerX,i.centerY)})}return n.length>this.maxLights&&(u(n,this.sortByDistance),n=n.slice(0,this.maxLights)),this.visibleLights=n.length,n},sortByDistance:function(t,e){return t.distance>=e.distance},setAmbientColor:function(t){var e=c.getFloatsFromUintRGB(t);return this.ambientColor.set(e[0],e[1],e[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,e,i,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=128),void 0===r&&(r=16777215),void 0===n&&(n=1);var s=c.getFloatsFromUintRGB(r),a=new o(t,e,i,s[0],s[1],s[2],n);return this.lights.push(a),a},removeLight:function(t){var e=this.lights.indexOf(t);return e>=0&&l(this.lights,e),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=d},function(t,e,i){var r=i(56),n=i(17),s={Circle:i(1191),Ellipse:i(1201),Intersects:i(484),Line:i(1221),Mesh:i(1243),Point:i(1246),Polygon:i(1260),Rectangle:i(502),Triangle:i(1293)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={CircleToCircle:i(231),CircleToRectangle:i(151),GetCircleToCircle:i(1211),GetCircleToRectangle:i(1212),GetLineToCircle:i(232),GetLineToLine:i(485),GetLineToPoints:i(486),GetLineToPolygon:i(487),GetLineToRectangle:i(234),GetRaysFromPointToPolygon:i(1213),GetRectangleIntersection:i(1214),GetRectangleToRectangle:i(1215),GetRectangleToTriangle:i(1216),GetTriangleToCircle:i(1217),GetTriangleToLine:i(492),GetTriangleToTriangle:i(1218),LineToCircle:i(233),LineToLine:i(96),LineToRectangle:i(488),PointToLine:i(496),PointToLineSegment:i(1219),RectangleToRectangle:i(152),RectangleToTriangle:i(489),RectangleToValues:i(1220),TriangleToCircle:i(491),TriangleToLine:i(493),TriangleToTriangle:i(494)}},function(t,e,i){var r=i(39);t.exports=function(t,e,i){var n=t.x1,s=t.y1,o=t.x2,a=t.y2,h=e.x1,l=e.y1,u=o-n,c=a-s,d=e.x2-h,f=e.y2-l;if(0===u||0==f*u-d*c)return!1;var p=(u*(l-s)+c*(n-h))/(d*c-f*u),g=(h+d*p-n)/u;return g<0||p<0||p>1?null:(void 0===i&&(i=new r),i.set(n+u*g,s+c*g,g))}},function(t,e,i){var r=i(39),n=i(485),s=new(i(47)),o=new r;t.exports=function(t,e,i){void 0===i&&(i=new r);var a=!1;i.set(),o.set();for(var h=e[0],l=1;l<e.length;l++){var u=e[l];s.setTo(h.x,h.y,u.x,u.y),h=u,n(t,s,o)&&(!a||o.z<i.z)&&(i.copy(o),a=!0)}return a?i:null}},function(t,e,i){var r=i(39),n=i(140),s=i(486),o=new r;t.exports=function(t,e,i){void 0===i&&(i=new n),Array.isArray(e)||(e=[e]);var r=!1;i.set(),o.set();for(var a=0;a<e.length;a++)s(t,e[a].points,o)&&(!r||o.z<i.z)&&(i.set(o.x,o.y,o.z,a),r=!0);return r?i:null}},function(t,e){t.exports=function(t,e){var i=t.x1,r=t.y1,n=t.x2,s=t.y2,o=e.x,a=e.y,h=e.right,l=e.bottom,u=0;if(i>=o&&i<=h&&r>=a&&r<=l||n>=o&&n<=h&&s>=a&&s<=l)return!0;if(i<o&&n>=o){if((u=r+(s-r)*(o-i)/(n-i))>a&&u<=l)return!0}else if(i>h&&n<=h&&(u=r+(s-r)*(h-i)/(n-i))>=a&&u<=l)return!0;if(r<a&&s>=a){if((u=i+(n-i)*(a-r)/(s-r))>=o&&u<=h)return!0}else if(r>l&&s<=l&&(u=i+(n-i)*(l-r)/(s-r))>=o&&u<=h)return!0;return!1}},function(t,e,i){var r=i(96),n=i(57),s=i(235),o=i(490);t.exports=function(t,e){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),a=e.getLineB(),h=e.getLineC();if(n(t,i.x1,i.y1)||n(t,i.x2,i.y2))return!0;if(n(t,a.x1,a.y1)||n(t,a.x2,a.y2))return!0;if(n(t,h.x1,h.y1)||n(t,h.x2,h.y2))return!0;var l=t.getLineA(),u=t.getLineB(),c=t.getLineC(),d=t.getLineD();if(r(i,l)||r(i,u)||r(i,c)||r(i,d))return!0;if(r(a,l)||r(a,u)||r(a,c)||r(a,d))return!0;if(r(h,l)||r(h,u)||r(h,c)||r(h,d))return!0;var f=o(t);return s(e,f,!0).length>0}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},function(t,e,i){var r=i(233),n=i(115);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top||!n(t,e.x,e.y)&&!r(t.getLineA(),e)&&!r(t.getLineB(),e)&&!r(t.getLineC(),e))}},function(t,e,i){var r=i(4),n=i(493),s=i(96);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e))for(var o=t.getLineA(),a=t.getLineB(),h=t.getLineC(),l=[new r,new r,new r],u=[s(o,e,l[0]),s(a,e,l[1]),s(h,e,l[2])],c=0;c<3;c++)u[c]&&i.push(l[c]);return i}},function(t,e,i){var r=i(96);t.exports=function(t,e){return!!(t.contains(e.x1,e.y1)||t.contains(e.x2,e.y2)||r(t.getLineA(),e)||r(t.getLineB(),e)||r(t.getLineC(),e))}},function(t,e,i){var r=i(235),n=i(495),s=i(96);t.exports=function(t,e){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),o=t.getLineB(),a=t.getLineC(),h=e.getLineA(),l=e.getLineB(),u=e.getLineC();if(s(i,h)||s(i,l)||s(i,u))return!0;if(s(o,h)||s(o,l)||s(o,u))return!0;if(s(a,h)||s(a,l)||s(a,u))return!0;var c=n(t),d=r(e,c,!0);return d.length>0||(c=n(e),(d=r(t,c,!0)).length>0)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=1);var r=e.x1,n=e.y1,s=e.x2,o=e.y2,a=t.x,h=t.y,l=(s-r)*(s-r)+(o-n)*(o-n);if(0===l)return!1;var u=((a-r)*(s-r)+(h-n)*(o-n))/l;if(u<0)return Math.sqrt((r-a)*(r-a)+(n-h)*(n-h))<=i;if(u>=0&&u<=1){var c=((n-h)*(s-r)-(r-a)*(o-n))/l;return Math.abs(c)*Math.sqrt(l)<=i}return Math.sqrt((s-a)*(s-a)+(o-h)*(o-h))<=i}},function(t,e,i){var r=i(14),n=i(68),s=i(97);t.exports=function(t){var e=s(t)-r.TAU;return n(e,-Math.PI,Math.PI)}},function(t,e){var i=!0,r="untitled",n="",s="";function o(t){return 0===t.models.length&&t.models.push({faces:[],name:r,textureCoords:[],vertexNormals:[],vertices:[]}),n="",t.models[t.models.length-1]}function a(t,e){var i=t.length>=2?t[1]:r;e.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),n=""}function h(t){2===t.length&&(n=t[1])}function l(t,e){var i=t.length,r=i>=2?parseFloat(t[1]):0,n=i>=3?parseFloat(t[2]):0,s=i>=4?parseFloat(t[3]):0;o(e).vertices.push({x:r,y:n,z:s})}function u(t,e){var r=t.length,n=r>=2?parseFloat(t[1]):0,s=r>=3?parseFloat(t[2]):0,a=r>=4?parseFloat(t[3]):0;isNaN(n)&&(n=0),isNaN(s)&&(s=0),isNaN(a)&&(a=0),i&&(s=1-s),o(e).textureCoords.push({u:n,v:s,w:a})}function c(t,e){var i=t.length,r=i>=2?parseFloat(t[1]):0,n=i>=3?parseFloat(t[2]):0,s=i>=4?parseFloat(t[3]):0;o(e).vertexNormals.push({x:r,y:n,z:s})}function d(t,e){var i=t.length-1;if(!(i<3)){for(var r={group:n,material:s,vertices:[]},a=0;a<i;a++){var h=t[a+1].split("/"),l=h.length;if(!(l<1||l>3)){var u=0,c=0,d=0;u=parseInt(h[0],10),l>1&&""!==h[1]&&(c=parseInt(h[1],10)),l>2&&(d=parseInt(h[2],10)),0!==u&&(u<0&&(u=o(e).vertices.length+1+u),c-=1,u-=1,d-=1,r.vertices.push({textureCoordsIndex:c,vertexIndex:u,vertexNormalIndex:d}))}}o(e).faces.push(r)}}function f(t,e){t.length>=2&&e.materialLibraries.push(t[1])}function p(t){t.length>=2&&(s=t[1])}t.exports=function(t,e){void 0===e&&(e=!0),i=e;var r,o,g={materials:{},materialLibraries:[],models:[]};n="",s="";for(var v=t.split("\n"),m=0;m<v.length;m++){var y=(r=v[m],o=void 0,o=r.indexOf("#"),o>-1?r.substring(0,o):r).replace(/\s\s+/g," ").trim().split(" ");switch(y[0].toLowerCase()){case"o":a(y,g);break;case"g":h(y);break;case"v":l(y,g);break;case"vt":u(y,g);break;case"vn":c(y,g);break;case"f":d(y,g);break;case"mtllib":f(y,g);break;case"usemtl":p(y)}}return g}},function(t,e,i){var r=i(103);t.exports=function(t){for(var e={},i=t.split("\n"),n="",s=0;s<i.length;s++){var o=i[s].trim();if(0!==o.indexOf("#")&&""!==o){var a=o.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":n=a[1];break;case"kd":var h=Math.floor(255*a[1]),l=a.length>=2?Math.floor(255*a[2]):h,u=a.length>=3?Math.floor(255*a[3]):h;e[n]=r(h,l,u)}}}return e}},function(t,e){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,e){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,e,i){var r=i(10);r.Area=i(1267),r.Ceil=i(1268),r.CeilAll=i(1269),r.CenterOn=i(190),r.Clone=i(1270),r.Contains=i(57),r.ContainsPoint=i(1271),r.ContainsRect=i(503),r.CopyFrom=i(1272),r.Decompose=i(490),r.Equals=i(1273),r.FitInside=i(1274),r.FitOutside=i(1275),r.Floor=i(1276),r.FloorAll=i(1277),r.FromPoints=i(199),r.FromXY=i(1278),r.GetAspectRatio=i(237),r.GetCenter=i(1279),r.GetPoint=i(171),r.GetPoints=i(306),r.GetSize=i(1280),r.Inflate=i(1281),r.Intersection=i(1282),r.MarchingAnts=i(316),r.MergePoints=i(1283),r.MergeRect=i(1284),r.MergeXY=i(1285),r.Offset=i(1286),r.OffsetPoint=i(1287),r.Overlaps=i(1288),r.Perimeter=i(130),r.PerimeterPoint=i(1289),r.Random=i(174),r.RandomOutside=i(1290),r.SameDimensions=i(1291),r.Scale=i(1292),r.Union=i(441),t.exports=r},function(t,e){t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t.x3+=e,t.y3+=i,t}},function(t,e,i){var r=i(4);function n(t,e,i,r){var n=t-i,s=e-r,o=n*n+s*s;return Math.sqrt(o)}t.exports=function(t,e){void 0===e&&(e=new r);var i=t.x1,s=t.y1,o=t.x2,a=t.y2,h=t.x3,l=t.y3,u=n(h,l,o,a),c=n(i,s,h,l),d=n(o,a,i,s),f=u+c+d;return e.x=(i*u+o*c+h*d)/f,e.y=(s*u+a*c+l*d)/f,e}},function(t,e){t.exports=function(t,e){return function(i,r,n,s){var o=t.getPixelAlpha(r,n,s.texture.key,s.frame.name);return o&&o>=e}}},function(t,e){t.exports=function(t,e,i){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,e,i){var r=new(i(0))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=r},function(t,e,i){var r=i(0),n=i(239),s=new r({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,i=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(n.BUTTON_DOWN,e,this,t),this.pad.emit(n.GAMEPAD_BUTTON_DOWN,i,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(n.BUTTON_UP,e,this,t),this.pad.emit(n.GAMEPAD_BUTTON_UP,i,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=s},function(t,e,i){var r=i(509),n=i(510),s=i(0),o=i(9),a=i(3),h=new s({Extends:o,initialize:function(t,e){o.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var i=[],s=0;s<e.buttons.length;s++)i.push(new n(this,s));this.buttons=i;var h=[];for(s=0;s<e.axes.length;s++)h.push(new r(this,s));this.axes=h,this.vibration=e.vibrationActuator;var l={value:0,pressed:!1};this._LCLeft=i[14]?i[14]:l,this._LCRight=i[15]?i[15]:l,this._LCTop=i[12]?i[12]:l,this._LCBottom=i[13]?i[13]:l,this._RCLeft=i[2]?i[2]:l,this._RCRight=i[1]?i[1]:l,this._RCTop=i[3]?i[3]:l,this._RCBottom=i[0]?i[0]:l,this._FBLeftTop=i[4]?i[4]:l,this._FBLeftBottom=i[6]?i[6]:l,this._FBRightTop=i[5]?i[5]:l,this._FBRightBottom=i[7]?i[7]:l;var u={value:0};this._HAxisLeft=h[0]?h[0]:u,this._VAxisLeft=h[1]?h[1]:u,this._HAxisRight=h[2]?h[2]:u,this._VAxisRight=h[3]?h[3]:u,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){var e,i=this.buttons,r=t.buttons,n=i.length;for(e=0;e<n;e++)i[e].update(r[e].value);var s=this.axes,o=t.axes;for(n=s.length,e=0;e<n;e++)s[e].update(o[e]);n>=2&&(this.leftStick.set(s[0].getValue(),s[1].getValue()),n>=4&&this.rightStick.set(s[2].getValue(),s[3].getValue()))}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=h},function(t,e,i){var r=i(0),n=i(9),s=i(154),o=new r({Extends:n,initialize:function(t,e){n.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=o},function(t,e,i){var r=i(0),n=i(154),s=i(2),o=i(514),a=i(516),h=new r({initialize:function(t,e,i){if(void 0===i&&(i={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var r=0;r<e.length;r++){var h=e[r];"string"==typeof h?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):"number"==typeof h?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(i,"resetOnWrongKey",!0),this.maxKeyDelay=s(i,"maxKeyDelay",0),this.resetOnMatch=s(i,"resetOnMatch",!1),this.deleteOnMatch=s(i,"deleteOnMatch",!1);var l=this;this.onKeyDown=function(t){!l.matched&&l.enabled&&o(t,l)&&(l.manager.emit(n.COMBO_MATCH,l,t),l.resetOnMatch?a(l):l.deleteOnMatch&&l.destroy())},this.manager.on(n.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(n.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=h},function(t,e,i){var r=i(515);t.exports=function(t,e){if(e.matched)return!0;var i=!1,n=!1;if(t.keyCode===e.current)if(e.index>0&&e.maxKeyDelay>0){var s=e.timeLastMatched+e.maxKeyDelay;t.timeStamp<=s&&(n=!0,i=r(t,e))}else n=!0,i=r(t,e);return!n&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),i&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),i}},function(t,e){t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},function(t,e){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,e,i){var r=i(240);t.exports=function(t,e){var i=r(e,t.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",t.src,i.async,i.user,i.password),n.responseType=t.xhrSettings.responseType,n.timeout=i.timeout,i.headers)for(var s in i.headers)n.setRequestHeader(s,i.headers[s]);return i.header&&i.headerValue&&n.setRequestHeader(i.header,i.headerValue),i.requestedWith&&n.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&n.overrideMimeType(i.overrideMimeType),i.withCredentials&&(n.withCredentials=!0),n.onload=t.onLoad.bind(t,n),n.onerror=t.onError.bind(t,n),n.onprogress=t.onProgress.bind(t),n.send(),n}},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(519),l=i(7),u=new r({Extends:s,initialize:function(t,e,i,r,n){if(l(e)){var o=e;e=a(o,"key"),r=a(o,"xhrSettings"),n=a(o,"context",n)}var h={type:"audio",cache:t.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:e,url:i.url,xhrSettings:r,config:{context:n}};s.call(this,t,h)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(e){t.data=e,t.onProcessComplete()}),(function(e){console.error("Error decoding audio: "+t.key+" - ",e?e.message:null),t.onProcessError()})),this.config.context=null}});u.create=function(t,e,i,r,n){var s=t.systems.game,o=s.config.audio,c=s.device.audio;l(e)&&(i=a(e,"url",[]),r=a(e,"config",{}));var d=u.getAudioURL(s,i);return d?c.webAudio&&!o.disableWebAudio?new u(t,e,d,n,s.sound.context):new h(t,e,d,r):null},u.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=a(e[i],"url",e[i]);if(0===r.indexOf("blob:")||0===r.indexOf("data:"))return{url:r,type:""};var n=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(n=a(e[i],"type",n?n[1]:"").toLowerCase(),t.device.audio[n])return{url:r,type:n}}return null},o.register("audio",(function(t,e,i,r){var n,s=this.systems.game,o=s.config.audio,a=s.device.audio;if(o.noAudio||!a.webAudio&&!a.audioData)return this;if(Array.isArray(t))for(var h=0;h<t.length;h++)(n=u.create(this,t[h]))&&this.addFile(n);else(n=u.create(this,t,e,i,r))&&this.addFile(n);return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(95),s=i(23),o=i(2),a=i(155),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r){if(h(e)){var n=e;e=o(n,"key"),r=o(n,"config",r)}var a={type:"audio",cache:t.cacheManager.audio,extension:i.type,key:e,url:i.url,config:r};s.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var e=0;e<t;e++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+e).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(e=0;e<this.data.length;e++)(i=this.data[e]).src=a(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r){var n="js";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var l={type:"script",cache:!1,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var r=i(522),n=i(157),s=i(0),o=i(62),a=i(524),h=i(525),l=new s({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,i,r,n){return this.world.addCollider(t,e,i,r,n)},overlap:function(t,e,i,r,n){return this.world.addOverlap(t,e,i,r,n)},existing:function(t,e){var i=e?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(t,i),t},staticImage:function(t,e,i,n){var s=new r(this.scene,t,e,i,n);return this.sys.displayList.add(s),this.world.enableBody(s,o.STATIC_BODY),s},image:function(t,e,i,n){var s=new r(this.scene,t,e,i,n);return this.sys.displayList.add(s),this.world.enableBody(s,o.DYNAMIC_BODY),s},staticSprite:function(t,e,i,r){var s=new n(this.scene,t,e,i,r);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,o.STATIC_BODY),s},sprite:function(t,e,i,r){var s=new n(this.scene,t,e,i,r);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,o.DYNAMIC_BODY),s},staticGroup:function(t,e){return this.sys.updateList.add(new h(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new a(this.world,this.world.scene,t,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=l},function(t,e,i){var r=i(0),n=i(243),s=i(125),o=new r({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(t,e,i,r,n){s.call(this,t,e,i,r,n),this.body=null}});t.exports=o},function(t,e,i){var r=i(244),n=i(65),s=i(231),o=i(151);t.exports=function(t,e,i,a,h,l){var u=r(t,e-a,i-a,2*a,2*a,h,l);if(0===u.length)return u;for(var c=new n(e,i,a),d=new n,f=[],p=0;p<u.length;p++){var g=u[p];g.isCircle?(d.setTo(g.center.x,g.center.y,g.halfWidth),s(c,d)&&f.push(g)):o(c,g)&&f.push(g)}return f}},function(t,e,i){var r=i(157),n=i(0),s=i(62),o=i(2),a=i(113),h=i(7),l=new n({Extends:a,initialize:function(t,e,i,n){if(i||n)if(h(i))n=i,i=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(i)&&h(i[0])){n=i[0];var l=this;i.forEach((function(t){t.internalCreateCallback=l.createCallbackHandler,t.internalRemoveCallback=l.removeCallbackHandler})),i=null}else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,n.classType=o(n,"classType",r),this.physicsType=s.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(n,"collideWorldBounds",!1),setBoundsRectangle:o(n,"customBoundsRectangle",null),setAccelerationX:o(n,"accelerationX",0),setAccelerationY:o(n,"accelerationY",0),setAllowDrag:o(n,"allowDrag",!0),setAllowGravity:o(n,"allowGravity",!0),setAllowRotation:o(n,"allowRotation",!0),setBounceX:o(n,"bounceX",0),setBounceY:o(n,"bounceY",0),setDragX:o(n,"dragX",0),setDragY:o(n,"dragY",0),setEnable:o(n,"enable",!0),setGravityX:o(n,"gravityX",0),setGravityY:o(n,"gravityY",0),setFrictionX:o(n,"frictionX",0),setFrictionY:o(n,"frictionY",0),setMaxVelocityX:o(n,"maxVelocityX",1e4),setMaxVelocityY:o(n,"maxVelocityY",1e4),setVelocityX:o(n,"velocityX",0),setVelocityY:o(n,"velocityY",0),setAngularVelocity:o(n,"angularVelocity",0),setAngularAcceleration:o(n,"angularAcceleration",0),setAngularDrag:o(n,"angularDrag",0),setMass:o(n,"mass",1),setImmovable:o(n,"immovable",!1)},a.call(this,e,i,n),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.DYNAMIC_BODY);var e=t.body;for(var i in this.defaults)e[i](this.defaults[i])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,i){void 0===i&&(i=0);for(var r=this.getChildren(),n=0;n<r.length;n++)r[n].body.velocity.set(t+n*i,e+n*i);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),r=0;r<i.length;r++)i[r].body.velocity.x=t+r*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),r=0;r<i.length;r++)i[r].body.velocity.y=t+r*e;return this}});t.exports=l},function(t,e,i){var r=i(157),n=i(0),s=i(62),o=i(2),a=i(113),h=i(7),l=new n({Extends:a,initialize:function(t,e,i,n){i||n?h(i)?(n=i,i=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler,n.createMultipleCallback=this.createMultipleCallbackHandler,n.classType=o(n,"classType",r)):Array.isArray(i)&&h(i[0])?(n=i,i=null,n.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=o(t,"classType",r)}))):n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:r},this.world=t,this.physicsType=s.STATIC_BODY,a.call(this,e,i,n),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=l},function(t,e,i){var r=i(350),n=i(527),s=i(18),o=i(0),a=i(528),h=i(62),l=i(50),u=i(9),c=i(245),d=i(124),f=i(354),p=i(355),g=i(246),v=i(247),m=i(529),y=i(6),x=i(14),b=i(211),w=i(530),T=i(10),S=i(531),E=i(532),C=i(537),_=i(538),A=i(149),M=i(539),P=i(248),k=i(25),O=i(3),R=i(68),L=new o({Extends:u,initialize:function(t,e){u.call(this),this.scene=t,this.bodies=new A,this.staticBodies=new A,this.pendingDestroy=new A,this.colliders=new b,this.gravity=new O(y(e,"gravity.x",0),y(e,"gravity.y",0)),this.bounds=new T(y(e,"x",0),y(e,"y",0),y(e,"width",t.sys.scale.width),y(e,"height",t.sys.scale.height)),this.checkCollision={up:y(e,"checkCollision.up",!0),down:y(e,"checkCollision.down",!0),left:y(e,"checkCollision.left",!0),right:y(e,"checkCollision.right",!0)},this.fps=y(e,"fps",60),this.fixedStep=y(e,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=y(e,"timeScale",1),this.OVERLAP_BIAS=y(e,"overlapBias",4),this.TILE_BIAS=y(e,"tileBias",16),this.forceX=y(e,"forceX",!1),this.isPaused=y(e,"isPaused",!1),this._total=0,this.drawDebug=y(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:y(e,"debugShowBody",!0),debugShowStaticBody:y(e,"debugShowStaticBody",!0),debugShowVelocity:y(e,"debugShowVelocity",!0),bodyDebugColor:y(e,"debugBodyColor",16711935),staticBodyDebugColor:y(e,"debugStaticBodyColor",255),velocityDebugColor:y(e,"debugVelocityColor",65280)},this.maxEntries=y(e,"maxEntries",16),this.useTree=y(e,"useTree",!0),this.tree=new S(this.maxEntries),this.staticTree=new S(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new k,this._tempMatrix2=new k,this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=h.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];if(r.isParent)for(var n=r.getChildren(),s=0;s<n.length;s++){var o=n[s];o.isParent?this.enable(o,e):this.enableBody(o,e)}else this.enableBody(r,e)}},enableBody:function(t,e){return void 0===e&&(e=h.DYNAMIC_BODY),t.body||(e===h.DYNAMIC_BODY?t.body=new n(this,t):e===h.STATIC_BODY&&(t.body=new M(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===h.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===h.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.isParent)for(var r=i.getChildren(),n=0;n<r.length;n++){var s=r[n];s.isParent?this.disable(s):this.disableBody(s.body)}else this.disableBody(i.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===h.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===h.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,i,r,n,s,o,a){return this.bounds.setTo(t,e,i,r),void 0!==n&&this.setBoundsCollision(n,s,o,a),this},setBoundsCollision:function(t,e,i,r){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this.checkCollision.left=t,this.checkCollision.right=e,this.checkCollision.up=i,this.checkCollision.down=r,this},pause:function(){return this.isPaused=!0,this.emit(c.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(c.RESUME),this},addCollider:function(t,e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i);var s=new a(this,!1,t,e,i,r,n);return this.colliders.add(s),s},addOverlap:function(t,e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i);var s=new a(this,!0,t,e,i,r,n);return this.colliders.add(s),s},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var i,r,n=this._frameTime,s=this._frameTimeMS*this.timeScale;this._elapsed+=e;var o=this.bodies.entries,a=this._elapsed>=s;for(this.fixedStep||(n=.001*e,a=!0,this._elapsed=0),i=0;i<o.length;i++)(r=o[i]).enable&&r.preUpdate(a,n);if(a){this._elapsed-=s,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(o));var h=this.colliders.update();for(i=0;i<h.length;i++){var l=h[i];l.active&&l.update()}this.emit(c.WORLD_STEP,n)}for(;this._elapsed>=s;)this._elapsed-=s,this.step(n)}},step:function(t){var e,i,r=this.bodies.entries,n=r.length;for(e=0;e<n;e++)(i=r[e]).enable&&i.update(t);this.useTree&&(this.tree.clear(),this.tree.load(r));var s=this.colliders.update();for(e=0;e<s.length;e++){var o=s[e];o.active&&o.update()}this.emit(c.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function(){var t,e,i=this.bodies.entries,r=i.length,n=this.bodies,s=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<r;t++)(e=i[t]).enable&&e.postUpdate();if(this.drawDebug){var o=this.debugGraphic;for(o.clear(),t=0;t<r;t++)(e=i[t]).willDrawDebug()&&e.drawDebug(o);for(r=(i=s.entries).length,t=0;t<r;t++)(e=i[t]).willDrawDebug()&&e.drawDebug(o)}var a=this.pendingDestroy;if(a.size>0){var l=this.tree,u=this.staticTree;for(r=(i=a.entries).length,t=0;t<r;t++)(e=i[t]).physicsType===h.DYNAMIC_BODY?(l.remove(e),n.delete(e)):e.physicsType===h.STATIC_BODY&&(u.remove(e),s.delete(e)),e.world=void 0,e.gameObject=void 0;a.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var i=t.angularVelocity,r=t.angularAcceleration,n=t.angularDrag,o=t.maxAngular;r?i+=r*e:t.allowDrag&&n&&(f(i-(n*=e),0,.1)?i-=n:p(i+n,0,.1)?i+=n:i=0);var a=(i=s(i,-o,o))-t.angularVelocity;t.angularVelocity+=a,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var i=t.velocity.x,r=t.acceleration.x,n=t.drag.x,o=t.maxVelocity.x,a=t.velocity.y,h=t.acceleration.y,l=t.drag.y,u=t.maxVelocity.y,c=t.speed,g=t.maxSpeed,v=t.allowDrag,m=t.useDamping;t.allowGravity&&(i+=(this.gravity.x+t.gravity.x)*e,a+=(this.gravity.y+t.gravity.y)*e),r?i+=r*e:v&&n&&(m?(i*=n=Math.pow(n,e),c=Math.sqrt(i*i+a*a),d(c,0,.001)&&(i=0)):f(i-(n*=e),0,.01)?i-=n:p(i+n,0,.01)?i+=n:i=0),h?a+=h*e:v&&l&&(m?(a*=l=Math.pow(l,e),c=Math.sqrt(i*i+a*a),d(c,0,.001)&&(a=0)):f(a-(l*=e),0,.01)?a-=l:p(a+l,0,.01)?a+=l:a=0),i=s(i,-o,o),a=s(a,-u,u),t.velocity.set(i,a),g>-1&&c>g&&(t.velocity.normalize().scale(g),c=g),t.speed=c},separate:function(t,e,i,r,n,s){if(!s&&!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e))return!1;if(i&&!1===i.call(r,t.gameObject,e.gameObject))return!1;if(t.isCircle&&e.isCircle)return this.separateCircle(t,e,n);if(t.isCircle!==e.isCircle){var o=t.isCircle?e:t,a=t.isCircle?t:e,h={x:o.x,y:o.y,right:o.right,bottom:o.bottom},l=a.center;if((l.y<h.y||l.y>h.bottom)&&(l.x<h.x||l.x>h.right))return this.separateCircle(t,e,n)}var u=!1,d=!1;n?(u=C(t,e,n,this.OVERLAP_BIAS),d=_(t,e,n,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(u=C(t,e,n,this.OVERLAP_BIAS),this.intersects(t,e)&&(d=_(t,e,n,this.OVERLAP_BIAS))):(d=_(t,e,n,this.OVERLAP_BIAS),this.intersects(t,e)&&(u=C(t,e,n,this.OVERLAP_BIAS)));var f=u||d;return f&&(n?(t.onOverlap||e.onOverlap)&&this.emit(c.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(c.COLLIDE,t.gameObject,e.gameObject,t,e)),f},separateCircle:function(t,e,i,n){g(t,e,!1,n),v(t,e,!1,n);var s=0;if(t.isCircle!==e.isCircle){var o={x:e.isCircle?t.position.x:e.position.x,y:e.isCircle?t.position.y:e.position.y,right:e.isCircle?t.right:e.right,bottom:e.isCircle?t.bottom:e.bottom},a={x:t.isCircle?t.center.x:e.center.x,y:t.isCircle?t.center.y:e.center.y,radius:t.isCircle?t.halfWidth:e.halfWidth};a.y<o.y?a.x<o.x?s=l(a.x,a.y,o.x,o.y)-a.radius:a.x>o.right&&(s=l(a.x,a.y,o.right,o.y)-a.radius):a.y>o.bottom&&(a.x<o.x?s=l(a.x,a.y,o.x,o.bottom)-a.radius:a.x>o.right&&(s=l(a.x,a.y,o.right,o.bottom)-a.radius)),s*=-1}else s=t.halfWidth+e.halfWidth-l(t.center.x,t.center.y,e.center.x,e.center.y);if(t.overlapR=s,e.overlapR=s,i||0===s||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==s&&(t.onOverlap||e.onOverlap)&&this.emit(c.OVERLAP,t.gameObject,e.gameObject,t,e),0!==s;var h=t.center.x-e.center.x,u=t.center.y-e.center.y,d=Math.sqrt(Math.pow(h,2)+Math.pow(u,2)),f=(e.center.x-t.center.x)/d||0,p=(e.center.y-t.center.y)/d||0,m=2*(t.velocity.x*f+t.velocity.y*p-e.velocity.x*f-e.velocity.y*p)/(t.mass+e.mass);(t.immovable||e.immovable)&&(m*=2),t.immovable||(t.velocity.x=t.velocity.x-m/t.mass*f,t.velocity.y=t.velocity.y-m/t.mass*p),e.immovable||(e.velocity.x=e.velocity.x+m/e.mass*f,e.velocity.y=e.velocity.y+m/e.mass*p),t.immovable||e.immovable||(s/=2);var y=r(t.center,e.center),b=(s+x.EPSILON)*Math.cos(y),w=(s+x.EPSILON)*Math.sin(y);return t.immovable||(t.x-=b,t.y-=w,t.updateCenter()),e.immovable||(e.x+=b,e.y+=w,e.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,e.velocity.x*=e.bounce.x,e.velocity.y*=e.bounce.y,(t.onCollide||e.onCollide)&&this.emit(c.COLLIDE,t.gameObject,e.gameObject,t,e),!0},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?l(t.center.x,t.center.y,e.center.x,e.center.y)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.position.x||t.bottom<=e.position.y||t.position.x>=e.right||t.position.y>=e.bottom))},circleBodyIntersects:function(t,e){var i=s(t.center.x,e.left,e.right),r=s(t.center.y,e.top,e.bottom);return(t.center.x-i)*(t.center.x-i)+(t.center.y-r)*(t.center.y-r)<=t.halfWidth*t.halfWidth},overlap:function(t,e,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.collideObjects(t,e,i,r,n,!0)},collide:function(t,e,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.collideObjects(t,e,i,r,n,!1)},collideObjects:function(t,e,i,r,n,s){var o,a;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var h=Array.isArray(t),l=Array.isArray(e);if(this._total=0,h||l)if(!h&&l)for(o=0;o<e.length;o++)this.collideHandler(t,e[o],i,r,n,s);else if(h&&!l)if(e)for(o=0;o<t.length;o++)this.collideHandler(t[o],e,i,r,n,s);else for(o=0;o<t.length;o++){var u=t[o];for(a=o+1;a<t.length;a++)o!==a&&this.collideHandler(u,t[a],i,r,n,s)}else for(o=0;o<t.length;o++)for(a=0;a<e.length;a++)this.collideHandler(t[o],e[a],i,r,n,s);else this.collideHandler(t,e,i,r,n,s);return this._total>0},collideHandler:function(t,e,i,r,n,s){if(void 0===e&&t.isParent)return this.collideGroupVsGroup(t,t,i,r,n,s);if(!t||!e)return!1;if(t.body){if(e.body)return this.collideSpriteVsSprite(t,e,i,r,n,s);if(e.isParent)return this.collideSpriteVsGroup(t,e,i,r,n,s);if(e.isTilemap)return this.collideSpriteVsTilemapLayer(t,e,i,r,n,s)}else if(t.isParent){if(e.body)return this.collideSpriteVsGroup(e,t,i,r,n,s);if(e.isParent)return this.collideGroupVsGroup(t,e,i,r,n,s);if(e.isTilemap)return this.collideGroupVsTilemapLayer(t,e,i,r,n,s)}else if(t.isTilemap){if(e.body)return this.collideSpriteVsTilemapLayer(e,t,i,r,n,s);if(e.isParent)return this.collideGroupVsTilemapLayer(e,t,i,r,n,s)}},collideSpriteVsSprite:function(t,e,i,r,n,s){return!(!t.body||!e.body||(this.separate(t.body,e.body,r,n,s)&&(i&&i.call(n,t,e),this._total++),0))},collideSpriteVsGroup:function(t,e,i,r,n,s){var o,a,l,u=t.body;if(0!==e.length&&u&&u.enable&&!u.checkCollision.none)if(this.useTree||e.physicsType===h.STATIC_BODY){var c=this.treeMinMax;c.minX=u.left,c.minY=u.top,c.maxX=u.right,c.maxY=u.bottom;var d=e.physicsType===h.DYNAMIC_BODY?this.tree.search(c):this.staticTree.search(c);for(a=d.length,o=0;o<a;o++)u!==(l=d[o])&&l.enable&&!l.checkCollision.none&&e.contains(l.gameObject)&&this.separate(u,l,r,n,s,!0)&&(i&&i.call(n,u.gameObject,l.gameObject),this._total++)}else{var f=e.getChildren(),p=e.children.entries.indexOf(t);for(a=f.length,o=0;o<a;o++)(l=f[o].body)&&o!==p&&l.enable&&this.separate(u,l,r,n,s)&&(i&&i.call(n,u.gameObject,l.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,i,r,n,s){var o=t.getChildren();if(0===o.length)return!1;for(var a=!1,h=0;h<o.length;h++)o[h].body&&this.collideSpriteVsTilemapLayer(o[h],e,i,r,n,s)&&(a=!0);return a},collideTiles:function(t,e,i,r,n){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,r,n,!1,!1)},overlapTiles:function(t,e,i,r,n){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,i,r,n,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,i,r,n,s){var o=t.body;if(!o.enable||o.checkCollision.none)return!1;var a=o.position.x,h=o.position.y,l=o.width,u=o.height,c=e.layer;if(c.tileWidth>c.baseTileWidth){var d=(c.tileWidth-c.baseTileWidth)*e.scaleX;a-=d,l+=d}c.tileHeight>c.baseTileHeight&&(u+=(c.tileHeight-c.baseTileHeight)*e.scaleY);var f=m(a,h,l,u,null,e.scene.cameras.main,e.layer);return 0!==f.length&&this.collideSpriteVsTilesHandler(t,f,i,r,n,s,!0)},collideSpriteVsTilesHandler:function(t,e,i,r,n,s,o){for(var a,h,l=t.body,u={left:0,right:0,top:0,bottom:0},d=!1,f=0;f<e.length;f++){var p=(h=(a=e[f]).tilemapLayer).tileToWorldXY(a.x,a.y);u.left=p.x,u.top=p.y,a.baseHeight!==a.height&&(u.top-=(a.height-a.baseHeight)*h.scaleY),u.right=u.left+a.width*h.scaleX,u.bottom=u.top+a.height*h.scaleY,P(u,l)&&(!r||r.call(n,t,a))&&w(a,t)&&(s||E(f,l,a,u,h,this.TILE_BIAS,o))&&(this._total++,d=!0,i&&i.call(n,t,a),s&&l.onOverlap?this.emit(c.TILE_OVERLAP,t,a,l):l.onCollide&&this.emit(c.TILE_COLLIDE,t,a,l))}return d},collideGroupVsGroup:function(t,e,i,r,n,s){if(0!==t.length&&0!==e.length)for(var o=t.getChildren(),a=0;a<o.length;a++)this.collideSpriteVsGroup(o[a],e,i,r,n,s)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var i=0;i<t.length;i++)this.wrapObject(t[i],e)},wrapObject:function(t,e){void 0===e&&(e=0),t.x=R(t.x,this.bounds.left-e,this.bounds.right+e),t.y=R(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=L},function(t,e,i){var r=i(0),n=i(62),s=i(245),o=i(196),a=i(10),h=i(57),l=i(3),u=new r({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,r=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(e.x-e.scaleX*e.displayOriginX,e.y-e.scaleY*e.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=i,this.height=r,this.sourceWidth=i,this.sourceHeight=r,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(i/2),this.halfHeight=Math.abs(r/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=n.DYNAMIC_BODY,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new a},updateBounds:function(){var t=this.gameObject,e=this.transform;if(t.parentContainer){var i=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);e.x=i.tx,e.y=i.ty,e.rotation=o(i.rotation),e.scaleX=i.scaleX,e.scaleY=i.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY}else e.x=t.x,e.y=t.y,e.rotation=t.angle,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY;var r=!1;if(this.syncBounds){var n=t.getBounds(this._bounds);this.width=n.width,this.height=n.height,r=!0}else{var s=Math.abs(e.scaleX),a=Math.abs(e.scaleY);this._sx===s&&this._sy===a||(this.width=this.sourceWidth*s,this.height=this.sourceHeight*a,this._sx=s,this._sy=a,r=!0)}r&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){void 0===t&&(t=!1);var e=this.wasTouching,i=this.touching,r=this.blocked;t?(e.none=!0,e.up=!1,e.down=!1,e.left=!1,e.right=!1):(e.none=i.none,e.up=i.up,e.down=i.down,e.left=i.left,e.right=i.right),i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1,r.none=!0,r.up=!1,r.down=!1,r.left=!1,r.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(e)},update:function(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var e=this.velocity.x,i=this.velocity.y;this.newVelocity.set(e*t,i*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(i,e),this.speed=Math.sqrt(e*e+i*i),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t=this.position.x-this.prevFrame.x,e=this.position.y-this.prevFrame.y;if(this.moves){var i=this.deltaMax.x,r=this.deltaMax.y;0!==i&&0!==t&&(t<0&&t<-i?t=-i:t>0&&t>i&&(t=i)),0!==r&&0!==e&&(e<0&&e<-r?e=-r:e>0&&e>r&&(e=r)),this.gameObject.x+=t,this.gameObject.y+=e}t<0?this.facing=n.FACING_LEFT:t>0&&(this.facing=n.FACING_RIGHT),e<0?this.facing=n.FACING_UP:e>0&&(this.facing=n.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=e},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,e=this.customBoundsRectangle,i=this.world.checkCollision,r=this.worldBounce?-this.worldBounce.x:-this.bounce.x,n=this.worldBounce?-this.worldBounce.y:-this.bounce.y,s=!1;return t.x<e.x&&i.left?(t.x=e.x,this.velocity.x*=r,this.blocked.left=!0,s=!0):this.right>e.right&&i.right&&(t.x=e.right-this.width,this.velocity.x*=r,this.blocked.right=!0,s=!0),t.y<e.y&&i.up?(t.y=e.y,this.velocity.y*=n,this.blocked.up=!0,s=!0):this.bottom>e.bottom&&i.down&&(t.y=e.bottom-this.height,this.velocity.y*=n,this.blocked.down=!0,s=!0),s&&(this.blocked.none=!1,this.updateCenter()),s},setOffset:function(t,e){return void 0===e&&(e=t),this.offset.set(t,e),this},setSize:function(t,e,i){void 0===i&&(i=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),i&&r.getCenter){var n=(r.width-t)/2,s=(r.height-e)/2;this.offset.set(n,s)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var i=this.gameObject;i.setPosition(t,e),i.getTopLeft?i.getTopLeft(this.position):this.position.set(t,e),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=i.angle,this.preRotation=i.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-e)*(this.center.y-e)<=this.radius*this.radius:h(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,r=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(i,r,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(i,r,i+this.velocity.x/2,r+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,e,i,r){void 0===t&&(t=!0),this.collideWorldBounds=t;var n=void 0!==e,s=void 0!==i;return(n||s)&&(this.worldBounce||(this.worldBounce=new l),n&&(this.worldBounce.x=e),s&&(this.worldBounce.y=i)),void 0!==r&&(this.onWorldBounds=r),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){this.velocity.x=t;var e=t,i=this.velocity.y;return this.speed=Math.sqrt(e*e+i*i),this},setVelocityY:function(t){this.velocity.y=t;var e=this.velocity.x,i=t;return this.speed=Math.sqrt(e*e+i*i),this},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function(t,e,i,r){this.x+=t,this.updateCenter(),null!==e&&(this.velocity.x=e);var n=this.blocked;i&&(n.left=!0),r&&(n.right=!0)},processY:function(t,e,i,r){this.y+=t,this.updateCenter(),null!==e&&(this.velocity.y=e);var n=this.blocked;i&&(n.up=!0),r&&(n.down=!0)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=u},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n,s,o){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=i,this.object2=r,this.collideCallback=n,this.processCallback=s,this.callbackContext=o},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=r},function(t,e,i){var r=i(26),n=i(3),s=new n,o=new n;t.exports=function(t,e,i,n,a,h,l){var u=l.tilemapLayer.tilemap._convert.WorldToTileXY;u(t,e,!0,s,h,l);var c=s.x,d=s.y;u(t+i,e+n,!1,o,h,l);var f=Math.ceil(o.x),p=Math.ceil(o.y);return r(c,d,f-c,p-d,a,l)}},function(t,e){t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},function(t,e,i){var r=i(436);function n(t){if(!(this instanceof n))return new n(t,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function s(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,r,n){n||(n=g(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],h(n,t.leaf?r(s):s);return n}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,i,n,s){for(var o,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=n||(o=e+Math.ceil((i-e)/n/2)*n,r(t,o,e,i,s),a.push(e,o,o,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!p(t,e))return i;for(var n,s,o,a,h=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],p(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):f(t,a)?this._all(o,i):h.push(o));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!p(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],p(t,o=e.leaf?i(s):s)){if(e.leaf||f(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,o,a=this.data,h=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],i=u.pop(),o=!0),a.leaf&&-1!==(n=s(t,a.children,e)))return a.children.splice(n,1),l.push(a),this._condense(l),this;o||a.leaf||!f(a,h)?r?(i++,a=r.children[i],o=!1):a=null:(l.push(a),u.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,a=this._maxEntries;if(s<=a)return o(n=g(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(n=g([])).leaf=!1,n.height=r;var h,l,u,c,d=Math.ceil(s/a),f=d*Math.ceil(Math.sqrt(a));for(v(t,e,i,f,this.compareMinX),h=e;h<=i;h+=f)for(v(t,h,u=Math.min(h+f-1,i),d,this.compareMinY),l=h;l<=u;l+=d)c=Math.min(l+d-1,u),n.children.push(this._build(t,l,c,r-1));return o(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,h,l,u,d,f,p;r.push(e),!e.leaf&&r.length-1!==i;){for(u=d=1/0,n=0,s=e.children.length;n<s;n++)h=c(o=e.children[n]),f=t,p=o,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-h)<d?(d=l,u=h<u?h:u,a=o):l===d&&h<u&&(u=h,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),h(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),a=g(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,h,l,u,d,f,p,g,v,m,y;for(l=u=1/0,r=e;r<=i-e;r++)f=n=a(t,0,r,this.toBBox),p=s=a(t,r,i,this.toBBox),void 0,void 0,void 0,void 0,g=Math.max(f.minX,p.minX),v=Math.max(f.minY,p.minY),m=Math.min(f.maxX,p.maxX),y=Math.min(f.maxY,p.maxY),o=Math.max(0,m-g)*Math.max(0,y-v),h=c(n)+c(s),o<l?(l=o,d=r,u=h<u?h:u):o===l&&h<u&&(u=h,d=r);return d},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:l,n=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,l=a(t,0,e,o),u=a(t,i-e,i,o),c=d(l)+d(u);for(n=e;n<i-e;n++)s=t.children[n],h(l,t.leaf?o(s):s),c+=d(l);for(n=i-e-1;n>=e;n--)s=t.children[n],h(u,t.leaf?o(s):s),c+=d(u);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)h(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():o(t[i],this.toBBox)},compareMinX:function(t,e){return t.left-e.left},compareMinY:function(t,e){return t.top-e.top},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}}},t.exports=n},function(t,e,i){var r=i(533),n=i(535),s=i(248);t.exports=function(t,e,i,o,a,h,l){var u=o.left,c=o.top,d=o.right,f=o.bottom,p=i.faceLeft||i.faceRight,g=i.faceTop||i.faceBottom;if(l||(p=!0,g=!0),!p&&!g)return!1;var v=0,m=0,y=0,x=1;if(e.deltaAbsX()>e.deltaAbsY()?y=-1:e.deltaAbsX()<e.deltaAbsY()&&(x=-1),0!==e.deltaX()&&0!==e.deltaY()&&p&&g&&(y=Math.min(Math.abs(e.position.x-d),Math.abs(e.right-u)),x=Math.min(Math.abs(e.position.y-f),Math.abs(e.bottom-c))),y<x){if(p&&0!==(v=r(e,i,u,d,h,l))&&!s(o,e))return!0;g&&(m=n(e,i,c,f,h,l))}else{if(g&&0!==(m=n(e,i,c,f,h,l))&&!s(o,e))return!0;p&&(v=r(e,i,u,d,h,l))}return 0!==v||0!==m}},function(t,e,i){var r=i(534);t.exports=function(t,e,i,n,s,o){var a=0,h=e.faceLeft,l=e.faceRight,u=e.collideLeft,c=e.collideRight;return o||(h=!0,l=!0,u=!0,c=!0),t.deltaX()<0&&c&&t.checkCollision.left?l&&t.x<n&&(a=t.x-n)<-s&&(a=0):t.deltaX()>0&&u&&t.checkCollision.right&&h&&t.right>i&&(a=t.right-i)>s&&(a=0),0!==a&&(t.customSeparateX?t.overlapX=a:r(t,a)),a}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):e>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,e,i){var r=i(536);t.exports=function(t,e,i,n,s,o){var a=0,h=e.faceTop,l=e.faceBottom,u=e.collideUp,c=e.collideDown;return o||(h=!0,l=!0,u=!0,c=!0),t.deltaY()<0&&c&&t.checkCollision.up?l&&t.y<n&&(a=t.y-n)<-s&&(a=0):t.deltaY()>0&&u&&t.checkCollision.down&&h&&t.bottom>i&&(a=t.bottom-i)>s&&(a=0),0!==a&&(t.customSeparateY?t.overlapY=a:r(t,a)),a}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):e>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,e,i){var r=i(246),n=i(1389);t.exports=function(t,e,i,s){var o=r(t,e,i,s),a=t.immovable,h=e.immovable;if(i||0===o||a&&h||t.customSeparateX||e.customSeparateX)return 0!==o||t.embedded&&e.embedded;var l=n.Set(t,e,o);return a||h?(a?n.RunImmovableBody1(l):h&&n.RunImmovableBody2(l),!0):l>0||n.Check()}},function(t,e,i){var r=i(247),n=i(1390);t.exports=function(t,e,i,s){var o=r(t,e,i,s),a=t.immovable,h=e.immovable;if(i||0===o||a&&h||t.customSeparateY||e.customSeparateY)return 0!==o||t.embedded&&e.embedded;var l=n.Set(t,e,o);return a||h?(a?n.RunImmovableBody1(l):h&&n.RunImmovableBody2(l),!0):l>0||n.Check()}},function(t,e,i){var r=i(66),n=i(0),s=i(62),o=i(57),a=i(3),h=new n({initialize:function(t,e){var i=e.displayWidth?e.displayWidth:64,r=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(e.x-i*e.originX,e.y-r*e.originY),this.width=i,this.height=r,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=a.ZERO,this.allowGravity=!1,this.gravity=a.ZERO,this.bounce=a.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,i){void 0===i&&(i=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),i&&r.getCenter){var n=r.displayWidth/2,s=r.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n-this.halfWidth,s-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var i=this.gameObject;void 0===t&&(t=i.x),void 0===e&&(e=i.y),this.world.staticTree.remove(this),i.setPosition(t,e),i.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?r(this,t,e):o(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,r=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(i,r,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=h},function(t,e,i){var r=new(i(0))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=r},function(t,e,i){var r=new(i(3));t.exports=function(t,e,i,n){var s=i.tilemapLayer,o=s.cullPaddingX,a=s.cullPaddingY,h=s.tilemap.tileToWorldXY(t,e,r,n,s);return h.x>n.worldView.x+s.scaleX*i.tileWidth*(-o-.5)&&h.x<n.worldView.right+s.scaleX*i.tileWidth*(o-.5)&&h.y>n.worldView.y+s.scaleY*i.tileHeight*(-a-1)&&h.y<n.worldView.bottom+s.scaleY*i.tileHeight*(a-.5)}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a){for(var h=r(i,n,s,o,null,a),l=0;l<h.length;l++)h[l]&&h[l].index===t&&(h[l].index=e)}},function(t,e,i){var r=i(10),n=i(139),s=i(76),o=new r;t.exports=function(t,e){var i=t.tilemapLayer.tilemap,r=t.tilemapLayer,a=Math.floor(i.tileWidth*r.scaleX),h=Math.floor(i.tileHeight*r.scaleY),l=s(e.worldView.x-r.x,a,0,!0)-r.cullPaddingX,u=n(e.worldView.right-r.x,a,0,!0)+r.cullPaddingX,c=s(e.worldView.y-r.y,h,0,!0)-r.cullPaddingY,d=n(e.worldView.bottom-r.y,h,0,!0)+r.cullPaddingY;return o.setTo(l,c,u-l,d-c)}},function(t,e,i){var r=i(543),n=i(159);t.exports=function(t,e,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var o=t.tilemapLayer,a=r(t,e);return(o.skipCull||1!==o.scrollFactorX||1!==o.scrollFactorY)&&(a.left=0,a.right=t.width,a.top=0,a.bottom=t.height),n(t,a,s,i),i}},function(t,e,i){var r=i(546),n=i(159);t.exports=function(t,e,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var o=t.tilemapLayer;if(!o.skipCull&&1===o.scrollFactorX&&1===o.scrollFactorY){var a=r(t,e);n(t,a,s,i)}return i}},function(t,e,i){var r=i(139),n=i(76);t.exports=function(t,e){var i=t.tilemapLayer.tilemap,s=t.tilemapLayer,o=Math.floor(i.tileWidth*s.scaleX),a=Math.floor(i.tileHeight*s.scaleY),h=t.hexSideLength,l=(a-h)/2+h;return{left:n(e.worldView.x-s.x,o,0,!0)-s.cullPaddingX,right:r(e.worldView.right-s.x,o,0,!0)+s.cullPaddingX,top:n(e.worldView.y-s.y,l,0,!0)-s.cullPaddingY,bottom:r(e.worldView.bottom-s.y,l,0,!0)+s.cullPaddingY}}},function(t,e,i){var r=i(541);t.exports=function(t,e,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var s,o,a,h=t.tilemapLayer,l=t.data,u=t.width,c=t.height,d=u,f=c;if(!h.skipCull)if(0===n){for(o=0;o<f;o++)for(s=0;l[o]&&s<d;s++)if(r(s,o,t,e)){if(!(a=l[o][s])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(1===n){for(o=0;o<f;o++)for(s=d;l[o]&&s>=0;s--)if(r(s,o,t,e)){if(!(a=l[o][s])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(2===n){for(o=f;o>=0;o--)for(s=0;l[o]&&s<d;s++)if(r(s,o,t,e)){if(!(a=l[o][s])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}}else if(3===n)for(o=f;o>=0;o--)for(s=d;l[o]&&s>=0;s--)if(r(s,o,t,e)){if(!(a=l[o][s])||-1===a.index||!a.visible||0===a.alpha)continue;i.push(a)}return h.tilesDrawn=i.length,h.tilesTotal=u*c,i}},function(t,e,i){var r=i(549),n=i(159);t.exports=function(t,e,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var o=t.tilemapLayer;if(!o.skipCull&&1===o.scrollFactorX&&1===o.scrollFactorY){var a=r(t,e);n(t,a,s,i)}return i}},function(t,e,i){var r=i(139),n=i(76);t.exports=function(t,e){var i=t.tilemapLayer.tilemap,s=t.tilemapLayer,o=Math.floor(i.tileWidth*s.scaleX),a=Math.floor(i.tileHeight*s.scaleY);return{left:n(e.worldView.x-s.x,o,0,!0)-s.cullPaddingX,right:r(e.worldView.right-s.x,o,0,!0)+s.cullPaddingX,top:n(e.worldView.y-s.y,a/2,0,!0)-s.cullPaddingY,bottom:r(e.worldView.bottom-s.y,a/2,0,!0)+s.cullPaddingY}}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s){i||(i=new r);var o=s.baseTileWidth,a=s.baseTileHeight,h=s.tilemapLayer,l=0,u=0;h&&(n||(n=h.scene.cameras.main),l=h.x+n.scrollX*(1-h.scrollFactorX),o*=h.scaleX,u=h.y+n.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var c=s.hexSideLength,d=l+t*o+e%2*(o/2),f=u+e*((a-c)/2+c);return i.set(d,f)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s){i||(i=new r);var o=s.baseTileWidth,a=s.baseTileHeight,h=s.tilemapLayer,l=0,u=0;h&&(n||(n=h.scene.cameras.main),l=h.x+n.scrollX*(1-h.scrollFactorX),o*=h.scaleX,u=h.y+n.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var c=l+o/2*(t-e),d=u+(t+e)*(a/2);return i.set(c,d)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s){i||(i=new r);var o=s.baseTileWidth,a=s.baseTileHeight,h=s.tilemapLayer,l=0,u=0;h&&(n||(n=h.scene.cameras.main),l=h.x+n.scrollX*(1-h.scrollFactorX),o*=h.scaleX,u=h.y+n.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var c=l+t*o+e%2*(o/2),d=u+e*(a/2);return i.set(c,d)}},function(t,e,i){var r=i(253),n=i(254),s=i(3);t.exports=function(t,e,i,o,a){return i||(i=new s(0,0)),i.x=r(t,o,a),i.y=n(e,o,a),i}},function(t,e){t.exports=function(t,e,i){var r=i.baseTileHeight,n=i.tilemapLayer,s=0;n&&(void 0===e&&(e=n.scene.cameras.main),s=n.y+e.scrollY*(1-n.scrollFactorY),r*=n.scaleY);var o=n.tilemap.hexSideLength;return s+t*((r-o)/2+o)}},function(t,e){t.exports=function(t,e,i){var r=i.baseTileHeight,n=i.tilemapLayer,s=0;return n&&(void 0===e&&(e=n.scene.cameras.main),s=n.y+e.scrollY*(1-n.scrollFactorY),r*=n.scaleY),s+t*(r/2)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s,o){n||(n=new r);var a=o.baseTileWidth,h=o.baseTileHeight,l=o.tilemapLayer;l&&(s||(s=l.scene.cameras.main),e-=l.y+s.scrollY*(1-l.scrollFactorY),h*=l.scaleY,t-=l.x+s.scrollX*(1-l.scrollFactorX),a*=l.scaleX);var u=o.hexSideLength,c=(h-u)/2+u,d=i?Math.floor(e/c):e/c,f=i?Math.floor((t-d%2*.5*a)/a):(t-d%2*.5*a)/a;return n.set(f,d)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s,o){n||(n=new r);var a=o.baseTileWidth,h=o.baseTileHeight,l=o.tilemapLayer;l&&(s||(s=l.scene.cameras.main),e-=l.y+s.scrollY*(1-l.scrollFactorY),h*=l.scaleY,t-=l.x+s.scrollX*(1-l.scrollFactorX),a*=l.scaleX);var u=i?Math.floor((t/(a/2)+e/(h/2))/2):(t/(a/2)+e/(h/2))/2,c=i?Math.floor((e/(h/2)-t/(a/2))/2):(e/(h/2)-t/(a/2))/2;return n.set(u,c)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s,o){n||(n=new r);var a=o.baseTileWidth,h=o.baseTileHeight,l=o.tilemapLayer;l&&(s||(s=l.scene.cameras.main),e-=l.y+s.scrollY*(1-l.scrollFactorY),h*=l.scaleY,t-=l.x+s.scrollX*(1-l.scrollFactorX),a*=l.scaleX);var u=i?Math.floor(e/(h/2)):e/(h/2),c=i?Math.floor((t+u%2*.5*a)/a):(t+u%2*.5*a)/a;return n.set(c,u)}},function(t,e,i){var r=i(255),n=i(256),s=i(3);t.exports=function(t,e,i,o,a,h){return void 0===i&&(i=!0),o||(o=new s(0,0)),o.x=r(t,i,a,h),o.y=n(e,i,a,h),o}},function(t,e){t.exports=function(t,e,i,r){var n=r.baseTileHeight,s=r.tilemapLayer;s&&(i||(i=s.scene.cameras.main),t-=s.y+i.scrollY*(1-s.scrollFactorY),n*=s.scaleY);var o=r.hexSideLength,a=(n-o)/2+o;return e?Math.floor(t/a):t/a}},function(t,e){t.exports=function(t,e,i,r){var n=r.baseTileHeight,s=r.tilemapLayer;return s&&(i||(i=s.scene.cameras.main),t-=s.y+i.scrollY*(1-s.scrollFactorY),n*=s.scaleY),e?Math.floor(t/(n/2)):t/(n/2)}},function(t,e,i){var r=i(119);t.exports=function(t,e,i){if(r(t,e,i)){var n=i.data[e][t];return null!==n&&n.index>-1}return!1}},function(t,e,i){var r=i(85),n=i(119),s=i(252);t.exports=function(t,e,i,o,a){if(void 0===i&&(i=!0),void 0===o&&(o=!0),!n(t,e,a))return null;var h=a.data[e][t];return h?(a.data[e][t]=i?null:new r(a,-1,t,e,a.tileWidth,a.tileHeight),o&&h&&h.collides&&s(t,e,a),h):null}},function(t,e,i){var r=i(40),n=i(259),s=i(565),o=i(566),a=i(577);t.exports=function(t,e,i,h,l,u){var c;switch(e){case r.ARRAY_2D:c=n(t,i,h,l,u);break;case r.CSV:c=s(t,i,h,l,u);break;case r.TILED_JSON:c=o(t,i,u);break;case r.WELTMEISTER:c=a(t,i,u);break;default:console.warn("Unrecognized tilemap data format: "+e),c=null}return c}},function(t,e,i){var r=i(40),n=i(259);t.exports=function(t,e,i,s,o){var a=e.trim().split("\n").map((function(t){return t.split(",")})),h=n(t,a,i,s,o);return h.format=r.CSV,h}},function(t,e,i){var r=i(567),n=i(568),s=i(29),o=i(40),a=i(258),h=i(121),l=i(569),u=i(570),c=i(573),d=i(575);t.exports=function(t,e,i){var f=new h({width:e.width,height:e.height,name:t,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:a(e.orientation),format:o.TILED_JSON,version:e.version,properties:e.properties,renderOrder:e.renderorder,infinite:e.infinite});f.orientation===s.HEXAGONAL&&(f.hexSideLength=e.hexsidelength),f.layers=c(e,i),f.images=l(e);var p=d(e);return f.tilesets=p.tilesets,f.imageCollections=p.imageCollections,f.objects=u(e),f.tiles=n(f),r(f),f}},function(t,e,i){var r=i(17);t.exports=function(t){for(var e,i,n,s,o,a=0;a<t.layers.length;a++){e=t.layers[a],s=null;for(var h=0;h<e.data.length;h++){o=e.data[h];for(var l=0;l<o.length;l++)null===(i=o[l])||i.index<0||(n=t.tiles[i.index][2],s=t.tilesets[n],i.width=s.tileWidth,i.height=s.tileHeight,s.tileProperties&&s.tileProperties[i.index-s.firstgid]&&(i.properties=r(i.properties,s.tileProperties[i.index-s.firstgid])))}}}},function(t,e,i){var r=i(122);t.exports=function(t){var e,i,n=[];for(e=0;e<t.imageCollections.length;e++)for(var s=t.imageCollections[e],o=s.images,a=0;a<o.length;a++){var h=o[a];(i=new r(h.image,h.gid,s.imageWidth,s.imageHeight,0,0)).updateTileData(s.imageWidth,s.imageHeight),t.tilesets.push(i)}for(e=0;e<t.tilesets.length;e++)for(var l=(i=t.tilesets[e]).tileMargin,u=i.tileMargin,c=0,d=0,f=0,p=i.firstgid;p<i.firstgid+i.total&&(n[p]=[l,u,e],l+=i.tileWidth+i.tileSpacing,++c!==i.total)&&(++d!==i.columns||(l=i.tileMargin,u+=i.tileHeight+i.tileSpacing,d=0,++f!==i.rows));p++);return n}},function(t,e,i){var r=i(2),n=i(161);t.exports=function(t){for(var e=[],i=[],s=n(t);s.i<s.layers.length||i.length>0;)if(s.i>=s.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=i.pop()}else{var o=s.layers[s.i];if(s.i++,"imagelayer"===o.type){var a=r(o,"offsetx",0)+r(o,"startx",0),h=r(o,"offsety",0)+r(o,"starty",0);e.push({name:s.name+o.name,image:o.image,x:s.x+a+o.x,y:s.y+h+o.y,alpha:s.opacity*o.opacity,visible:s.visible&&o.visible,properties:r(o,"properties",{})})}else if("group"===o.type){var l=n(t,o,s);i.push(s),s=l}}return e}},function(t,e,i){var r=i(2),n=i(260),s=i(572),o=i(161);t.exports=function(t){for(var e=[],i=[],a=o(t);a.i<a.layers.length||i.length>0;)if(a.i>=a.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=i.pop()}else{var h=a.layers[a.i];if(a.i++,h.opacity*=a.opacity,h.visible=a.visible&&h.visible,"objectgroup"===h.type){h.name=a.name+h.name;for(var l=a.x+r(h,"startx",0)+r(h,"offsetx",0),u=a.y+r(h,"starty",0)+r(h,"offsety",0),c=[],d=0;d<h.objects.length;d++){var f=n(h.objects[d],l,u);c.push(f)}var p=new s(h);p.objects=c,e.push(p)}else if("group"===h.type){var g=o(t,h,a);i.push(a),a=g}}return e}},function(t,e,i){var r=i(126);t.exports=function(t,e){for(var i={},n=0;n<e.length;n++){var s=e[n];r(t,s)&&(i[s]=t[s])}return i}},function(t,e,i){var r=i(0),n=i(2),s=new r({initialize:function(t){void 0===t&&(t={}),this.name=n(t,"name","object layer"),this.opacity=n(t,"opacity",1),this.properties=n(t,"properties",{}),this.propertyTypes=n(t,"propertytypes",{}),this.type=n(t,"type","objectgroup"),this.visible=n(t,"visible",!0),this.objects=n(t,"objects",[])}});t.exports=s},function(t,e,i){var r=i(574),n=i(29),s=i(161),o=i(258),a=i(2),h=i(120),l=i(261),u=i(85);t.exports=function(t,e){for(var i=a(t,"infinite",!1),c=[],d=[],f=s(t);f.i<f.layers.length||d.length>0;)if(f.i>=f.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=d.pop()}else{var p=f.layers[f.i];if(f.i++,"tilelayer"===p.type)if(p.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+p.name+"'");else{if(p.encoding&&"base64"===p.encoding){if(p.chunks)for(var g=0;g<p.chunks.length;g++)p.chunks[g].data=r(p.chunks[g].data);p.data&&(p.data=r(p.data)),delete p.encoding}var v,m,y,x,b=[],w=0;if(i){var T=a(p,"startx",0)+p.x,S=a(p,"starty",0)+p.y;(v=new h({name:f.name+p.name,x:f.x+a(p,"offsetx",0)+T*t.tilewidth,y:f.y+a(p,"offsety",0)+S*t.tileheight,width:p.width,height:p.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:a(p,"properties",[]),orientation:o(t.orientation)})).orientation===n.HEXAGONAL&&(v.hexSideLength=t.hexsidelength);for(var E=0;E<p.height;E++){b.push([null]);for(var C=0;C<p.width;C++)b[E][C]=null}for(E=0,D=p.chunks.length;E<D;E++)for(var _=p.chunks[E],A=_.x-T,M=_.y-S,P=0,k=0,O=_.data.length;k<O;k++){var R=w+A,L=P+M;(m=l(_.data[k])).gid>0?((y=new u(v,m.gid,R,L,t.tilewidth,t.tileheight)).rotation=m.rotation,y.flipX=m.flipped,b[L][R]=y):(x=e?null:new u(v,-1,R,L,t.tilewidth,t.tileheight),b[L][R]=x),++w===_.width&&(P++,w=0)}}else{(v=new h({name:f.name+p.name,x:f.x+a(p,"offsetx",0)+p.x,y:f.y+a(p,"offsety",0)+p.y,width:p.width,height:p.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:f.opacity*p.opacity,visible:f.visible&&p.visible,properties:a(p,"properties",[]),orientation:o(t.orientation)})).orientation===n.HEXAGONAL&&(v.hexSideLength=t.hexsidelength);for(var I=[],F=0,D=p.data.length;F<D;F++)(m=l(p.data[F])).gid>0?((y=new u(v,m.gid,w,b.length,t.tilewidth,t.tileheight)).rotation=m.rotation,y.flipX=m.flipped,I.push(y)):(x=e?null:new u(v,-1,w,b.length,t.tilewidth,t.tileheight),I.push(x)),++w===p.width&&(b.push(I),w=0,I=[])}v.data=b,c.push(v)}else if("group"===p.type){var B=s(t,p,f);d.push(f),f=B}}return c}},function(t,e){t.exports=function(t){for(var e=window.atob(t),i=e.length,r=new Array(i/4),n=0;n<i;n+=4)r[n/4]=(e.charCodeAt(n)|e.charCodeAt(n+1)<<8|e.charCodeAt(n+2)<<16|e.charCodeAt(n+3)<<24)>>>0;return r}},function(t,e,i){var r=i(122),n=i(576),s=i(260),o=i(1453);t.exports=function(t){for(var e,i=[],a=[],h=null,l=0;l<t.tilesets.length;l++){var u=t.tilesets[l];if(u.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(u.image){var c=new r(u.name,u.firstgid,u.tilewidth,u.tileheight,u.margin,u.spacing);if(t.version>1){var d=void 0,f=void 0;if(Array.isArray(u.tiles)){d=d||{},f=f||{};for(var p=0;p<u.tiles.length;p++){var g=u.tiles[p];if(g.properties){var v={};g.properties.forEach((function(t){v[t.name]=t.value})),f[g.id]=v}if(g.objectgroup&&((d[g.id]||(d[g.id]={})).objectgroup=g.objectgroup,g.objectgroup.objects)){var m=g.objectgroup.objects.map((function(t){return s(t)}));d[g.id].objectgroup.objects=m}g.animation&&((d[g.id]||(d[g.id]={})).animation=g.animation),g.type&&((d[g.id]||(d[g.id]={})).type=g.type)}}Array.isArray(u.wangsets)&&(d=d||{},f=f||{},o(u.wangsets,d)),d&&(c.tileData=d,c.tileProperties=f)}else if(u.tileproperties&&(c.tileProperties=u.tileproperties),u.tiles)for(e in c.tileData=u.tiles,c.tileData){var y=c.tileData[e].objectgroup;if(y&&y.objects){var x=y.objects.map((function(t){return s(t)}));c.tileData[e].objectgroup.objects=x}}c.updateTileData(u.imagewidth,u.imageheight),i.push(c)}else{var b=new n(u.name,u.firstgid,u.tilewidth,u.tileheight,u.margin,u.spacing,u.properties),w=0;for(p=0;p<u.tiles.length;p++){var T=(g=u.tiles[p]).image,S=parseInt(g.id,10),E=u.firstgid+S;b.addImage(E,T),w=Math.max(S,w)}b.maxId=w,a.push(b)}h&&(h.lastgid=u.firstgid-1),h=u}return{tilesets:i,imageCollections:a}}},function(t,e,i){var r=new(i(0))({initialize:function(t,e,i,r,n,s,o){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===n&&(n=0),void 0===s&&(s=0),this.name=t,this.firstgid=0|e,this.imageWidth=0|i,this.imageHeight=0|r,this.imageMargin=0|n,this.imageSpacing=0|s,this.properties=o||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,e){return this.images.push({gid:t,image:e}),this.total++,this}});t.exports=r},function(t,e,i){var r=i(40),n=i(121),s=i(578),o=i(579);t.exports=function(t,e,i){if(0===e.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var a=0,h=0,l=0;l<e.layer.length;l++)e.layer[l].width>a&&(a=e.layer[l].width),e.layer[l].height>h&&(h=e.layer[l].height);var u=new n({width:a,height:h,name:t,tileWidth:e.layer[0].tilesize,tileHeight:e.layer[0].tilesize,format:r.WELTMEISTER});return u.layers=s(e,i),u.tilesets=o(e),u}},function(t,e,i){var r=i(120),n=i(85);t.exports=function(t,e){for(var i=[],s=0;s<t.layer.length;s++){for(var o=t.layer[s],a=new r({name:o.name,width:o.width,height:o.height,tileWidth:o.tilesize,tileHeight:o.tilesize,visible:1===o.visible}),h=[],l=[],u=0;u<o.data.length;u++){for(var c=0;c<o.data[u].length;c++){var d,f=o.data[u][c]-1;d=f>-1?new n(a,f,c,u,o.tilesize,o.tilesize):e?null:new n(a,-1,c,u,o.tilesize,o.tilesize),h.push(d)}l.push(h),h=[]}a.data=l,i.push(a)}return i}},function(t,e,i){var r=i(122);t.exports=function(t){for(var e=[],i=[],n=0;n<t.layer.length;n++){var s=t.layer[n],o=s.tilesetName;""!==o&&-1===i.indexOf(o)&&(i.push(o),e.push(new r(o,0,s.tilesize,s.tilesize,0,0)))}return e}},function(t,e,i){var r=i(0),n=i(36),s=i(40),o=i(2),a=i(120),h=i(29),l=i(362),u=i(74),c=i(73),d=i(85),f=i(251),p=i(581),g=i(122),v=new r({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.renderOrder=e.renderOrder,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0,this.hexSideLength=e.hexSideLength;var i=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(i),WorldToTileX:f.GetWorldToTileXFunction(i),WorldToTileY:f.GetWorldToTileYFunction(i),TileToWorldXY:f.GetTileToWorldXYFunction(i),TileToWorldX:f.GetTileToWorldXFunction(i),TileToWorldY:f.GetTileToWorldYFunction(i)}},createBlankDynamicLayer:function(t,e,i,r,n,s,o,a){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,e,i,r,n,s,o,a)},createDynamicLayer:function(t,e,i,r){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,e,i,r)},createStaticLayer:function(t,e,i,r){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,e,i,r)},setRenderOrder:function(t){var e=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=e[t]),e.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function(t,e,i,r,n,o,a){if(void 0===t)return null;if(null==e&&(e=t),!this.scene.sys.textures.exists(e))return console.warn("Invalid Tileset Image: "+e),null;var h=this.scene.sys.textures.get(e),l=this.getTilesetIndex(t);if(null===l&&this.format===s.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var u=this.tilesets[l];return u?(u.setTileSize(i,r),u.setSpacing(n,o),u.setImage(h),u):(void 0===i&&(i=this.tileWidth),void 0===r&&(r=this.tileHeight),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),(u=new g(t,a,i,r,n,o)).setImage(h),this.tilesets.push(u),u)},copy:function(t,e,i,r,n,s,o,a){return null!==(a=this.getLayer(a))?(f.Copy(t,e,i,r,n,s,o,a),this):null},createBlankLayer:function(t,e,i,r,n,s,o,h){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=this.width),void 0===s&&(s=this.height),void 0===o&&(o=this.tileWidth),void 0===h&&(h=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var l,u=new a({name:t,tileWidth:o,tileHeight:h,width:n,height:s,orientation:this.orientation}),c=0;c<s;c++){l=[];for(var f=0;f<n;f++)l.push(new d(u,-1,f,c,o,h,this.tileWidth,this.tileHeight));u.data.push(l)}this.layers.push(u),this.currentLayerIndex=this.layers.length-1;var g=new p(this.scene,this,this.currentLayerIndex,e,i,r);return g.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(g),g},createLayer:function(t,e,i,r){var n=this.getLayerIndex(t);if(null===n)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var s=this.layers[n];if(s.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=n,void 0===i&&(i=s.x),void 0===r&&(r=s.y);var o=new p(this.scene,this,n,e,i,r);return o.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(o),o},createFromObjects:function(t,e){var i=[],r=this.getObjectLayer(t);if(!r)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),i;Array.isArray(e)||(e=[e]);for(var s=r.objects,a=0;a<e.length;a++){for(var h,u=e[a],d=o(u,"id",null),f=o(u,"gid",null),p=o(u,"name",null),g=[],v=0;v<s.length;v++)h=s[v],(null===d&&null===f&&null===p||null!==d&&h.id===d||null!==f&&h.gid===f||null!==p&&h.name===p)&&g.push(h);for(var m=o(u,"classType",c),y=o(u,"scene",this.scene),x=o(u,"container",null),b=o(u,"key",null),w=o(u,"frame",null),T=0;T<g.length;T++){h=g[T];var S=new m(y);S.setName(h.name),S.setPosition(h.x,h.y),S.setTexture(b,w),h.width&&(S.displayWidth=h.width),h.height&&(S.displayHeight=h.height);var E={x:S.originX*h.width,y:(S.originY-1)*h.height};if(h.rotation){var C=n(h.rotation);l(E,C),S.rotation=C}if(S.x+=E.x,S.y+=E.y,void 0===h.flippedHorizontal&&void 0===h.flippedVertical||S.setFlip(h.flippedHorizontal,h.flippedVertical),h.visible||(S.visible=!1),Array.isArray(h.properties))h.properties.forEach((function(t){var e=t.name;void 0!==S[e]?S[e]=t.value:S.setData(e,t.value)}));else for(var _ in h.properties)void 0!==S[_]?S[_]=h.properties[_]:S.setData(_,h.properties[_]);x?x.add(S):y.add.existing(S),i.push(S)}}return i},createFromTiles:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:f.CreateFromTiles(t,e,i,r,n,s)},fill:function(t,e,i,r,n,s,o){return void 0===s&&(s=!0),null===(o=this.getLayer(o))?null:(f.Fill(t,e,i,r,n,s,o),this)},filterObjects:function(t,e,i){if("string"==typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.filter(e,i)},filterTiles:function(t,e,i,r,n,s,o,a){return null===(a=this.getLayer(a))?null:f.FilterTiles(t,e,i,r,n,s,o,a)},findByIndex:function(t,e,i,r){return null===(r=this.getLayer(r))?null:f.FindByIndex(t,e,i,r)},findObject:function(t,e,i){if("string"==typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.find(e,i)||null},findTile:function(t,e,i,r,n,s,o,a){return null===(a=this.getLayer(a))?null:f.FindTile(t,e,i,r,n,s,o,a)},forEachTile:function(t,e,i,r,n,s,o,a){return null===(a=this.getLayer(a))?null:(f.ForEachTile(t,e,i,r,n,s,o,a),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return i;return null},getLayer:function(t){var e=this.getLayerIndex(t);return null!==e?this.layers[e]:null},getObjectLayer:function(t){var e=this.getIndex(this.objects,t);return null!==e?this.objects[e]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof p?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,i,r){return null===(r=this.getLayer(r))?null:f.GetTileAt(t,e,i,r)},getTileAtWorldXY:function(t,e,i,r,n){return null===(n=this.getLayer(n))?null:f.GetTileAtWorldXY(t,e,i,r,n)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:f.GetTilesWithin(t,e,i,r,n,s)},getTilesWithinShape:function(t,e,i,r){return null===(r=this.getLayer(r))?null:f.GetTilesWithinShape(t,e,i,r)},getTilesWithinWorldXY:function(t,e,i,r,n,s,o){return null===(o=this.getLayer(o))?null:f.GetTilesWithinWorldXY(t,e,i,r,n,s,o)},getTileset:function(t){var e=this.getIndex(this.tilesets,t);return null!==e?this.tilesets[e]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,i){return null===(i=this.getLayer(i))?null:f.HasTileAt(t,e,i)},hasTileAtWorldXY:function(t,e,i,r){return null===(r=this.getLayer(r))?null:f.HasTileAtWorldXY(t,e,i,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,i,r,n){return void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:f.PutTileAt(t,e,i,r,n)},putTileAtWorldXY:function(t,e,i,r,n,s){return void 0===r&&(r=!0),null===(s=this.getLayer(s))?null:f.PutTileAtWorldXY(t,e,i,r,n,s)},putTilesAt:function(t,e,i,r,n){return void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:(f.PutTilesAt(t,e,i,r,n),this)},randomize:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:(f.Randomize(t,e,i,r,n,s),this)},calculateFacesAt:function(t,e,i){return null===(i=this.getLayer(i))?null:(f.CalculateFacesAt(t,e,i),this)},calculateFacesWithin:function(t,e,i,r,n){return null===(n=this.getLayer(n))?null:(f.CalculateFacesWithin(t,e,i,r,n),this)},removeLayer:function(t){var e=this.getLayerIndex(t);if(null!==e){u(this.layers,e);for(var i=e;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===e&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(t){var e=this.getLayerIndex(t);return null!==e?((t=this.layers[e]).destroy(),u(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].tilemapLayer&&t[e].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!0);var r=[];Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var s=t[n];r.push(this.removeTileAt(s.x,s.y,!0,i,s.tilemapLayer)),e>-1&&this.putTileAt(e,s.x,s.y,i,s.tilemapLayer)}return r},removeTileAt:function(t,e,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:f.RemoveTileAt(t,e,i,r,n)},removeTileAtWorldXY:function(t,e,i,r,n,s){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(s=this.getLayer(s))?null:f.RemoveTileAtWorldXY(t,e,i,r,n,s)},renderDebug:function(t,e,i){return null===(i=this.getLayer(i))?null:(this.orientation===h.ORTHOGONAL&&f.RenderDebug(t,e,i),this)},renderDebugFull:function(t,e){for(var i=this.layers,r=0;r<i.length;r++)f.RenderDebug(t,e,i[r]);return this},replaceByIndex:function(t,e,i,r,n,s,o){return null===(o=this.getLayer(o))?null:(f.ReplaceByIndex(t,e,i,r,n,s,o),this)},setCollision:function(t,e,i,r,n){return void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:(f.SetCollision(t,e,i,r,n),this)},setCollisionBetween:function(t,e,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:(f.SetCollisionBetween(t,e,i,r,n),this)},setCollisionByProperty:function(t,e,i,r){return void 0===e&&(e=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(f.SetCollisionByProperty(t,e,i,r),this)},setCollisionByExclusion:function(t,e,i,r){return void 0===e&&(e=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(f.SetCollisionByExclusion(t,e,i,r),this)},setCollisionFromCollisionGroup:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),null===(i=this.getLayer(i))?null:(f.SetCollisionFromCollisionGroup(t,e,i),this)},setTileIndexCallback:function(t,e,i,r){return null===(r=this.getLayer(r))?null:(f.SetTileIndexCallback(t,e,i,r),this)},setTileLocationCallback:function(t,e,i,r,n,s,o){return null===(o=this.getLayer(o))?null:(f.SetTileLocationCallback(t,e,i,r,n,s,o),this)},setLayer:function(t){var e=this.getLayerIndex(t);return null!==e&&(this.currentLayerIndex=e),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=t,this.layers[i].baseTileHeight=e;for(var r=this.layers[i].data,n=this.layers[i].width,s=this.layers[i].height,o=0;o<s;o++)for(var a=0;a<n;a++){var h=r[o][a];null!==h&&h.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=t,i.tileHeight=e;for(var r=i.data,n=i.width,s=i.height,o=0;o<s;o++)for(var a=0;a<n;a++){var h=r[o][a];null!==h&&h.setSize(t,e)}return this},shuffle:function(t,e,i,r,n){return null===(n=this.getLayer(n))?null:(f.Shuffle(t,e,i,r,n),this)},swapByIndex:function(t,e,i,r,n,s,o){return null===(o=this.getLayer(o))?null:(f.SwapByIndex(t,e,i,r,n,s,o),this)},tileToWorldX:function(t,e,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldX(t,e,i)},tileToWorldY:function(t,e,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldY(t,e,i)},tileToWorldXY:function(t,e,i,r,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldXY(t,e,i,r,n)},weightedRandomize:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:(f.WeightedRandomize(e,i,r,n,t,s),this)},worldToTileX:function(t,e,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileX(t,e,i,r)},worldToTileY:function(t,e,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileY(t,e,i,r)},worldToTileXY:function(t,e,i,r,n,s){return null===(s=this.getLayer(s))?null:this._convert.WorldToTileXY(t,e,i,r,n,s)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=v},function(t,e,i){var r=i(0),n=i(11),s=i(15),o=i(251),a=i(1456),h=new r({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Origin,n.Pipeline,n.Transform,n.Visible,n.ScrollFactor,a],initialize:function(t,e,i,r,n,a){s.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=i,this.layer=e.layers[i],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(n,a),this.setOrigin(),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(t){var e=[],i=[],r=this.tilemap;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var s=t[n];if("string"==typeof s&&(s=r.getTileset(s)),s){i.push(s);for(var o=s.firstgid,a=0;a<s.total;a++)e[o+a]=s}}this.gidMap=e,this.tileset=i},setRenderOrder:function(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,e){return o.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,i,r){return o.CalculateFacesWithin(t,e,i,r,this.layer),this},createFromTiles:function(t,e,i,r,n){return o.CreateFromTiles(t,e,i,r,n,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,e,i,r,n,s,a){return o.Copy(t,e,i,r,n,s,a,this.layer),this},fill:function(t,e,i,r,n,s){return o.Fill(t,e,i,r,n,s,this.layer),this},filterTiles:function(t,e,i,r,n,s,a){return o.FilterTiles(t,e,i,r,n,s,a,this.layer)},findByIndex:function(t,e,i){return o.FindByIndex(t,e,i,this.layer)},findTile:function(t,e,i,r,n,s,a){return o.FindTile(t,e,i,r,n,s,a,this.layer)},forEachTile:function(t,e,i,r,n,s,a){return o.ForEachTile(t,e,i,r,n,s,a,this.layer),this},getTileAt:function(t,e,i){return o.GetTileAt(t,e,i,this.layer)},getTileAtWorldXY:function(t,e,i,r){return o.GetTileAtWorldXY(t,e,i,r,this.layer)},getTilesWithin:function(t,e,i,r,n){return o.GetTilesWithin(t,e,i,r,n,this.layer)},getTilesWithinShape:function(t,e,i){return o.GetTilesWithinShape(t,e,i,this.layer)},getTilesWithinWorldXY:function(t,e,i,r,n,s){return o.GetTilesWithinWorldXY(t,e,i,r,n,s,this.layer)},hasTileAt:function(t,e){return o.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,i){return o.HasTileAtWorldXY(t,e,i,this.layer)},putTileAt:function(t,e,i,r){return o.PutTileAt(t,e,i,r,this.layer)},putTileAtWorldXY:function(t,e,i,r,n){return o.PutTileAtWorldXY(t,e,i,r,n,this.layer)},putTilesAt:function(t,e,i,r){return o.PutTilesAt(t,e,i,r,this.layer),this},randomize:function(t,e,i,r,n){return o.Randomize(t,e,i,r,n,this.layer),this},removeTileAt:function(t,e,i,r){return o.RemoveTileAt(t,e,i,r,this.layer)},removeTileAtWorldXY:function(t,e,i,r,n){return o.RemoveTileAtWorldXY(t,e,i,r,n,this.layer)},renderDebug:function(t,e){return o.RenderDebug(t,e,this.layer),this},replaceByIndex:function(t,e,i,r,n,s){return o.ReplaceByIndex(t,e,i,r,n,s,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},setCollision:function(t,e,i,r){return o.SetCollision(t,e,i,this.layer,r),this},setCollisionBetween:function(t,e,i,r){return o.SetCollisionBetween(t,e,i,r,this.layer),this},setCollisionByProperty:function(t,e,i){return o.SetCollisionByProperty(t,e,i,this.layer),this},setCollisionByExclusion:function(t,e,i){return o.SetCollisionByExclusion(t,e,i,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return o.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileIndexCallback:function(t,e,i){return o.SetTileIndexCallback(t,e,i,this.layer),this},setTileLocationCallback:function(t,e,i,r,n,s){return o.SetTileLocationCallback(t,e,i,r,n,s,this.layer),this},shuffle:function(t,e,i,r){return o.Shuffle(t,e,i,r,this.layer),this},swapByIndex:function(t,e,i,r,n,s){return o.SwapByIndex(t,e,i,r,n,s,this.layer),this},tileToWorldX:function(t,e){return this.tilemap.tileToWorldX(t,e,this)},tileToWorldY:function(t,e){return this.tilemap.tileToWorldY(t,e,this)},tileToWorldXY:function(t,e,i,r){return this.tilemap.tileToWorldXY(t,e,i,r,this)},weightedRandomize:function(t,e,i,r,n){return o.WeightedRandomize(e,i,r,n,t,this.layer),this},worldToTileX:function(t,e,i){return this.tilemap.worldToTileX(t,e,i,this)},worldToTileY:function(t,e,i){return this.tilemap.worldToTileY(t,e,i,this)},worldToTileXY:function(t,e,i,r,n){return this.tilemap.worldToTileXY(t,e,i,r,n,this)},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this))}});t.exports=h},function(t,e,i){var r=i(0),n=i(2),s=new r({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=n(t,"delay",0),this.repeat=n(t,"repeat",0),this.loop=n(t,"loop",!1),this.callback=n(t,"callback",void 0),this.callbackScope=n(t,"callbackScope",this.callback),this.args=n(t,"args",[]),this.timeScale=n(t,"timeScale",1),this.startAt=n(t,"startAt",0),this.paused=n(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=s},function(t,e,i){var r=i(1465);t.exports=function(t){var e,i=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substr(0,1)&&i.push({key:e,value:t.props[e]});else for(e in t)-1===r.indexOf(e)&&"_"!==e.substr(0,1)&&i.push({key:e,value:t[e]});return i}},function(t,e,i){var r=i(6);t.exports=function(t){var e=r(t,"tweens",null);return null===e?[]:("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e]),e)}},function(t,e,i){var r=i(265),n=i(13),s=i(99),o=i(80),a=i(162),h=i(6),l=i(264),u=i(266),c=i(268);t.exports=function(t,e,i){void 0===i&&(i=r);var d=h(e,"from",0),f=h(e,"to",1),p=[{value:d}],g=a(e,"delay",i.delay),v=a(e,"duration",i.duration),m=h(e,"easeParams",i.easeParams),y=o(h(e,"ease",i.ease),m),x=a(e,"hold",i.hold),b=a(e,"repeat",i.repeat),w=a(e,"repeatDelay",i.repeatDelay),T=s(e,"yoyo",i.yoyo),S=[],E=l("value",f),C=c(p[0],0,"value",E.getEnd,E.getStart,E.getActive,y,g,v,T,x,b,w,!1,!1);C.start=d,C.current=d,C.to=f,S.push(C);var _=new u(t,S,p);_.offset=n(e,"offset",null),_.completeDelay=n(e,"completeDelay",0),_.loop=Math.round(n(e,"loop",0)),_.loopDelay=Math.round(n(e,"loopDelay",0)),_.paused=s(e,"paused",!1),_.useFrames=s(e,"useFrames",!1);for(var A=h(e,"callbackScope",_),M=[_,null],P=u.TYPES,k=0;k<P.length;k++){var O=P[k],R=h(e,O,!1);if(R){var L=h(e,O+"Scope",A),I=h(e,O+"Params",[]);_.setCallback(O,R,M.concat(I),L)}}return _}},function(t,e,i){var r=i(80),n=i(6),s=i(14);t.exports=function(t,e){var i;void 0===e&&(e={});var o=n(e,"start",0),a=n(e,"ease",null),h=n(e,"grid",null),l=n(e,"from",0),u="first"===l,c="center"===l,d="last"===l,f="number"==typeof l,p=Array.isArray(t),g=p?parseFloat(t[0]):parseFloat(t),v=p?parseFloat(t[1]):0,m=Math.max(g,v);if(p&&(o+=g),h){var y=h[0],x=h[1],b=0,w=0,T=0,S=0,E=[];d?(b=y-1,w=x-1):f?(b=l%y,w=Math.floor(l/y)):c&&(b=(y-1)/2,w=(x-1)/2);for(var C=s.MIN_SAFE_INTEGER,_=0;_<x;_++){E[_]=[];for(var A=0;A<y;A++){T=b-A,S=w-_;var M=Math.sqrt(T*T+S*S);M>C&&(C=M),E[_][A]=M}}}var P=a?r(a):null;return i=h?function(t,e,i,r){var n,s=0,a=r%y,h=Math.floor(r/y);if(a>=0&&a<y&&h>=0&&h<x&&(s=E[h][a]),p){var l=v-g;n=P?s/C*l*P(s/C):s/C*l}else n=P?s*g*P(s/C):s*g;return n+o}:function(t,e,i,r,n){var s,a,h;return n--,u?s=r:c?s=Math.abs(n/2-r):d?s=n-r:f&&(s=Math.abs(l-r)),p?(h=c?(v-g)/n*(2*s):(v-g)/n*s,a=P?h*P(s/n):h):a=P?n*m*P(s/n):s*g,a+o},i}},function(t,e,i){var r=i(77),n=i(265),s=i(13),o=i(99),a=i(80),h=i(162),l=i(263),u=i(584),c=i(6),d=i(588),f=i(163);t.exports=function(t,e){var i=new d(t);i.completeDelay=s(e,"completeDelay",0),i.loop=Math.round(s(e,"loop",0)),i.loopDelay=Math.round(s(e,"loopDelay",0)),i.paused=o(e,"paused",!1),i.useFrames=o(e,"useFrames",!1);var p=c(e,"callbackScope",i),g=[i],v=c(e,"onStart",!1);if(v){var m=c(e,"onStartScope",p),y=c(e,"onStartParams",[]);i.setCallback("onStart",v,g.concat(y),m)}var x=c(e,"onUpdate",!1);if(x){var b=c(e,"onUpdateScope",p),w=c(e,"onUpdateParams",[]);i.setCallback("onUpdate",x,g.concat(w),b)}var T=c(e,"onLoop",!1);if(T){var S=c(e,"onLoopScope",p),E=c(e,"onLoopParams",[]);i.setCallback("onLoop",T,g.concat(E),S)}var C=c(e,"onYoyo",!1);if(C){var _=c(e,"onYoyoScope",p),A=c(e,"onYoyoParams",[]);i.setCallback("onYoyo",C,g.concat(null,A),_)}var M=c(e,"onComplete",!1);if(M){var P=c(e,"onCompleteScope",p),k=c(e,"onCompleteParams",[]);i.setCallback("onComplete",M,g.concat(k),P)}var O=u(e);if(0===O.length)return i.paused=!0,i;var R=r(n);R.targets=l(e);var L=s(e,"totalDuration",0);R.duration=L>0?Math.floor(L/O.length):h(e,"duration",R.duration),R.delay=h(e,"delay",R.delay),R.easeParams=c(e,"easeParams",R.easeParams),R.ease=a(c(e,"ease",R.ease),R.easeParams),R.hold=h(e,"hold",R.hold),R.repeat=h(e,"repeat",R.repeat),R.repeatDelay=h(e,"repeatDelay",R.repeatDelay),R.yoyo=o(e,"yoyo",R.yoyo),R.flipX=o(e,"flipX",R.flipX),R.flipY=o(e,"flipY",R.flipY);for(var I=0;I<O.length;I++)i.queue(f(i,O[I],R));return i}},function(t,e,i){var r=i(0),n=i(9),s=i(267),o=i(163),a=i(100),h=new r({Extends:n,initialize:function(t){n.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING_ADD,this._pausedState=a.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,e){this.emit(t,this),e&&e.func.apply(e.scope,e.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},add:function(t){return this.queue(o(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"==typeof t){var e=t[0];if("-"===e||"+"===e)return!0}return!1},getRelativeOffset:function(t,e){var i=t[0],r=parseFloat(t.substr(2)),n=e;switch(i){case"+":n+=r;break;case"-":n-=r}return Math.max(0,n)},calcDuration:function(){for(var t=0,e=0,i=0,r=0;r<this.totalData;r++){var n=this.data[r];n.init(),this.hasOffset(n)?this.isOffsetAbsolute(n.offset)?(n.calculatedOffset=n.offset,0===n.offset&&(i=0)):this.isOffsetRelative(n.offset)&&(n.calculatedOffset=this.getRelativeOffset(n.offset,t)):n.calculatedOffset=i,t=n.totalDuration+n.calculatedOffset,e+=n.totalDuration,i+=n.totalDuration}this.duration=e,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=a.PAUSED,!1)},resetTweens:function(t){for(var e=0;e<this.totalData;e++)this.data[e].play(t)},setCallback:function(t,e,i,r){return-1!==h.TYPES.indexOf(t)&&(this.callbacks[t]={func:e,scope:r,params:i}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==a.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,e){if(this.state!==a.PAUSED){switch(this.useFrames&&(e=1*this.manager.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:for(var i=this.totalData,r=0;r<this.totalData;r++)this.data[r].update(t,e)&&i--;this.dispatchTimelineEvent(s.TIMELINE_UPDATE,this.callbacks.onUpdate),0===i&&this.nextState();break;case a.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop));break;case a.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===a.PENDING_REMOVE}},stop:function(){this.state=a.PENDING_REMOVE},pause:function(){if(this.state!==a.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this.emit(s.TIMELINE_PAUSE,this),this},resume:function(){return this.state===a.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(s.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});h.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=h},function(t,e,i){var r=i(86),n=i(41),s=i(32),o=i(2),a=i(64),h={parseBody:function(t,e,i,r){void 0===r&&(r={});for(var a=o(i,"fixtures",[]),h=[],l=0;l<a.length;l++)for(var u=this.parseFixture(a[l]),c=0;c<u.length;c++)h.push(u[c]);var d=s.clone(i,!0);s.extend(d,r,!0),delete d.fixtures,delete d.type;var f=n.create(d);return n.setParts(f,h),n.setPosition(f,{x:t,y:e}),f},parseFixture:function(t){var e,i=s.extend({},!1,t);if(delete i.circle,delete i.vertices,t.circle){var n=o(t.circle,"x"),a=o(t.circle,"y"),h=o(t.circle,"radius");e=[r.circle(n,a,h,i)]}else t.vertices&&(e=this.parseVertices(t.vertices,i));return e},parseVertices:function(t,e){void 0===e&&(e={});for(var i=[],o=0;o<t.length;o++)a.clockwiseSort(t[o]),i.push(n.create(s.extend({position:a.centre(t[o]),vertices:t[o]},e)));return r.flagCoincidentParts(i)}};t.exports=h},function(t,e,i){var r=i(86),n=i(41),s={parseBody:function(t,e,i,s){var o;void 0===s&&(s={});var a=i.vertices;if(1===a.length)s.vertices=a[0],o=n.create(s),r.flagCoincidentParts(o.parts);else{for(var h=[],l=0;l<a.length;l++){var u=n.create({vertices:a[l]});h.push(u)}r.flagCoincidentParts(h),s.parts=h,o=n.create(s)}return o.label=i.label,n.setPosition(o,{x:t,y:e}),o}};t.exports=s},function(t,e,i){var r={};t.exports=r;var n=i(118),s=i(128),o=i(32),a=i(41),h=i(86);r.stack=function(t,e,i,r,s,o,h){for(var l,u=n.create({label:"Stack"}),c=t,d=e,f=0,p=0;p<r;p++){for(var g=0,v=0;v<i;v++){var m=h(c,d,v,p,l,f);if(m){var y=m.bounds.max.y-m.bounds.min.y,x=m.bounds.max.x-m.bounds.min.x;y>g&&(g=y),a.translate(m,{x:.5*x,y:.5*y}),c=m.bounds.max.x+s,n.addBody(u,m),l=m,f+=1}else c+=s}d+=g+o,c=t}return u},r.chain=function(t,e,i,r,a,h){for(var l=t.bodies,u=1;u<l.length;u++){var c=l[u-1],d=l[u],f=c.bounds.max.y-c.bounds.min.y,p=c.bounds.max.x-c.bounds.min.x,g=d.bounds.max.y-d.bounds.min.y,v={bodyA:c,pointA:{x:p*e,y:f*i},bodyB:d,pointB:{x:(d.bounds.max.x-d.bounds.min.x)*r,y:g*a}},m=o.extend(v,h);n.addConstraint(t,s.create(m))}return t.label+=" Chain",t},r.mesh=function(t,e,i,r,a){var h,l,u,c,d,f=t.bodies;for(h=0;h<i;h++){for(l=1;l<e;l++)u=f[l-1+h*e],c=f[l+h*e],n.addConstraint(t,s.create(o.extend({bodyA:u,bodyB:c},a)));if(h>0)for(l=0;l<e;l++)u=f[l+(h-1)*e],c=f[l+h*e],n.addConstraint(t,s.create(o.extend({bodyA:u,bodyB:c},a))),r&&l>0&&(d=f[l-1+(h-1)*e],n.addConstraint(t,s.create(o.extend({bodyA:d,bodyB:c},a)))),r&&l<e-1&&(d=f[l+1+(h-1)*e],n.addConstraint(t,s.create(o.extend({bodyA:d,bodyB:c},a))))}return t.label+=" Mesh",t},r.pyramid=function(t,e,i,n,s,o,h){return r.stack(t,e,i,n,s,o,(function(e,r,o,l,u,c){var d=Math.min(n,Math.ceil(i/2)),f=u?u.bounds.max.x-u.bounds.min.x:0;if(!(l>d||o<(l=d-l)||o>i-1-l))return 1===c&&a.translate(u,{x:(o+(i%2==1?1:-1))*f,y:0}),h(t+(u?o*f:0)+o*s,r,o,l,u,c)}))},r.newtonsCradle=function(t,e,i,r,o){for(var a=n.create({label:"Newtons Cradle"}),l=0;l<i;l++){var u=h.circle(t+l*(1.9*r),e+o,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),c=s.create({pointA:{x:t+l*(1.9*r),y:e},bodyB:u});n.addBody(a,u),n.addConstraint(a,c)}return a},r.car=function(t,e,i,r,o){var l=a.nextGroup(!0),u=.5*-i+20,c=.5*i-20,d=n.create({label:"Car"}),f=h.rectangle(t,e,i,r,{collisionFilter:{group:l},chamfer:{radius:.5*r},density:2e-4}),p=h.circle(t+u,e+0,o,{collisionFilter:{group:l},friction:.8}),g=h.circle(t+c,e+0,o,{collisionFilter:{group:l},friction:.8}),v=s.create({bodyB:f,pointB:{x:u,y:0},bodyA:p,stiffness:1,length:0}),m=s.create({bodyB:f,pointB:{x:c,y:0},bodyA:g,stiffness:1,length:0});return n.addBody(d,f),n.addBody(d,p),n.addBody(d,g),n.addConstraint(d,v),n.addConstraint(d,m),d},r.softBody=function(t,e,i,n,s,a,l,u,c,d){c=o.extend({inertia:1/0},c),d=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},d);var f=r.stack(t,e,i,n,s,a,(function(t,e){return h.circle(t,e,u,c)}));return r.mesh(f,i,n,l,d),f.label="Soft Body",f}},function(t,e,i){var r={};t.exports=r,i(84);var n=i(32);r.pathToVertices=function(t,e){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,s,o,a,h,l,u,c,d,f,p,g=[],v=0,m=0,y=0;e=e||15;var x=function(t,e,i){var r=i%2==1&&i>1;if(!d||t!=d.x||e!=d.y){d&&r?(f=d.x,p=d.y):(f=0,p=0);var n={x:f+t,y:p+e};!r&&d||(d=n),g.push(n),m=f+t,y=p+e}},b=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":m=t.x,y=t.y;break;case"H":m=t.x;break;case"V":y=t.y}x(m,y,t.pathSegType)}};for(r._svgPathToAbsolute(t),o=t.getTotalLength(),l=[],i=0;i<t.pathSegList.numberOfItems;i+=1)l.push(t.pathSegList.getItem(i));for(u=l.concat();v<o;){if((h=l[t.getPathSegAtLength(v)])!=c){for(;u.length&&u[0]!=h;)b(u.shift());c=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=t.getPointAtLength(v),x(a.x,a.y,0)}v+=e}for(i=0,s=u.length;i<s;++i)b(u[i]);return g},r._svgPathToAbsolute=function(t){for(var e,i,r,n,s,o,a=t.pathSegList,h=0,l=0,u=a.numberOfItems,c=0;c<u;++c){var d=a.getItem(c),f=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in d&&(h=d.x),"y"in d&&(l=d.y);else switch("x1"in d&&(r=h+d.x1),"x2"in d&&(s=h+d.x2),"y1"in d&&(n=l+d.y1),"y2"in d&&(o=l+d.y2),"x"in d&&(h+=d.x),"y"in d&&(l+=d.y),f){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(h,l),c);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(h,l),c);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(h),c);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(l),c);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(h,l,r,n,s,o),c);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(h,l,s,o),c);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(h,l,r,n),c);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(h,l),c);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(h,l,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),c);break;case"z":case"Z":h=e,l=i}"M"!=f&&"m"!=f||(e=h,i=l)}}},function(t,e,i){var r=i(86),n=i(41),s=i(0),o=i(249),a=i(9),h=i(2),l=i(126),u=i(64),c=new s({Extends:a,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(t,e,i){a.call(this),this.tile=e,this.world=t,e.physics.matterBody&&e.physics.matterBody.destroy(),e.physics.matterBody=this;var r=h(i,"body",null),n=h(i,"addToWorld",!0);if(r)this.setBody(r,n);else{var s=e.getCollisionGroup();h(s,"objects",[]).length>0?this.setFromTileCollision(i):this.setFromTileRectangle(i)}},setFromTileRectangle:function(t){void 0===t&&(t={}),l(t,"isStatic")||(t.isStatic=!0),l(t,"addToWorld")||(t.addToWorld=!0);var e=this.tile.getBounds(),i=e.x+e.width/2,n=e.y+e.height/2,s=r.rectangle(i,n,e.width,e.height,t);return this.setBody(s,t.addToWorld),this},setFromTileCollision:function(t){void 0===t&&(t={}),l(t,"isStatic")||(t.isStatic=!0),l(t,"addToWorld")||(t.addToWorld=!0);for(var e=this.tile.tilemapLayer.scaleX,i=this.tile.tilemapLayer.scaleY,s=this.tile.getLeft(),o=this.tile.getTop(),a=this.tile.getCollisionGroup(),c=h(a,"objects",[]),d=[],f=0;f<c.length;f++){var p=c[f],g=s+p.x*e,v=o+p.y*i,m=p.width*e,y=p.height*i,x=null;if(p.rectangle)x=r.rectangle(g+m/2,v+y/2,m,y,t);else if(p.ellipse)x=r.circle(g+m/2,v+y/2,m/2,t);else if(p.polygon||p.polyline){var b=(p.polygon?p.polygon:p.polyline).map((function(t){return{x:t.x*e,y:t.y*i}})),w=u.create(b),T=u.centre(w);g+=T.x,v+=T.y,x=r.fromVertices(g,v,w,t)}x&&d.push(x)}return 1===d.length?this.setBody(d[0],t.addToWorld):d.length>1&&(t.parts=d,this.setBody(n.create(t),t.addToWorld)),this},setBody:function(t,e){return void 0===e&&(e=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,e&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=c},function(t,e,i){var r=i(1399);r.Body=i(41),r.Composite=i(118),r.World=i(596),r.Detector=i(273),r.Grid=i(597),r.Pairs=i(598),r.Pair=i(250),r.Query=i(1400),r.Resolver=i(599),r.SAT=i(274),r.Constraint=i(128),r.Common=i(32),r.Engine=i(1401),r.Events=i(166),r.Sleeping=i(165),r.Plugin=i(595),r.Bodies=i(86),r.Composites=i(591),r.Axes=i(271),r.Bounds=i(84),r.Svg=i(592),r.Vector=i(83),r.Vertices=i(64),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,t.exports=r},function(t,e,i){var r={};t.exports=r;var n=i(32);r._registry={},r.register=function(t){if(r.isPlugin(t)||n.warn("Plugin.register:",r.toString(t),"does not implement all required fields."),t.name in r._registry){var e=r._registry[t.name],i=r.versionParse(t.version).number,s=r.versionParse(e.version).number;i>s?(n.warn("Plugin.register:",r.toString(e),"was upgraded to",r.toString(t)),r._registry[t.name]=t):i<s?n.warn("Plugin.register:",r.toString(e),"can not be downgraded to",r.toString(t)):t!==e&&n.warn("Plugin.register:",r.toString(t),"is already registered to different plugin object")}else r._registry[t.name]=t;return t},r.resolve=function(t){return r._registry[r.dependencyParse(t).name]},r.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},r.isPlugin=function(t){return t&&t.name&&t.version&&t.install},r.isUsed=function(t,e){return t.used.indexOf(e)>-1},r.isFor=function(t,e){var i=t.for&&r.dependencyParse(t.for);return!t.for||e.name===i.name&&r.versionSatisfies(e.version,i.range)},r.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0!==t.uses.length){for(var i=r.dependencies(t),s=n.topologicalSort(i),o=[],a=0;a<s.length;a+=1)if(s[a]!==t.name){var h=r.resolve(s[a]);h?r.isUsed(t,h.name)||(r.isFor(h,t)||(n.warn("Plugin.use:",r.toString(h),"is for",h.for,"but installed on",r.toString(t)+"."),h._warned=!0),h.install?h.install(t):(n.warn("Plugin.use:",r.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(o.push("🔶 "+r.toString(h)),delete h._warned):o.push("✅ "+r.toString(h)),t.used.push(h.name)):o.push("❌ "+s[a])}o.length>0&&!h.silent&&n.info(o.join("  "))}else n.warn("Plugin.use:",r.toString(t),"does not specify any dependencies to install.")},r.dependencies=function(t,e){var i=r.dependencyParse(t),s=i.name;if(!(s in(e=e||{}))){t=r.resolve(t)||t,e[s]=n.map(t.uses||[],(function(e){r.isPlugin(e)&&r.register(e);var s=r.dependencyParse(e),o=r.resolve(e);return o&&!r.versionSatisfies(o.version,s.range)?(n.warn("Plugin.dependencies:",r.toString(o),"does not satisfy",r.toString(s),"used by",r.toString(i)+"."),o._warned=!0,t._warned=!0):o||(n.warn("Plugin.dependencies:",r.toString(e),"used by",r.toString(i),"could not be resolved."),t._warned=!0),s.name}));for(var o=0;o<e[s].length;o+=1)r.dependencies(e[s][o],e);return e}},r.dependencyParse=function(t){return n.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||n.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},r.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||n.warn("Plugin.versionParse:",t,"is not a valid version or range.");var e=t.split("-");t=e[0];var i=isNaN(Number(t[0])),r=i?t.substr(1):t,s=n.map(r.split("."),(function(t){return Number(t)}));return{isRange:i,version:r,range:t,operator:i?t[0]:"",parts:s,prerelease:e[1],number:1e8*s[0]+1e4*s[1]+s[2]}},r.versionSatisfies=function(t,e){e=e||"*";var i=r.versionParse(e),n=i.parts,s=r.versionParse(t),o=s.parts;if(i.isRange){if("*"===i.operator||"*"===t)return!0;if("~"===i.operator)return o[0]===n[0]&&o[1]===n[1]&&o[2]>=n[2];if("^"===i.operator)return n[0]>0?o[0]===n[0]&&s.number>=i.number:n[1]>0?o[1]===n[1]&&o[2]>=n[2]:o[2]===n[2]}return t===e||"*"===t}},function(t,e,i){var r={};t.exports=r;var n=i(118),s=(i(128),i(32));r.create=function(t){var e=n.create();return s.extend(e,{label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}},t)}},function(t,e,i){var r={};t.exports=r;var n=i(250),s=i(273),o=i(32);r.create=function(t){var e={controller:r,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(e,t)},r.update=function(t,e,i,n){var s,o,a,h,l,u=i.world,c=t.buckets,d=!1,f=i.metrics;for(f.broadphaseTests=0,s=0;s<e.length;s++){var p=e[s];if((!p.isSleeping||n)&&!(p.bounds.max.x<u.bounds.min.x||p.bounds.min.x>u.bounds.max.x||p.bounds.max.y<u.bounds.min.y||p.bounds.min.y>u.bounds.max.y)){var g=r._getRegion(t,p);if(!p.region||g.id!==p.region.id||n){f.broadphaseTests+=1,p.region&&!n||(p.region=g);var v=r._regionUnion(g,p.region);for(o=v.startCol;o<=v.endCol;o++)for(a=v.startRow;a<=v.endRow;a++){h=c[l=r._getBucketId(o,a)];var m=o>=g.startCol&&o<=g.endCol&&a>=g.startRow&&a<=g.endRow,y=o>=p.region.startCol&&o<=p.region.endCol&&a>=p.region.startRow&&a<=p.region.endRow;!m&&y&&y&&h&&r._bucketRemoveBody(t,h,p),(p.region===g||m&&!y||n)&&(h||(h=r._createBucket(c,l)),r._bucketAddBody(t,h,p))}p.region=g,d=!0}}}d&&(t.pairsList=r._createActivePairsList(t))},r.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},r._regionUnion=function(t,e){var i=Math.min(t.startCol,e.startCol),n=Math.max(t.endCol,e.endCol),s=Math.min(t.startRow,e.startRow),o=Math.max(t.endRow,e.endRow);return r._createRegion(i,n,s,o)},r._getRegion=function(t,e){var i=e.bounds,n=Math.floor(i.min.x/t.bucketWidth),s=Math.floor(i.max.x/t.bucketWidth),o=Math.floor(i.min.y/t.bucketHeight),a=Math.floor(i.max.y/t.bucketHeight);return r._createRegion(n,s,o,a)},r._createRegion=function(t,e,i,r){return{id:t+","+e+","+i+","+r,startCol:t,endCol:e,startRow:i,endRow:r}},r._getBucketId=function(t,e){return"C"+t+"R"+e},r._createBucket=function(t,e){return t[e]=[]},r._bucketAddBody=function(t,e,i){for(var r=0;r<e.length;r++){var s=e[r];if(!(i.id===s.id||i.isStatic&&s.isStatic)){var o=n.id(i,s),a=t.pairs[o];a?a[2]+=1:t.pairs[o]=[i,s,1]}}e.push(i)},r._bucketRemoveBody=function(t,e,i){e.splice(e.indexOf(i),1);for(var r=0;r<e.length;r++){var s=e[r],o=n.id(i,s),a=t.pairs[o];a&&(a[2]-=1)}},r._createActivePairsList=function(t){var e,i,r=[];e=o.keys(t.pairs);for(var n=0;n<e.length;n++)(i=t.pairs[e[n]])[2]>0?r.push(i):delete t.pairs[e[n]];return r}},function(t,e,i){var r={};t.exports=r;var n=i(250),s=i(32);r._pairMaxIdleLife=1e3,r.create=function(t){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},r.update=function(t,e,i){var r,s,o,a,h=t.list,l=t.table,u=t.collisionStart,c=t.collisionEnd,d=t.collisionActive;for(u.length=0,c.length=0,d.length=0,a=0;a<h.length;a++)h[a].confirmedActive=!1;for(a=0;a<e.length;a++)(r=e[a]).collided&&((o=l[s=n.id(r.bodyA,r.bodyB)])?(o.isActive?d.push(o):u.push(o),n.update(o,r,i),o.confirmedActive=!0):(o=n.create(r,i),l[s]=o,u.push(o),h.push(o)));for(a=0;a<h.length;a++)(o=h[a]).isActive&&!o.confirmedActive&&(n.setActive(o,!1,i),c.push(o))},r.removeOld=function(t,e){var i,n,s,o,a=t.list,h=t.table,l=[];for(o=0;o<a.length;o++)(n=(i=a[o]).collision).bodyA.isSleeping||n.bodyB.isSleeping?i.timeUpdated=e:e-i.timeUpdated>r._pairMaxIdleLife&&l.push(o);for(o=0;o<l.length;o++)delete h[(i=a[s=l[o]-o]).id],a.splice(s,1)},r.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,e,i){var r={};t.exports=r;var n=i(64),s=i(83),o=i(32),a=i(84);r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(t){var e,i,r;for(e=0;e<t.length;e++)(i=t[e]).isActive&&(r=i.activeContacts.length,i.collision.parentA.totalContacts+=r,i.collision.parentB.totalContacts+=r)},r.solvePosition=function(t,e,i){var n,s,o,a,h,l,u,c,d,f,p,g,v,m,y,x,b=i*r._positionDampen;for(n=0;n<e.length;n++){var w=e[n];w.previousPositionImpulse.x=w.positionImpulse.x,w.previousPositionImpulse.y=w.positionImpulse.y}for(n=0;n<t.length;n++)(a=t[n]).isActive&&!a.isSensor&&(l=(h=a.collision).parentA,u=h.parentB,c=h.normal,p=l.previousPositionImpulse,g=u.previousPositionImpulse,f=h.penetration,m=g.x-p.x+f.x,y=g.y-p.y+f.y,d=(s=c.x)*m+(o=c.y)*y,a.separation=d,x=(d-a.slop)*b,(l.isStatic||u.isStatic)&&(x*=2),l.isStatic||l.isSleeping||(v=x/l.totalContacts,l.positionImpulse.x+=s*v,l.positionImpulse.y+=o*v),u.isStatic||u.isSleeping||(v=x/u.totalContacts,u.positionImpulse.x-=s*v,u.positionImpulse.y-=o*v))},r.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.totalContacts=0,0!==i.positionImpulse.x||0!==i.positionImpulse.y){for(var o=0;o<i.parts.length;o++){var h=i.parts[o];n.translate(h.vertices,i.positionImpulse),a.update(h.bounds,h.vertices,i.velocity),h.position.x+=i.positionImpulse.x,h.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x,i.positionPrev.y+=i.positionImpulse.y,s.dot(i.positionImpulse,i.velocity)<0?(i.positionImpulse.x=0,i.positionImpulse.y=0):(i.positionImpulse.x*=r._positionWarming,i.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(t){var e,i,r,n,o,a,h,l,u,c,d,f,p,g,v=s._temp[0],m=s._temp[1];for(e=0;e<t.length;e++)if((r=t[e]).isActive&&!r.isSensor)for(n=r.activeContacts,a=(o=r.collision).parentA,h=o.parentB,l=o.normal,u=o.tangent,i=0;i<n.length;i++)d=(c=n[i]).vertex,f=c.normalImpulse,p=c.tangentImpulse,0===f&&0===p||(v.x=l.x*f+u.x*p,v.y=l.y*f+u.y*p,a.isStatic||a.isSleeping||(g=s.sub(d,a.position,m),a.positionPrev.x+=v.x*a.inverseMass,a.positionPrev.y+=v.y*a.inverseMass,a.anglePrev+=s.cross(g,v)*a.inverseInertia),h.isStatic||h.isSleeping||(g=s.sub(d,h.position,m),h.positionPrev.x-=v.x*h.inverseMass,h.positionPrev.y-=v.y*h.inverseMass,h.anglePrev-=s.cross(g,v)*h.inverseInertia))},r.solveVelocity=function(t,e){for(var i=e*e,n=s._temp[0],a=s._temp[1],h=s._temp[2],l=s._temp[3],u=s._temp[4],c=s._temp[5],d=0;d<t.length;d++){var f=t[d];if(f.isActive&&!f.isSensor){var p=f.collision,g=p.parentA,v=p.parentB,m=p.normal,y=p.tangent,x=f.activeContacts,b=1/x.length;g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,v.velocity.x=v.position.x-v.positionPrev.x,v.velocity.y=v.position.y-v.positionPrev.y,g.angularVelocity=g.angle-g.anglePrev,v.angularVelocity=v.angle-v.anglePrev;for(var w=0;w<x.length;w++){var T=x[w],S=T.vertex,E=s.sub(S,g.position,a),C=s.sub(S,v.position,h),_=s.add(g.velocity,s.mult(s.perp(E),g.angularVelocity),l),A=s.add(v.velocity,s.mult(s.perp(C),v.angularVelocity),u),M=s.sub(_,A,c),P=s.dot(m,M),k=s.dot(y,M),O=Math.abs(k),R=o.sign(k),L=(1+f.restitution)*P,I=o.clamp(f.separation+P,0,1)*r._frictionNormalMultiplier,F=k,D=1/0;O>f.friction*f.frictionStatic*I*i&&(D=O,F=o.clamp(f.friction*R*i,-D,D));var B=s.cross(E,m),N=s.cross(C,m),z=b/(g.inverseMass+v.inverseMass+g.inverseInertia*B*B+v.inverseInertia*N*N);if(L*=z,F*=z,P<0&&P*P>r._restingThresh*i)T.normalImpulse=0;else{var U=T.normalImpulse;T.normalImpulse=Math.min(T.normalImpulse+L,0),L=T.normalImpulse-U}if(k*k>r._restingThreshTangent*i)T.tangentImpulse=0;else{var Y=T.tangentImpulse;T.tangentImpulse=o.clamp(T.tangentImpulse+F,-D,D),F=T.tangentImpulse-Y}n.x=m.x*L+y.x*F,n.y=m.y*L+y.y*F,g.isStatic||g.isSleeping||(g.positionPrev.x+=n.x*g.inverseMass,g.positionPrev.y+=n.y*g.inverseMass,g.anglePrev+=s.cross(E,n)*g.inverseInertia),v.isStatic||v.isSleeping||(v.positionPrev.x-=n.x*v.inverseMass,v.positionPrev.y-=n.y*v.inverseMass,v.anglePrev-=s.cross(C,n)*v.inverseInertia)}}}}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var r=i(276);t.exports=function(t,e,i,n){for(var s=t[0],o=1;o<t.length;o++){var a=t[o];r(a,s,e,i,n),s=a}return t}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"angle",e,i,n,s)}},function(t,e){t.exports=function(t,e,i){for(var r=0;r<t.length;r++){var n=t[r];e.call(i,n)}return t}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=0);for(var r=i;r<t.length;r++){var n=t[r],s=!0;for(var o in e)n[o]!==e[o]&&(s=!1);if(s)return n}return null}},function(t,e){t.exports=function(t,e,i){void 0===i&&(i=0);for(var r=i;r<t.length;r++){var n=t[r],s=!0;for(var o in e)n[o]!==e[o]&&(s=!1);if(s)return n}return null}},function(t,e,i){var r=i(289),n=i(123),s=i(2),o=i(1),a=new(i(129))({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1);t.exports=function(t,e){void 0===e&&(e={});var i=e.hasOwnProperty("width"),o=e.hasOwnProperty("height"),h=s(e,"width",-1),l=s(e,"height",-1),u=s(e,"cellWidth",1),c=s(e,"cellHeight",u),d=s(e,"position",n.TOP_LEFT),f=s(e,"x",0),p=s(e,"y",0),g=0,v=0,m=h*u,y=l*c;a.setPosition(f,p),a.setSize(u,c);for(var x=0;x<t.length;x++)if(r(t[x],a,d),i&&-1===h)a.x+=u;else if(o&&-1===l)a.y+=c;else if(o&&!i){if(v+=c,a.y+=c,v===y&&(v=0,g+=u,a.y=p,a.x+=u,g===m))break}else if(g+=u,a.x+=u,g===m&&(g=0,v+=c,a.x=f,a.y+=c,v===y))break;return t}},function(t,e,i){var r=i(18),n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,i,n){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=r(t,0,1),this._alphaTR=r(e,0,1),this._alphaBL=r(i,0,1),this._alphaBR=r(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=r(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=r(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=r(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=r(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=r(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=n},function(t,e){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,i,r,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,e,i){var r=i(10),n=i(308),s=i(3),o={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&n(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return void 0===t&&(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new s),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,i,n,s,o,a,h,l;if(void 0===t&&(t=new r),this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),u.transformPoint(t.x,t.y,t),e=t.x,i=t.y,this.getTopRight(t),u.transformPoint(t.x,t.y,t),n=t.x,s=t.y,this.getBottomLeft(t),u.transformPoint(t.x,t.y,t),o=t.x,a=t.y,this.getBottomRight(t),u.transformPoint(t.x,t.y,t),h=t.x,l=t.y}else this.getTopLeft(t),e=t.x,i=t.y,this.getTopRight(t),n=t.x,s=t.y,this.getBottomLeft(t),o=t.x,a=t.y,this.getBottomRight(t),h=t.x,l=t.y;return t.x=Math.min(e,n,o,h),t.y=Math.min(i,s,a,l),t.width=Math.max(e,n,o,h)-t.x,t.height=Math.max(i,s,a,l)-t.y,t}};t.exports=o},function(t,e){t.exports="blur"},function(t,e){t.exports="boot"},function(t,e){t.exports="contextlost"},function(t,e){t.exports="contextrestored"},function(t,e){t.exports="destroy"},function(t,e){t.exports="focus"},function(t,e){t.exports="hidden"},function(t,e){t.exports="pause"},function(t,e){t.exports="postrender"},function(t,e){t.exports="poststep"},function(t,e){t.exports="prerender"},function(t,e){t.exports="prestep"},function(t,e){t.exports="ready"},function(t,e){t.exports="resume"},function(t,e){t.exports="step"},function(t,e){t.exports="visible"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="render"},function(t,e){t.exports="resize"},function(t,e){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,e,i){var r=i(36),n=i(99),s=i(6),o=i(100),a=i(3),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),"number"==typeof t&&(t={duration:t}),t.from=s(t,"from",0),t.to=s(t,"to",1);var h=n(t,"positionOnPath",!1);this.rotateToPath=n(t,"rotateToPath",!1),this.pathRotationOffset=s(t,"rotationOffset",0);var l=s(t,"startAt",e);if(l&&(t.onStart=function(t){var e=t.data[0];e.progress=l,e.elapsed=e.duration*l;var i=e.ease(e.progress);e.current=e.start+(e.end-e.start)*i,e.target[e.key]=e.current}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var u=this.path.getPoint(.1);this.rotation=Math.atan2(u.y-this.y,u.x-this.x)+r(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var e=t.data[0],i=this.pathDelta,n=this.pathVector;if(i.copy(n).negate(),e.state===o.COMPLETE)return this.path.getPoint(1,n),i.add(n),n.add(this.pathOffset),void this.setPosition(n.x,n.y);if(e.state!==o.PLAYING_FORWARD&&e.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),n),i.add(n),n.add(this.pathOffset);var s=this.x,a=this.y;this.setPosition(n.x,n.y);var h=this.x-s,l=this.y-a;if(0===h&&0===l)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(l,h)+r(this.pathRotationOffset))}}};t.exports=h},function(t,e){var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=i},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,i,r,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,i,r){return void 0===t&&(t=16777215),void 0===e&&(e=t,i=t,r=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=i,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(t,e,i,r){return this.setTint(t,e,i,r),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},function(t,e){t.exports="changedata"},function(t,e){t.exports="changedata-"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedata"},function(t,e){t.exports="setdata"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="complete"},function(t,e){t.exports="created"},function(t,e){t.exports="error"},function(t,e){t.exports="loop"},function(t,e){t.exports="play"},function(t,e){t.exports="seeked"},function(t,e){t.exports="seeking"},function(t,e){t.exports="stop"},function(t,e){t.exports="timeout"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="boot"},function(t,e){t.exports="create"},function(t,e){t.exports="destroy"},function(t,e){t.exports="pause"},function(t,e){t.exports="postupdate"},function(t,e){t.exports="prerender"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="ready"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="render"},function(t,e){t.exports="resume"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="sleep"},function(t,e){t.exports="start"},function(t,e){t.exports="transitioncomplete"},function(t,e){t.exports="transitioninit"},function(t,e){t.exports="transitionout"},function(t,e){t.exports="transitionstart"},function(t,e){t.exports="transitionwake"},function(t,e){t.exports="update"},function(t,e){t.exports="wake"},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"alpha",e,i,n,s)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"x",e,i,n,s)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"x",e,n,o,a),r(t,"y",i,s,o,a)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"y",e,i,n,s)}},function(t,e){t.exports=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=6.28);for(var n=i,s=(r-i)/t.length,o=0;o<t.length;o++)t[o].x=e.x+e.radius*Math.cos(n),t[o].y=e.y+e.radius*Math.sin(n),n+=s;return t}},function(t,e){t.exports=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=6.28);for(var n=i,s=(r-i)/t.length,o=e.width/2,a=e.height/2,h=0;h<t.length;h++)t[h].x=e.x+o*Math.cos(n),t[h].y=e.y+a*Math.sin(n),n+=s;return t}},function(t,e,i){var r=i(172);t.exports=function(t,e){for(var i=r(e,t.length),n=0;n<t.length;n++){var s=t[n],o=i[n];s.x=o.x,s.y=o.y}return t}},function(t,e,i){var r=i(316),n=i(178),s=i(179);t.exports=function(t,e,i){void 0===i&&(i=0);var o=r(e,!1,t.length);i>0?n(o,i):i<0&&s(o,Math.abs(i));for(var a=0;a<t.length;a++)t[a].x=o[a].x,t[a].y=o[a].y;return t}},function(t,e,i){var r=i(317);t.exports=function(t,e,i){var n=r({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},i),s=r({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},i),o=r({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},i);n.pop(),s.pop(),o.pop();for(var a=(n=n.concat(s,o)).length/t.length,h=0,l=0;l<t.length;l++){var u=t[l],c=n[Math.floor(h)];u.x=c.x,u.y=c.y,h+=a}return t}},function(t,e){t.exports=function(t,e,i){for(var r=0;r<t.length;r++){var n=t[r];n.anims&&n.anims.play(e,i)}return t}},function(t,e,i){var r=i(170);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(180);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(173);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(174);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(181);t.exports=function(t,e){for(var i=0;i<t.length;i++)r(e,t[i]);return t}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"rotation",e,i,n,s)}},function(t,e,i){var r=i(182),n=i(50);t.exports=function(t,e,i){for(var s=e.x,o=e.y,a=0;a<t.length;a++){var h=t[a];r(h,s,o,i,Math.max(1,n(h.x,h.y,s,o)))}return t}},function(t,e,i){var r=i(182);t.exports=function(t,e,i,n){var s=e.x,o=e.y;if(0===n)return t;for(var a=0;a<t.length;a++)r(t[a],s,o,i,n);return t}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"scaleX",e,i,n,s)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"scaleX",e,n,o,a),r(t,"scaleY",i,s,o,a)}},function(t,e,i){var r=i(46);t.exports=function(t,e,i,n,s){return r(t,"scaleY",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"alpha",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n){return r(t,"blendMode",e,0,i,n)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"depth",e,i,n,s)}},function(t,e){t.exports=function(t,e,i){for(var r=0;r<t.length;r++)t[r].setInteractive(e,i);return t}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"originX",e,n,o,a),r(t,"originY",i,s,o,a),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"rotation",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"scaleX",e,n,o,a),r(t,"scaleY",i,s,o,a)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"scaleX",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"scaleY",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"scrollFactorX",e,n,o,a),r(t,"scrollFactorY",i,s,o,a)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"scrollFactorX",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"scrollFactorY",e,i,n,s)}},function(t,e){t.exports=function(t,e,i,r,n){for(var s=0;s<t.length;s++)t[s].setTint(e,i,r,n);return t}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n){return r(t,"visible",e,0,i,n)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"x",e,i,n,s)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s,o,a){return null==i&&(i=e),r(t,"x",e,n,o,a),r(t,"y",i,s,o,a)}},function(t,e,i){var r=i(27);t.exports=function(t,e,i,n,s){return r(t,"y",e,i,n,s)}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n,s){var o,a,h,l,u,c;if(void 0===n&&(n=0),void 0===s&&(s=new r),t.length>1)if(0===n){var d=t.length-1;for(o=t[d].x,a=t[d].y,h=d-1;h>=0;h--)l=(c=t[h]).x,u=c.y,c.x=o,c.y=a,o=l,a=u;t[d].x=e,t[d].y=i}else{for(o=t[0].x,a=t[0].y,h=1;h<t.length;h++)l=(c=t[h]).x,u=c.y,c.x=o,c.y=a,o=l,a=u;t[0].x=e,t[0].y=i}else o=t[0].x,a=t[0].y,t[0].x=e,t[0].y=i;return s.x=o,s.y=a,s}},function(t,e,i){var r=i(131);t.exports=function(t){return r(t)}},function(t,e,i){var r=i(183);t.exports=function(t,e,i,n,s){void 0===s&&(s=!1);var o,a=Math.abs(n-i)/t.length;if(s)for(o=0;o<t.length;o++)t[o][e]+=r(o*a,i,n);else for(o=0;o<t.length;o++)t[o][e]=r(o*a,i,n);return t}},function(t,e,i){var r=i(184);t.exports=function(t,e,i,n,s){void 0===s&&(s=!1);var o,a=Math.abs(n-i)/t.length;if(s)for(o=0;o<t.length;o++)t[o][e]+=r(o*a,i,n);else for(o=0;o<t.length;o++)t[o][e]=r(o*a,i,n);return t}},function(t,e){t.exports=function(t,e,i,r,n){void 0===n&&(n=!1);var s,o=Math.abs(r-i)/t.length;if(n)for(s=0;s<t.length;s++)t[s][e]+=s*o+i;else for(s=0;s<t.length;s++)t[s][e]=s*o+i;return t}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].visible=!t[e].visible;return t}},function(t,e,i){var r=i(68);t.exports=function(t,e,i){void 0===i&&(i=0);for(var n=0;n<t.length;n++){var s=t[n];s.x=r(s.x,e.left-i,e.right+i),s.y=r(s.y,e.top-i,e.bottom+i)}return t}},function(t,e,i){t.exports={Animation:i(185),AnimationFrame:i(319),AnimationManager:i(321),AnimationState:i(164),Events:i(132)}},function(t,e){t.exports="add"},function(t,e){t.exports="animationcomplete"},function(t,e){t.exports="animationcomplete-"},function(t,e){t.exports="animationrepeat"},function(t,e){t.exports="animationrestart"},function(t,e){t.exports="animationstart"},function(t,e){t.exports="animationstop"},function(t,e){t.exports="animationupdate"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="remove"},function(t,e){t.exports="resumeall"},function(t,e,i){t.exports={BaseCache:i(323),CacheManager:i(325),Events:i(324)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e,i){t.exports={Controls:i(739),Scene2D:i(742)}},function(t,e,i){t.exports={FixedKeyControl:i(740),SmoothedKeyControl:i(741)}},function(t,e,i){var r=i(0),n=i(6),s=new r({initialize:function(t){this.camera=n(t,"camera",null),this.left=n(t,"left",null),this.right=n(t,"right",null),this.up=n(t,"up",null),this.down=n(t,"down",null),this.zoomIn=n(t,"zoomIn",null),this.zoomOut=n(t,"zoomOut",null),this.zoomSpeed=n(t,"zoomSpeed",.01),this.minZoom=n(t,"minZoom",.001),this.maxZoom=n(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=n(t,"speed",null);"number"==typeof e?(this.speedX=e,this.speedY=e):(this.speedX=n(t,"speed.x",0),this.speedY=n(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this.up&&this.up.isDown?e.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<this.minZoom&&(e.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed,e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=s},function(t,e,i){var r=i(0),n=i(6),s=new r({initialize:function(t){this.camera=n(t,"camera",null),this.left=n(t,"left",null),this.right=n(t,"right",null),this.up=n(t,"up",null),this.down=n(t,"down",null),this.zoomIn=n(t,"zoomIn",null),this.zoomOut=n(t,"zoomOut",null),this.zoomSpeed=n(t,"zoomSpeed",.01),this.minZoom=n(t,"minZoom",.001),this.maxZoom=n(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=n(t,"acceleration",null);"number"==typeof e?(this.accelX=e,this.accelY=e):(this.accelX=n(t,"acceleration.x",0),this.accelY=n(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var i=n(t,"drag",null);"number"==typeof i?(this.dragX=i,this.dragY=i):(this.dragX=n(t,"drag.x",0),this.dragY=n(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var r=n(t,"maxSpeed",null);"number"==typeof r?(this.maxSpeedX=r,this.maxSpeedY=r):(this.maxSpeedX=n(t,"maxSpeed.x",0),this.maxSpeedY=n(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(e.scrollX-=this._speedX*t|0),0!==this._speedY&&(e.scrollY-=this._speedY*t|0),0!==this._zoom&&(e.zoom+=this._zoom,e.zoom<this.minZoom?e.zoom=this.minZoom:e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=s},function(t,e,i){t.exports={Camera:i(326),BaseCamera:i(133),CameraManager:i(799),Effects:i(333),Events:i(37)}},function(t,e){t.exports="cameradestroy"},function(t,e){t.exports="camerafadeincomplete"},function(t,e){t.exports="camerafadeinstart"},function(t,e){t.exports="camerafadeoutcomplete"},function(t,e){t.exports="camerafadeoutstart"},function(t,e){t.exports="cameraflashcomplete"},function(t,e){t.exports="cameraflashstart"},function(t,e){t.exports="followupdate"},function(t,e){t.exports="camerapancomplete"},function(t,e){t.exports="camerapanstart"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="camerarotatecomplete"},function(t,e){t.exports="camerarotatestart"},function(t,e){t.exports="camerashakecomplete"},function(t,e){t.exports="camerashakestart"},function(t,e){t.exports="camerazoomcomplete"},function(t,e){t.exports="camerazoomstart"},function(t,e,i){var r=i(18),n=i(0),s=i(37),o=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n,o,a,h){if(void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),!o&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=i,this.green=r,this.blue=n,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h;var l=t?s.FADE_OUT_START:s.FADE_IN_START;return this.camera.emit(l,this.camera,this,e,i,r,n),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,r=this.red/255,n=this.green/255,s=this.blue/255;return t.drawFillRect(i.x,i.y,i.width,i.height,e(s,n,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,e,i){var r=i(18),n=i(0),s=i(37),o=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n,o,a){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===i&&(i=255),void 0===r&&(r=255),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=this.camera.scene),!n&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=i,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=o,this._onUpdateScope=a,this.camera.emit(s.FLASH_START,this.camera,this,t,e,i,r)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning)return!1;var i=this.camera,r=this.red/255,n=this.green/255,s=this.blue/255;return t.drawFillRect(i.x,i.y,i.width,i.height,e(s,n,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,e,i){var r=i(18),n=i(0),s=i(134),o=i(37),a=i(3),h=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n,a,h){void 0===i&&(i=1e3),void 0===r&&(r=s.Linear),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene);var l=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(l.scrollX,l.scrollY),this.destination.set(t,e),l.getScroll(t,e,this.current),"string"==typeof r&&s.hasOwnProperty(r)?this.ease=s[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h,this.camera.emit(o.PAN_START,this.camera,this,i,t,e)),l},update:function(t,e){if(this.isRunning){this._elapsed+=e;var i=r(this._elapsed/this.duration,0,1);this.progress=i;var n=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);n.getScroll(this.destination.x,this.destination.y,this.current);var o=this.source.x+(this.current.x-this.source.x)*s,a=this.source.y+(this.current.y-this.source.y)*s;n.setScroll(o,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,o,a)}else n.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,n.scrollX,n.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=h},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1.70158);var i=1.525*e;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)}},function(t,e){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,e){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,e){t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},function(t,e){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,e){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,e){t.exports=function(t){return t*t*t}},function(t,e){t.exports=function(t){return--t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var r=i/4;return e<1?e=1:r=i*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i)}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var r=i/4;return e<1?e=1:r=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-r)*(2*Math.PI)/i)+1}},function(t,e){t.exports=function(t,e,i){if(void 0===e&&(e=.1),void 0===i&&(i=.1),0===t)return 0;if(1===t)return 1;var r=i/4;return e<1?e=1:r=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i)*.5+1}},function(t,e){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,e){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){return t*t}},function(t,e){t.exports=function(t){return t*(2-t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,e){t.exports=function(t){return t*t*t*t}},function(t,e){t.exports=function(t){return 1- --t*t*t*t}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,e){t.exports=function(t){return t*t*t*t*t}},function(t,e){t.exports=function(t){return--t*t*t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},function(t,e,i){var r=i(18),n=i(0),s=i(37),o=i(3),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===n&&(n=this.camera.scene),!i&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=n,this.camera.emit(s.SHAKE_START,this.camera,this,t,e)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){if(this.isRunning)if(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var i=this.intensity,n=this.camera.width,s=this.camera.height,o=this.camera.zoom;this._offsetX=(Math.random()*i.x*n*2-i.x*n)*o,this._offsetY=(Math.random()*i.y*s*2-i.y*s)*o,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=a},function(t,e,i){var r=i(18),n=i(0),s=i(37),o=i(134),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,e,i,r,n,a,h){void 0===i&&(i=1e3),void 0===r&&(r=o.Linear),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),void 0===e&&(e=!1),this.shortestPath=e;var l=t;t<0?(l=-1*t,this.clockwise=!1):this.clockwise=!0;var u=360*Math.PI/180;l-=Math.floor(l/u)*u;var c=this.camera;if(!n&&this.isRunning)return c;if(this.isRunning=!0,this.duration=i,this.progress=0,this.source=c.rotation,this.destination=l,"string"==typeof r&&o.hasOwnProperty(r)?this.ease=o[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h,this.shortestPath){var d,f;(d=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+u)-this.source)<(f=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+u)-this.destination)?this.clockwise=!0:d>f&&(this.clockwise=!1)}return this.camera.emit(s.ROTATE_START,this.camera,this,i,l),c},update:function(t,e){if(this.isRunning){this._elapsed+=e;var i=r(this._elapsed/this.duration,0,1);this.progress=i;var n=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);this.current=n.rotation;var o,a=360*Math.PI/180,h=this.destination,l=this.current;!1===this.clockwise&&(h=this.current,l=this.destination),o=h>=l?Math.abs(h-l):Math.abs(h+a)-l;var u;u=this.clockwise?n.rotation+o*s:n.rotation-o*s,n.rotation=u,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,u)}else n.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=a},function(t,e,i){var r=i(18),n=i(0),s=i(134),o=i(37),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,r,n,a){void 0===e&&(e=1e3),void 0===i&&(i=s.Linear),void 0===r&&(r=!1),void 0===n&&(n=null),void 0===a&&(a=this.camera.scene);var h=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source=h.zoom,this.destination=t,"string"==typeof i&&s.hasOwnProperty(i)?this.ease=s[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit(o.ZOOM_START,this.camera,this,e,t)),h},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,i){var r=i(326),n=i(0),s=i(2),o=i(24),a=i(57),h=i(104),l=i(20),u=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(l.BOOT,this.boot,this),t.sys.events.on(l.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new r(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(h.RESIZE,this.onResize,this),this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var e=this.systems.events;e.on(l.UPDATE,this.update,this),e.once(l.SHUTDOWN,this.shutdown,this)},add:function(t,e,i,n,s,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===n&&(n=this.scene.sys.scale.height),void 0===s&&(s=!1),void 0===o&&(o="");var a=new r(t,e,i,n);return a.setName(o),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),s&&(this.main=a),a},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,i=0;i<32;i++){for(var r=!1,n=0;n<t.length;n++){var s=t[n];s&&s.id===e&&(r=!0)}if(!r)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,i=this.cameras,r=0;r<i.length;r++){var n=i[r];(!t||t&&n.visible)&&e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,i=this.scene.sys.scale.height,r=0;r<t.length;r++){var n=t[r],o=s(n,"x",0),a=s(n,"y",0),h=s(n,"width",e),l=s(n,"height",i),u=this.add(o,a,h,l);u.name=s(n,"name",""),u.zoom=s(n,"zoom",1),u.rotation=s(n,"rotation",0),u.scrollX=s(n,"scrollX",0),u.scrollY=s(n,"scrollY",0),u.roundPixels=s(n,"roundPixels",!1),u.visible=s(n,"visible",!0);var c=s(n,"backgroundColor",!1);c&&u.setBackgroundColor(c);var d=s(n,"bounds",null);if(d){var f=s(d,"x",0),p=s(d,"y",0),g=s(d,"width",e),v=s(d,"height",i);u.setBounds(f,p,g,v)}}return this},getCamera:function(t){for(var e=this.cameras,i=0;i<e.length;i++)if(e[i].name===t)return e[i];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,i=t.x,r=t.y,n=[],s=0;s<e.length;s++){var o=e[s];o.visible&&o.inputEnabled&&a(o,i,r)&&n.unshift(o)}return n},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0,r=this.cameras,n=0;n<t.length;n++){var s=r.indexOf(t[n]);-1!==s&&(e?r[s].destroy():r[s].renderList=[],r.splice(s,1),i++)}return!this.main&&r[0]&&(this.main=r[0]),i},render:function(t,e){for(var i=this.scene,r=this.cameras,n=0;n<this.cameras.length;n++){var s=r[n];if(s.visible&&s.alpha>0){s.preRender();var o=this.getVisibleChildren(e.getChildren(),s);t.render(i,o,s)}}},getVisibleChildren:function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r];n.willRender(e)&&i.push(n)}return i},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(t,e)},onResize:function(t,e,i,r,n){for(var s=0;s<this.cameras.length;s++){var o=this.cameras[s];0===o._x&&0===o._y&&o._width===r&&o._height===n&&o.setSize(e.width,e.height)}},resize:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(l.UPDATE,this.update,this),e.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",u,"cameras"),t.exports=u},function(t,e){t.exports="enterfullscreen"},function(t,e){t.exports="fullscreenfailed"},function(t,e){t.exports="fullscreenunsupported"},function(t,e){t.exports="leavefullscreen"},function(t,e){t.exports="orientationchange"},function(t,e){t.exports="resize"},function(t,e,i){t.exports={Config:i(346),CreateRenderer:i(366),DebugHeader:i(384),Events:i(22),TimeStep:i(385),VisibilityHandler:i(387)}},function(t,e){var i,r,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var h,l=[],u=!1,c=-1;function d(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&f())}function f(){if(!u){var t=a(d);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new p(t,e)),1!==l.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){var r=i(136),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||r.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll")),n)},function(t,e,i){var r=i(136),n={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return n;n.audioData=!!window.Audio,n.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!!t.canPlayType;try{if(e&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(n.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(n.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(n.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(n.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(n.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(n.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(r.edge)n.dolby=!0;else if(r.safari&&r.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10);(10===i&&s>=11||i>10)&&(n.dolby=!0)}}catch(t){}return n}()},function(t,e){var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return i;var t=document.createElement("video"),e=!!t.canPlayType;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch(t){}return i}()},function(t,e){var i={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"==typeof importScripts)return i;var t,e="Fullscreen",r="FullScreen",n=["request"+e,"request"+r,"webkitRequest"+e,"webkitRequest"+r,"msRequest"+e,"msRequest"+r,"mozRequest"+r,"mozRequest"+e];for(t=0;t<n.length;t++)if(document.documentElement[n[t]]){i.available=!0,i.request=n[t];break}var s=["cancel"+r,"exit"+e,"webkitCancel"+r,"webkitExit"+e,"msCancel"+r,"msExit"+e,"mozCancel"+r,"mozExit"+e];if(i.available)for(t=0;t<s.length;t++)if(document[s[t]]){i.cancel=s[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}()},function(t,e,i){t.exports={Between:i(349),BetweenPoints:i(350),BetweenPointsY:i(813),BetweenY:i(814),CounterClockwise:i(815),Normalize:i(351),Random:i(816),RandomDegrees:i(817),Reverse:i(818),RotateTo:i(819),ShortestBetween:i(820),Wrap:i(269),WrapDegrees:i(270)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},function(t,e){t.exports=function(t,e,i,r){return Math.atan2(i-t,r-e)}},function(t,e,i){var r=i(14);t.exports=function(t){return t>Math.PI&&(t-=r.PI2),Math.abs(((t+r.TAU)%r.PI2-r.PI2)%r.PI2)}},function(t,e,i){var r=i(137);t.exports=function(){return r(-Math.PI,Math.PI)}},function(t,e,i){var r=i(137);t.exports=function(){return r(-180,180)}},function(t,e,i){var r=i(351);t.exports=function(t){return r(t+Math.PI)}},function(t,e,i){var r=i(14);t.exports=function(t,e,i){return void 0===i&&(i=.05),t===e||(Math.abs(e-t)<=i||Math.abs(e-t)>=r.PI2-i?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=r.PI2:e-=r.PI2),e>t?t+=i:e<t&&(t-=i))),t}},function(t,e){t.exports=function(t,e){var i=e-t;return 0===i?0:i-360*Math.floor((i- -180)/360)}},function(t,e,i){t.exports={Between:i(50),BetweenPoints:i(352),BetweenPointsSquared:i(822),Chebyshev:i(823),Power:i(824),Snake:i(825),Squared:i(353)}},function(t,e){t.exports=function(t,e){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r}},function(t,e){t.exports=function(t,e,i,r){return Math.max(Math.abs(t-i),Math.abs(e-r))}},function(t,e){t.exports=function(t,e,i,r,n){return void 0===n&&(n=2),Math.sqrt(Math.pow(i-t,n)+Math.pow(r-e,n))}},function(t,e){t.exports=function(t,e,i,r){return Math.abs(t-i)+Math.abs(e-r)}},function(t,e,i){t.exports={Back:i(334),Bounce:i(335),Circular:i(336),Cubic:i(337),Elastic:i(338),Expo:i(339),Linear:i(340),Quadratic:i(341),Quartic:i(342),Quintic:i(343),Sine:i(344),Stepped:i(345)}},function(t,e,i){t.exports={Ceil:i(828),Equal:i(124),Floor:i(829),GreaterThan:i(354),LessThan:i(355)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},function(t,e,i){t.exports={Bezier:i(831),CatmullRom:i(832),CubicBezier:i(358),Linear:i(833),QuadraticBezier:i(359),SmoothStep:i(360),SmootherStep:i(834)}},function(t,e,i){var r=i(356);t.exports=function(t,e){for(var i=0,n=t.length-1,s=0;s<=n;s++)i+=Math.pow(1-e,n-s)*Math.pow(e,s)*t[s]*r(n,s);return i}},function(t,e,i){var r=i(194);t.exports=function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n);return t[0]===t[i]?(e<0&&(s=Math.floor(n=i*(1+e))),r(n-s,t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i])):e<0?t[0]-(r(-n,t[0],t[0],t[1],t[1])-t[0]):e>1?t[i]-(r(n-i,t[i],t[i],t[i-1],t[i-1])-t[i]):r(n-s,t[s?s-1:0],t[s],t[i<s+1?i:s+1],t[i<s+2?i:s+2])}},function(t,e,i){var r=i(135);t.exports=function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n);return e<0?r(t[0],t[1],n):e>1?r(t[i],t[i-1],i-n):r(t[s],t[s+1>i?i:s+1],n-s)}},function(t,e,i){var r=i(183);t.exports=function(t,e,i){return e+(i-e)*r(t,0,1)}},function(t,e,i){t.exports={GetNext:i(361),IsSize:i(138),IsValue:i(836)}},function(t,e){t.exports=function(t){return t>0&&0==(t&t-1)}},function(t,e,i){t.exports={Ceil:i(139),Floor:i(76),To:i(838)}},function(t,e){t.exports=function(t,e,i,r){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),r?(i+t)/e:i+t)}},function(t,e,i){var r=new(i(0))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,i=this.n;t=t.toString();for(var r=0;r<t.length;r++)e=.02519603282416938*(i+=t.charCodeAt(r)),e-=i=e>>>0,i=(e*=i)>>>0,i+=4294967296*(e-=i);return this.n=i,2.3283064365386963e-10*(i>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(this.frac()*(e+1)),r=t[i];t[i]=t[e],t[e]=r}return t}});t.exports=r},function(t,e){t.exports=function(t){for(var e=0,i=0;i<t.length;i++)e+=+t[i];return e/t.length}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var r=Math.pow(i,-e);return Math.ceil(t*r)/r}},function(t,e){t.exports=function(t,e){return Math.abs(t-e)}},function(t,e,i){var r=i(18),n=i(0),s=i(69),o=i(1),a=new s,h=new n({initialize:function t(e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=t.DefaultOrder),this._x=e,this._y=i,this._z=r,this._order=n,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,i,r){return void 0===r&&(r=this._order),this._x=t,this._y=e,this._z=i,this._order=r,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,i){return void 0===e&&(e=this._order),void 0===i&&(i=!1),a.fromQuat(t),this.setFromRotationMatrix(a,e,i)},setFromRotationMatrix:function(t,e,i){void 0===e&&(e=this._order),void 0===i&&(i=!1);var n=t.val,s=n[0],o=n[4],a=n[8],h=n[1],l=n[5],u=n[9],c=n[2],d=n[6],f=n[10],p=0,g=0,v=0,m=.99999;switch(e){case"XYZ":g=Math.asin(r(a,-1,1)),Math.abs(a)<m?(p=Math.atan2(-u,f),v=Math.atan2(-o,s)):p=Math.atan2(d,l);break;case"YXZ":p=Math.asin(-r(u,-1,1)),Math.abs(u)<m?(g=Math.atan2(a,f),v=Math.atan2(h,l)):g=Math.atan2(-c,s);break;case"ZXY":p=Math.asin(r(d,-1,1)),Math.abs(d)<m?(g=Math.atan2(-c,f),v=Math.atan2(-o,l)):v=Math.atan2(h,s);break;case"ZYX":g=Math.asin(-r(c,-1,1)),Math.abs(c)<m?(p=Math.atan2(d,f),v=Math.atan2(h,s)):v=Math.atan2(-o,l);break;case"YZX":v=Math.asin(r(h,-1,1)),Math.abs(h)<m?(p=Math.atan2(-u,l),g=Math.atan2(-c,s)):g=Math.atan2(a,f);break;case"XZY":v=Math.asin(-r(o,-1,1)),Math.abs(o)<m?(p=Math.atan2(d,l),g=Math.atan2(a,s)):p=Math.atan2(-u,f)}return this._x=p,this._y=g,this._z=v,this._order=e,i&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",t.exports=h},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var r=Math.pow(i,-e);return Math.floor(t*r)/r}},function(t,e){t.exports=function(t,e){return t/e/1e3}},function(t,e){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t,e,i){return Math.min(t+e,i)}},function(t,e){t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var i=Math.floor(e/2);return e%2==0?(t[i]+t[i-1])/2:t[i]}},function(t,e){t.exports=function(t,e,i){return Math.max(t-e,i)}},function(t,e){t.exports=function(t,e,i,r){void 0===i&&(i=e+1);var n=(t-e)/(i-e);return n>1?void 0!==r?(n=(r-t)/(r-i))<0&&(n=0):n=1:n<0&&(n=0),n}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI;return t.x=Math.cos(i)*e,t.y=Math.sin(i)*e,t}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*e;return t.x=Math.cos(i)*n,t.y=Math.sin(i)*n,t.z=r*e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},function(t,e){t.exports=function(t,e,i,r,n){return t.x=e+n*Math.cos(r),t.y=i+n*Math.sin(r),t}},function(t,e){t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var r=Math.pow(i,-e);return Math.round(t*r)/r}},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=1),void 0===i&&(i=1),void 0===r&&(r=1),r*=Math.PI/t;for(var n=[],s=[],o=0;o<t;o++)e+=(i-=e*r)*r,n[o]=i,s[o]=e;return{sin:s,cos:n,length:t}}},function(t,e,i){var r=i(3);t.exports=function(t,e,i,n){void 0===n&&(n=new r);var s=0,o=0;return t>0&&t<=e*i&&(s=t>e-1?t-(o=Math.floor(t/e))*e:t),n.set(s,o)}},function(t,e){t.exports=function(t,e,i){return Math.abs(t-e)<=i}},function(t,e,i){var r=i(39),n=i(69),s=i(365),o=new n,a=new s,h=new r;t.exports=function(t,e,i){return a.setAxisAngle(e,i),o.fromRotationTranslation(a,h.set(0,0,0)),t.transformMat4(o)}},function(t,e){t.exports="addtexture"},function(t,e){t.exports="onerror"},function(t,e){t.exports="onload"},function(t,e){t.exports="ready"},function(t,e){t.exports="removetexture"},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,e){t.exports="pipelineafterflush"},function(t,e){t.exports="pipelinebeforeflush"},function(t,e){t.exports="pipelinebind"},function(t,e){t.exports="pipelineboot"},function(t,e){t.exports="pipelinedestroy"},function(t,e){t.exports="pipelinerebind"},function(t,e){t.exports="pipelineresize"},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,e,i){t.exports={GenerateTexture:i(388),Palettes:i(889)}},function(t,e,i){t.exports={ARNE16:i(389),C64:i(890),CGA:i(891),JMP:i(892),MSX:i(893)}},function(t,e){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,e){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,e,i){t.exports={Path:i(895),MoveTo:i(393),CubicBezier:i(390),Curve:i(94),Ellipse:i(391),Line:i(392),QuadraticBezier:i(394),Spline:i(395)}},function(t,e,i){var r=i(0),n=i(390),s=i(391),o=i(5),a=i(392),h=i(393),l=i(394),u=i(10),c=i(395),d=i(3),f=i(14),p=new r({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,i){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,i)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new a(e,t)),this},cubicBezierTo:function(t,e,i,r,s,o){var a,h,l,u=this.getEndPoint();return t instanceof d?(a=t,h=e,l=i):(a=new d(i,r),h=new d(s,o),l=new d(t,e)),this.add(new n(u,a,h,l))},quadraticBezierTo:function(t,e,i,r){var n,s,o=this.getEndPoint();return t instanceof d?(n=t,s=e):(n=new d(i,r),s=new d(t,e)),this.add(new l(o,n,s))},draw:function(t,e){for(var i=0;i<this.curves.length;i++){var r=this.curves[i];r.active&&r.draw(t,e)}return t},ellipseTo:function(t,e,i,r,n,o){var a=new s(0,0,t,e,i,r,n,o),h=this.getEndPoint(this._tmpVec2A),l=a.getStartPoint(this._tmpVec2B);return h.subtract(l),a.x=h.x,a.y=h.y,this.add(a)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var i=t.curves[e];switch(i.type){case"LineCurve":this.add(a.fromJSON(i));break;case"EllipseCurve":this.add(s.fromJSON(i));break;case"SplineCurve":this.add(c.fromJSON(i));break;case"CubicBezierCurve":this.add(n.fromJSON(i));break;case"QuadraticBezierCurve":this.add(l.fromJSON(i))}}return this},getBounds:function(t,e){void 0===t&&(t=new u),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var i=new u,r=f.MIN_SAFE_INTEGER,n=f.MIN_SAFE_INTEGER,s=0;s<this.curves.length;s++){var o=this.curves[s];o.active&&(o.getBounds(i,e),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),r=Math.max(r,i.right),n=Math.max(n,i.bottom))}return t.right=r,t.bottom=n,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0;i<this.curves.length;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new d),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new d);for(var i=t*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=i){var s=r[n]-i,o=this.curves[n],a=o.getLength(),h=0===a?0:1-s/a;return o.getPointAt(h,e)}n++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,i=[],r=0;r<this.curves.length;r++){var n=this.curves[r];if(n.active)for(var s=n.getResolution(t),o=n.getPoints(s),a=0;a<o.length;a++){var h=o[a];e&&e.equals(h)||(i.push(h),e=h)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},getRandomPoint:function(t){return void 0===t&&(t=new d),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new d),t.copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new d);for(var i=t*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=i){var s=r[n]-i,o=this.curves[n],a=o.getLength(),h=0===a?0:1-s/a;return o.getTangentAt(h,e)}n++}return null},lineTo:function(t,e){t instanceof d?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var i=this.getEndPoint(this._tmpVec2A);return this.add(new a([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new c(t))},moveTo:function(t,e){return t instanceof d?this.add(new h(t.x,t.y)):this.add(new h(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",(function(t,e){return new p(t,e)})),t.exports=p},function(t,e,i){t.exports={DataManager:i(101),DataManagerPlugin:i(897),Events:i(315)}},function(t,e,i){var r=i(0),n=i(101),s=i(24),o=i(20),a=new r({Extends:n,initialize:function(t){n.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){n.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});s.register("DataManagerPlugin",a,"data"),t.exports=a},function(t,e,i){t.exports={Align:i(899),BaseShader:i(396),Bounds:i(902),Canvas:i(906),Color:i(397),ColorMatrix:i(198),Masks:i(916),RGB:i(200)}},function(t,e,i){var r=i(123),n=i(17),s={In:i(900),To:i(901)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={BottomCenter:i(290),BottomLeft:i(291),BottomRight:i(292),Center:i(293),LeftCenter:i(295),QuickSet:i(289),RightCenter:i(296),TopCenter:i(297),TopLeft:i(298),TopRight:i(299)}},function(t,e,i){t.exports={BottomCenter:i(277),BottomLeft:i(278),BottomRight:i(279),LeftBottom:i(280),LeftCenter:i(281),LeftTop:i(282),QuickSet:i(276),RightBottom:i(283),RightCenter:i(284),RightTop:i(285),TopCenter:i(286),TopLeft:i(287),TopRight:i(288)}},function(t,e,i){t.exports={CenterOn:i(294),GetBottom:i(42),GetBounds:i(903),GetCenterX:i(87),GetCenterY:i(89),GetLeft:i(43),GetOffsetX:i(904),GetOffsetY:i(905),GetRight:i(44),GetTop:i(45),SetBottom:i(55),SetCenterX:i(88),SetCenterY:i(90),SetLeft:i(53),SetRight:i(54),SetTop:i(52)}},function(t,e,i){var r=i(42),n=i(43),s=i(44),o=i(45);t.exports=function(t,e){void 0===e&&(e={});var i=n(t),a=o(t);return e.x=i,e.y=a,e.width=s(t)-i,e.height=r(t)-a,e}},function(t,e){t.exports=function(t){return t.width*t.originX}},function(t,e){t.exports=function(t){return t.height*t.originY}},function(t,e,i){t.exports={CanvasInterpolation:i(367),CanvasPool:i(31),Smoothing:i(192),TouchAction:i(907),UserSelect:i(908)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(i){t.style[i+"user-select"]=e})),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,e,i){var r=i(103);t.exports=function(t){void 0===t&&(t=1024);var e,i=[],n=255,s=255,o=0,a=0;for(e=0;e<=n;e++)i.push({r:s,g:e,b:a,color:r(s,e,a)});for(o=255,e=n;e>=0;e--)i.push({r:e,g:o,b:a,color:r(e,o,a)});for(s=0,e=0;e<=n;e++,o--)i.push({r:s,g:o,b:e,color:r(s,o,e)});for(o=0,a=255,e=0;e<=n;e++,a--,s++)i.push({r:s,g:o,b:a,color:r(s,o,a)});if(1024===t)return i;var h=[],l=0,u=1024/t;for(e=0;e<t;e++)h.push(i[Math.floor(l)]),l+=u;return h}},function(t,e){t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(e.a=t>>>24),e}},function(t,e,i){var r=i(38),n=i(399);t.exports=function(t,e,i){var s=i,o=i,a=i;if(0!==e){var h=i<.5?i*(1+e):i+e-i*e,l=2*i-h;s=n(l,h,t+1/3),o=n(l,h,t),a=n(l,h,t-1/3)}return(new r).setGLTo(s,o,a,1)}},function(t,e,i){var r=i(188);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=[],n=0;n<=359;n++)i.push(r(n/359,t,e));return i}},function(t,e,i){var r=i(135),n=function(t,e,i,n,s,o,a,h){void 0===a&&(a=100),void 0===h&&(h=0);var l=h/a;return{r:r(t,n,l),g:r(e,s,l),b:r(i,o,l)}};t.exports={RGBWithRGB:n,ColorWithRGB:function(t,e,i,r,s,o){return void 0===s&&(s=100),void 0===o&&(o=0),n(t.r,t.g,t.b,e,i,r,s,o)},ColorWithColor:function(t,e,i,r){return void 0===i&&(i=100),void 0===r&&(r=0),n(t.r,t.g,t.b,e.r,e.g,e.b,i,r)}}},function(t,e,i){var r=i(195),n=i(38);t.exports=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=255),new n(r(t,e),r(t,e),r(t,e))}},function(t,e,i){var r=i(398);t.exports=function(t,e,i,n,s){return void 0===n&&(n=255),void 0===s&&(s="#"),"#"===s?"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1,7):"0x"+r(n)+r(t)+r(e)+r(i)}},function(t,e,i){t.exports={BitmapMask:i(310),GeometryMask:i(311)}},function(t,e,i){var r={AddToDOM:i(142),DOMContentLoaded:i(400),GetInnerHeight:i(401),GetScreenOrientation:i(402),GetTarget:i(407),ParseXML:i(408),RemoveFromDOM:i(202),RequestAnimationFrame:i(386)};t.exports=r},function(t,e,i){t.exports={EventEmitter:i(919)}},function(t,e,i){var r=i(0),n=i(9),s=i(24),o=new r({Extends:n,initialize:function(){n.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",o,"events"),t.exports=o},function(t,e,i){var r=i(142),n=i(321),s=i(325),o=i(31),a=i(0),h=i(346),l=i(921),u=i(366),c=i(101),d=i(384),f=i(347),p=i(400),g=i(9),v=i(22),m=i(409),y=i(24),x=i(414),b=i(415),w=i(417),T=i(106),S=i(422),E=i(385),C=i(387),_=i(426),A=new a({initialize:function(t){this.config=new h(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new n(this),this.textures=new S(this),this.cache=new s(this),this.registry=new c(this),this.input=new m(this,this.config),this.scene=new w(this,this.config.sceneConfig),this.device=f,this.scale=new b(this,this.config),this.sound=null,this.sound=_.create(this),this.loop=new E(this,this.config.fps),this.plugins=new x(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,p(this.boot.bind(this))},boot:function(){y.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),l(this),d(this),r(this.canvas,this.config.parent),this.textures.once(T.READY,this.texturesReady,this),this.events.emit(v.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(v.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),C(this);var t=this.events;t.on(v.HIDDEN,this.onHidden,this),t.on(v.VISIBLE,this.onVisible,this),t.on(v.BLUR,this.onBlur,this),t.on(v.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(v.PRE_STEP,t,e),i.emit(v.STEP,t,e),this.scene.update(t,e),i.emit(v.POST_STEP,t,e);var r=this.renderer;r.preRender(),i.emit(v.PRE_RENDER,r,t,e),this.scene.render(r),r.postRender(),i.emit(v.POST_RENDER,r,t,e)},headlessStep:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(v.PRE_STEP,t,e),i.emit(v.STEP,t,e),this.scene.update(t,e),i.emit(v.POST_STEP,t,e),i.emit(v.PRE_RENDER),i.emit(v.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(v.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(v.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.scene.destroy(),this.events.emit(v.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=A},function(t,e,i){var r=i(142);t.exports=function(t){var e=t.config;if(e.parent&&e.domCreateContainer){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+e.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=i,r(i,e.parent)}}},function(t,e){t.exports="boot"},function(t,e){t.exports="destroy"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameout"},function(t,e){t.exports="gameover"},function(t,e){t.exports="gameobjectdown"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameobjectmove"},function(t,e){t.exports="gameobjectout"},function(t,e){t.exports="gameobjectover"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="wheel"},function(t,e){t.exports="gameobjectup"},function(t,e){t.exports="gameobjectwheel"},function(t,e){t.exports="boot"},function(t,e){t.exports="process"},function(t,e){t.exports="update"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointerdownoutside"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="pointerupoutside"},function(t,e){t.exports="wheel"},function(t,e){t.exports="pointerlockchange"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="addfile"},function(t,e){t.exports="complete"},function(t,e){t.exports="filecomplete"},function(t,e){t.exports="filecomplete-"},function(t,e){t.exports="loaderror"},function(t,e){t.exports="load"},function(t,e){t.exports="fileprogress"},function(t,e){t.exports="postprocess"},function(t,e){t.exports="progress"},function(t,e){t.exports="start"},function(t,e,i){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,e){t.exports=function(t,e,i){if(i.getElementsByTagName("TextureAtlas")){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height);for(var n,s=i.getElementsByTagName("SubTexture"),o=0;o<s.length;o++){var a=s[o].attributes,h=a.name.value,l=parseInt(a.x.value,10),u=parseInt(a.y.value,10),c=parseInt(a.width.value,10),d=parseInt(a.height.value,10);if(n=t.add(h,e,l,u,c,d),a.frameX){var f=Math.abs(parseInt(a.frameX.value,10)),p=Math.abs(parseInt(a.frameY.value,10)),g=parseInt(a.frameWidth.value,10),v=parseInt(a.frameHeight.value,10);n.setTrim(c,d,f,p,g,v)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e){t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},function(t,e,i){var r=i(77);t.exports=function(t,e,i){if(i.frames||i.textures){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);for(var s,o=Array.isArray(i.textures)?i.textures[e].frames:i.frames,a=0;a<o.length;a++){var h=o[a];s=t.add(h.filename,e,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&s.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(s.rotated=!0,s.updateUVsInverted());var l=h.anchor||h.pivot;l&&(s.customPivot=!0,s.pivotX=l.x,s.pivotY=l.y),s.customData=r(h)}for(var u in i)"frames"!==u&&(Array.isArray(i[u])?t.customData[u]=i[u].slice(0):t.customData[u]=i[u]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,e,i){var r=i(77);t.exports=function(t,e,i){if(i.frames){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);var s,o=i.frames;for(var a in o)if(o.hasOwnProperty(a)){var h=o[a];s=t.add(a,e,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&s.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(s.rotated=!0,s.updateUVsInverted());var l=h.anchor||h.pivot;l&&(s.customPivot=!0,s.pivotX=l.x,s.pivotY=l.y),s.customData=r(h)}for(var u in i)"frames"!==u&&(Array.isArray(i[u])?t.customData[u]=i[u].slice(0):t.customData[u]=i[u]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,e,i){var r=i(2);t.exports=function(t,e,i,n,s,o,a){var h=r(a,"frameWidth",null),l=r(a,"frameHeight",h);if(null===h)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var u=t.source[e];t.add("__BASE",e,0,0,u.width,u.height);var c=r(a,"startFrame",0),d=r(a,"endFrame",-1),f=r(a,"margin",0),p=r(a,"spacing",0),g=Math.floor((s-f+p)/(h+p))*Math.floor((o-f+p)/(l+p));0===g&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(c>g||c<-g)&&(c=0),c<0&&(c=g+c),-1!==d&&(g=c+(d+1));for(var v=f,m=f,y=0,x=0,b=0;b<g;b++){y=0,x=0;var w=v+h,T=m+l;w>s&&(y=w-s),T>o&&(x=T-o),t.add(b,e,i+v,n+m,h-y,l-x),(v+=h+p)+h>s&&(v=f,m+=l+p)}return t}},function(t,e,i){var r=i(2);t.exports=function(t,e,i){var n=r(i,"frameWidth",null),s=r(i,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var o=t.source[0];t.add("__BASE",0,0,0,o.width,o.height);var a,h=r(i,"startFrame",0),l=r(i,"endFrame",-1),u=r(i,"margin",0),c=r(i,"spacing",0),d=e.cutX,f=e.cutY,p=e.cutWidth,g=e.cutHeight,v=e.realWidth,m=e.realHeight,y=Math.floor((v-u+c)/(n+c)),x=Math.floor((m-u+c)/(s+c)),b=y*x,w=e.x,T=n-w,S=n-(v-p-w),E=e.y,C=s-E,_=s-(m-g-E);(h>b||h<-b)&&(h=0),h<0&&(h=b+h),-1!==l&&(b=h+(l+1));for(var A=u,M=u,P=0,k=e.sourceIndex,O=0;O<x;O++){for(var R=0===O,L=O===x-1,I=0;I<y;I++){var F=0===I,D=I===y-1;if(a=t.add(P,k,d+A,f+M,n,s),F||R||D||L){var B=F?w:0,N=R?E:0,z=0,U=0;F&&(z+=n-T),D&&(z+=n-S),R&&(U+=s-C),L&&(U+=s-_);var Y=n-z,X=s-U;a.cutWidth=Y,a.cutHeight=X,a.setTrim(n,s,B,N,Y,X)}A+=c,A+=F?T:D?S:n,P++}A=u,M+=c,M+=R?C:L?_:s}return t}},function(t,e){var i=0,r=function(t,e,r,n){var s=i-n.y-n.height;t.add(r,e,n.x,s,n.width,n.height)};t.exports=function(t,e,n){var s=t.source[e];t.add("__BASE",e,0,0,s.width,s.height),i=s.height;for(var o=n.split("\n"),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",l="",u={x:0,y:0,width:0,height:0},c=0;c<o.length;c++){var d=o[c].match(a);if(d){var f="- "===d[1],p=d[2],g=d[3];if(f&&(l!==h&&(r(t,e,l,u),h=l),u={x:0,y:0,width:0,height:0}),"name"!==p)switch(p){case"x":case"y":case"width":case"height":u[p]=parseInt(g,10)}else l=g}}return l!==h&&r(t,e,l,u),t}},function(t,e){t.exports="complete"},function(t,e){t.exports="decoded"},function(t,e){t.exports="decodedall"},function(t,e){t.exports="destroy"},function(t,e){t.exports="detune"},function(t,e){t.exports="detune"},function(t,e){t.exports="mute"},function(t,e){t.exports="rate"},function(t,e){t.exports="volume"},function(t,e){t.exports="loop"},function(t,e){t.exports="looped"},function(t,e){t.exports="mute"},function(t,e){t.exports="pan"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="pause"},function(t,e){t.exports="play"},function(t,e){t.exports="rate"},function(t,e){t.exports="resumeall"},function(t,e){t.exports="resume"},function(t,e){t.exports="seek"},function(t,e){t.exports="stopall"},function(t,e){t.exports="stop"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="volume"},function(t,e,i){var r={Events:i(75),DisplayList:i(1012),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(1040),Components:i(11),GetCalcMatrix:i(19),BuildGameObject:i(28),BuildGameObjectAnimation:i(439),GameObject:i(15),BitmapText:i(148),Blitter:i(213),Bob:i(440),Container:i(214),DOMElement:i(442),DynamicBitmapText:i(215),Extern:i(444),Graphics:i(216),Group:i(113),Image:i(125),Layer:i(219),Particles:i(1074),PathFollower:i(457),RenderTexture:i(221),RetroFont:i(1082),Rope:i(223),Sprite:i(73),Text:i(224),GetTextSize:i(458),MeasureText:i(460),TextStyle:i(459),TileSprite:i(225),Zone:i(129),Video:i(226),Shape:i(34),Arc:i(461),Curve:i(462),Ellipse:i(463),Grid:i(464),IsoBox:i(465),IsoTriangle:i(466),Line:i(467),Polygon:i(468),Rectangle:i(473),Star:i(474),Triangle:i(475),Factories:{Blitter:i(1130),Container:i(1131),DOMElement:i(1132),DynamicBitmapText:i(1133),Extern:i(1134),Graphics:i(1135),Group:i(1136),Image:i(1137),Layer:i(1138),Particles:i(1139),PathFollower:i(1140),RenderTexture:i(1141),Rope:i(1142),Sprite:i(1143),StaticBitmapText:i(1144),Text:i(1145),TileSprite:i(1146),Zone:i(1147),Video:i(1148),Arc:i(1149),Curve:i(1150),Ellipse:i(1151),Grid:i(1152),IsoBox:i(1153),IsoTriangle:i(1154),Line:i(1155),Polygon:i(1156),Rectangle:i(1157),Star:i(1158),Triangle:i(1159)},Creators:{Blitter:i(1160),Container:i(1161),DynamicBitmapText:i(1162),Graphics:i(1163),Group:i(1164),Image:i(1165),Layer:i(1166),Particles:i(1167),RenderTexture:i(1168),Rope:i(1169),Sprite:i(1170),StaticBitmapText:i(1171),Text:i(1172),TileSprite:i(1173),Zone:i(1174),Video:i(1175)}};r.Shader=i(229),r.Mesh=i(230),r.PointLight=i(150),r.Factories.Shader=i(1184),r.Factories.Mesh=i(1185),r.Factories.PointLight=i(1186),r.Creators.Shader=i(1187),r.Creators.Mesh=i(1188),r.Creators.PointLight=i(1189),r.Light=i(481),r.LightsManager=i(482),r.LightsPlugin=i(1190),t.exports=r},function(t,e,i){var r=i(0),n=i(110),s=i(24),o=i(75),a=i(20),h=i(79),l=new r({Extends:n,initialize:function(t){n.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(o.ADDED_TO_SCENE,t,this.scene),this.events.emit(a.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(o.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,e=t.length;e--;)t[e].destroy(!0);t.length=0,this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});s.register("DisplayList",l,"displayList"),t.exports=l},function(t,e,i){t.exports={CheckMatrix:i(209),MatrixToString:i(1014),ReverseColumns:i(1015),ReverseRows:i(1016),Rotate180:i(1017),RotateLeft:i(1018),RotateMatrix:i(147),RotateRight:i(1019),Translate:i(1020),TransposeMatrix:i(435)}},function(t,e,i){var r=i(186),n=i(209);t.exports=function(t){var e="";if(!n(t))return e;for(var i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++){var o=t[i][s].toString();e+="undefined"!==o?r(o,2):"?",s<t[i].length-1&&(e+=" |")}if(i<t.length-1){e+="\n";for(var a=0;a<t[i].length;a++)e+="---",a<t[i].length-1&&(e+="+");e+="\n"}}return e}},function(t,e){t.exports=function(t){return t.reverse()}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},function(t,e,i){var r=i(147);t.exports=function(t){return r(t,180)}},function(t,e,i){var r=i(147);t.exports=function(t){return r(t,90)}},function(t,e,i){var r=i(147);t.exports=function(t){return r(t,-90)}},function(t,e,i){var r=i(178),n=i(179);t.exports=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0!==i&&(i<0?r(t,Math.abs(i)):n(t,i)),0!==e)for(var s=0;s<t.length;s++){var o=t[s];e<0?r(o,Math.abs(e)):n(o,e)}return t}},function(t,e){t.exports=function(t,e,i,r,n){if(void 0===n&&(n=t),i>0){var s=i-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),r&&r.call(n,e),e):null;for(var o=e.length-1;o>=0;)-1!==t.indexOf(e[o])&&e.splice(o,1),o--;if(0===(o=e.length))return null;i>0&&o>s&&(e.splice(s),o=s);for(var a=0;a<o;a++){var h=e[a];t.push(h),r&&r.call(n,h)}return e}},function(t,e){t.exports=function(t,e,i,r,n,s){if(void 0===i&&(i=0),void 0===s&&(s=t),r>0){var o=r-t.length;if(o<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(i,0,e),n&&n.call(s,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;r>0&&a>o&&(e.splice(o),a=o);for(var h=a-1;h>=0;h--){var l=e[h];t.splice(i,0,l),n&&n.call(s,l)}return e}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i<t.length&&(t.splice(i,1),t.push(e)),e}},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var o=0;if(r(t,n,s))for(var a=n;a<s;a++)t[a][e]===i&&o++;return o}},function(t,e){t.exports=function(t,e,i){var r,n=[null];for(r=3;r<arguments.length;r++)n.push(arguments[r]);for(r=0;r<t.length;r++)n[0]=t[r],e.apply(i,n);return t}},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=t.length),r(t,n,s)){var o,a=[null];for(o=5;o<arguments.length;o++)a.push(arguments[o]);for(o=n;o<s;o++)a[0]=t[o],e.apply(i,a)}return t}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);if(i>0){var r=t[i-1],n=t.indexOf(r);t[i]=r,t[n]=e}return t}},function(t,e){t.exports=function(t,e,i){var r=t.indexOf(e);if(-1===r||i<0||i>=t.length)throw new Error("Supplied index out of bounds");return r!==i&&(t.splice(r,1),t.splice(i,0,e)),e}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);if(-1!==i&&i<t.length-1){var r=t[i+1],n=t.indexOf(r);t[i]=r,t[n]=e}return t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var r=t.indexOf(e),n=t.indexOf(i);if(r<0||n<0)throw new Error("Supplied items must be elements of the same array");return r>n||(t.splice(r,1),n===t.length-1?t.push(e):t.splice(n,0,e)),t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var r=t.indexOf(e),n=t.indexOf(i);if(r<0||n<0)throw new Error("Supplied items must be elements of the same array");return r<n||(t.splice(r,1),0===n?t.unshift(e):t.splice(n,0,e)),t}},function(t,e,i){var r=i(363);t.exports=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=null),void 0===i&&(i=1),null===e&&(e=t,t=0);for(var n=[],s=Math.max(r((e-t)/(i||1)),0),o=0;o<s;o++)n.push(t),t+=i;return n}},function(t,e,i){var r=i(74);t.exports=function(t,e,i,n){if(void 0===n&&(n=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var s=r(t,e);return i&&i.call(n,s),s}},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){if(void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===s&&(s=t),r(t,e,i)){var o=i-e,a=t.splice(e,o);if(n)for(var h=0;h<a.length;h++){var l=a[h];n.call(s,l)}return a}return[]}},function(t,e,i){var r=i(74);t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var n=e+Math.floor(Math.random()*i);return r(t,n)}},function(t,e){t.exports=function(t,e,i){var r=t.indexOf(e),n=t.indexOf(i);return-1!==r&&-1===n&&(t[r]=i,!0)}},function(t,e){t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i>0&&(t.splice(i,1),t.unshift(e)),e}},function(t,e,i){var r=i(78);t.exports=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=t.length),r(t,n,s))for(var o=n;o<s;o++){var a=t[o];a.hasOwnProperty(e)&&(a[e]=i)}return t}},function(t,e){t.exports=function(t,e,i){if(e===i)return t;var r=t.indexOf(e),n=t.indexOf(i);if(r<0||n<0)throw new Error("Supplied items must be elements of the same array");return t[r]=i,t[n]=e,t}},function(t,e,i){var r=i(0),n=i(211),s=i(24),o=i(20),a=new r({Extends:n,initialize:function(t){n.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(o.PRE_UPDATE,this.update,this),t.on(o.UPDATE,this.sceneUpdate,this),t.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var i=this._active,r=i.length,n=0;n<r;n++){var s=i[n];s.active&&s.preUpdate.call(s,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(o.PRE_UPDATE,this.update,this),e.off(o.UPDATE,this.sceneUpdate,this),e.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",a,"updateList"),t.exports=a},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e){t.exports=function(t,e,i,r){if(void 0===i&&(i=!1),void 0===r)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var n,s,o,a=t.text,h=a.length,l=t.maxWidth,u=t.wordWrapCharCode,c=Number.MAX_VALUE,d=Number.MAX_VALUE,f=0,p=0,g=t.fontData.chars,v=t.fontData.lineHeight,m=t.letterSpacing,y=0,x=0,b=0,w=null,T=t._align,S=0,E=0,C=t.fontSize/t.fontData.size,_=C*t.scaleX,A=C*t.scaleY,M=null,P=0,k=[],O=Number.MAX_VALUE,R=0,L=0,I=0,F=[],D=[],B=null;if(l>0){for(n=0;n<h;n++)if(10!==(b=a.charCodeAt(n))){if(w=g[b]){if(null!==M)var N=w.kerning[P];b===u?null!==B&&(F.push({word:B.word,i:B.i,x:B.x*_,y:B.y*A,w:B.w*_,h:B.h*A,cr:!1}),B=null):(null===B&&(B={word:"",i:n,x:y,y:x,w:0,h:v,cr:!1}),B.word=B.word.concat(a[n]),B.w+=w.xOffset+w.xAdvance+(void 0!==N?N:0)),y+=w.xAdvance+m,M=w,P=b}}else null!==B&&(F.push({word:B.word,i:B.i,x:B.x*_,y:B.y*A,w:B.w*_,h:B.h*A,cr:!0}),B=null),y=0,x+=v,M=null;var z;null!==B&&F.push({word:B.word,i:B.i,x:B.x*_,y:B.y*A,w:B.w*_,h:B.h*A,cr:!1}),y=0,x=0,M=null,P=0;var U=0,Y=[];for(n=0;n<F.length;n++){var X=F[n],G=X.x,W=X.x+X.w;z&&(U=G-(G-(z.x+z.w)+z.w),z=null),G-U>l||W-U>l?(Y.push(X.i-1),X.cr?(Y.push(X.i+X.word.length),U=0,z=null):z=X):X.cr&&(Y.push(X.i+X.word.length),U=0,z=null)}for(n=Y.length-1;n>=0;n--)s=a,o=Y[n],"\n",a=s.substr(0,o)+"\n"+s.substr(o+1);r.wrappedText=a,h=a.length,F=[],B=null}var V=0;for(n=0;n<h;n++)if(10!==(b=a.charCodeAt(n))){if(w=g[b]){if(S=y,E=x,null!==M){var j=w.kerning[P];S+=void 0!==j?j:0}c>S&&(c=S),d>E&&(d=E);var H=S+w.xAdvance,q=E+v;f<H&&(f=H),p<q&&(p=q);var K=w.xOffset+w.xAdvance+(void 0!==j?j:0);b===u?null!==B&&(F.push({word:B.word,i:B.i,x:B.x*_,y:B.y*A,w:B.w*_,h:B.h*A}),B=null):(null===B&&(B={word:"",i:V,x:y,y:x,w:0,h:v}),B.word=B.word.concat(a[n]),B.w+=K),D.push({i:V,char:a[n],code:b,x:(w.xOffset+y)*C,y:(w.yOffset+x)*C,w:w.width*C,h:w.height*C,t:x*C,r:H*C,b:v*C,line:L,glyph:w}),y+=w.xAdvance+m,M=w,P=b,I=H*C,V++}}else null!==B&&(F.push({word:B.word,i:B.i,x:B.x*_,y:B.y*A,w:B.w*_,h:B.h*A}),B=null),y=0,x+=v,M=null,k[L]=I,I>R&&(R=I),I<O&&(O=I),L++,I=0;if(null!==B&&F.push({word:B.word,i:B.i,x:B.x*_,y:B.y*A,w:B.w*_,h:B.h*A}),k[L]=I,I>R&&(R=I),I<O&&(O=I),T>0)for(var Z=0;Z<D.length;Z++){var J=D[Z];if(1===T){var $=(R-k[J.line])/2;J.x+=$,J.r+=$}else if(2===T){var Q=R-k[J.line];J.x+=Q,J.r+=Q}}var tt=r.local,et=r.global,it=r.lines;return tt.x=c*C,tt.y=d*C,tt.width=f*C,tt.height=p*C,et.x=t.x-t._displayOriginX+c*_,et.y=t.y-t._displayOriginY+d*A,et.width=f*_,et.height=p*A,it.shortest=O,it.longest=R,it.lengths=k,e&&(tt.x=Math.ceil(tt.x),tt.y=Math.ceil(tt.y),tt.width=Math.ceil(tt.width),tt.height=Math.ceil(tt.height),et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),it.shortest=Math.ceil(O),it.longest=Math.ceil(R)),i&&(t._displayOriginX=t.originX*tt.width,t._displayOriginY=t.originY*tt.height,et.x=t.x-t._displayOriginX*t.scaleX,et.y=t.y-t._displayOriginY*t.scaleY,e&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y))),r.words=F,r.characters=D,r.lines.height=v,r.scale=C,r.scaleX=t.scaleX,r.scaleY=t.scaleY,r}},function(t,e,i){var r=i(212);t.exports=function(t,e,i,n,s,o,a){var h=t.sys.textures.get(i),l=h.get(n),u=t.sys.cache.xml.get(s);if(l&&u){var c=r(u,l,o,a,h);return t.sys.cache.bitmapFont.add(e,{data:c,texture:i,frame:n,fromAtlas:!0}),!0}return!1}},function(t,e,i){var r=i(1),n=i(1);r=i(1046),n=i(1048),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(1047),n=i(19),s=i(12);t.exports=function(t,e,i,o){if(0!==e._text.length){i.addToRenderList(e);var a,h,l,u=t.pipelines.set(e.pipeline,e),c=n(e,i,o).calc,d=i.roundPixels,f=i.alpha,p=e.charColors,g=e.tintFill,v=s.getTintAppendFloatAlpha,m=v(e.tintTopLeft,f*e._alphaTL),y=v(e.tintTopRight,f*e._alphaTR),x=v(e.tintBottomLeft,f*e._alphaBL),b=v(e.tintBottomRight,f*e._alphaBR),w=e.frame.glTexture,T=u.setGameObject(e),S=e.getTextBounds(!1).characters,E=e.dropShadowX,C=e.dropShadowY,_=0!==E||0!==C;if(t.pipelines.preBatch(e),_){var A=e.dropShadowColor,M=e.dropShadowAlpha,P=v(A,f*M*e._alphaTL),k=v(A,f*M*e._alphaTR),O=v(A,f*M*e._alphaBL),R=v(A,f*M*e._alphaBR);for(a=0;a<S.length;a++)l=(h=S[a]).glyph,32!==h.code&&0!==l.width&&0!==l.height&&r(u,e,h,l,E,C,c,d,P,k,O,R,1,w,T)}for(a=0;a<S.length;a++)if(l=(h=S[a]).glyph,32!==h.code&&0!==l.width&&0!==l.height)if(p[h.i]){var L=p[h.i],I=L.tintEffect,F=v(L.tintTL,f*e._alphaTL),D=v(L.tintTR,f*e._alphaTR),B=v(L.tintBL,f*e._alphaBL),N=v(L.tintBR,f*e._alphaBR);r(u,e,h,l,0,0,c,d,F,D,B,N,I,w,T)}else r(u,e,h,l,0,0,c,d,m,y,x,b,g,w,T);t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p){var g=i.x-e.displayOriginX+n,v=i.y-e.displayOriginY+s,m=g+i.w,y=v+i.h,x=o.getXRound(g,v,a),b=o.getYRound(g,v,a),w=o.getXRound(g,y,a),T=o.getYRound(g,y,a),S=o.getXRound(m,y,a),E=o.getYRound(m,y,a),C=o.getXRound(m,v,a),_=o.getYRound(m,v,a);t.batchQuad(e,x,b,w,T,S,E,C,_,r.u0,r.v0,r.u1,r.v1,h,l,u,c,d,f,p)}},function(t,e,i){var r=i(30);t.exports=function(t,e,i,n){var s=e._text,o=s.length,a=t.currentContext;if(0!==o&&r(t,a,e,i,n)){i.addToRenderList(e);var h=e.fromAtlas?e.frame:e.texture.frames.__BASE,l=e.fontData.chars,u=e.fontData.lineHeight,c=e._letterSpacing,d=0,f=0,p=0,g=null,v=0,m=0,y=0,x=0,b=0,w=0,T=null,S=0,E=h.source.image,C=h.cutX,_=h.cutY,A=e._fontSize/e.fontData.size,M=e._align,P=0,k=0,O=e.getTextBounds(!1);e.maxWidth>0&&(o=(s=O.wrappedText).length);var R=e._bounds.lines;1===M?k=(R.longest-R.lengths[0])/2:2===M&&(k=R.longest-R.lengths[0]),a.translate(-e.displayOriginX,-e.displayOriginY);for(var L=i.roundPixels,I=0;I<o;I++)if(10!==(p=s.charCodeAt(I))){if(g=l[p]){if(v=C+g.x,m=_+g.y,y=g.width,x=g.height,b=g.xOffset+d,w=g.yOffset+f,null!==T){var F=g.kerning[S];b+=void 0!==F?F:0}b*=A,w*=A,b+=k,d+=g.xAdvance+c,T=g,S=p,0!==y&&0!==x&&32!==p&&(L&&(b=Math.round(b),w=Math.round(w)),a.save(),a.translate(b,w),a.scale(A,A),a.drawImage(E,v,m,y,x,0,0,y,x),a.restore())}}else P++,1===M?k=(R.longest-R.lengths[P])/2:2===M&&(k=R.longest-R.lengths[P]),d=0,f+=u,T=null;a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1050),n=i(1051),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(25),n=i(12),s=new r;t.exports=function(t,e,i,r){var o=e.getRenderList();if(0!==o.length){var a=i.alpha*e.alpha;if(0!==a){i.addToRenderList(e);var h=t.pipelines.set(this.pipeline,e),l=i.scrollX*e.scrollFactorX,u=i.scrollY*e.scrollFactorY,c=s.copyFrom(i.matrix);r&&(c.multiplyWithOffset(r,-l,-u),l=0,u=0);var d=e.x-l,f=e.y-u,p=-1,g=i.roundPixels;t.pipelines.preBatch(e);for(var v=0;v<o.length;v++){var m=o[v],y=m.frame,x=m.alpha*a;if(0!==x){var b=y.width,w=y.height,T=d+m.x+y.x,S=f+m.y+y.y;m.flipX&&(b*=-1,T+=y.width),m.flipY&&(w*=-1,S+=y.height);var E=T+b,C=S+w,_=c.getX(T,S),A=c.getY(T,S),M=c.getX(E,C),P=c.getY(E,C),k=n.getTintAppendFloatAlpha(m.tint,x);if(y.sourceIndex!==p){var O=h.setGameObject(e,y);p=y.sourceIndex}g&&(_=Math.round(_),A=Math.round(A),M=Math.round(M),P=Math.round(P)),h.batchQuad(e,_,A,_,P,M,P,M,A,y.u0,y.v0,y.u1,y.v1,k,k,k,k,!1,y.glTexture,O)&&(p=-1)}}t.pipelines.postBatch(e)}}}},function(t,e){t.exports=function(t,e,i,r){var n=e.getRenderList();if(0!==n.length){var s=t.currentContext,o=i.alpha*e.alpha;if(0!==o){i.addToRenderList(e),s.globalCompositeOperation=t.blendModes[e.blendMode],s.imageSmoothingEnabled=!(!t.antialias||e.frame.source.scaleMode);var a=e.x-i.scrollX*e.scrollFactorX,h=e.y-i.scrollY*e.scrollFactorY;s.save(),r&&r.copyToContext(s);for(var l=i.roundPixels,u=0;u<n.length;u++){var c=n[u],d=c.flipX||c.flipY,f=c.frame,p=f.canvasData,g=f.x,v=f.y,m=1,y=1,x=c.alpha*o;0!==x&&(s.globalAlpha=x,d?(c.flipX&&(m=-1,g-=p.width),c.flipY&&(y=-1,v-=p.height),s.save(),s.translate(c.x+a,c.y+h),s.scale(m,y),s.drawImage(f.source.image,p.x,p.y,p.width,p.height,g,v,p.width,p.height),s.restore()):(l&&(g=Math.round(g),v=Math.round(v)),s.drawImage(f.source.image,p.x,p.y,p.width,p.height,g+c.x+a,v+c.y+h,p.width,p.height)))}s.restore()}}}},function(t,e,i){var r=i(1),n=i(1);r=i(1053),n=i(1054),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e);var n=e.list,s=n.length;if(0!==s){var o=e.localTransform;r?(o.loadIdentity(),o.multiply(r),o.translate(e.x,e.y),o.rotate(e.rotation),o.scale(e.scaleX,e.scaleY)):o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var a=-1!==e.blendMode;a||t.setBlendMode(0);for(var h=e.alpha,l=e.scrollFactorX,u=e.scrollFactorY,c=0;c<s;c++){var d=n[c];if(d.willRender(i)){var f,p,g,v;if(void 0!==d.alphaTopLeft)f=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,v=d.alphaBottomRight;else{var m=d.alpha;f=m,p=m,g=m,v=m}var y=d.scrollFactorX,x=d.scrollFactorY;a||d.blendMode===t.currentBlendMode||t.setBlendMode(d.blendMode);var b=d.mask;b&&b.preRenderWebGL(t,d,i);var w=d.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=c<s-1&&n[c+1].type===t.currentType,d.setScrollFactor(y*l,x*u),d.setAlpha(f*h,p*h,g*h,v*h),d.renderWebGL(t,d,i,o),d.setAlpha(f,p,g,v),d.setScrollFactor(y,x),b&&b.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e);var n=e.list;if(0!==n.length){var s=e.localTransform;r?(s.loadIdentity(),s.multiply(r),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var o=-1!==e.blendMode;o||t.setBlendMode(0);var a=e._alpha,h=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var u=0;u<n.length;u++){var c=n[u];if(c.willRender(i)){var d=c.alpha,f=c.scrollFactorX,p=c.scrollFactorY;o||c.blendMode===t.currentBlendMode||t.setBlendMode(c.blendMode),c.setScrollFactor(f*h,p*l),c.setAlpha(d*a),c.renderCanvas(t,c,i,s),c.setAlpha(d),c.setScrollFactor(f,p)}}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,i){var r=i(1),n=i(1);r=i(443),n=i(443),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,e,i){var r=i(1),n=i(1);r=i(1058),n=i(1059),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(25),s=i(12),o=new n;t.exports=function(t,e,i,n){var a=e.text,h=a.length;if(0!==h){i.addToRenderList(e);var l=t.pipelines.set(e.pipeline,e),u=r(e,i,n),c=u.sprite,d=u.calc,f=o,p=e.cropWidth>0||e.cropHeight>0;p&&(l.flush(),t.pushScissor(d.tx,d.ty,e.cropWidth*d.scaleX,e.cropHeight*d.scaleY));var g,v,m=e.frame.glTexture,y=e.tintFill,x=s.getTintAppendFloatAlpha(e.tintTopLeft,i.alpha*e._alphaTL),b=s.getTintAppendFloatAlpha(e.tintTopRight,i.alpha*e._alphaTR),w=s.getTintAppendFloatAlpha(e.tintBottomLeft,i.alpha*e._alphaBL),T=s.getTintAppendFloatAlpha(e.tintBottomRight,i.alpha*e._alphaBR),S=l.setGameObject(e),E=0,C=0,_=0,A=0,M=e.letterSpacing,P=0,k=0,O=e.scrollX,R=e.scrollY,L=e.fontData,I=L.chars,F=L.lineHeight,D=e.fontSize/L.size,B=0,N=e._align,z=0,U=0,Y=e.getTextBounds(!1);e.maxWidth>0&&(h=(a=Y.wrappedText).length);var X=e._bounds.lines;1===N?U=(X.longest-X.lengths[0])/2:2===N&&(U=X.longest-X.lengths[0]);var G=i.roundPixels,W=e.displayCallback,V=e.callbackData;t.pipelines.preBatch(e);for(var j=0;j<h;j++)if(10!==(_=a.charCodeAt(j))){if(g=I[_]){P=g.width,k=g.height;var H=g.xOffset+E-O,q=g.yOffset+C-R;if(null!==v){var K=g.kerning[A];H+=void 0!==K?K:0}if(E+=g.xAdvance+M,v=g,A=_,0!==P&&0!==k&&32!==_){if(D=e.fontSize/e.fontData.size,B=0,W){V.color=0,V.tint.topLeft=x,V.tint.topRight=b,V.tint.bottomLeft=w,V.tint.bottomRight=T,V.index=j,V.charCode=_,V.x=H,V.y=q,V.scale=D,V.rotation=B,V.data=g.data;var Z=W(V);H=Z.x,q=Z.y,D=Z.scale,B=Z.rotation,Z.color?(x=Z.color,b=Z.color,w=Z.color,T=Z.color):(x=Z.tint.topLeft,b=Z.tint.topRight,w=Z.tint.bottomLeft,T=Z.tint.bottomRight),x=s.getTintAppendFloatAlpha(x,i.alpha*e._alphaTL),b=s.getTintAppendFloatAlpha(b,i.alpha*e._alphaTR),w=s.getTintAppendFloatAlpha(w,i.alpha*e._alphaBL),T=s.getTintAppendFloatAlpha(T,i.alpha*e._alphaBR)}H*=D,q*=D,H-=e.displayOriginX,q-=e.displayOriginY,H+=U,f.applyITRS(H,q,B,D,D),d.multiply(f,c);var J=g.u0,$=g.v0,Q=g.u1,tt=g.v1,et=P,it=k,rt=c.e,nt=c.f,st=it*c.c+c.e,ot=it*c.d+c.f,at=et*c.a+it*c.c+c.e,ht=et*c.b+it*c.d+c.f,lt=et*c.a+c.e,ut=et*c.b+c.f;G&&(rt=Math.round(rt),nt=Math.round(nt),st=Math.round(st),ot=Math.round(ot),at=Math.round(at),ht=Math.round(ht),lt=Math.round(lt),ut=Math.round(ut)),l.batchQuad(e,rt,nt,st,ot,at,ht,lt,ut,J,$,Q,tt,x,b,w,T,y,m,S)}}}else z++,1===N?U=(X.longest-X.lengths[z])/2:2===N&&(U=X.longest-X.lengths[z]),E=0,C+=F,v=null;p&&(l.flush(),t.popScissor()),t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(30);t.exports=function(t,e,i,n){var s=e._text,o=s.length,a=t.currentContext;if(0!==o&&r(t,a,e,i,n)){i.addToRenderList(e);var h=e.fromAtlas?e.frame:e.texture.frames.__BASE,l=e.displayCallback,u=e.callbackData,c=e.fontData.chars,d=e.fontData.lineHeight,f=e._letterSpacing,p=0,g=0,v=0,m=null,y=0,x=0,b=0,w=0,T=0,S=0,E=null,C=0,_=e.frame.source.image,A=h.cutX,M=h.cutY,P=0,k=0,O=e._fontSize/e.fontData.size,R=e._align,L=0,I=0;e.getTextBounds(!1);var F=e._bounds.lines;1===R?I=(F.longest-F.lengths[0])/2:2===R&&(I=F.longest-F.lengths[0]),a.translate(-e.displayOriginX,-e.displayOriginY);var D=i.roundPixels;e.cropWidth>0&&e.cropHeight>0&&(a.beginPath(),a.rect(0,0,e.cropWidth,e.cropHeight),a.clip());for(var B=0;B<o;B++)if(k=O,P=0,10!==(v=s.charCodeAt(B))){if(m=c[v]){if(y=A+m.x,x=M+m.y,b=m.width,w=m.height,T=m.xOffset+p-e.scrollX,S=m.yOffset+g-e.scrollY,null!==E){var N=m.kerning[C];T+=void 0!==N?N:0}if(l){u.index=B,u.charCode=v,u.x=T,u.y=S,u.scale=k,u.rotation=P,u.data=m.data;var z=l(u);T=z.x,S=z.y,k=z.scale,P=z.rotation}T*=k,S*=k,T+=I,p+=m.xAdvance+f,E=m,C=v,0!==b&&0!==w&&32!==v&&(D&&(T=Math.round(T),S=Math.round(S)),a.save(),a.translate(T,S),a.rotate(P),a.scale(k,k),a.drawImage(_,y,x,b,w,0,0,b,w),a.restore())}}else L++,1===R?I=(F.longest-F.lengths[L])/2:2===R&&(I=F.longest-F.lengths[L]),p=0,g+=d,E=null;a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1061),n=i(1062),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n){t.pipelines.clear();var s=r(e,i,n).calc;e.render.call(e,t,i,s),t.pipelines.rebind()}},function(t,e){},function(t,e,i){var r=i(1),n=i(1);r=i(1064),i(448),n=i(448),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(217),n=i(19),s=i(25),o=i(12),a=function(t,e,i){this.x=t,this.y=e,this.width=i},h=function(t,e,i){this.points=[],this.pointsLength=1,this.points[0]=new a(t,e,i)},l=[],u=new s;t.exports=function(t,e,i,s){if(0!==e.commandBuffer.length){i.addToRenderList(e);var c=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var d=n(e,i,s).calc,f=u.loadIdentity(),p=e.commandBuffer,g=i.alpha*e.alpha,v=1,m=c.fillTint,y=c.strokeTint,x=0,b=0,w=0,T=2*Math.PI,S=[],E=0,C=!0,_=null,A=o.getTintAppendFloatAlpha,M=0;M<p.length;M++)switch(p[M]){case r.BEGIN_PATH:S.length=0,_=null,C=!0;break;case r.CLOSE_PATH:C=!1,_&&_.points.length&&_.points.push(_.points[0]);break;case r.FILL_PATH:for(E=0;E<S.length;E++)c.batchFillPath(S[E].points,f,d);break;case r.STROKE_PATH:for(E=0;E<S.length;E++)c.batchStrokePath(S[E].points,v,C,f,d);break;case r.LINE_STYLE:v=p[++M];var P=A(p[++M],p[++M]*g);y.TL=P,y.TR=P,y.BL=P,y.BR=P;break;case r.FILL_STYLE:var k=A(p[++M],p[++M]*g);m.TL=k,m.TR=k,m.BL=k,m.BR=k;break;case r.GRADIENT_FILL_STYLE:var O=p[++M]*g,R=p[++M]*g,L=p[++M]*g,I=p[++M]*g;m.TL=A(p[++M],O),m.TR=A(p[++M],R),m.BL=A(p[++M],L),m.BR=A(p[++M],I);break;case r.GRADIENT_LINE_STYLE:v=p[++M];var F=p[++M]*g;y.TL=A(p[++M],F),y.TR=A(p[++M],F),y.BL=A(p[++M],F),y.BR=A(p[++M],F);break;case r.ARC:var D=0,B=p[++M],N=p[++M],z=p[++M],U=p[++M],Y=p[++M],X=p[++M],G=p[++M];for(Y-=U,X?Y<-T?Y=-T:Y>0&&(Y=Y%T-T):Y>T?Y=T:Y<0&&(Y=T+Y%T),null===_&&(_=new h(B+Math.cos(U)*z,N+Math.sin(U)*z,v),S.push(_),D+=.01);D<1+G;)w=Y*D+U,x=B+Math.cos(w)*z,b=N+Math.sin(w)*z,_.points.push(new a(x,b,v)),D+=.01;w=Y+U,x=B+Math.cos(w)*z,b=N+Math.sin(w)*z,_.points.push(new a(x,b,v));break;case r.FILL_RECT:c.batchFillRect(p[++M],p[++M],p[++M],p[++M],f,d);break;case r.FILL_TRIANGLE:c.batchFillTriangle(p[++M],p[++M],p[++M],p[++M],p[++M],p[++M],f,d);break;case r.STROKE_TRIANGLE:c.batchStrokeTriangle(p[++M],p[++M],p[++M],p[++M],p[++M],p[++M],v,f,d);break;case r.LINE_TO:null!==_?_.points.push(new a(p[++M],p[++M],v)):(_=new h(p[++M],p[++M],v),S.push(_));break;case r.MOVE_TO:_=new h(p[++M],p[++M],v),S.push(_);break;case r.SAVE:l.push(f.copyToArray());break;case r.RESTORE:f.copyFromArray(l.pop());break;case r.TRANSLATE:B=p[++M],N=p[++M],f.translate(B,N);break;case r.SCALE:B=p[++M],N=p[++M],f.scale(B,N);break;case r.ROTATE:f.rotate(p[++M])}t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(1),n=i(1);r=i(1066),n=i(1067),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),e.pipeline.batchSprite(e,i,r)}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),t.batchSprite(e,e.frame,i,r)}},function(t,e,i){var r=i(1),n=i(1);r=i(1069),n=i(1070),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),this.pipeline.batchSprite(e,i,r)}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),t.batchSprite(e,e.frame,i,r)}},function(t,e,i){var r=i(1),n=i(1);r=i(1072),n=i(1073),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i){var r=e.list,n=r.length;if(0!==n){e.depthSort(),t.pipelines.preBatch(e);var s=-1!==e.blendMode;s||t.setBlendMode(0);for(var o=e.alpha,a=0;a<n;a++){var h=r[a];if(h.willRender(i)){var l,u,c,d;if(void 0!==h.alphaTopLeft)l=h.alphaTopLeft,u=h.alphaTopRight,c=h.alphaBottomLeft,d=h.alphaBottomRight;else{var f=h.alpha;l=f,u=f,c=f,d=f}s||h.blendMode===t.currentBlendMode||t.setBlendMode(h.blendMode);var p=h.mask;p&&p.preRenderWebGL(t,h,i);var g=h.type;g!==t.currentType&&(t.newType=!0,t.currentType=g),t.nextTypeMatch=a<n-1&&r[a+1].type===t.currentType,h.setAlpha(l*o,u*o,c*o,d*o),h.renderWebGL(t,h,i),h.setAlpha(l,u,c,d),p&&p.postRenderWebGL(t,i),t.newType=!1}}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i){var r=e.list;if(0!==r.length){e.depthSort();var n=-1!==e.blendMode;n||t.setBlendMode(0);var s=e._alpha;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var o=0;o<r.length;o++){var a=r[o];if(a.willRender(i)){var h=a.alpha;n||a.blendMode===t.currentBlendMode||t.setBlendMode(a.blendMode),a.setAlpha(h*s),a.renderCanvas(t,a,i),a.setAlpha(h)}}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,i){t.exports={EmitterOp:i(449),GravityWell:i(450),Particle:i(451),ParticleEmitter:i(452),ParticleEmitterManager:i(220),Zones:i(1078)}},function(t,e,i){var r=i(1),n=i(1);r=i(1076),n=i(1077),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(25),n=i(12),s=new r,o=new r,a=new r,h=new r;t.exports=function(t,e,i,r){var l=e.emitters.list,u=l.length;if(0!==u){var c=t.pipelines.set(e.pipeline),d=s,f=o,p=a,g=h;r?(g.loadIdentity(),g.multiply(r),g.translate(e.x,e.y),g.rotate(e.rotation),g.scale(e.scaleX,e.scaleY)):g.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var v=i.roundPixels,m=e.defaultFrame.glTexture,y=n.getTintAppendFloatAlpha,x=c.setGameObject(e,e.defaultFrame);t.pipelines.preBatch(e);for(var b=0;b<u;b++){var w=l[b],T=w.alive,S=T.length;if(w.visible&&0!==S){i.addToRenderList(w);var E=w.scrollFactorX,C=w.scrollFactorY;t.setBlendMode(w.blendMode),w.mask&&(w.mask.preRenderWebGL(t,w,i),t.pipelines.set(e.pipeline));for(var _=0;_<S;_++){var A=T[_],M=A.alpha*i.alpha;if(!(M<=0)){p.applyITRS(A.x,A.y,A.rotation,A.scaleX,A.scaleY),d.copyFrom(i.matrix),d.multiplyWithOffset(g,-i.scrollX*E,-i.scrollY*C),p.e=A.x,p.f=A.y,d.multiply(p,f);var P=A.frame,k=-P.halfWidth,O=-P.halfHeight,R=k+P.width,L=O+P.height,I=f.getXRound(k,O,v),F=f.getYRound(k,O,v),D=f.getXRound(k,L,v),B=f.getYRound(k,L,v),N=f.getXRound(R,L,v),z=f.getYRound(R,L,v),U=f.getXRound(R,O,v),Y=f.getYRound(R,O,v),X=y(A.tint,M);c.batchQuad(w,I,F,D,B,N,z,U,Y,P.u0,P.v0,P.u1,P.v1,X,X,X,X,0,m,x)}}w.mask&&w.mask.postRenderWebGL(t,i)}}t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(25),n=new r,s=new r,o=new r,a=new r;t.exports=function(t,e,i,r){var h=e.emitters.list,l=h.length;if(0!==l){var u=n.copyFrom(i.matrix),c=s,d=o,f=a;r?(f.loadIdentity(),f.multiply(r),f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(e.scaleX,e.scaleY)):f.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);for(var p=t.currentContext,g=i.roundPixels,v=0;v<l;v++){var m=h[v],y=m.alive,x=y.length;if(m.visible&&0!==x){i.addToRenderList(m);var b=m.scrollFactorX,w=m.scrollFactorY;p.save(),p.globalCompositeOperation=t.blendModes[m.blendMode];for(var T=0;T<x;T++){var S=y[T],E=S.alpha*i.alpha;if(!(E<=0)){d.applyITRS(S.x,S.y,S.rotation,S.scaleX,S.scaleY),u.copyFrom(i.matrix),u.multiplyWithOffset(f,-i.scrollX*b,-i.scrollY*w),d.e=S.x,d.f=S.y,u.multiply(d,c);var C=S.frame,_=C.canvasData,A=-C.halfWidth,M=-C.halfHeight;p.globalAlpha=E,p.save(),c.setToContext(p),g&&(A=Math.round(A),M=Math.round(M)),p.imageSmoothingEnabled=!(!t.antialias||C.source.scaleMode),p.drawImage(C.source.image,_.x,_.y,_.width,_.height,A,M,_.width,_.height),p.restore()}}p.restore()}}}}},function(t,e,i){t.exports={DeathZone:i(453),EdgeZone:i(454),RandomZone:i(456)}},function(t,e,i){var r=i(1),n=i(1);r=i(1080),n=i(1081),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n){i.addToRenderList(e);var s=i.alpha,o=e.renderTarget,a=o.width,h=o.height,l=r.getTintAppendFloatAlpha,u=t.pipelines.set(e.pipeline),c=u.setTexture2D(o.texture);t.pipelines.preBatch(e),u.batchTexture(e,o.texture,a,h,e.x,e.y,a,h,e.scaleX,e.scaleY,e.rotation,e.flipX,!e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,h,l(e.tintTopLeft,s*e._alphaTL),l(e.tintTopRight,s*e._alphaTR),l(e.tintBottomLeft,s*e._alphaBL),l(e.tintBottomRight,s*e._alphaBR),e.tintFill,0,0,i,n,!0,c),t.resetTextures(),t.pipelines.postBatch(e)}},function(t,e){t.exports=function(t,e,i,r){i.addToRenderList(e),t.batchSprite(e,e.frame,i,r)}},function(t,e,i){var r=i(1083),n=i(17),s={Parse:i(1084)};s=n(!1,s,r),t.exports=s},function(t,e){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,e,i){var r=i(6);t.exports=function(t,e){var i=e.width,n=e.height,s=Math.floor(i/2),o=Math.floor(n/2),a=r(e,"chars","");if(""!==a){var h=r(e,"image",""),l=t.sys.textures.getFrame(h),u=l.cutX,c=l.cutY,d=l.source.width,f=l.source.height,p=r(e,"offset.x",0),g=r(e,"offset.y",0),v=r(e,"spacing.x",0),m=r(e,"spacing.y",0),y=r(e,"lineSpacing",0),x=r(e,"charsPerRow",null);null===x&&(x=d/i)>a.length&&(x=a.length);for(var b=p,w=g,T={retroFont:!0,font:h,size:i,lineHeight:n+y,chars:{}},S=0,E=0;E<a.length;E++){var C=a.charCodeAt(E),_=(u+b)/d,A=(c+w)/f,M=(u+b+i)/d,P=(c+w+n)/f;T.chars[C]={x:b,y:w,width:i,height:n,centerX:s,centerY:o,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:_,v0:A,u1:M,v1:P},++S===x?(S=0,b=p,w+=n+m):b+=i+v}return{data:T,frame:null,texture:h}}}},function(t,e,i){var r=i(1),n=i(1);r=i(1086),n=i(1087),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline,e),a=r(e,i,s).calc,h=e.vertices,l=e.uv,u=e.colors,c=e.alphas,d=e.alpha,f=n.getTintAppendFloatAlpha,p=i.roundPixels,g=h.length,v=Math.floor(.5*g);o.flush(),t.pipelines.preBatch(e);var m=o.setGameObject(e),y=o.vertexViewF32,x=o.vertexViewU32,b=o.vertexCount*o.currentShader.vertexComponentCount-1,w=0,T=e.tintFill;e.dirty&&e.updateVertices();for(var S=e.debugCallback,E=[],C=0;C<g;C+=2){var _=h[C+0],A=h[C+1],M=_*a.a+A*a.c+a.e,P=_*a.b+A*a.d+a.f;p&&(M=Math.round(M),P=Math.round(P)),y[++b]=M,y[++b]=P,y[++b]=l[C+0],y[++b]=l[C+1],y[++b]=m,y[++b]=T,x[++b]=f(u[w],i.alpha*(c[w]*d)),w++,S&&(E[C+0]=M,E[C+1]=P)}S&&S.call(e,e,g,E),o.vertexCount+=v,t.pipelines.postBatch(e)}},function(t,e){t.exports=function(){}},function(t,e,i){var r=i(1),n=i(1);r=i(1089),n=i(1090),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n){if(0!==e.width&&0!==e.height){i.addToRenderList(e);var s=e.frame,o=s.width,a=s.height,h=r.getTintAppendFloatAlpha,l=t.pipelines.set(e.pipeline,e),u=l.setTexture2D(s.glTexture,e);t.pipelines.preBatch(e),l.batchTexture(e,s.glTexture,o,a,e.x,e.y,o/e.style.resolution,a/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,o,a,h(e.tintTopLeft,i.alpha*e._alphaTL),h(e.tintTopRight,i.alpha*e._alphaTR),h(e.tintBottomLeft,i.alpha*e._alphaBL),h(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,n,!1,u),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,r){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,r))}},function(t,e,i){var r=i(1),n=i(1);r=i(1092),n=i(1093),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(12);t.exports=function(t,e,i,n){e.updateCanvas();var s=e.width,o=e.height;if(0!==s&&0!==o){i.addToRenderList(e),t.pipelines.preBatch(e);var a=r.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline,e),l=h.setTexture2D(e.fillPattern,e);h.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,s,o,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*s,e.originY*o,0,0,s,o,a(e.tintTopLeft,i.alpha*e._alphaTL),a(e.tintTopRight,i.alpha*e._alphaTR),a(e.tintBottomLeft,i.alpha*e._alphaBL),a(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,i,n,!1,l),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,i,r){e.updateCanvas(),i.addToRenderList(e),t.batchSprite(e,e.frame,i,r)}},function(t,e,i){var r=i(1),n=i(1);r=i(1095),n=i(1096),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e){t.exports=function(t,e,i,r){e.videoTexture&&(i.addToRenderList(e),e.pipeline.batchSprite(e,i,r))}},function(t,e){t.exports=function(t,e,i,r){e.videoTexture&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,r))}},function(t,e,i){var r=i(1),n=i(1);r=i(1098),n=i(1099),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(114),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=r(e,i,o),l=a.calcMatrix.copyFrom(h.calc),u=e._displayOriginX,c=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&n(a,l,e,d,u,c),e.isStroked&&s(a,e,d,u,c),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(36),n=i(48),s=i(60),o=i(30);t.exports=function(t,e,i,a){i.addToRenderList(e);var h=t.currentContext;if(o(t,h,e,i,a)){var l=e.radius;h.beginPath(),h.arc(l-e.originX*(2*l),l-e.originY*(2*l),l,r(e._startAngle),r(e._endAngle),e.anticlockwise),e.closePath&&h.closePath(),e.isFilled&&(n(h,e),h.fill()),e.isStroked&&(s(h,e),h.stroke()),h.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1101),n=i(1102),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(114),n=i(19),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),l=a.calcMatrix.copyFrom(h.calc),u=e._displayOriginX+e._curveBounds.x,c=e._displayOriginY+e._curveBounds.y,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,l,e,d,u,c),e.isStroked&&s(a,e,d,u,c),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX+e._curveBounds.x,l=e._displayOriginY+e._curveBounds.y,u=e.pathData,c=u.length-1,d=u[0]-h,f=u[1]-l;a.beginPath(),a.moveTo(d,f),e.closePath||(c-=2);for(var p=2;p<c;p+=2){var g=u[p]-h,v=u[p+1]-l;a.lineTo(g,v)}e.closePath&&a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1104),n=i(1105),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(114),n=i(19),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),l=a.calcMatrix.copyFrom(h.calc),u=e._displayOriginX,c=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,l,e,d,u,c),e.isStroked&&s(a,e,d,u,c),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,l=e._displayOriginY,u=e.pathData,c=u.length-1,d=u[0]-h,f=u[1]-l;a.beginPath(),a.moveTo(d,f),e.closePath||(c-=2);for(var p=2;p<c;p+=2){var g=u[p]-h,v=u[p+1]-l;a.lineTo(g,v)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1107),n=i(1108),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),a=r(e,i,s);o.calcMatrix.copyFrom(a.calc).translate(-e._displayOriginX,-e._displayOriginY);var h,l,u=i.alpha*e.alpha,c=e.width,d=e.height,f=e.cellWidth,p=e.cellHeight,g=Math.ceil(c/f),v=Math.ceil(d/p),m=f,y=p,x=f-(g*f-c),b=p-(v*p-d),w=e.showCells,T=e.showAltCells,S=e.showOutline,E=0,C=0,_=0,A=0,M=0;if(S&&(m--,y--,x===f&&x--,b===p&&b--),t.pipelines.preBatch(e),w&&e.fillAlpha>0)for(h=o.fillTint,l=n.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*u),h.TL=l,h.TR=l,h.BL=l,h.BR=l,C=0;C<v;C++)for(T&&(_=C%2),E=0;E<g;E++)T&&_?_=0:(_++,A=E<g-1?m:x,M=C<v-1?y:b,o.batchFillRect(E*f,C*p,A,M));if(T&&e.altFillAlpha>0)for(h=o.fillTint,l=n.getTintAppendFloatAlpha(e.altFillColor,e.altFillAlpha*u),h.TL=l,h.TR=l,h.BL=l,h.BR=l,C=0;C<v;C++)for(T&&(_=C%2),E=0;E<g;E++)!T||_?(_=0,A=E<g-1?m:x,M=C<v-1?y:b,o.batchFillRect(E*f,C*p,A,M)):_=1;if(S&&e.outlineFillAlpha>0){var P=o.strokeTint,k=n.getTintAppendFloatAlpha(e.outlineFillColor,e.outlineFillAlpha*u);for(P.TL=k,P.TR=k,P.BL=k,P.BR=k,E=1;E<g;E++){var O=E*f;o.batchLine(O,0,O,d,1,1,1,0,!1)}for(C=1;C<v;C++){var R=C*p;o.batchLine(0,R,c,R,1,1,1,0,!1)}}t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=-e._displayOriginX,l=-e._displayOriginY,u=i.alpha*e.alpha,c=e.width,d=e.height,f=e.cellWidth,p=e.cellHeight,g=Math.ceil(c/f),v=Math.ceil(d/p),m=f,y=p,x=f-(g*f-c),b=p-(v*p-d),w=e.showCells,T=e.showAltCells,S=e.showOutline,E=0,C=0,_=0,A=0,M=0;if(S&&(m--,y--,x===f&&x--,b===p&&b--),w&&e.fillAlpha>0)for(r(a,e),C=0;C<v;C++)for(T&&(_=C%2),E=0;E<g;E++)T&&_?_=0:(_++,A=E<g-1?m:x,M=C<v-1?y:b,a.fillRect(h+E*f,l+C*p,A,M));if(T&&e.altFillAlpha>0)for(r(a,e,e.altFillColor,e.altFillAlpha*u),C=0;C<v;C++)for(T&&(_=C%2),E=0;E<g;E++)!T||_?(_=0,A=E<g-1?m:x,M=C<v-1?y:b,a.fillRect(h+E*f,l+C*p,A,M)):_=1;if(S&&e.outlineFillAlpha>0){for(n(a,e,e.outlineFillColor,e.outlineFillAlpha*u),E=1;E<g;E++){var P=E*f;a.beginPath(),a.moveTo(P+h,l),a.lineTo(P+h,d+l),a.stroke()}for(C=1;C<v;C++){var k=C*p;a.beginPath(),a.moveTo(h,k+l),a.lineTo(h+c,k+l),a.stroke()}}a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1110),n=i(1111),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o,a,h,l,u,c,d,f,p,g=t.pipelines.set(e.pipeline),v=r(e,i,s),m=g.calcMatrix.copyFrom(v.calc),y=e.width,x=e.height,b=y/2,w=y/e.projection,T=i.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&(o=n.getTintAppendFloatAlpha(e.fillTop,T),a=m.getX(-b,-x),h=m.getY(-b,-x),l=m.getX(0,-w-x),u=m.getY(0,-w-x),c=m.getX(b,-x),d=m.getY(b,-x),f=m.getX(0,w-x),p=m.getY(0,w-x),g.batchQuad(e,a,h,l,u,c,d,f,p,0,0,1,1,o,o,o,o,2)),e.showLeft&&(o=n.getTintAppendFloatAlpha(e.fillLeft,T),a=m.getX(-b,0),h=m.getY(-b,0),l=m.getX(0,w),u=m.getY(0,w),c=m.getX(0,w-x),d=m.getY(0,w-x),f=m.getX(-b,-x),p=m.getY(-b,-x),g.batchQuad(e,a,h,l,u,c,d,f,p,0,0,1,1,o,o,o,o,2)),e.showRight&&(o=n.getTintAppendFloatAlpha(e.fillRight,T),a=m.getX(b,0),h=m.getY(b,0),l=m.getX(0,w),u=m.getY(0,w),c=m.getX(0,w-x),d=m.getY(0,w-x),f=m.getX(b,-x),p=m.getY(b,-x),g.batchQuad(e,a,h,l,u,c,d,f,p,0,0,1,1,o,o,o,o,2)),t.pipelines.postBatch(e))}},function(t,e,i){var r=i(48),n=i(30);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.currentContext;if(n(t,o,e,i,s)&&e.isFilled){var a=e.width,h=e.height,l=a/2,u=a/e.projection;e.showTop&&(r(o,e,e.fillTop),o.beginPath(),o.moveTo(-l,-h),o.lineTo(0,-u-h),o.lineTo(l,-h),o.lineTo(l,-1),o.lineTo(0,u-1),o.lineTo(-l,-1),o.lineTo(-l,-h),o.fill()),e.showLeft&&(r(o,e,e.fillLeft),o.beginPath(),o.moveTo(-l,0),o.lineTo(0,u),o.lineTo(0,u-h),o.lineTo(-l,-h),o.lineTo(-l,0),o.fill()),e.showRight&&(r(o,e,e.fillRight),o.beginPath(),o.moveTo(l,0),o.lineTo(0,u),o.lineTo(0,u-h),o.lineTo(l,-h),o.lineTo(l,0),o.fill()),o.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1113),n=i(1114),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),a=r(e,i,s),h=o.calcMatrix.copyFrom(a.calc),l=e.width,u=e.height,c=l/2,d=l/e.projection,f=e.isReversed,p=i.alpha*e.alpha;if(e.isFilled){var g,v,m,y,x,b,w;if(t.pipelines.preBatch(e),e.showTop&&f){g=n.getTintAppendFloatAlpha(e.fillTop,p),v=h.getX(-c,-u),m=h.getY(-c,-u),y=h.getX(0,-d-u),x=h.getY(0,-d-u),b=h.getX(c,-u),w=h.getY(c,-u);var T=h.getX(0,d-u),S=h.getY(0,d-u);o.batchQuad(e,v,m,y,x,b,w,T,S,0,0,1,1,g,g,g,g,2)}e.showLeft&&(g=n.getTintAppendFloatAlpha(e.fillLeft,p),f?(v=h.getX(-c,-u),m=h.getY(-c,-u),y=h.getX(0,d),x=h.getY(0,d),b=h.getX(0,d-u),w=h.getY(0,d-u)):(v=h.getX(-c,0),m=h.getY(-c,0),y=h.getX(0,d),x=h.getY(0,d),b=h.getX(0,d-u),w=h.getY(0,d-u)),o.batchTri(e,v,m,y,x,b,w,0,0,1,1,g,g,g,2)),e.showRight&&(g=n.getTintAppendFloatAlpha(e.fillRight,p),f?(v=h.getX(c,-u),m=h.getY(c,-u),y=h.getX(0,d),x=h.getY(0,d),b=h.getX(0,d-u),w=h.getY(0,d-u)):(v=h.getX(c,0),m=h.getY(c,0),y=h.getX(0,d),x=h.getY(0,d),b=h.getX(0,d-u),w=h.getY(0,d-u)),o.batchTri(e,v,m,y,x,b,w,0,0,1,1,g,g,g,2)),t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(48),n=i(30);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.currentContext;if(n(t,o,e,i,s)&&e.isFilled){var a=e.width,h=e.height,l=a/2,u=a/e.projection,c=e.isReversed;e.showTop&&c&&(r(o,e,e.fillTop),o.beginPath(),o.moveTo(-l,-h),o.lineTo(0,-u-h),o.lineTo(l,-h),o.lineTo(0,u-h),o.fill()),e.showLeft&&(r(o,e,e.fillLeft),o.beginPath(),c?(o.moveTo(-l,-h),o.lineTo(0,u),o.lineTo(0,u-h)):(o.moveTo(-l,0),o.lineTo(0,u),o.lineTo(0,u-h)),o.fill()),e.showRight&&(r(o,e,e.fillRight),o.beginPath(),c?(o.moveTo(l,-h),o.lineTo(0,u),o.lineTo(0,u-h)):(o.moveTo(l,0),o.lineTo(0,u),o.lineTo(0,u-h)),o.fill()),o.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1116),n=i(1117),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(12);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.pipelines.set(e.pipeline),a=r(e,i,s);o.calcMatrix.copyFrom(a.calc);var h=e._displayOriginX,l=e._displayOriginY,u=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isStroked){var c=o.strokeTint,d=n.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*u);c.TL=d,c.TR=d,c.BL=d,c.BR=d;var f=e._startWidth,p=e._endWidth;o.batchLine(e.geom.x1-h,e.geom.y1-l,e.geom.x2-h,e.geom.y2-l,f,p,1,0,!1,a.sprite,a.camera)}t.pipelines.postBatch(e)}},function(t,e,i){var r=i(60),n=i(30);t.exports=function(t,e,i,s){i.addToRenderList(e);var o=t.currentContext;if(n(t,o,e,i,s)){var a=e._displayOriginX,h=e._displayOriginY;e.isStroked&&(r(o,e),o.beginPath(),o.moveTo(e.geom.x1-a,e.geom.y1-h),o.lineTo(e.geom.x2-a,e.geom.y2-h),o.stroke()),o.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1119),n=i(1120),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(114),n=i(19),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),l=a.calcMatrix.copyFrom(h.calc),u=e._displayOriginX,c=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,l,e,d,u,c),e.isStroked&&s(a,e,d,u,c),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,l=e._displayOriginY,u=e.pathData,c=u.length-1,d=u[0]-h,f=u[1]-l;a.beginPath(),a.moveTo(d,f),e.closePath||(c-=2);for(var p=2;p<c;p+=2){var g=u[p]-h,v=u[p+1]-l;a.lineTo(g,v)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1122),n=i(1123),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(81),s=i(12);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=r(e,i,o);a.calcMatrix.copyFrom(h.calc);var l=e._displayOriginX,u=e._displayOriginY,c=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var d=a.fillTint,f=s.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*c);d.TL=f,d.TR=f,d.BL=f,d.BR=f,a.batchFillRect(-l,-u,e.width,e.height)}e.isStroked&&n(a,e,c,l,u),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,l=e._displayOriginY;e.isFilled&&(r(a,e),a.fillRect(-h,-l,e.width,e.height)),e.isStroked&&(n(a,e),a.beginPath(),a.rect(-h,-l,e.width,e.height),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1125),n=i(1126),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(114),n=i(19),s=i(81);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,i,o),l=a.calcMatrix.copyFrom(h.calc),u=e._displayOriginX,c=e._displayOriginY,d=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,l,e,d,u,c),e.isStroked&&s(a,e,d,u,c),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,l=e._displayOriginY,u=e.pathData,c=u.length-1,d=u[0]-h,f=u[1]-l;a.beginPath(),a.moveTo(d,f),e.closePath||(c-=2);for(var p=2;p<c;p+=2){var g=u[p]-h,v=u[p+1]-l;a.lineTo(g,v)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(1),n=i(1);r=i(1128),n=i(1129),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19),n=i(81),s=i(12);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=r(e,i,o);a.calcMatrix.copyFrom(h.calc);var l=e._displayOriginX,u=e._displayOriginY,c=i.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var d=a.fillTint,f=s.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*c);d.TL=f,d.TR=f,d.BL=f,d.BR=f;var p=e.geom.x1-l,g=e.geom.y1-u,v=e.geom.x2-l,m=e.geom.y2-u,y=e.geom.x3-l,x=e.geom.y3-u;a.batchFillTriangle(p,g,v,m,y,x,h.sprite,h.camera)}e.isStroked&&n(a,e,c,l,u),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(48),n=i(60),s=i(30);t.exports=function(t,e,i,o){i.addToRenderList(e);var a=t.currentContext;if(s(t,a,e,i,o)){var h=e._displayOriginX,l=e._displayOriginY,u=e.geom.x1-h,c=e.geom.y1-l,d=e.geom.x2-h,f=e.geom.y2-l,p=e.geom.x3-h,g=e.geom.y3-l;a.beginPath(),a.moveTo(u,c),a.lineTo(d,f),a.lineTo(p,g),a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(t,e,i){var r=i(213);i(5).register("blitter",(function(t,e,i,n){return this.displayList.add(new r(this.scene,t,e,i,n))}))},function(t,e,i){var r=i(214);i(5).register("container",(function(t,e,i){return this.displayList.add(new r(this.scene,t,e,i))}))},function(t,e,i){var r=i(442);i(5).register("dom",(function(t,e,i,n,s){var o=new r(this.scene,t,e,i,n,s);return this.displayList.add(o),o}))},function(t,e,i){var r=i(215);i(5).register("dynamicBitmapText",(function(t,e,i,n,s){return this.displayList.add(new r(this.scene,t,e,i,n,s))}))},function(t,e,i){var r=i(444);i(5).register("extern",(function(){var t=new r(this.scene);return this.displayList.add(t),t}))},function(t,e,i){var r=i(216);i(5).register("graphics",(function(t){return this.displayList.add(new r(this.scene,t))}))},function(t,e,i){var r=i(113);i(5).register("group",(function(t,e){return this.updateList.add(new r(this.scene,t,e))}))},function(t,e,i){var r=i(125);i(5).register("image",(function(t,e,i,n){return this.displayList.add(new r(this.scene,t,e,i,n))}))},function(t,e,i){var r=i(219);i(5).register("layer",(function(t){return this.displayList.add(new r(this.scene,t))}))},function(t,e,i){var r=i(5),n=i(220);r.register("particles",(function(t,e,i){return this.displayList.add(new n(this.scene,t,e,i))}))},function(t,e,i){var r=i(5),n=i(457);r.register("follower",(function(t,e,i,r,s){var o=new n(this.scene,t,e,i,r,s);return this.displayList.add(o),this.updateList.add(o),o}))},function(t,e,i){var r=i(5),n=i(221);r.register("renderTexture",(function(t,e,i,r,s,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,o))}))},function(t,e,i){var r=i(223);i(5).register("rope",(function(t,e,i,n,s,o,a,h){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a,h))}))},function(t,e,i){var r=i(5),n=i(73);r.register("sprite",(function(t,e,i,r){var s=new n(this.scene,t,e,i,r);return this.displayList.add(s),s}))},function(t,e,i){var r=i(148);i(5).register("bitmapText",(function(t,e,i,n,s,o){return this.displayList.add(new r(this.scene,t,e,i,n,s,o))}))},function(t,e,i){var r=i(224);i(5).register("text",(function(t,e,i,n){return this.displayList.add(new r(this.scene,t,e,i,n))}))},function(t,e,i){var r=i(225);i(5).register("tileSprite",(function(t,e,i,n,s,o){return this.displayList.add(new r(this.scene,t,e,i,n,s,o))}))},function(t,e,i){var r=i(129);i(5).register("zone",(function(t,e,i,n){return this.displayList.add(new r(this.scene,t,e,i,n))}))},function(t,e,i){var r=i(226);i(5).register("video",(function(t,e,i){return this.displayList.add(new r(this.scene,t,e,i))}))},function(t,e,i){var r=i(461),n=i(5);n.register("arc",(function(t,e,i,n,s,o,a,h){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a,h))})),n.register("circle",(function(t,e,i,n,s){return this.displayList.add(new r(this.scene,t,e,i,0,360,!1,n,s))}))},function(t,e,i){var r=i(5),n=i(462);r.register("curve",(function(t,e,i,r,s){return this.displayList.add(new n(this.scene,t,e,i,r,s))}))},function(t,e,i){var r=i(463);i(5).register("ellipse",(function(t,e,i,n,s,o){return this.displayList.add(new r(this.scene,t,e,i,n,s,o))}))},function(t,e,i){var r=i(5),n=i(464);r.register("grid",(function(t,e,i,r,s,o,a,h,l,u){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h,l,u))}))},function(t,e,i){var r=i(5),n=i(465);r.register("isobox",(function(t,e,i,r,s,o,a){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a))}))},function(t,e,i){var r=i(5),n=i(466);r.register("isotriangle",(function(t,e,i,r,s,o,a,h){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h))}))},function(t,e,i){var r=i(5),n=i(467);r.register("line",(function(t,e,i,r,s,o,a,h){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h))}))},function(t,e,i){var r=i(5),n=i(468);r.register("polygon",(function(t,e,i,r,s){return this.displayList.add(new n(this.scene,t,e,i,r,s))}))},function(t,e,i){var r=i(5),n=i(473);r.register("rectangle",(function(t,e,i,r,s,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,o))}))},function(t,e,i){var r=i(474);i(5).register("star",(function(t,e,i,n,s,o,a){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a))}))},function(t,e,i){var r=i(5),n=i(475);r.register("triangle",(function(t,e,i,r,s,o,a,h,l,u){return this.displayList.add(new n(this.scene,t,e,i,r,s,o,a,h,l,u))}))},function(t,e,i){var r=i(213),n=i(28),s=i(16),o=i(13);s.register("blitter",(function(t,e){void 0===t&&(t={});var i=o(t,"key",null),s=o(t,"frame",null),a=new r(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),n(this.scene,a,t),a}))},function(t,e,i){var r=i(28),n=i(214),s=i(16),o=i(13);s.register("container",(function(t,e){void 0===t&&(t={});var i=o(t,"x",0),s=o(t,"y",0),a=o(t,"children",null),h=new n(this.scene,i,s,a);return void 0!==e&&(t.add=e),r(this.scene,h,t),h}))},function(t,e,i){var r=i(215),n=i(28),s=i(16),o=i(13);s.register("dynamicBitmapText",(function(t,e){void 0===t&&(t={});var i=o(t,"font",""),s=o(t,"text",""),a=o(t,"size",!1),h=new r(this.scene,0,0,i,s,a);return void 0!==e&&(t.add=e),n(this.scene,h,t),h}))},function(t,e,i){var r=i(16),n=i(216);r.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var i=new n(this.scene,t);return t.add&&this.scene.sys.displayList.add(i),i}))},function(t,e,i){var r=i(16),n=i(113);r.register("group",(function(t){return new n(this.scene,null,t)}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(125);n.register("image",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"frame",null),a=new o(this.scene,0,0,i,n);return void 0!==e&&(t.add=e),r(this.scene,a,t),a}))},function(t,e,i){var r=i(28),n=i(219),s=i(16),o=i(13);s.register("layer",(function(t,e){void 0===t&&(t={});var i=o(t,"children",null),s=new n(this.scene,i);return void 0!==e&&(t.add=e),r(this.scene,s,t),s}))},function(t,e,i){var r=i(16),n=i(13),s=i(2),o=i(220);r.register("particles",(function(t,e){void 0===t&&(t={});var i=n(t,"key",null),r=n(t,"frame",null),a=s(t,"emitters",null),h=new o(this.scene,i,r,a);return void 0!==e&&(t.add=e),s(t,"add",!1)?this.displayList.add(h):this.updateList.add(h),h}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(221);n.register("renderTexture",(function(t,e){void 0===t&&(t={});var i=s(t,"x",0),n=s(t,"y",0),a=s(t,"width",32),h=s(t,"height",32),l=s(t,"key",void 0),u=s(t,"frame",void 0),c=new o(this.scene,i,n,a,h,l,u);return void 0!==e&&(t.add=e),r(this.scene,c,t),c}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(6),a=i(223);n.register("rope",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"frame",null),h=s(t,"horizontal",!0),l=o(t,"points",void 0),u=o(t,"colors",void 0),c=o(t,"alphas",void 0),d=new a(this.scene,0,0,i,n,l,h,u,c);return void 0!==e&&(t.add=e),r(this.scene,d,t),t.add||this.updateList.add(d),d}))},function(t,e,i){var r=i(28),n=i(439),s=i(16),o=i(13),a=i(73);s.register("sprite",(function(t,e){void 0===t&&(t={});var i=o(t,"key",null),s=o(t,"frame",null),h=new a(this.scene,0,0,i,s);return void 0!==e&&(t.add=e),r(this.scene,h,t),n(h,t),h}))},function(t,e,i){var r=i(148),n=i(28),s=i(16),o=i(13),a=i(6);s.register("bitmapText",(function(t,e){void 0===t&&(t={});var i=a(t,"font",""),s=o(t,"text",""),h=o(t,"size",!1),l=a(t,"align",0),u=new r(this.scene,0,0,i,s,h,l);return void 0!==e&&(t.add=e),n(this.scene,u,t),u}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(224);n.register("text",(function(t,e){void 0===t&&(t={});var i=s(t,"text",""),n=s(t,"style",null),a=s(t,"padding",null);null!==a&&(n.padding=a);var h=new o(this.scene,0,0,i,n);return void 0!==e&&(t.add=e),r(this.scene,h,t),h.autoRound=s(t,"autoRound",!0),h.resolution=s(t,"resolution",1),h}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(225);n.register("tileSprite",(function(t,e){void 0===t&&(t={});var i=s(t,"x",0),n=s(t,"y",0),a=s(t,"width",512),h=s(t,"height",512),l=s(t,"key",""),u=s(t,"frame",""),c=new o(this.scene,i,n,a,h,l,u);return void 0!==e&&(t.add=e),r(this.scene,c,t),c}))},function(t,e,i){var r=i(16),n=i(13),s=i(129);r.register("zone",(function(t){var e=n(t,"x",0),i=n(t,"y",0),r=n(t,"width",1),o=n(t,"height",r);return new s(this.scene,e,i,r,o)}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(226);n.register("video",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=new o(this.scene,0,0,i);return void 0!==e&&(t.add=e),r(this.scene,n,t),t.add||this.updateList.add(n),n}))},function(t,e,i){var r=i(1),n=i(1);r=i(1177),n=i(1178),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n){if(e.shader){if(i.addToRenderList(e),t.pipelines.clear(),e.renderToTexture)e.load(),e.flush();else{var s=r(e,i,n).calc;t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(s.matrix),e.flush()}t.pipelines.rebind()}}},function(t,e){t.exports=function(){}},function(t,e,i){var r=i(1),n=i(1);r=i(1180),n=i(1181),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n){var s=e.faces,o=s.length;if(0!==o){i.addToRenderList(e);var a=t.pipelines.set(e.pipeline,e),h=r(e,i,n).calc,l=a.setGameObject(e),u=a.vertexViewF32,c=a.vertexViewU32,d=a.vertexCount*a.currentShader.vertexComponentCount-1,f=e.tintFill,p=[],g=e.debugCallback,v=h.a,m=h.b,y=h.c,x=h.d,b=h.e,w=h.f,T=e.viewPosition.z,S=e.hideCCW,E=i.roundPixels,C=i.alpha*e.alpha,_=0;t.pipelines.preBatch(e);for(var A=0;A<o;A++){var M=s[A];M.isInView(i,S,T,C,v,m,y,x,b,w,E)&&(a.shouldFlush(3)&&(a.flush(),d=0),d=M.load(u,c,d,l,f),_++,a.vertexCount+=3,g&&p.push(M))}e.totalFrame+=_,g&&g.call(e,e,p),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(){}},function(t,e,i){var r=i(1),n=i(1);r=i(1183),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(19);t.exports=function(t,e,i,n){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=r(e,i,n).calc,a=e.width,h=e.height,l=-e._radius,u=-e._radius,c=l+a,d=u+h,f=o.getX(0,0),p=o.getY(0,0),g=o.getX(l,u),v=o.getY(l,u),m=o.getX(l,d),y=o.getY(l,d),x=o.getX(c,d),b=o.getY(c,d),w=o.getX(c,u),T=o.getY(c,u);t.pipelines.preBatch(e),s.batchPointLight(e,i,g,v,m,y,x,b,w,T,f,p),t.pipelines.postBatch(e)}},function(t,e,i){var r=i(229);i(5).register("shader",(function(t,e,i,n,s,o,a){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a))}))},function(t,e,i){var r=i(230);i(5).register("mesh",(function(t,e,i,n,s,o,a,h,l,u,c){return this.displayList.add(new r(this.scene,t,e,i,n,s,o,a,h,l,u,c))}))},function(t,e,i){var r=i(5),n=i(150);r.register("pointlight",(function(t,e,i,r,s,o){return this.displayList.add(new n(this.scene,t,e,i,r,s,o))}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(229);n.register("shader",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"x",0),a=s(t,"y",0),h=s(t,"width",128),l=s(t,"height",128),u=new o(this.scene,i,n,a,h,l);return void 0!==e&&(t.add=e),r(this.scene,u,t),u}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(6),a=i(230);n.register("mesh",(function(t,e){void 0===t&&(t={});var i=s(t,"key",null),n=s(t,"frame",null),h=o(t,"vertices",[]),l=o(t,"uvs",[]),u=o(t,"indicies",[]),c=o(t,"containsZ",!1),d=o(t,"normals",[]),f=o(t,"colors",16777215),p=o(t,"alphas",1),g=new a(this.scene,0,0,i,n,h,l,u,c,d,f,p);return void 0!==e&&(t.add=e),r(this.scene,g,t),g}))},function(t,e,i){var r=i(28),n=i(16),s=i(13),o=i(150);n.register("pointlight",(function(t,e){void 0===t&&(t={});var i=s(t,"color",16777215),n=s(t,"radius",128),a=s(t,"intensity",1),h=s(t,"attenuation",.1),l=new o(this.scene,0,0,i,n,a,h);return void 0!==e&&(t.add=e),r(this.scene,l,t),l}))},function(t,e,i){var r=i(0),n=i(482),s=i(24),o=i(20),a=new r({Extends:n,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(o.BOOT,this.boot,this),n.call(this)},boot:function(){var t=this.systems.events;t.on(o.SHUTDOWN,this.shutdown,this),t.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});s.register("LightsPlugin",a,"lights"),t.exports=a},function(t,e,i){var r=i(65);r.Area=i(1192),r.Circumference=i(302),r.CircumferencePoint=i(169),r.Clone=i(1193),r.Contains=i(66),r.ContainsPoint=i(1194),r.ContainsRect=i(1195),r.CopyFrom=i(1196),r.Equals=i(1197),r.GetBounds=i(1198),r.GetPoint=i(300),r.GetPoints=i(301),r.Offset=i(1199),r.OffsetPoint=i(1200),r.Random=i(170),t.exports=r},function(t,e){t.exports=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,e,i){var r=i(65);t.exports=function(t){return new r(t.x,t.y,t.radius)}},function(t,e,i){var r=i(66);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e,i){var r=i(66);t.exports=function(t,e){return r(t,e.x,e.y)&&r(t,e.right,e.y)&&r(t,e.x,e.bottom)&&r(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},function(t,e,i){var r=i(10);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var r=i(111);r.Area=i(1202),r.Circumference=i(447),r.CircumferencePoint=i(218),r.Clone=i(1203),r.Contains=i(112),r.ContainsPoint=i(1204),r.ContainsRect=i(1205),r.CopyFrom=i(1206),r.Equals=i(1207),r.GetBounds=i(1208),r.GetPoint=i(445),r.GetPoints=i(446),r.Offset=i(1209),r.OffsetPoint=i(1210),r.Random=i(180),t.exports=r},function(t,e){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,e,i){var r=i(111);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,e,i){var r=i(112);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e,i){var r=i(112);t.exports=function(t,e){return r(t,e.x,e.y)&&r(t,e.right,e.y)&&r(t,e.x,e.bottom)&&r(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var r=i(10);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,i){var r=i(4),n=i(231);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s,o,a,h,l=t.x,u=t.y,c=t.radius,d=e.x,f=e.y,p=e.radius;if(u===f)0==(a=(o=-2*f)*o-4*(s=1)*(d*d+(h=(p*p-c*c-d*d+l*l)/(2*(l-d)))*h-2*d*h+f*f-p*p))?i.push(new r(h,-o/(2*s))):a>0&&(i.push(new r(h,(-o+Math.sqrt(a))/(2*s))),i.push(new r(h,(-o-Math.sqrt(a))/(2*s))));else{var g=(l-d)/(u-f),v=(p*p-c*c-d*d+l*l-f*f+u*u)/(2*(u-f));0==(a=(o=2*u*g-2*v*g-2*l)*o-4*(s=g*g+1)*(l*l+u*u+v*v-c*c-2*u*v))?(h=-o/(2*s),i.push(new r(h,v-h*g))):a>0&&(h=(-o+Math.sqrt(a))/(2*s),i.push(new r(h,v-h*g)),h=(-o-Math.sqrt(a))/(2*s),i.push(new r(h,v-h*g)))}}return i}},function(t,e,i){var r=i(232),n=i(151);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC(),h=e.getLineD();r(s,t,i),r(o,t,i),r(a,t,i),r(h,t,i)}return i}},function(t,e,i){var r=i(140),n=i(487),s=new(i(47));function o(t,e,i,o,a){var h=Math.cos(t),l=Math.sin(t);s.setTo(e,i,e+h,i+l);var u=n(s,o);u&&a.push(new r(u.x,u.y,t,u.w))}function a(t,e){return t.z-e.z}t.exports=function(t,e,i){Array.isArray(i)||(i=[i]);for(var r=[],n=[],s=0;s<i.length;s++)for(var h=i[s].points,l=0;l<h.length;l++){var u=Math.atan2(h[l].y-e,h[l].x-t);-1===n.indexOf(u)&&(o(u,t,e,i,r),o(u-1e-5,t,e,i,r),o(u+1e-5,t,e,i,r),n.push(u))}return r.sort(a)}},function(t,e,i){var r=i(10),n=i(152);t.exports=function(t,e,i){return void 0===i&&(i=new r),n(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i}},function(t,e,i){var r=i(234),n=i(152);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s=t.getLineA(),o=t.getLineB(),a=t.getLineC(),h=t.getLineD();r(s,e,i),r(o,e,i),r(a,e,i),r(h,e,i)}return i}},function(t,e,i){var r=i(489),n=i(234);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC();n(s,t,i),n(o,t,i),n(a,t,i)}return i}},function(t,e,i){var r=i(232),n=i(491);t.exports=function(t,e,i){if(void 0===i&&(i=[]),n(t,e)){var s=t.getLineA(),o=t.getLineB(),a=t.getLineC();r(s,e,i),r(o,e,i),r(a,e,i)}return i}},function(t,e,i){var r=i(494),n=i(492);t.exports=function(t,e,i){if(void 0===i&&(i=[]),r(t,e)){var s=e.getLineA(),o=e.getLineB(),a=e.getLineC();n(t,s,i),n(t,o,i),n(t,a,i)}return i}},function(t,e,i){var r=i(496);t.exports=function(t,e){if(!r(t,e))return!1;var i=Math.min(e.x1,e.x2),n=Math.max(e.x1,e.x2),s=Math.min(e.y1,e.y2),o=Math.max(e.y1,e.y2);return t.x>=i&&t.x<=n&&t.y>=s&&t.y<=o}},function(t,e){t.exports=function(t,e,i,r,n,s){return void 0===s&&(s=0),!(e>t.right+s||i<t.left-s||r>t.bottom+s||n<t.top-s)}},function(t,e,i){var r=i(47);r.Angle=i(97),r.BresenhamPoints=i(317),r.CenterOn=i(1222),r.Clone=i(1223),r.CopyFrom=i(1224),r.Equals=i(1225),r.Extend=i(1226),r.GetEasedPoints=i(1227),r.GetMidPoint=i(1228),r.GetNearestPoint=i(1229),r.GetNormal=i(1230),r.GetPoint=i(307),r.GetPoints=i(172),r.GetShortestDistance=i(1231),r.Height=i(1232),r.Length=i(67),r.NormalAngle=i(497),r.NormalX=i(1233),r.NormalY=i(1234),r.Offset=i(1235),r.PerpSlope=i(1236),r.Random=i(173),r.ReflectAngle=i(1237),r.Rotate=i(1238),r.RotateAroundPoint=i(1239),r.RotateAroundXY=i(236),r.SetToAngle=i(1240),r.Slope=i(1241),r.Width=i(1242),t.exports=r},function(t,e){t.exports=function(t,e,i){var r=e-(t.x1+t.x2)/2,n=i-(t.y1+t.y2)/2;return t.x1+=r,t.y1+=n,t.x2+=r,t.y2+=n,t}},function(t,e,i){var r=i(47);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},function(t,e,i){var r=i(67);t.exports=function(t,e,i){void 0===i&&(i=e);var n=r(t),s=t.x2-t.x1,o=t.y2-t.y1;return e&&(t.x1=t.x1-s/n*e,t.y1=t.y1-o/n*e),i&&(t.x2=t.x2+s/n*i,t.y2=t.y2+o/n*i),t}},function(t,e,i){var r=i(352),n=i(80),s=i(4);t.exports=function(t,e,i,o,a){void 0===o&&(o=0),void 0===a&&(a=[]);var h,l,u=[],c=t.x1,d=t.y1,f=t.x2-c,p=t.y2-d,g=n(e,a),v=i-1;for(h=0;h<v;h++)l=g(h/v),u.push(new s(c+f*l,d+p*l));if(l=g(1),u.push(new s(c+f*l,d+p*l)),o>0){var m=u[0],y=[m];for(h=1;h<u.length-1;h++){var x=u[h];r(m,x)>=o&&(y.push(x),m=x)}var b=u[u.length-1];return r(m,b)<o&&y.pop(),y.push(b),y}return u}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=t.x1,s=t.y1,o=t.x2,a=t.y2,h=(o-n)*(o-n)+(a-s)*(a-s);if(0===h)return i;var l=((e.x-n)*(o-n)+(e.y-s)*(a-s))/h;return i.x=n+l*(o-n),i.y=s+l*(a-s),i}},function(t,e,i){var r=i(14),n=i(97),s=i(4);t.exports=function(t,e){void 0===e&&(e=new s);var i=n(t)-r.TAU;return e.x=Math.cos(i),e.y=Math.sin(i),e}},function(t,e){t.exports=function(t,e){var i=t.x1,r=t.y1,n=t.x2,s=t.y2,o=(n-i)*(n-i)+(s-r)*(s-r);if(0===o)return!1;var a=((r-e.y)*(n-i)-(i-e.x)*(s-r))/o;return Math.abs(a)*Math.sqrt(o)}},function(t,e){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,e,i){var r=i(14),n=i(97);t.exports=function(t){return Math.cos(n(t)-r.TAU)}},function(t,e,i){var r=i(14),n=i(97);t.exports=function(t){return Math.sin(n(t)-r.TAU)}},function(t,e){t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t}},function(t,e){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,e,i){var r=i(97),n=i(497);t.exports=function(t,e){return 2*n(e)-Math.PI-r(t)}},function(t,e,i){var r=i(236);t.exports=function(t,e){var i=(t.x1+t.x2)/2,n=(t.y1+t.y2)/2;return r(t,i,n,e)}},function(t,e,i){var r=i(236);t.exports=function(t,e,i){return r(t,e.x,e.y,i)}},function(t,e){t.exports=function(t,e,i,r,n){return t.x1=e,t.y1=i,t.x2=e+Math.cos(r)*n,t.y2=i+Math.sin(r)*n,t}},function(t,e){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,e){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,e,i){var r={Face:i(116),GenerateGridVerts:i(1244),GenerateObjVerts:i(480),GenerateVerts:i(479),ParseObj:i(498),ParseObjMaterial:i(499),RotateFace:i(1245),Vertex:i(117)};t.exports=r},function(t,e,i){var r=i(116),n=i(2),s=i(69),o=i(39),a=i(117),h=new o,l=new o,u=new s;t.exports=function(t){var e=n(t,"mesh"),i=n(t,"texture",null),s=n(t,"frame"),o=n(t,"width",1),c=n(t,"height",o),d=n(t,"widthSegments",1),f=n(t,"heightSegments",d),p=n(t,"x",0),g=n(t,"y",0),v=n(t,"z",0),m=n(t,"rotateX",0),y=n(t,"rotateY",0),x=n(t,"rotateZ",0),b=n(t,"zIsUp",!0),w=n(t,"isOrtho",!!e&&e.dirtyCache[11]),T=n(t,"colors",[16777215]),S=n(t,"alphas",[1]),E=n(t,"tile",!1),C=n(t,"flipY",!1),_=n(t,"width",null),A={faces:[],verts:[]};if(h.set(p,g,v),l.set(m,y,x),u.fromRotationXYTranslation(l,h,b),!i&&e)i=e.texture;else{if(!e||"string"!=typeof i)return A;i=e.scene.sys.textures.get(i)}var M=i.get(s);!_&&w&&i&&e&&(o=M.width/e.height,c=M.height/e.height);var P,k,O=o/2,R=c/2,L=Math.floor(d),I=Math.floor(f),F=L+1,D=I+1,B=o/L,N=c/I,z=[],U=[],Y=0,X=1,G=0,W=1;M&&(Y=M.u0,X=M.u1,C?(G=M.v1,W=M.v0):(G=M.v0,W=M.v1));var V=X-Y,j=W-G;for(k=0;k<D;k++){var H=k*N-R;for(P=0;P<F;P++){var q=P*B-O;U.push(q,-H);var K=Y+V*(P/L),Z=G+j*(k/I);z.push(K,Z)}}Array.isArray(T)||(T=[T]),Array.isArray(S)||(S=[S]);var J=0,$=0;for(k=0;k<I;k++)for(P=0;P<L;P++){var Q=2*(P+F*k),tt=2*(P+F*(k+1)),et=2*(P+1+F*(k+1)),it=2*(P+1+F*k),rt=T[$],nt=S[J],st=new a(U[Q],U[Q+1],0,z[Q],z[Q+1],rt,nt).transformMat4(u),ot=new a(U[tt],U[tt+1],0,z[tt],z[tt+1],rt,nt).transformMat4(u),at=new a(U[it],U[it+1],0,z[it],z[it+1],rt,nt).transformMat4(u),ht=new a(U[tt],U[tt+1],0,z[tt],z[tt+1],rt,nt).transformMat4(u),lt=new a(U[et],U[et+1],0,z[et],z[et+1],rt,nt).transformMat4(u),ut=new a(U[it],U[it+1],0,z[it],z[it+1],rt,nt).transformMat4(u);E&&(st.setUVs(Y,W),ot.setUVs(Y,G),at.setUVs(X,W),ht.setUVs(Y,G),lt.setUVs(X,G),ut.setUVs(X,W)),++$===T.length&&($=0),++J===S.length&&(J=0),A.verts.push(st,ot,at,ht,lt,ut),A.faces.push(new r(st,ot,at),new r(ht,lt,ut))}return e&&(e.faces=e.faces.concat(A.faces),e.vertices=e.vertices.concat(A.verts)),A}},function(t,e){t.exports=function(t,e,i,r){var n,s;if(void 0===i&&void 0===r){var o=t.getInCenter();n=o.x,s=o.y}var a=Math.cos(e),h=Math.sin(e),l=t.vertex1,u=t.vertex2,c=t.vertex3,d=l.x-n,f=l.y-s;l.set(d*a-f*h+n,d*h+f*a+s),d=u.x-n,f=u.y-s,u.set(d*a-f*h+n,d*h+f*a+s),d=c.x-n,f=c.y-s,c.set(d*a-f*h+n,d*h+f*a+s)}},function(t,e,i){var r=i(4);r.Ceil=i(1247),r.Clone=i(1248),r.CopyFrom=i(1249),r.Equals=i(1250),r.Floor=i(1251),r.GetCentroid=i(1252),r.GetMagnitude=i(500),r.GetMagnitudeSq=i(501),r.GetRectangleFromPoints=i(1253),r.Interpolate=i(1254),r.Invert=i(1255),r.Negative=i(1256),r.Project=i(1257),r.ProjectUnit=i(1258),r.SetMagnitude=i(1259),t.exports=r},function(t,e){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,e,i){var r=i(4);t.exports=function(t){return new r(t.x,t.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},function(t,e){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,e,i){var r=i(4);t.exports=function(t,e){if(void 0===e&&(e=new r),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var i=t.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(1===i)e.x=t[0].x,e.y=t[0].y;else{for(var n=0;n<i;n++)e.x+=t[n].x,e.y+=t[n].y;e.x/=i,e.y/=i}return e}},function(t,e,i){var r=i(10);t.exports=function(t,e){void 0===e&&(e=new r);for(var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=0;a<t.length;a++){var h=t[a];h.x>i&&(i=h.x),h.x<n&&(n=h.x),h.y>s&&(s=h.y),h.y<o&&(o=h.y)}return e.x=n,e.y=o,e.width=i-n,e.height=s-o,e}},function(t,e,i){var r=i(4);t.exports=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=new r),n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i,n}},function(t,e){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.setTo(-t.x,-t.y)}},function(t,e,i){var r=i(4),n=i(501);t.exports=function(t,e,i){void 0===i&&(i=new r);var s=(t.x*e.x+t.y*e.y)/n(e);return 0!==s&&(i.x=s*e.x,i.y=s*e.y),i}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){void 0===i&&(i=new r);var n=t.x*e.x+t.y*e.y;return 0!==n&&(i.x=n*e.x,i.y=n*e.y),i}},function(t,e,i){var r=i(500);t.exports=function(t,e){if(0!==t.x||0!==t.y){var i=r(t);t.x/=i,t.y/=i}return t.x*=e,t.y*=e,t}},function(t,e,i){var r=i(227);r.Clone=i(1261),r.Contains=i(228),r.ContainsPoint=i(1262),r.Earcut=i(59),r.GetAABB=i(469),r.GetNumberArray=i(1263),r.GetPoints=i(470),r.Perimeter=i(471),r.Reverse=i(1264),r.Simplify=i(1265),r.Smooth=i(472),r.Translate=i(1266),t.exports=r},function(t,e,i){var r=i(227);t.exports=function(t){return new r(t.points)}},function(t,e,i){var r=i(228);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=[]);for(var i=0;i<t.points.length;i++)e.push(t.points[i].x),e.push(t.points[i].y);return e}},function(t,e){t.exports=function(t){return t.points.reverse(),t}},function(t,e){function i(t,e,i){var r=e.x,n=e.y,s=i.x-r,o=i.y-n;if(0!==s||0!==o){var a=((t.x-r)*s+(t.y-n)*o)/(s*s+o*o);a>1?(r=i.x,n=i.y):a>0&&(r+=s*a,n+=o*a)}return(s=t.x-r)*s+(o=t.y-n)*o}function r(t,e,n,s,o){for(var a,h=s,l=e+1;l<n;l++){var u=i(t[l],t[e],t[n]);u>h&&(a=l,h=u)}h>s&&(a-e>1&&r(t,e,a,s,o),o.push(t[a]),n-a>1&&r(t,a,n,s,o))}function n(t,e){var i=t.length-1,n=[t[0]];return r(t,0,i,e,n),n.push(t[i]),n}t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);var r=t.points;if(r.length>2){var s=e*e;i||(r=function(t,e){for(var i,r,n,s,o,a=t[0],h=[a],l=1,u=t.length;l<u;l++)n=a,void 0,void 0,(s=(r=i=t[l]).x-n.x)*s+(o=r.y-n.y)*o>e&&(h.push(i),a=i);return a!==i&&h.push(i),h}(r,s)),t.setTo(n(r,s))}return t}},function(t,e){t.exports=function(t,e,i){for(var r=t.points,n=0;n<r.length;n++)r[n].x+=e,r[n].y+=i;return t}},function(t,e){t.exports=function(t){return t.width*t.height}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,e,i){var r=i(10);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,e,i){var r=i(57);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,i){var r=i(237);t.exports=function(t,e){var i=r(t);return i<r(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e,i){var r=i(237);t.exports=function(t,e){var i=r(t);return i>r(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,e,i){var r=i(10);t.exports=function(t,e,i,n,s){return void 0===s&&(s=new r),s.setTo(Math.min(t,i),Math.min(e,n),Math.abs(t-i),Math.abs(e-n))}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.centerX,e.y=t.centerY,e}},function(t,e,i){var r=i(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.width,e.y=t.height,e}},function(t,e,i){var r=i(190);t.exports=function(t,e,i){var n=t.centerX,s=t.centerY;return t.setSize(t.width+2*e,t.height+2*i),r(t,n,s)}},function(t,e,i){var r=i(10),n=i(152);t.exports=function(t,e,i){return void 0===i&&(i=new r),n(t,e)?(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y):i.setEmpty(),i}},function(t,e){t.exports=function(t,e){for(var i=t.x,r=t.right,n=t.y,s=t.bottom,o=0;o<e.length;o++)i=Math.min(i,e[o].x),r=Math.max(r,e[o].x),n=Math.min(n,e[o].y),s=Math.max(s,e[o].y);return t.x=i,t.y=n,t.width=r-i,t.height=s-n,t}},function(t,e){t.exports=function(t,e){var i=Math.min(t.x,e.x),r=Math.max(t.right,e.right);t.x=i,t.width=r-i;var n=Math.min(t.y,e.y),s=Math.max(t.bottom,e.bottom);return t.y=n,t.height=s-n,t}},function(t,e){t.exports=function(t,e,i){var r=Math.min(t.x,e),n=Math.max(t.right,e);t.x=r,t.width=n-r;var s=Math.min(t.y,i),o=Math.max(t.bottom,i);return t.y=s,t.height=o-s,t}},function(t,e){t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e){t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},function(t,e,i){var r=i(4),n=i(36);t.exports=function(t,e,i){void 0===i&&(i=new r),e=n(e);var s=Math.sin(e),o=Math.cos(e),a=o>0?t.width/2:t.width/-2,h=s>0?t.height/2:t.height/-2;return Math.abs(a*s)<Math.abs(h*o)?h=a*s/o:a=h*o/s,i.x=a+t.centerX,i.y=h+t.centerY,i}},function(t,e,i){var r=i(195),n=i(503),s=i(4);t.exports=function(t,e,i){if(void 0===i&&(i=new s),n(t,e))switch(r(0,3)){case 0:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.y+Math.random()*(e.top-t.y);break;case 1:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:i.x=t.x+Math.random()*(e.x-t.x),i.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:i.x=e.right+Math.random()*(t.right-e.right),i.y=t.y+Math.random()*(e.bottom-t.y)}return i}},function(t,e){t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},function(t,e){t.exports=function(t,e,i){return void 0===i&&(i=e),t.width*=e,t.height*=i,t}},function(t,e,i){var r=i(82);r.Area=i(1294),r.BuildEquilateral=i(1295),r.BuildFromPolygon=i(1296),r.BuildRight=i(1297),r.CenterOn=i(1298),r.Centroid=i(504),r.CircumCenter=i(1299),r.CircumCircle=i(1300),r.Clone=i(1301),r.Contains=i(115),r.ContainsArray=i(235),r.ContainsPoint=i(1302),r.CopyFrom=i(1303),r.Decompose=i(495),r.Equals=i(1304),r.GetPoint=i(476),r.GetPoints=i(477),r.InCenter=i(506),r.Perimeter=i(1305),r.Offset=i(505),r.Random=i(181),r.Rotate=i(1306),r.RotateAroundPoint=i(1307),r.RotateAroundXY=i(238),t.exports=r},function(t,e){t.exports=function(t){var e=t.x1,i=t.y1,r=t.x2,n=t.y2,s=t.x3,o=t.y3;return Math.abs(((s-e)*(n-i)-(r-e)*(o-i))/2)}},function(t,e,i){var r=i(82);t.exports=function(t,e,i){var n=i*(Math.sqrt(3)/2);return new r(t,e,t+i/2,e+n,t-i/2,e+n)}},function(t,e,i){var r=i(59),n=i(82);t.exports=function(t,e,i,s,o){void 0===e&&(e=null),void 0===i&&(i=1),void 0===s&&(s=1),void 0===o&&(o=[]);for(var a,h,l,u,c,d,f,p,g,v=r(t,e),m=0;m<v.length;m+=3)a=v[m],h=v[m+1],l=v[m+2],u=t[2*a]*i,c=t[2*a+1]*s,d=t[2*h]*i,f=t[2*h+1]*s,p=t[2*l]*i,g=t[2*l+1]*s,o.push(new n(u,c,d,f,p,g));return o}},function(t,e,i){var r=i(82);t.exports=function(t,e,i,n){return void 0===n&&(n=i),new r(t,e,t,e-n,t+i,e)}},function(t,e,i){var r=i(504),n=i(505);t.exports=function(t,e,i,s){void 0===s&&(s=r);var o=s(t),a=e-o.x,h=i-o.y;return n(t,a,h)}},function(t,e,i){var r=i(3);function n(t,e,i,r){return t*r-e*i}t.exports=function(t,e){void 0===e&&(e=new r);var i=t.x3,s=t.y3,o=t.x1-i,a=t.y1-s,h=t.x2-i,l=t.y2-s,u=2*n(o,a,h,l),c=n(a,o*o+a*a,l,h*h+l*l),d=n(o,o*o+a*a,h,h*h+l*l);return e.x=i-c/u,e.y=s+d/u,e}},function(t,e,i){var r=i(65);t.exports=function(t,e){void 0===e&&(e=new r);var i,n,s=t.x1,o=t.y1,a=t.x2,h=t.y2,l=t.x3,u=t.y3,c=a-s,d=h-o,f=l-s,p=u-o,g=c*(s+a)+d*(o+h),v=f*(s+l)+p*(o+u),m=2*(c*(u-h)-d*(l-a));if(Math.abs(m)<1e-6){var y=Math.min(s,a,l),x=Math.min(o,h,u);i=.5*(Math.max(s,a,l)-y),n=.5*(Math.max(o,h,u)-x),e.x=y+i,e.y=x+n,e.radius=Math.sqrt(i*i+n*n)}else e.x=(p*g-d*v)/m,e.y=(c*v-f*g)/m,i=e.x-s,n=e.y-o,e.radius=Math.sqrt(i*i+n*n);return e}},function(t,e,i){var r=i(82);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e,i){var r=i(115);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},function(t,e,i){var r=i(67);t.exports=function(t){var e=t.getLineA(),i=t.getLineB(),n=t.getLineC();return r(e)+r(i)+r(n)}},function(t,e,i){var r=i(238),n=i(506);t.exports=function(t,e){var i=n(t);return r(t,i.x,i.y,e)}},function(t,e,i){var r=i(238);t.exports=function(t,e,i){return r(t,e.x,e.y,i)}},function(t,e,i){var r=i(203),n=i(17),s={CreatePixelPerfectHandler:i(507),CreateInteractiveObject:i(508),Events:i(51),Gamepad:i(1309),InputManager:i(409),InputPlugin:i(1321),InputPluginCache:i(153),Keyboard:i(1322),Mouse:i(1336),Pointer:i(412),Touch:i(1337)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={Axis:i(509),Button:i(510),Events:i(239),Gamepad:i(511),GamepadPlugin:i(1316),Configs:i(1317)}},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e){t.exports="connected"},function(t,e){t.exports="disconnected"},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e,i){var r=i(0),n=i(9),s=i(239),o=i(511),a=i(6),h=i(153),l=i(51),u=new r({Extends:n,initialize:function(t){n.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(l.BOOT,this.boot,this),t.pluginEvents.on(l.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,i=t.config;this.enabled=a(e,"gamepad",i.inputGamepad)&&t.device.input.gamepads,this.target=a(e,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var t=this,e=this.target,i=function(e){!e.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(e))};this.onGamepadHandler=i,e.addEventListener("gamepadconnected",i,!1),e.addEventListener("gamepaddisconnected",i,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,i=0;i<t.length;i++){var r=t[i];if(r){var n=r.id,s=r.index,a=e[s];if(a)a.id!==n?(a.destroy(),e[s]=new o(this,r)):a.update(r);else{var h=new o(this,r);e[s]=h,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=h):this._pad3=h:this._pad2=h:this._pad1=h}}}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},getPad:function(t){for(var e=this.gamepads,i=0;i<e.length;i++)if(e[i]&&e[i].index===t)return e[i]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),i=0;i<t;i++){var r=e[i],n=this.getPad(r.gamepad.index);"gamepadconnected"===r.type?this.emit(s.CONNECTED,n,r):"gamepaddisconnected"===r.type&&this.emit(s.DISCONNECTED,n,r)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),t.exports=u},function(t,e,i){t.exports={DUALSHOCK_4:i(1318),SNES_USB:i(1319),XBOX_360:i(1320)}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e,i){var r=i(65),n=i(66),s=i(0),o=i(203),a=i(508),h=i(507),l=i(50),u=i(111),c=i(112),d=i(51),f=i(9),p=i(2),g=i(56),v=i(153),m=i(7),y=i(24),x=i(10),b=i(57),w=i(20),T=i(82),S=i(115),E=new s({Extends:f,initialize:function(t){f.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,v.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(w.BOOT,this.boot,this),t.sys.events.on(w.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(w.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var t=this.systems.events;t.on(w.TRANSITION_START,this.transitionIn,this),t.on(w.TRANSITION_OUT,this.transitionOut,this),t.on(w.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(w.PRE_UPDATE,this.preUpdate,this),t.once(w.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(t){this.isActive()&&this.emit(d.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(d.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,i=t.length,r=e.length;if(0!==i||0!==r){for(var n=this._list,s=0;s<i;s++){var o=t[s],a=n.indexOf(o);a>-1&&(n.splice(a,1),this.clear(o,!0))}t.length=0,this._pendingRemoval.length=0,this._list=n.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,r=this.manager,n=r.pointers,s=r.pointersTotal;for(i=0;i<s;i++)n[i].updateMotion();if(0===this._list.length)return!1;var o=this.pollRate;if(-1===o)return!1;if(o>0){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var a=!1;for(i=0;i<s;i++){var h=0,l=n[i];this._tempZones=[],this._temp=this.hitTestPointer(l),this.sortGameObjects(this._temp,l),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),h+=this.processOverOutEvents(l),2===this.getDragState(l)&&this.processDragThresholdEvent(l,t),h>0&&(a=!0)}return a},update:function(t,e){if(!this.isActive())return!1;for(var i=e.length,r=!1,n=0;n<i;n++){var s=0,a=e[n];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp,a),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case o.MOUSE_DOWN:s+=this.processDragDownEvent(a),s+=this.processDownEvents(a),s+=this.processOverOutEvents(a);break;case o.MOUSE_UP:s+=this.processDragUpEvent(a),s+=this.processUpEvents(a),s+=this.processOverOutEvents(a);break;case o.TOUCH_START:s+=this.processDragDownEvent(a),s+=this.processDownEvents(a),s+=this.processOverEvents(a);break;case o.TOUCH_END:case o.TOUCH_CANCEL:s+=this.processDragUpEvent(a),s+=this.processUpEvents(a),s+=this.processOutEvents(a);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:s+=this.processDragMoveEvent(a),s+=this.processMoveEvents(a),s+=this.processOverOutEvents(a);break;case o.MOUSE_WHEEL:s+=this.processWheelEvent(a)}s>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(t,e){void 0===e&&(e=!1);var i=t.input;if(i){e||this.queueForRemoval(t),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,t.input=null;var r=this._draggable.indexOf(t);return r>-1&&this._draggable.splice(r,1),(r=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(r,1),(r=this._over[0].indexOf(t))>-1&&(this._over[0].splice(r,1),this.manager.resetCursor(i)),t}},disable:function(t){t.input.enabled=!1},enable:function(t,e,i,r){return void 0===r&&(r=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,i),t.input&&r&&!t.input.dropZone&&(t.input.dropZone=r),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),i=0;i<e.length;i++){for(var r=e[i],n=this.manager.hitTest(t,this._list,r),s=0;s<n.length;s++){var o=n[s];o.input.dropZone&&this._tempZones.push(o)}if(n.length>0)return t.camera=r,n}return t.camera=e[0],[]},processDownEvents:function(t){var e=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=!1,o=0;o<i.length;o++){var a=i[o];if(a.input){if(e++,a.emit(d.GAMEOBJECT_POINTER_DOWN,t,a.input.localX,a.input.localY,n),r.cancelled||!a.input){s=!0;break}if(this.emit(d.GAMEOBJECT_DOWN,t,a,n),r.cancelled||!a.input){s=!0;break}}}return!s&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,t,i):this.emit(d.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var i=!1,r=this.dragTimeThreshold,n=this.dragDistanceThreshold;if((n>0&&l(t.x,t.y,t.downX,t.downY)>=n||r>0&&e>=t.downTime+r)&&(i=!0),i)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],i=0;i<e.length;i++){var r=e[i],n=r.input;n.dragState=2,n.dragStartX=r.x,n.dragStartY=r.y,n.dragStartXGlobal=t.worldX,n.dragStartYGlobal=t.worldY,n.dragX=n.dragStartXGlobal-n.dragStartX,n.dragY=n.dragStartYGlobal-n.dragStartY,r.emit(d.GAMEOBJECT_DRAG_START,t,n.dragX,n.dragY),this.emit(d.DRAG_START,t,r)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var i=[],r=0;r<e.length;r++){var n=e[r];n.input.draggable&&0===n.input.dragState&&i.push(n)}return 0===i.length?(this.setDragState(t,0),0):(i.length>1&&(this.sortGameObjects(i,t),this.topOnly&&i.splice(1)),this._drag[t.id]=i,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,i=this._drag[t.id],r=0;r<i.length;r++){var n,s,o=i[r],a=o.input,h=a.target;if(h){var l=e.indexOf(h);0===l?(o.emit(d.GAMEOBJECT_DRAG_OVER,t,h),this.emit(d.DRAG_OVER,t,o,h)):l>0?(o.emit(d.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(d.DRAG_LEAVE,t,o,h),a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h)):(o.emit(d.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(d.DRAG_LEAVE,t,o,h),e[0]?(a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h)):a.target=null)}else!h&&e[0]&&(a.target=e[0],h=a.target,o.emit(d.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(d.DRAG_ENTER,t,o,h));if(o.parentContainer){var u=t.worldX-a.dragStartXGlobal,c=t.worldY-a.dragStartYGlobal,f=o.getParentRotation(),p=u*Math.cos(f)+c*Math.sin(f),g=c*Math.cos(f)-u*Math.sin(f);p*=1/o.parentContainer.scaleX,g*=1/o.parentContainer.scaleY,n=p+a.dragStartX,s=g+a.dragStartY}else n=t.worldX-a.dragX,s=t.worldY-a.dragY;o.emit(d.GAMEOBJECT_DRAG,t,n,s),this.emit(d.DRAG,t,o,n,s)}return i.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],i=0;i<e.length;i++){var r=e[i],n=r.input;if(n&&2===n.dragState){n.dragState=0,n.dragX=n.localX-r.displayOriginX,n.dragY=n.localY-r.displayOriginY;var s=!1,o=n.target;o&&(r.emit(d.GAMEOBJECT_DROP,t,o),this.emit(d.DROP,t,r,o),n.target=null,s=!0),r.input&&(r.emit(d.GAMEOBJECT_DRAG_END,t,n.dragX,n.dragY,s),this.emit(d.DRAG_END,t,r,s))}}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){var e=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=!1,o=0;o<i.length;o++){var a=i[o];if(a.input){if(e++,a.emit(d.GAMEOBJECT_POINTER_MOVE,t,a.input.localX,a.input.localY,n),r.cancelled||!a.input){s=!0;break}if(this.emit(d.GAMEOBJECT_MOVE,t,a,n),r.cancelled||!a.input){s=!0;break}if(this.topOnly)break}}return s||this.emit(d.POINTER_MOVE,t,i),e},processWheelEvent:function(t){var e=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=!1,o=t.deltaX,a=t.deltaY,h=t.deltaZ,l=0;l<i.length;l++){var u=i[l];if(u.input){if(e++,u.emit(d.GAMEOBJECT_POINTER_WHEEL,t,o,a,h,n),r.cancelled||!u.input){s=!0;break}if(this.emit(d.GAMEOBJECT_WHEEL,t,u,o,a,h,n),r.cancelled||!u.input){s=!0;break}}}return s||this.emit(d.POINTER_WHEEL,t,i,o,a,h),e},processOverEvents:function(t){var e=this._temp,i=0,r=e.length,n=[];if(r>0){var s=this.manager,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var h=!1,l=0;l<r;l++){var u=e[l];if(u.input){if(n.push(u),s.setCursor(u.input),u.emit(d.GAMEOBJECT_POINTER_OVER,t,u.input.localX,u.input.localY,a),i++,o.cancelled||!u.input){h=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,u,a),o.cancelled||!u.input){h=!0;break}}}h||this.emit(d.POINTER_OVER,t,n)}return this._over[t.id]=n,i},processOutEvents:function(t){var e=this._over[t.id],i=0,r=e.length;if(r>0){var n=this.manager,s=this._eventData,o=this._eventContainer;s.cancelled=!1;var a=!1;this.sortGameObjects(e,t);for(var h=0;h<r;h++){var l=e[h];if((l=e[h]).input){if(n.resetCursor(l.input),l.emit(d.GAMEOBJECT_POINTER_OUT,t,o),i++,s.cancelled||!l.input){a=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,l,o),s.cancelled||!l.input){a=!0;break}a||this.emit(d.POINTER_OUT,t,e)}}this._over[t.id]=[]}return i},processOverOutEvents:function(t){var e,i,r=this._temp,n=[],s=[],o=[],a=this._over[t.id],h=this._drag[t.id],l=this.manager;for(e=0;e<a.length;e++)i=a[e],-1===r.indexOf(i)&&-1===h.indexOf(i)?n.push(i):o.push(i);for(e=0;e<r.length;e++)i=r[e],-1===a.indexOf(i)&&s.push(i);var u=n.length,c=0,f=this._eventData,p=this._eventContainer;f.cancelled=!1;var g=!1;if(u>0){for(this.sortGameObjects(n,t),e=0;e<u;e++)if((i=n[e]).input){if(l.resetCursor(i.input),i.emit(d.GAMEOBJECT_POINTER_OUT,t,p),c++,f.cancelled||!i.input){g=!0;break}if(this.emit(d.GAMEOBJECT_OUT,t,i,p),f.cancelled||!i.input){g=!0;break}}g||this.emit(d.POINTER_OUT,t,n)}if(u=s.length,f.cancelled=!1,g=!1,u>0){for(this.sortGameObjects(s,t),e=0;e<u;e++)if((i=s[e]).input){if(l.setCursor(i.input),i.emit(d.GAMEOBJECT_POINTER_OVER,t,i.input.localX,i.input.localY,p),c++,f.cancelled||!i.input){g=!0;break}if(this.emit(d.GAMEOBJECT_OVER,t,i,p),f.cancelled||!i.input){g=!0;break}}g||this.emit(d.POINTER_OVER,t,s)}return a=o.concat(s),this._over[t.id]=this.sortGameObjects(a,t),c},processUpEvents:function(t){var e=this._temp,i=this._eventData,r=this._eventContainer;i.cancelled=!1;for(var n=!1,s=0;s<e.length;s++){var o=e[s];if(o.input){if(o.emit(d.GAMEOBJECT_POINTER_UP,t,o.input.localX,o.input.localY,r),i.cancelled||!o.input){n=!0;break}if(this.emit(d.GAMEOBJECT_UP,t,o,r),i.cancelled||!o.input){n=!0;break}}}return!n&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,t,e):this.emit(d.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];r.input.draggable=e;var n=this._draggable.indexOf(r);e&&-1===n?this._draggable.push(r):!e&&n>-1&&this._draggable.splice(n,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return h(e,t)},setHitArea:function(t,e,i){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var r=!1,n=!1,s=!1,o=!1,h=!1,l=!0;if(m(e)){var u=e;e=p(u,"hitArea",null),i=p(u,"hitAreaCallback",null),r=p(u,"draggable",!1),n=p(u,"dropZone",!1),s=p(u,"cursor",!1),o=p(u,"useHandCursor",!1),h=p(u,"pixelPerfect",!1);var c=p(u,"alphaTolerance",1);h&&(e={},i=this.makePixelPerfect(c)),e&&i||(this.setHitAreaFromTexture(t),l=!1)}else"function"!=typeof e||i||(i=e,e={});for(var d=0;d<t.length;d++){var f=t[d];if(h&&"Container"===f.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var g=f.input?f.input:a(f,e,i);g.customHitArea=l,g.dropZone=n,g.cursor=o?"pointer":s,f.input=g,r&&this.setDraggable(f),this.queueForInsertion(f)}}return this},setHitAreaCircle:function(t,e,i,s,o){void 0===o&&(o=n);var a=new r(e,i,s);return this.setHitArea(t,a,o)},setHitAreaEllipse:function(t,e,i,r,n,s){void 0===s&&(s=c);var o=new u(e,i,r,n);return this.setHitArea(t,o,s)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=b),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i],n=r.frame,s=0,o=0;r.width?(s=r.width,o=r.height):n&&(s=n.realWidth,o=n.realHeight),"Container"!==r.type||0!==s&&0!==o?0!==s&&0!==o&&(r.input=a(r,new x(0,0,s,o),e),this.queueForInsertion(r)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,e,i,r,n,s){void 0===s&&(s=b);var o=new x(e,i,r,n);return this.setHitArea(t,o,s)},setHitAreaTriangle:function(t,e,i,r,n,s,o,a){void 0===a&&(a=S);var h=new T(e,i,r,n,s,o);return this.setHitArea(t,h,a)},enableDebug:function(t,e){void 0===e&&(e=65280);var i=t.input;if(!i||!i.hitArea)return this;var r=i.hitArea,n=r.type,s=i.hitAreaDebug,o=this.systems.add,a=this.systems.updateList;s&&(a.remove(s),s.destroy(),s=null);var h=0,l=0;switch(n){case g.CIRCLE:s=o.arc(0,0,r.radius),h=r.x-r.radius,l=r.y-r.radius;break;case g.ELLIPSE:s=o.ellipse(0,0,r.width,r.height),h=r.x-r.width/2,l=r.y-r.height/2;break;case g.LINE:s=o.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case g.POLYGON:s=o.polygon(0,0,r.points);break;case g.RECTANGLE:s=o.rectangle(0,0,r.width,r.height),h=r.x,l=r.y;break;case g.TRIANGLE:s=o.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)}return s&&(s.isFilled=!1,s.preUpdate=function(){s.setStrokeStyle(1/t.scale,e),s.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var i=t.x,r=t.y,n=t.rotation,o=t.scaleX,a=t.scaleY;if(t.parentContainer){var u=t.getWorldTransformMatrix();i=u.tx,r=u.ty,n=u.rotation,o=u.scaleX,a=u.scaleY}s.setRotation(n),s.setScale(o,a),s.setPosition(i+h,r+l),s.setScrollFactor(t.scrollFactorX,t.scrollFactorY),s.setDepth(t.depth)},a.add(s),i.hitAreaDebug=s),this},removeDebug:function(t){var e=t.input;if(e&&e.hitAreaDebug){var i=e.hitAreaDebug;this.systems.updateList.remove(i),i.destroy(),e.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,e){if(t.length<2)return t;var i=e.camera.renderList;return t.sort((function(t,e){return i.indexOf(e)-i.indexOf(t)}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var i=t.getIndexList(),r=e.getIndexList(),n=Math.min(i.length,r.length),s=0;s<n;s++){var o=i[s],a=r[s];if(o!==a)return a-o}return r.length-i.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.manager;e.canvas.style.cursor=e.defaultCursor;var i=this.systems.events;i.off(w.TRANSITION_START,this.transitionIn,this),i.off(w.TRANSITION_OUT,this.transitionOut,this),i.off(w.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(w.PRE_UPDATE,this.preUpdate,this),e.events.off(d.GAME_OUT,this.onGameOut,this),e.events.off(d.GAME_OVER,this.onGameOver,this),i.off(w.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(w.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",E,"input"),t.exports=E},function(t,e,i){t.exports={Events:i(154),KeyboardManager:i(410),KeyboardPlugin:i(1330),Key:i(512),KeyCodes:i(143),KeyCombo:i(513),AdvanceKeyCombo:i(515),ProcessKeyCombo:i(514),ResetKeyCombo:i(516),JustDown:i(1332),JustUp:i(1333),DownDuration:i(1334),UpDuration:i(1335)}},function(t,e){t.exports="keydown"},function(t,e){t.exports="keyup"},function(t,e){t.exports="keycombomatch"},function(t,e){t.exports="down"},function(t,e){t.exports="keydown-"},function(t,e){t.exports="keyup-"},function(t,e){t.exports="up"},function(t,e,i){var r=i(0),n=i(9),s=i(154),o=i(22),a=i(6),h=i(51),l=i(153),u=i(512),c=i(143),d=i(513),f=i(1331),p=i(20),g=i(76),v=new r({Extends:n,initialize:function(t){n.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(h.BOOT,this.boot,this),t.pluginEvents.on(h.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=a(t,"keyboard",!0);var e=a(t,"keyboard.capture",null);e&&this.addCaptures(e),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(h.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:c.UP,down:c.DOWN,left:c.LEFT,right:c.RIGHT,space:c.SPACE,shift:c.SHIFT})},addKeys:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var r={};if("string"==typeof t){t=t.split(",");for(var n=0;n<t.length;n++){var s=t[n].trim();s&&(r[s]=this.addKey(s,e,i))}}else for(var o in t)r[o]=this.addKey(t[o],e,i);return r},addKey:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var r=this.keys;if(t instanceof u){var n=r.indexOf(t);return n>-1?r[n]=t:r[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(i),t}return"string"==typeof t&&(t=c[t.toUpperCase()]),r[t]||(r[t]=new u(this,t),e&&this.addCapture(t),r[t].setEmitOnRepeat(i)),r[t]},removeKey:function(t,e){void 0===e&&(e=!1);var i,r=this.keys;if(t instanceof u){var n=r.indexOf(t);n>-1&&(i=this.keys[n],this.keys[n]=void 0)}else"string"==typeof t&&(t=c[t.toUpperCase()]);return r[t]&&(i=r[t],r[t]=void 0),i&&(i.plugin=null,e&&i.destroy()),this},removeAllKeys:function(t){for(var e=this.keys,i=0;i<e.length;i++){var r=e[i];r&&(e[i]=void 0,t&&r.destroy())}return this},createCombo:function(t,e){return new d(this,t,e)},checkDown:function(t,e){if(void 0===e&&(e=0),this.enabled&&t.isDown){var i=g(this.time-t.timeDown,e);if(i>t._tick)return t._tick=i,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var i=this.keys,r=0;r<e;r++){var n=t[r],o=n.keyCode,a=i[o],h=!1;void 0===n.cancelled&&(n.cancelled=0,n.stopImmediatePropagation=function(){n.cancelled=1},n.stopPropagation=function(){n.cancelled=-1}),-1!==n.cancelled&&(o===this.prevCode&&n.timeStamp===this.prevTime&&n.type===this.prevType||(this.prevCode=o,this.prevTime=n.timeStamp,this.prevType=n.type,"keydown"===n.type?(a&&(h=a.isDown,a.onDown(n)),n.cancelled||a&&h||(f[o]&&this.emit(s.KEY_DOWN+f[o],n),n.cancelled||this.emit(s.ANY_KEY_DOWN,n))):(a&&a.onUp(n),n.cancelled||(f[o]&&this.emit(s.KEY_UP+f[o],n),n.cancelled||this.emit(s.ANY_KEY_UP,n))),1===n.cancelled&&(n.cancelled=0)))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(h.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",v,"keyboard","keyboard","inputKeyboard"),t.exports=v},function(t,e,i){var r=i(143),n={};for(var s in r)n[r[s]]=s;t.exports=n},function(t,e){t.exports=function(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,e){t.exports=function(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeDown;return t.isDown&&i<e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeUp;return t.isUp&&i<e}},function(t,e,i){t.exports={MouseManager:i(411)}},function(t,e,i){t.exports={TouchManager:i(413)}},function(t,e,i){var r=i(21),n=i(17),s={Events:i(95),FileTypes:i(1339),File:i(23),FileTypesManager:i(8),GetURL:i(155),LoaderPlugin:i(1365),MergeXHRSettings:i(240),MultiFile:i(49),XHRLoader:i(517),XHRSettings:i(156)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={AnimationJSONFile:i(1340),AsepriteFile:i(1341),AtlasJSONFile:i(1342),AtlasXMLFile:i(1343),AudioFile:i(518),AudioSpriteFile:i(1344),BinaryFile:i(1345),BitmapFontFile:i(1346),CSSFile:i(1347),GLSLFile:i(1348),HTML5AudioFile:i(519),HTMLFile:i(1349),HTMLTextureFile:i(1350),ImageFile:i(71),JSONFile:i(61),MultiAtlasFile:i(1351),MultiScriptFile:i(1352),OBJFile:i(1353),PackFile:i(1354),PluginFile:i(1355),SceneFile:i(1356),ScenePluginFile:i(1357),ScriptFile:i(520),SpriteSheetFile:i(1358),SVGFile:i(1359),TextFile:i(242),TilemapCSVFile:i(1360),TilemapImpactFile:i(1361),TilemapJSONFile:i(1362),UnityAtlasFile:i(1363),VideoFile:i(1364),XMLFile:i(241)}},function(t,e,i){var r=i(0),n=i(8),s=i(61),o=i(95),a=new r({Extends:s,initialize:function(t,e,i,r,n){s.call(this,t,e,i,r,n),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});n.register("animation",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,r,i));return this})),t.exports=a},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(61),l=i(49),u=new r({Extends:l,initialize:function(t,e,i,r,n,u){var c,d;if(a(e)){var f=e;e=s(f,"key"),c=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new h(t,{key:e,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","json"),xhrSettings:s(f,"atlasXhrSettings")})}else c=new o(t,e,i,n),d=new h(t,e,r,u);c.linkFile?l.call(this,t,"atlasjson",e,[c,d,c.linkFile]):l.call(this,t,"atlasjson",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0}}});n.register("aseprite",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(61),l=i(49),u=new r({Extends:l,initialize:function(t,e,i,r,n,u){var c,d;if(a(e)){var f=e;e=s(f,"key"),c=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new h(t,{key:e,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","json"),xhrSettings:s(f,"atlasXhrSettings")})}else c=new o(t,e,i,n),d=new h(t,e,r,u);c.linkFile?l.call(this,t,"atlasjson",e,[c,d,c.linkFile]):l.call(this,t,"atlasjson",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});n.register("atlas",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(49),l=i(241),u=new r({Extends:h,initialize:function(t,e,i,r,n,u){var c,d;if(a(e)){var f=e;e=s(f,"key"),c=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new l(t,{key:e,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","xml"),xhrSettings:s(f,"atlasXhrSettings")})}else c=new o(t,e,i,n),d=new l(t,e,r,u);c.linkFile?h.call(this,t,"atlasxml",e,[c,d,c.linkFile]):h.call(this,t,"atlasxml",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});n.register("atlasXML",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var r=i(518),n=i(0),s=i(8),o=i(2),a=i(7),h=i(61),l=i(49),u=new n({Extends:l,initialize:function(t,e,i,n,s,u,c){if(a(e)){var d=e;e=o(d,"key"),i=o(d,"jsonURL"),n=o(d,"audioURL"),s=o(d,"audioConfig"),u=o(d,"audioXhrSettings"),c=o(d,"jsonXhrSettings")}var f;if(n){var p=r.create(t,e,n,s,u);p&&(f=new h(t,e,i,c),l.call(this,t,"audiosprite",e,[p,f]),this.config.resourceLoad=!1)}else f=new h(t,e,i,c),l.call(this,t,"audiosprite",e,[f]),this.config.resourceLoad=!0,this.config.audioConfig=s,this.config.audioXhrSettings=u},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var e=t.data.resources,i=o(this.config,"audioConfig"),n=o(this.config,"audioXhrSettings"),s=r.create(this.loader,t.key,e,i,n);s&&(this.addToMultiFile(s),this.loader.addFile(s))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.addToCache(),this.complete=!0}}});s.register("audioSprite",(function(t,e,i,r,n,s){var o,a=this.systems.game,h=a.config.audio,l=a.device.audio;if(h&&h.noAudio||!l.webAudio&&!l.audioData)return this;if(Array.isArray(t))for(var c=0;c<t.length;c++)(o=new u(this,t[c])).files&&this.addFile(o.files);else(o=new u(this,t,e,i,r,n,s)).files&&this.addFile(o.files);return this}))},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r,n){var o="bin";if(h(e)){var l=e;e=a(l,"key"),i=a(l,"url"),r=a(l,"xhrSettings"),o=a(l,"extension",o),n=a(l,"dataType",n)}var u={type:"binary",cache:t.cacheManager.binary,extension:o,responseType:"arraybuffer",key:e,url:i,xhrSettings:r,config:{dataType:n}};s.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,r,i));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(49),l=i(212),u=i(241),c=new r({Extends:h,initialize:function(t,e,i,r,n,l){var c,d;if(a(e)){var f=e;e=s(f,"key"),c=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new u(t,{key:e,url:s(f,"fontDataURL"),extension:s(f,"fontDataExtension","xml"),xhrSettings:s(f,"fontDataXhrSettings")})}else c=new o(t,e,i,n),d=new u(t,e,r,l);c.linkFile?h.call(this,t,"bitmapfont",e,[c,d,c.linkFile]):h.call(this,t,"bitmapfont",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.pendingDestroy();var i=t.cache.get(t.key),r=l(e.data,t.cache.getFrame(t.key),0,0,i);this.loader.cacheManager.bitmapFont.add(t.key,{data:r,texture:t.key,frame:null}),this.complete=!0}}});n.register("bitmapFont",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new c(this,t[o]),this.addFile(s.files);else s=new c(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r){var n="css";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var l={type:"script",cache:!1,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=i(396),u=new r({Extends:s,initialize:function(t,e,i,r,n){var o="glsl";if(h(e)){var l=e;e=a(l,"key"),i=a(l,"url"),r=a(l,"shaderType","fragment"),n=a(l,"xhrSettings"),o=a(l,"extension",o)}else void 0===r&&(r="fragment");var u={type:"glsl",cache:t.cacheManager.shader,extension:o,responseType:"text",key:e,url:i,config:{shaderType:r},xhrSettings:n};s.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var i=this.getShaderName(e.header),r=this.getShaderType(e.header),n=this.getShaderUniforms(e.header),s=e.shader;if(this.cache.has(i)){var o=this.cache.get(i);"fragment"===r?o.fragmentSrc=s:o.vertexSrc=s,o.uniforms||(o.uniforms=n)}else"fragment"===r?this.cache.add(i,new l(i,s,"",n)):this.cache.add(i,new l(i,"",s,n));e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},i=0;i<t.length;i++){var r=t[i].trim();if("uniform."===r.substring(0,8)){var n=r.indexOf(":");if(n){var s=r.substring(8,n);try{e[s]=JSON.parse(r.substring(n+1))}catch(t){console.warn("Invalid uniform JSON: "+s)}}}}return e},extractBlock:function(t,e){for(var i=-1,r=-1,n=-1,s=!1,o=!1,a=[],h=[],l=e;l<t.length;l++){var u=t[l].trim();if("---"===u)if(-1===i)i=l,s=!0;else{if(!s){o=!1;break}r=l,s=!1,o=!0}else s?a.push(u):o&&(h.push(u),n=l)}return s||-1===r?null:{header:a,shader:h.join("\n"),offset:n}}});o.register("glsl",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,i,r));return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r){var n="html";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var l={type:"text",cache:t.cacheManager.html,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r,n,o){void 0===r&&(r=512),void 0===n&&(n=512);var l="html";if(h(e)){var u=e;e=a(u,"key"),i=a(u,"url"),o=a(u,"xhrSettings"),l=a(u,"extension",l),r=a(u,"width",r),n=a(u,"height",n)}var c={type:"html",cache:t.textureManager,extension:l,responseType:"text",key:e,url:i,xhrSettings:o,config:{width:r,height:n}};s.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.config.width,e=this.config.height,i=[];i.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var r=[i.join("\n")],o=this;try{var a=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(t){return o.state=n.FILE_ERRORED,void o.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(o.data),o.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(o.data),o.onProcessError()},s.createObjectURL(this.data,a,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});o.register("htmlTexture",(function(t,e,i,r,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,r,n));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(61),l=i(49),u=new r({Extends:l,initialize:function(t,e,i,r,n,o,u){if(a(e)){var c=e;e=s(c,"key"),i=s(c,"url",!1)?s(c,"url"):s(c,"atlasURL"),o=s(c,"xhrSettings"),r=s(c,"path"),n=s(c,"baseURL"),u=s(c,"textureXhrSettings")}var d=new h(t,e,i,o);l.call(this,t,"multiatlas",e,[d]),this.config.path=r,this.config.baseURL=n,this.config.textureXhrSettings=u},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,i=this.config,r=this.loader,n=r.baseURL,a=r.path,h=r.prefix,l=s(i,"baseURL",this.baseURL),u=s(i,"path",this.path),c=s(i,"prefix",this.prefix),d=s(i,"textureXhrSettings");r.setBaseURL(l),r.setPath(u),r.setPrefix(c);for(var f=0;f<e.length;f++){var p=e[f].image,g="MA"+this.multiKeyIndex+"_"+p,v=new o(r,g,p,d);if(this.addToMultiFile(v),r.addFile(v),e[f].normalMap){var m=new o(r,g,e[f].normalMap,d);m.type="normalMap",v.setLink(m),this.addToMultiFile(m),r.addFile(m)}}r.setBaseURL(n),r.setPath(a),r.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],i=[],r=[],n=1;n<this.files.length;n++){var s=this.files[n];if("normalMap"!==s.type)for(var o=s.key.indexOf("_"),a=s.key.substr(o+1),h=s.data,l=0;l<t.data.textures.length;l++){var u=t.data.textures[l];if(u.image===a){i.push(h),e.push(u),s.linkFile&&r.push(s.linkFile.data);break}}}for(0===r.length&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,e,r),this.complete=!0,n=0;n<this.files.length;n++)this.files[n].pendingDestroy()}}});n.register("multiatlas",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(7),a=i(49),h=i(520),l=new r({Extends:a,initialize:function(t,e,i,r){var n="js",l=[];if(o(e)){var u=e;e=s(u,"key"),i=s(u,"url"),r=s(u,"xhrSettings"),n=s(u,"extension",n)}Array.isArray(i)||(i=[i]);for(var c=0;c<i.length;c++){var d=new h(t,{key:e+"_"+c.toString(),url:i[c],extension:n,xhrSettings:r});d.onProcess=function(){this.onProcessComplete()},l.push(d)}a.call(this,t,"scripts",e,l)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});n.register("scripts",(function(t,e,i){var r;if(Array.isArray(t))for(var n=0;n<t.length;n++)r=new l(this,t[n]),this.addFile(r.files);else r=new l(this,t,e,i),this.addFile(r.files);return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(7),a=i(49),h=i(498),l=i(499),u=i(242),c=new r({Extends:a,initialize:function(t,e,i,r,n,h){var l,c,d=t.cacheManager.obj;if(o(e)){var f=e;e=s(f,"key"),l=new u(t,{key:e,type:"obj",cache:d,url:s(f,"url"),extension:s(f,"extension","obj"),xhrSettings:s(f,"xhrSettings"),config:{flipUV:s(f,"flipUV",n)}}),(r=s(f,"matURL"))&&(c=new u(t,{key:e,type:"mat",cache:d,url:r,extension:s(f,"matExtension","mat"),xhrSettings:s(f,"xhrSettings")}))}else l=new u(t,{key:e,url:i,type:"obj",cache:d,extension:"obj",xhrSettings:h,config:{flipUV:n}}),r&&(c=new u(t,{key:e,url:r,type:"mat",cache:d,extension:"mat",xhrSettings:h}));a.call(this,t,"obj",e,[l,c])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=h(t.data,t.config.flipUV);e&&(i.materials=l(e.data)),t.cache.add(t.key,i),this.complete=!0}}});n.register("obj",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new c(this,t[o]),this.addFile(s.files);else s=new c(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=c},function(t,e,i){var r=i(0),n=i(21),s=i(8),o=i(61),a=new r({Extends:o,initialize:function(t,e,i,r,n){o.call(this,t,e,i,r,n),this.type="packfile"},onProcess:function(){this.state!==n.FILE_POPULATED&&(this.state=n.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,r,i));return this})),t.exports=a},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r,o,l){var u="js";if(h(e)){var c=e;e=a(c,"key"),i=a(c,"url"),l=a(c,"xhrSettings"),u=a(c,"extension",u),r=a(c,"start"),o=a(c,"mapping")}var d={type:"plugin",cache:!1,extension:u,responseType:"text",key:e,url:i,xhrSettings:l,config:{start:r,mapping:o}};s.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=n.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=a(e,"start",!1),r=a(e,"mapping",null);if(this.state===n.FILE_POPULATED)t.install(this.key,this.data,i,r);else{this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var s=t.install(this.key,window[this.key],i,r);(i||r)&&(this.loader.systems[r]=s,this.loader.scene[r]=s)}this.onProcessComplete()}});o.register("plugin",(function(t,e,i,r,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,r,n));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r){var n="js";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var l={type:"text",extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});o.register("sceneFile",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r,o,l){var u="js";if(h(e)){var c=e;e=a(c,"key"),i=a(c,"url"),l=a(c,"xhrSettings"),u=a(c,"extension",u),r=a(c,"systemKey"),o=a(c,"sceneKey")}var d={type:"scenePlugin",cache:!1,extension:u,responseType:"text",key:e,url:i,xhrSettings:l,config:{systemKey:r,sceneKey:o}};s.call(this,t,d),"function"==typeof i&&(this.data=i,this.state=n.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=this.key,r=a(e,"systemKey",i),s=a(e,"sceneKey",i);this.state===n.FILE_POPULATED?t.installScenePlugin(r,this.data,s,this.loader.scene,!0):(this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(r,window[this.key],s,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",(function(t,e,i,r,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new l(this,t[s]));else this.addFile(new l(this,t,e,i,r,n));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(8),s=i(71),o=new r({Extends:s,initialize:function(t,e,i,r,n){s.call(this,t,e,i,n,r),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});n.register("spritesheet",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new o(this,t[n]));else this.addFile(new o(this,t,e,i,r));return this})),t.exports=o},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=new r({Extends:s,initialize:function(t,e,i,r,n){var o="svg";if(h(e)){var l=e;e=a(l,"key"),i=a(l,"url"),r=a(l,"svgConfig",{}),n=a(l,"xhrSettings"),o=a(l,"extension",o)}var u={type:"svg",cache:t.textureManager,extension:o,responseType:"text",key:e,url:i,xhrSettings:n,config:{width:a(r,"width"),height:a(r,"height"),scale:a(r,"scale")}};s.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],i=this.config.width,r=this.config.height,o=this.config.scale;t:if(i&&r||o){var a=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],h=a.hasAttribute("viewBox"),l=parseFloat(a.getAttribute("width")),u=parseFloat(a.getAttribute("height"));if(!h&&l&&u)a.setAttribute("viewBox","0  0 "+l+" "+u);else if(h&&!l&&!u){var c=a.getAttribute("viewBox").split(/\s+|,/);l=c[2],u=c[3]}if(o){if(!l||!u)break t;i=l*o,r=u*o}a.setAttribute("width",i.toString()+"px"),a.setAttribute("height",r.toString()+"px"),e=[(new XMLSerializer).serializeToString(a)]}try{var d=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this,p=!1;this.data.onload=function(){p||s.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){p?f.onProcessError():(p=!0,s.revokeObjectURL(f.data),f.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},s.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});o.register("svg",(function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new l(this,t[n]));else this.addFile(new l(this,t,e,i,r));return this})),t.exports=l},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(2),h=i(7),l=i(40),u=new r({Extends:s,initialize:function(t,e,i,r){var n="csv";if(h(e)){var o=e;e=a(o,"key"),i=a(o,"url"),r=a(o,"xhrSettings"),n=a(o,"extension",n)}var u={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:n,responseType:"text",key:e,url:i,xhrSettings:r};s.call(this,t,u),this.tilemapFormat=l.CSV},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});o.register("tilemapCSV",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new u(this,t[r]));else this.addFile(new u(this,t,e,i));return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(8),s=i(61),o=i(40),a=new r({Extends:s,initialize:function(t,e,i,r){s.call(this,t,e,i,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});n.register("tilemapImpact",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,i));return this})),t.exports=a},function(t,e,i){var r=i(0),n=i(8),s=i(61),o=i(40),a=new r({Extends:s,initialize:function(t,e,i,r){s.call(this,t,e,i,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});n.register("tilemapTiledJSON",(function(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,i));return this})),t.exports=a},function(t,e,i){var r=i(0),n=i(8),s=i(2),o=i(71),a=i(7),h=i(49),l=i(242),u=new r({Extends:h,initialize:function(t,e,i,r,n,u){var c,d;if(a(e)){var f=e;e=s(f,"key"),c=new o(t,{key:e,url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),d=new l(t,{key:e,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","txt"),xhrSettings:s(f,"atlasXhrSettings")})}else c=new o(t,e,i,n),d=new l(t,e,r,u);c.linkFile?h.call(this,t,"unityatlas",e,[c,d,c.linkFile]):h.call(this,t,"unityatlas",e,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,i),e.pendingDestroy(),this.complete=!0}}});n.register("unityAtlas",(function(t,e,i,r,n){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new u(this,t[o]),this.addFile(s.files);else s=new u(this,t,e,i,r,n),this.addFile(s.files);return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(21),s=i(23),o=i(8),a=i(155),h=i(2),l=i(7),u=new r({Extends:s,initialize:function(t,e,i,r,n,o,a){void 0===r&&(r="loadeddata"),void 0===n&&(n=!1),void 0===o&&(o=!1),"loadeddata"!==r&&"canplay"!==r&&"canplaythrough"!==r&&(r="loadeddata");var h={type:"video",cache:t.cacheManager.video,extension:i.type,responseType:"blob",key:e,url:i.url,xhrSettings:a,config:{loadEvent:r,asBlob:n,noAudio:o}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),s.call(this,t,h)},onProcess:function(){if(this.state=n.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var e=this;this.data.onloadeddata=function(){e.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(e.data),e.onProcessError()},s.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var e=t.target;e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0),this.data=e,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var e=t.target;e&&(e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t=this.config.loadEvent;if(this.config.asBlob)s.prototype.load.call(this);else{this.percentComplete=0;var e=this.createVideoElement();e.addEventListener(t,this.onLoadCallback,!0),e.addEventListener("error",this.onErrorCallback,!0),e.src=a(this,this.loader.baseURL),e.load()}}});u.create=function(t,e,i,r,n,s,o){var a=t.systems.game;l(e)&&(i=h(e,"url",[]),r=h(e,"loadEvent","loadeddata"),n=h(e,"asBlob",!1),s=h(e,"noAudio",!1),o=h(e,"xhrSettings"),e=h(e,"key"));var c=u.getVideoURL(a,i);if(c)return new u(t,e,c,r,n,s,o)},u.getVideoURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r,n=h(e[i],"url",e[i]);if(0===n.indexOf("blob:"))return{url:n,type:""};if(r=0===n.indexOf("data:")?n.split(",")[0].match(/\/(.*?);/):n.match(/\.([a-zA-Z0-9]+)($|\?)/),r=h(e[i],"type",r?r[1]:"").toLowerCase(),t.device.video[r])return{url:n,type:r}}return null},o.register("video",(function(t,e,i,r,n,s){var o;if(Array.isArray(t))for(var a=0;a<t.length;a++)(o=u.create(this,t[a]))&&this.addFile(o);else(o=u.create(this,t,e,i,r,n,s))&&this.addFile(o);return this})),t.exports=u},function(t,e,i){var r=i(0),n=i(21),s=i(149),o=i(9),a=i(95),h=i(8),l=i(2),u=i(24),c=i(20),d=i(156),f=new r({Extends:o,initialize:function(t){o.call(this);var e=t.sys.game.config,i=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(i,"baseURL",e.loaderBaseURL)),this.setPath(l(i,"path",e.loaderPath)),this.setPrefix(l(i,"prefix",e.loaderPrefix)),this.maxParallelDownloads=l(i,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=d(l(i,"responseType",e.loaderResponseType),l(i,"async",e.loaderAsync),l(i,"user",e.loaderUser),l(i,"password",e.loaderPassword),l(i,"timeout",e.loaderTimeout),l(i,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=l(i,"crossOrigin",e.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=n.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(c.BOOT,this.boot,this),t.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];this.keyExists(i)||(this.list.set(i),this.emit(a.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1})),!e&&this.isLoading()&&(this.inflight.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1})),this.queue.iterate((function(i){if(i.type===t.type&&i.key===t.key)return e=!0,!1}))),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var i=0,r=this.baseURL,n=this.path,s=this.prefix;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=t[o],h=l(a,"baseURL",r),u=l(a,"path",n),c=l(a,"prefix",s),d=l(a,"files",null),f=l(a,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(h),this.setPath(u),this.setPrefix(c);for(var p=0;p<d.length;p++){var g=d[p],v=g.hasOwnProperty("type")?g.type:f;this[v]&&(this[v](g),i++)}}}return this.setBaseURL(r),this.setPath(n),this.setPrefix(s),i>0},isLoading:function(){return this.state===n.LOADER_LOADING||this.state===n.LOADER_PROCESSING},isReady:function(){return this.state===n.LOADER_IDLE||this.state===n.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),0===this.list.size?this.loadComplete():(this.state=n.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===n.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===n.FILE_POPULATED||t.state===n.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(a.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(a.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===n.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===n.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=n.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,i){void 0===e&&(e="file.json"),void 0===i&&(i="application/json");var r=new Blob([t],{type:i}),n=URL.createObjectURL(r),s=document.createElement("a");return s.download=e,s.textContent="Download "+e,s.href=n,s.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(l(e,"baseURL",t.loaderBaseURL)),this.setPath(l(e,"path",t.loaderPath)),this.setPrefix(l(e,"prefix",t.loaderPrefix)),this.state=n.LOADER_IDLE},shutdown:function(){this.reset(),this.state=n.LOADER_SHUTDOWN,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=n.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",f,"load"),t.exports=f},function(t,e,i){var r=i(62),n=i(17),s={ArcadePhysics:i(1367),Body:i(527),Collider:i(528),Components:i(243),Events:i(245),Factory:i(521),GetOverlapX:i(246),GetOverlapY:i(247),SeparateX:i(537),SeparateY:i(538),Group:i(524),Image:i(522),Sprite:i(157),StaticBody:i(539),StaticGroup:i(525),Tilemap:i(1391),World:i(526)};s=n(!1,s,r),t.exports=s},function(t,e,i){var r=i(0),n=i(36),s=i(50),o=i(353),a=i(521),h=i(2),l=i(127),u=i(523),c=i(244),d=i(24),f=i(20),p=i(3),g=i(526),v=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(f.BOOT,this.boot,this),t.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new a(this.world));var t=this.systems.events;h(this.config,"customUpdate",!1)||t.on(f.UPDATE,this.world.update,this.world),t.on(f.POST_UPDATE,this.world.postUpdate,this.world),t.once(f.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(f.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(f.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return l(h(e,"arcade",{}),h(t,"arcade",{}))},overlap:function(t,e,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.world.collideObjects(t,e,i,r,n,!0)},collide:function(t,e,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.world.collideObjects(t,e,i,r,n,!1)},collideTiles:function(t,e,i,r,n){return this.world.collideTiles(t,e,i,r,n)},overlapTiles:function(t,e,i,r,n){return this.world.overlapTiles(t,e,i,r,n)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,i,r,n,s){void 0===r&&(r=60);var o=Math.atan2(i-t.y,e-t.x);return t.body.acceleration.setToPolar(o,r),void 0!==n&&void 0!==s&&t.body.maxVelocity.set(n,s),o},accelerateToObject:function(t,e,i,r,n){return this.accelerateTo(t,e.x,e.y,i,r,n)},closest:function(t,e){e||(e=this.world.bodies.entries);for(var i=Number.MAX_VALUE,r=null,n=t.x,s=t.y,a=e.length,h=0;h<a;h++){var l=e[h],u=l.body||l;if(t!==l&&t!==u&&t!==u.gameObject&&t!==u.center){var c=o(n,s,u.center.x,u.center.y);c<i&&(r=l,i=c)}}return r},furthest:function(t,e){e||(e=this.world.bodies.entries);for(var i=-1,r=null,n=t.x,s=t.y,a=e.length,h=0;h<a;h++){var l=e[h],u=l.body||l;if(t!==l&&t!==u&&t!==u.gameObject&&t!==u.center){var c=o(n,s,u.center.x,u.center.y);c>i&&(r=l,i=c)}}return r},moveTo:function(t,e,i,r,n){void 0===r&&(r=60),void 0===n&&(n=0);var o=Math.atan2(i-t.y,e-t.x);return n>0&&(r=s(t.x,t.y,e,i)/(n/1e3)),t.body.velocity.setToPolar(o,r),o},moveToObject:function(t,e,i,r){return this.moveTo(t,e.x,e.y,i,r)},velocityFromAngle:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new p),i.setToPolar(n(t),e)},velocityFromRotation:function(t,e,i){return void 0===e&&(e=60),void 0===i&&(i=new p),i.setToPolar(t,e)},overlapRect:function(t,e,i,r,n,s){return c(this.world,t,e,i,r,n,s)},overlapCirc:function(t,e,i,r,n){return u(this.world,t,e,i,r,n)},shutdown:function(){if(this.world){var t=this.systems.events;t.off(f.UPDATE,this.world.update,this.world),t.off(f.POST_UPDATE,this.world.postUpdate,this.world),t.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",v,"arcadePhysics"),t.exports=v},function(t,e){t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(t,e){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(t,e){t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,i){return this.body.setCollideWorldBounds(t,e,i),this}}},function(t,e){t.exports={setDebug:function(t,e,i){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=i,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,e){t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(t,e){t.exports={enableBody:function(t,e,i,r,n){return t&&this.body.reset(e,i),r&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},function(t,e){t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(t,e){t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(t,e){t.exports={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}}},function(t,e){t.exports={setMass:function(t){return this.body.mass=t,this}}},function(t,e){t.exports={setPushable:function(t){return void 0===t&&(t=!0),this.body.pushable=t,this}}},function(t,e){t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,i){return this.body.setSize(t,e,i),this},setBodySize:function(t,e,i){return this.body.setSize(t,e,i),this},setCircle:function(t,e,i){return this.body.setCircle(t,e,i),this}}},function(t,e){t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},function(t,e){t.exports="collide"},function(t,e){t.exports="overlap"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="tilecollide"},function(t,e){t.exports="tileoverlap"},function(t,e){t.exports="worldbounds"},function(t,e){t.exports="worldstep"},function(t,e){var i,r,n,s,o,a,h,l,u,c,d,f,p,g,v,m,y,x=function(){return c&&v&&r.blocked.right?(i.processX(-y,h,!1,!0),1):u&&m&&r.blocked.left?(i.processX(y,h,!0),1):p&&m&&i.blocked.right?(r.processX(-y,l,!1,!0),2):f&&v&&i.blocked.left?(r.processX(y,l,!0),2):0},b=function(t){if(n&&s)y*=.5,0===t||3===t?(i.processX(y,o),r.processX(-y,a)):(i.processX(-y,o),r.processX(y,a));else if(n&&!s)0===t||3===t?i.processX(y,h,!0):i.processX(-y,h,!1,!0);else if(!n&&s)0===t||3===t?r.processX(-y,l,!1,!0):r.processX(y,l,!0);else{var e=.5*y;0===t?g?(i.processX(y,0,!0),r.processX(0,null,!1,!0)):p?(i.processX(e,0,!0),r.processX(-e,0,!1,!0)):(i.processX(e,r.velocity.x,!0),r.processX(-e,null,!1,!0)):1===t?d?(i.processX(0,null,!1,!0),r.processX(y,0,!0)):c?(i.processX(-e,0,!1,!0),r.processX(e,0,!0)):(i.processX(-e,null,!1,!0),r.processX(e,i.velocity.x,!0)):2===t?g?(i.processX(-y,0,!1,!0),r.processX(0,null,!0)):f?(i.processX(-e,0,!1,!0),r.processX(e,0,!0)):(i.processX(-e,r.velocity.x,!1,!0),r.processX(e,null,!0)):3===t&&(d?(i.processX(0,null,!0),r.processX(-y,0,!1,!0)):u?(i.processX(e,0,!0),r.processX(-e,0,!1,!0)):(i.processX(e,r.velocity.y,!0),r.processX(-e,null,!1,!0)))}return!0};t.exports={BlockCheck:x,Check:function(){var t=i.velocity.x,e=r.velocity.x,n=Math.sqrt(e*e*r.mass/i.mass)*(e>0?1:-1),s=Math.sqrt(t*t*i.mass/r.mass)*(t>0?1:-1),h=.5*(n+s);return s-=h,o=h+(n-=h)*i.bounce.x,a=h+s*r.bounce.x,u&&m?b(0):f&&v?b(1):c&&v?b(2):!(!p||!m)&&b(3)},Set:function(t,e,o){r=e;var a=(i=t).velocity.x,b=r.velocity.x;return n=i.pushable,u=i._dx<0,c=i._dx>0,d=0===i._dx,v=Math.abs(i.right-r.x)<=Math.abs(r.right-i.x),h=b-a*i.bounce.x,s=r.pushable,f=r._dx<0,p=r._dx>0,g=0===r._dx,m=!v,l=a-b*r.bounce.x,y=Math.abs(o),x()},Run:b,RunImmovableBody1:function(t){1===t?r.velocity.x=0:v?r.processX(y,l,!0):r.processX(-y,l,!1,!0),i.moves&&(r.y+=(i.y-i.prev.y)*i.friction.y,r._dy=r.y-r.prev.y)},RunImmovableBody2:function(t){2===t?i.velocity.x=0:m?i.processX(y,h,!0):i.processX(-y,h,!1,!0),r.moves&&(i.y+=(r.y-r.prev.y)*r.friction.y,i._dy=i.y-i.prev.y)}}},function(t,e){var i,r,n,s,o,a,h,l,u,c,d,f,p,g,v,m,y,x=function(){return c&&v&&r.blocked.down?(i.processY(-y,h,!1,!0),1):u&&m&&r.blocked.up?(i.processY(y,h,!0),1):p&&m&&i.blocked.down?(r.processY(-y,l,!1,!0),2):f&&v&&i.blocked.up?(r.processY(y,l,!0),2):0},b=function(t){if(n&&s)y*=.5,0===t||3===t?(i.processY(y,o),r.processY(-y,a)):(i.processY(-y,o),r.processY(y,a));else if(n&&!s)0===t||3===t?i.processY(y,h,!0):i.processY(-y,h,!1,!0);else if(!n&&s)0===t||3===t?r.processY(-y,l,!1,!0):r.processY(y,l,!0);else{var e=.5*y;0===t?g?(i.processY(y,0,!0),r.processY(0,null,!1,!0)):p?(i.processY(e,0,!0),r.processY(-e,0,!1,!0)):(i.processY(e,r.velocity.y,!0),r.processY(-e,null,!1,!0)):1===t?d?(i.processY(0,null,!1,!0),r.processY(y,0,!0)):c?(i.processY(-e,0,!1,!0),r.processY(e,0,!0)):(i.processY(-e,null,!1,!0),r.processY(e,i.velocity.y,!0)):2===t?g?(i.processY(-y,0,!1,!0),r.processY(0,null,!0)):f?(i.processY(-e,0,!1,!0),r.processY(e,0,!0)):(i.processY(-e,r.velocity.y,!1,!0),r.processY(e,null,!0)):3===t&&(d?(i.processY(0,null,!0),r.processY(-y,0,!1,!0)):u?(i.processY(e,0,!0),r.processY(-e,0,!1,!0)):(i.processY(e,r.velocity.y,!0),r.processY(-e,null,!1,!0)))}return!0};t.exports={BlockCheck:x,Check:function(){var t=i.velocity.y,e=r.velocity.y,n=Math.sqrt(e*e*r.mass/i.mass)*(e>0?1:-1),s=Math.sqrt(t*t*i.mass/r.mass)*(t>0?1:-1),h=.5*(n+s);return s-=h,o=h+(n-=h)*i.bounce.y,a=h+s*r.bounce.y,u&&m?b(0):f&&v?b(1):c&&v?b(2):!(!p||!m)&&b(3)},Set:function(t,e,o){r=e;var a=(i=t).velocity.y,b=r.velocity.y;return n=i.pushable,u=i._dy<0,c=i._dy>0,d=0===i._dy,v=Math.abs(i.bottom-r.y)<=Math.abs(r.bottom-i.y),h=b-a*i.bounce.y,s=r.pushable,f=r._dy<0,p=r._dy>0,g=0===r._dy,m=!v,l=a-b*r.bounce.y,y=Math.abs(o),x()},Run:b,RunImmovableBody1:function(t){1===t?r.velocity.y=0:v?r.processY(y,l,!0):r.processY(-y,l,!1,!0),i.moves&&(r.x+=(i.x-i.prev.x)*i.friction.x,r._dx=r.x-r.prev.x)},RunImmovableBody2:function(t){2===t?i.velocity.y=0:m?i.processY(y,h,!0):i.processY(-y,h,!1,!0),r.moves&&(i.x+=(r.x-r.prev.x)*r.friction.x,i._dx=i.x-i.prev.x)}}},function(t,e,i){var r={ProcessTileCallbacks:i(530),ProcessTileSeparationX:i(534),ProcessTileSeparationY:i(536),SeparateTile:i(532),TileCheckX:i(533),TileCheckY:i(535),TileIntersectsBody:i(248)};t.exports=r},function(t,e,i){var r=i(0),n=i(3),s=new r({initialize:function(){this.boundsCenter=new n,this.centerDiff=new n},parseBody:function(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var e=this.boundsCenter,i=this.centerDiff,r=t.bounds.max.x-t.bounds.min.x,n=t.bounds.max.y-t.bounds.min.y,s=r*t.centerOfMass.x,o=n*t.centerOfMass.y;return e.set(r/2,n/2),i.set(s-e.x,o-e.y),!0},getTopLeft:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+r.x+s.x,i+r.y+s.y)}return!1},getTopCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+s.x,i+r.y+s.y)}return!1},getTopRight:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e-(r.x-s.x),i+r.y+s.y)}return!1},getLeftCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+r.x+s.x,i+s.y)}return!1},getCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.centerDiff;return new n(e+r.x,i+r.y)}return!1},getRightCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e-(r.x-s.x),i+s.y)}return!1},getBottomLeft:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+r.x+s.x,i-(r.y-s.y))}return!1},getBottomCenter:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e+s.x,i-(r.y-s.y))}return!1},getBottomRight:function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.parseBody(t)){var r=this.boundsCenter,s=this.centerDiff;return new n(e-(r.x-s.x),i-(r.y-s.y))}return!1}});t.exports=s},function(t,e){function i(t,e,i){i=i||0;var r,n,s,o,a,h,l,u=[0,0];return r=t[1][1]-t[0][1],n=t[0][0]-t[1][0],s=r*t[0][0]+n*t[0][1],o=e[1][1]-e[0][1],a=e[0][0]-e[1][0],h=o*e[0][0]+a*e[0][1],E(l=r*a-o*n,0,i)||(u[0]=(a*s-n*h)/l,u[1]=(r*h-o*s)/l),u}function r(t,e,i,r){var n=e[0]-t[0],s=e[1]-t[1],o=r[0]-i[0],a=r[1]-i[1];if(o*s-a*n==0)return!1;var h=(n*(i[1]-t[1])+s*(t[0]-i[0]))/(o*s-a*n),l=(o*(t[1]-i[1])+a*(i[0]-t[0]))/(a*n-o*s);return h>=0&&h<=1&&l>=0&&l<=1}function n(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function s(t,e,i){return n(t,e,i)>0}function o(t,e,i){return n(t,e,i)>=0}function a(t,e,i){return n(t,e,i)<0}function h(t,e,i){return n(t,e,i)<=0}t.exports={decomp:function(t){var e=w(t);return e.length>0?T(t,e):[t]},quickDecomp:function t(e,i,r,n,l,u,c){u=u||100,c=c||0,l=l||25,i=void 0!==i?i:[],r=r||[],n=n||[];var v=[0,0],m=[0,0],y=[0,0],b=0,w=0,T=0,E=0,C=0,_=0,A=0,M=[],P=[],k=e,O=e;if(O.length<3)return i;if(++c>u)return console.warn("quickDecomp: max level ("+u+") reached."),i;for(var R=0;R<e.length;++R)if(g(k,R)){r.push(k[R]),b=w=Number.MAX_VALUE;for(var L=0;L<e.length;++L)s(f(k,R-1),f(k,R),f(k,L))&&h(f(k,R-1),f(k,R),f(k,L-1))&&(y=S(f(k,R-1),f(k,R),f(k,L),f(k,L-1)),a(f(k,R+1),f(k,R),y)&&(T=d(k[R],y))<w&&(w=T,m=y,_=L)),s(f(k,R+1),f(k,R),f(k,L+1))&&h(f(k,R+1),f(k,R),f(k,L))&&(y=S(f(k,R+1),f(k,R),f(k,L),f(k,L+1)),s(f(k,R-1),f(k,R),y)&&(T=d(k[R],y))<b&&(b=T,v=y,C=L));if(_===(C+1)%e.length)y[0]=(m[0]+v[0])/2,y[1]=(m[1]+v[1])/2,n.push(y),R<C?(p(M,k,R,C+1),M.push(y),P.push(y),0!==_&&p(P,k,_,k.length),p(P,k,0,R+1)):(0!==R&&p(M,k,R,k.length),p(M,k,0,C+1),M.push(y),P.push(y),p(P,k,_,R+1));else{if(_>C&&(C+=e.length),E=Number.MAX_VALUE,C<_)return i;for(L=_;L<=C;++L)o(f(k,R-1),f(k,R),f(k,L))&&h(f(k,R+1),f(k,R),f(k,L))&&(T=d(f(k,R),f(k,L)))<E&&x(k,R,L)&&(E=T,A=L%e.length);R<A?(p(M,k,R,A+1),0!==A&&p(P,k,A,O.length),p(P,k,0,R+1)):(0!==R&&p(M,k,R,O.length),p(M,k,0,A+1),p(P,k,A,R+1))}return M.length<P.length?(t(M,i,r,n,l,u,c),t(P,i,r,n,l,u,c)):(t(P,i,r,n,l,u,c),t(M,i,r,n,l,u,c)),i}return i.push(e),i},isSimple:function(t){var e,i=t;for(e=0;e<i.length-1;e++)for(var n=0;n<e-1;n++)if(r(i[e],i[e+1],i[n],i[n+1]))return!1;for(e=1;e<i.length-2;e++)if(r(i[0],i[i.length-1],i[e],i[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var i=0,r=t.length-1;t.length>3&&r>=0;--r)c(f(t,r-1),f(t,r),f(t,r+1),e)&&(t.splice(r%t.length,1),i++);return i},removeDuplicatePoints:function(t,e){for(var i=t.length-1;i>=1;--i)for(var r=t[i],n=i-1;n>=0;--n)C(r,t[n],e)&&t.splice(i,1)},makeCCW:function(t){for(var e=0,i=t,r=1;r<t.length;++r)(i[r][1]<i[e][1]||i[r][1]===i[e][1]&&i[r][0]>i[e][0])&&(e=r);return!s(f(t,e-1),f(t,e),f(t,e+1))&&(function(t){for(var e=[],i=t.length,r=0;r!==i;r++)e.push(t.pop());for(r=0;r!==i;r++)t[r]=e[r]}(t),!0)}};var l=[],u=[];function c(t,e,i,r){if(r){var s=l,o=u;s[0]=e[0]-t[0],s[1]=e[1]-t[1],o[0]=i[0]-e[0],o[1]=i[1]-e[1];var a=s[0]*o[0]+s[1]*o[1],h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),c=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(a/(h*c))<r}return 0===n(t,e,i)}function d(t,e){var i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function f(t,e){var i=t.length;return t[e<0?e%i+i:e%i]}function p(t,e,i,r){for(var n=i;n<r;n++)t.push(e[n])}function g(t,e){return a(f(t,e-1),f(t,e),f(t,e+1))}var v=[],m=[];function y(t,e,r){var n,s,a=v,l=m;if(o(f(t,e+1),f(t,e),f(t,r))&&h(f(t,e-1),f(t,e),f(t,r)))return!1;s=d(f(t,e),f(t,r));for(var u=0;u!==t.length;++u)if((u+1)%t.length!==e&&u!==e&&o(f(t,e),f(t,r),f(t,u+1))&&h(f(t,e),f(t,r),f(t,u))&&(a[0]=f(t,e),a[1]=f(t,r),l[0]=f(t,u),l[1]=f(t,u+1),n=i(a,l),d(f(t,e),n)<s))return!1;return!0}function x(t,e,i){for(var n=0;n!==t.length;++n)if(n!==e&&n!==i&&(n+1)%t.length!==e&&(n+1)%t.length!==i&&r(f(t,e),f(t,i),f(t,n),f(t,n+1)))return!1;return!0}function b(t,e,i,r){var n=r||[];if(function(t){t.length=0}(n),e<i)for(var s=e;s<=i;s++)n.push(t[s]);else{for(s=0;s<=i;s++)n.push(t[s]);for(s=e;s<t.length;s++)n.push(t[s])}return n}function w(t){for(var e=[],i=[],r=[],n=[],s=Number.MAX_VALUE,o=0;o<t.length;++o)if(g(t,o))for(var a=0;a<t.length;++a)if(y(t,o,a)){i=w(b(t,o,a,n)),r=w(b(t,a,o,n));for(var h=0;h<r.length;h++)i.push(r[h]);i.length<s&&(e=i,s=i.length,e.push([f(t,o),f(t,a)]))}return e}function T(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var i=[t],r=0;r<e.length;r++)for(var n=e[r],s=0;s<i.length;s++){var o=T(i[s],n);if(o){i.splice(s,1),i.push(o[0],o[1]);break}}return i}return n=e,r=t.indexOf(n[0]),s=t.indexOf(n[1]),-1!==r&&-1!==s&&[b(t,r,s),b(t,s,r)]}function S(t,e,i,r,n){n=n||0;var s=e[1]-t[1],o=t[0]-e[0],a=s*t[0]+o*t[1],h=r[1]-i[1],l=i[0]-r[0],u=h*i[0]+l*i[1],c=s*l-h*o;return E(c,0,n)?[0,0]:[(l*a-o*u)/c,(s*u-h*a)/c]}function E(t,e,i){return i=i||0,Math.abs(t-e)<=i}function C(t,e,i){return E(t[0],e[0],i)&&E(t[1],e[1],i)}},function(t,e,i){var r=i(86),n=i(0),s=i(591),o=i(128),a=i(592),h=i(1395),l=i(1396),u=i(1397),c=i(593),d=i(589),f=i(590),p=i(1398),g=i(64),v=new n({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,e,i,n,s){var o=r.rectangle(t,e,i,n,s);return this.world.add(o),o},trapezoid:function(t,e,i,n,s,o){var a=r.trapezoid(t,e,i,n,s,o);return this.world.add(a),a},circle:function(t,e,i,n,s){var o=r.circle(t,e,i,n,s);return this.world.add(o),o},polygon:function(t,e,i,n,s){var o=r.polygon(t,e,i,n,s);return this.world.add(o),o},fromVertices:function(t,e,i,n,s,o,a){"string"==typeof i&&(i=g.fromPath(i));var h=r.fromVertices(t,e,i,n,s,o,a);return this.world.add(h),h},fromPhysicsEditor:function(t,e,i,r,n){void 0===n&&(n=!0);var s=d.parseBody(t,e,i,r);return n&&!this.world.has(s)&&this.world.add(s),s},fromSVG:function(t,e,i,n,s,o){void 0===n&&(n=1),void 0===s&&(s={}),void 0===o&&(o=!0);for(var h=i.getElementsByTagName("path"),l=[],u=0;u<h.length;u++){var c=a.pathToVertices(h[u],30);1!==n&&g.scale(c,n,n),l.push(c)}var d=r.fromVertices(t,e,l,s);return o&&this.world.add(d),d},fromJSON:function(t,e,i,r,n){void 0===r&&(r={}),void 0===n&&(n=!0);var s=f.parseBody(t,e,i,r);return s&&n&&this.world.add(s),s},imageStack:function(t,e,i,r,n,o,a,h,u){void 0===a&&(a=0),void 0===h&&(h=0),void 0===u&&(u={});var c=this.world,d=this.sys.displayList;u.addToWorld=!1;var f=s.stack(i,r,n,o,a,h,(function(i,r){var n=new l(c,i,r,t,e,u);return d.add(n),n.body}));return c.add(f),f},stack:function(t,e,i,r,n,o,a){var h=s.stack(t,e,i,r,n,o,a);return this.world.add(h),h},pyramid:function(t,e,i,r,n,o,a){var h=s.pyramid(t,e,i,r,n,o,a);return this.world.add(h),h},chain:function(t,e,i,r,n,o){return s.chain(t,e,i,r,n,o)},mesh:function(t,e,i,r,n){return s.mesh(t,e,i,r,n)},newtonsCradle:function(t,e,i,r,n){var o=s.newtonsCradle(t,e,i,r,n);return this.world.add(o),o},car:function(t,e,i,r,n){var o=s.car(t,e,i,r,n);return this.world.add(o),o},softBody:function(t,e,i,r,n,o,a,h,l,u){var c=s.softBody(t,e,i,r,n,o,a,h,l,u);return this.world.add(c),c},joint:function(t,e,i,r,n){return this.constraint(t,e,i,r,n)},spring:function(t,e,i,r,n){return this.constraint(t,e,i,r,n)},constraint:function(t,e,i,r,n){void 0===r&&(r=1),void 0===n&&(n={}),n.bodyA="body"===t.type?t:t.body,n.bodyB="body"===e.type?e:e.body,isNaN(i)||(n.length=i),n.stiffness=r;var s=o.create(n);return this.world.add(s),s},worldConstraint:function(t,e,i,r){void 0===i&&(i=1),void 0===r&&(r={}),r.bodyB="body"===t.type?t:t.body,isNaN(e)||(r.length=e),r.stiffness=i;var n=o.create(r);return this.world.add(n),n},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var e=new p(this.scene,this.world,t);return this.world.add(e.constraint),e},image:function(t,e,i,r,n){var s=new l(this.world,t,e,i,r,n);return this.sys.displayList.add(s),s},tileBody:function(t,e){return new c(this.world,t,e)},sprite:function(t,e,i,r,n){var s=new u(this.world,t,e,i,r,n);return this.sys.displayList.add(s),this.sys.updateList.add(s),s},gameObject:function(t,e,i){return h(this.world,t,e,i)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=v},function(t,e,i){var r=i(249),n=i(2),s=i(3);t.exports=function(t,e,i,o){void 0===i&&(i={}),void 0===o&&(o=!0);var a=e.x,h=e.y;if(e.body={temp:!0,position:{x:a,y:h}},[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity].forEach((function(t){for(var i in t)(r=t[i]).get&&"function"==typeof r.get||r.set&&"function"==typeof r.set?Object.defineProperty(e,i,{get:t[i].get,set:t[i].set}):Object.defineProperty(e,i,{value:t[i]});var r})),e.world=t,e._tempVec2=new s(a,h),i.hasOwnProperty("type")&&"body"===i.type)e.setExistingBody(i,o);else{var l=n(i,"shape",null);l||(l="rectangle"),i.addToWorld=o,e.setBody(l,i)}return e}},function(t,e,i){var r=i(0),n=i(249),s=i(15),o=i(2),a=i(125),h=i(167),l=i(3),u=new r({Extends:a,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,h],initialize:function(t,e,i,r,n,a){s.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,n),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new l(e,i);var h=o(a,"shape",null);h?this.setBody(h,a):this.setRectangle(this.width,this.height,a),this.setPosition(e,i),this.initPipeline()}});t.exports=u},function(t,e,i){var r=i(164),n=i(0),s=i(249),o=i(15),a=i(2),h=i(167),l=i(73),u=i(3),c=new n({Extends:l,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,h],initialize:function(t,e,i,n,s,h){o.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(n,s),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new u(e,i);var l=a(h,"shape",null);l?this.setBody(l,h):this.setRectangle(this.width,this.height,h),this.setPosition(e,i),this.initPipeline()}});t.exports=c},function(t,e,i){var r=i(84),n=i(0),s=i(118),o=i(128),a=i(273),h=i(272),l=i(51),u=i(127),c=i(165),d=i(3),f=i(64),p=new n({initialize:function(t,e,i){void 0===i&&(i={}),this.scene=t,this.world=e,this.camera=null,this.pointer=null,this.active=!0,this.position=new d,this.body=null,this.part=null,this.constraint=o.create(u(i,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(h.BEFORE_UPDATE,this.update,this),t.sys.input.on(l.POINTER_DOWN,this.onDown,this),t.sys.input.on(l.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(t){var e=this.position,i=this.constraint;this.camera.getWorldPoint(t.x,t.y,e);for(var n=s.allBodies(this.world.localWorld),o=0;o<n.length;o++){var l=n[o];if(!l.ignorePointer&&r.contains(l.bounds,e)&&a.canCollide(l.collisionFilter,i.collisionFilter)&&this.hitTestBody(l,e))return this.world.emit(h.DRAG_START,l,this.part,this),!0}return!1},hitTestBody:function(t,e){for(var i=this.constraint,r=t.parts.length,n=r>1?1:0;n<r;n++){var s=t.parts[n];if(f.contains(s.vertices,e))return i.pointA=e,i.pointB={x:e.x-t.position.x,y:e.y-t.position.y},i.bodyB=t,i.angleB=t.angle,c.set(t,!1),this.part=s,this.body=t,!0}return!1},update:function(){var t=this.pointer,e=this.body;if(this.active&&t)if(t.isDown||!e){if(t.isDown){if(!e&&!this.getBody(t))return;e=this.body;var i=this.position,r=this.constraint;this.camera.getWorldPoint(t.x,t.y,i),r.pointA.x=i.x,r.pointA.y=i.y,c.set(e,!1),this.world.emit(h.DRAG,e,this)}}else this.stopDrag();else e&&this.stopDrag()},stopDrag:function(){var t=this.body,e=this.constraint;e.bodyB=null,e.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(h.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(h.BEFORE_UPDATE,this.update),this.scene.sys.input.off(l.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(l.POINTER_UP,this.onUp,this)}});t.exports=p},function(t,e,i){var r={};t.exports=r;var n=i(595),s=i(32);r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){n.use(r,Array.prototype.slice.call(arguments))},r.before=function(t,e){return t=t.replace(/^Matter./,""),s.chainPathBefore(r,t,e)},r.after=function(t,e){return t=t.replace(/^Matter./,""),s.chainPathAfter(r,t,e)}},function(t,e,i){var r={};t.exports=r;var n=i(83),s=i(274),o=i(84),a=i(86),h=i(64);r.collides=function(t,e){for(var i=[],r=0;r<e.length;r++){var n=e[r];if(t!==n&&o.overlaps(n.bounds,t.bounds))for(var a=1===n.parts.length?0:1;a<n.parts.length;a++){var h=n.parts[a];if(o.overlaps(h.bounds,t.bounds)){var l=s.collides(h,t);if(l.collided){i.push(l);break}}}}return i},r.ray=function(t,e,i,s){s=s||1e-100;for(var o=n.angle(e,i),h=n.magnitude(n.sub(e,i)),l=.5*(i.x+e.x),u=.5*(i.y+e.y),c=a.rectangle(l,u,h,s,{angle:o}),d=r.collides(c,t),f=0;f<d.length;f+=1){var p=d[f];p.body=p.bodyB=p.bodyA}return d},r.region=function(t,e,i){for(var r=[],n=0;n<t.length;n++){var s=t[n],a=o.overlaps(s.bounds,e);(a&&!i||!a&&i)&&r.push(s)}return r},r.point=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r];if(o.contains(n.bounds,e))for(var s=1===n.parts.length?0:1;s<n.parts.length;s++){var a=n.parts[s];if(o.contains(a.bounds,e)&&h.contains(a.vertices,e)){i.push(n);break}}}return i}},function(t,e,i){var r={};t.exports=r;var n=i(596),s=i(165),o=i(599),a=i(598),h=i(1523),l=i(597),u=i(166),c=i(118),d=i(128),f=i(32),p=i(41);r.create=function(t,e){e=(e=f.isElement(t)?e:t)||{},((t=f.isElement(t)?t:null)||e.render)&&f.warn("Engine.create: engine.render is deprecated (see docs)");var i={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:l}},r=f.extend(i,e);return r.world=e.world||n.create(r.world),r.pairs=a.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r.metrics=h.create(r.metrics),r},r.update=function(t,e,i){e=e||1e3/60,i=i||1;var n,l=t.world,f=t.timing,p=t.broadphase,g=[];f.timestamp+=e*f.timeScale;var v={timestamp:f.timestamp};u.trigger(t,"beforeUpdate",v);var m=c.allBodies(l),y=c.allConstraints(l);for(h.reset(t.metrics),t.enableSleeping&&s.update(m,f.timeScale),r._bodiesApplyGravity(m,l.gravity),r._bodiesUpdate(m,e,f.timeScale,i,l.bounds),d.preSolveAll(m),n=0;n<t.constraintIterations;n++)d.solveAll(y,f.timeScale);d.postSolveAll(m),p.controller?(l.isModified&&p.controller.clear(p),p.controller.update(p,m,t,l.isModified),g=p.pairsList):g=m,l.isModified&&c.setModified(l,!1,!1,!0);var x=p.detector(g,t),b=t.pairs,w=f.timestamp;for(a.update(b,x,w),a.removeOld(b,w),t.enableSleeping&&s.afterCollisions(b.list,f.timeScale),b.collisionStart.length>0&&u.trigger(t,"collisionStart",{pairs:b.collisionStart}),o.preSolvePosition(b.list),n=0;n<t.positionIterations;n++)o.solvePosition(b.list,m,f.timeScale);for(o.postSolvePosition(m),d.preSolveAll(m),n=0;n<t.constraintIterations;n++)d.solveAll(y,f.timeScale);for(d.postSolveAll(m),o.preSolveVelocity(b.list),n=0;n<t.velocityIterations;n++)o.solveVelocity(b.list,f.timeScale);return b.collisionActive.length>0&&u.trigger(t,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&u.trigger(t,"collisionEnd",{pairs:b.collisionEnd}),h.update(t.metrics,t),r._bodiesClearForces(m),u.trigger(t,"afterUpdate",v),t},r.merge=function(t,e){if(f.extend(t,e),e.world){t.world=e.world,r.clear(t);for(var i=c.allBodies(t.world),n=0;n<i.length;n++){var o=i[n];s.set(o,!1),o.id=f.nextId()}}},r.clear=function(t){var e=t.world;a.clear(t.pairs);var i=t.broadphase;if(i.controller){var r=c.allBodies(e);i.controller.clear(i),i.controller.update(i,r,t,!0)}},r._bodiesClearForces=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.force.x=0,i.force.y=0,i.torque=0}},r._bodiesApplyGravity=function(t,e){var i=void 0!==e.scale?e.scale:.001;if((0!==e.x||0!==e.y)&&0!==i)for(var r=0;r<t.length;r++){var n=t[r];n.ignoreGravity||n.isStatic||n.isSleeping||(n.force.x+=n.mass*e.x*i*n.gravityScale.x,n.force.y+=n.mass*e.y*i*n.gravityScale.y)}},r._bodiesUpdate=function(t,e,i,r,n){for(var s=0;s<t.length;s++){var o=t[s];o.isStatic||o.isSleeping||p.update(o,e,i,r)}}},function(t,e,i){var r=i(86),n=i(41),s=i(0),o=i(32),a=i(118),h=i(1401),l=i(9),u=i(272),c=i(2),d=i(6),f=i(41),p=i(166),g=i(593),v=i(596),m=i(83),y=new s({Extends:l,initialize:function(t,e){l.call(this),this.scene=t,this.engine=h.create(e),this.localWorld=this.engine.world;var i=d(e,"gravity",null);i?this.setGravity(i.x,i.y,i.scale):!1===i&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=d(e,"enabled",!0),this.correction=d(e,"correction",1),this.getDelta=d(e,"getDelta",this.update60Hz);var r=c(e,"runner",{}),n=c(r,"fps",!1),s=c(r,"fps",60),o=c(r,"delta",1e3/s),a=c(r,"deltaMin",1e3/s),u=c(r,"deltaMax",1e3/(.5*s));n||(s=1e3/o),this.runner={fps:s,correction:c(r,"correction",1),deltaSampleSize:c(r,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:c(r,"isFixed",!1),delta:o,deltaMin:a,deltaMax:u},this.autoUpdate=d(e,"autoUpdate",!0);var f=d(e,"debug",!1);if(this.drawDebug="object"==typeof f||f,this.debugGraphic,this.debugConfig={showAxes:c(f,"showAxes",!1),showAngleIndicator:c(f,"showAngleIndicator",!1),angleColor:c(f,"angleColor",15208787),showBroadphase:c(f,"showBroadphase",!1),broadphaseColor:c(f,"broadphaseColor",16757760),showBounds:c(f,"showBounds",!1),boundsColor:c(f,"boundsColor",16777215),showVelocity:c(f,"showVelocity",!1),velocityColor:c(f,"velocityColor",44783),showCollisions:c(f,"showCollisions",!1),collisionColor:c(f,"collisionColor",16094476),showSeparations:c(f,"showSeparations",!1),separationColor:c(f,"separationColor",16753920),showBody:c(f,"showBody",!0),showStaticBody:c(f,"showStaticBody",!0),showInternalEdges:c(f,"showInternalEdges",!1),renderFill:c(f,"renderFill",!1),renderLine:c(f,"renderLine",!0),fillColor:c(f,"fillColor",1075465),fillOpacity:c(f,"fillOpacity",1),lineColor:c(f,"lineColor",2678297),lineOpacity:c(f,"lineOpacity",1),lineThickness:c(f,"lineThickness",1),staticFillColor:c(f,"staticFillColor",857979),staticLineColor:c(f,"staticLineColor",1255396),showSleeping:c(f,"showSleeping",!1),staticBodySleepOpacity:c(f,"staticBodySleepOpacity",.7),sleepFillColor:c(f,"sleepFillColor",4605510),sleepLineColor:c(f,"sleepLineColor",10066585),showSensors:c(f,"showSensors",!0),sensorFillColor:c(f,"sensorFillColor",857979),sensorLineColor:c(f,"sensorLineColor",1255396),showPositions:c(f,"showPositions",!0),positionSize:c(f,"positionSize",4),positionColor:c(f,"positionColor",14697178),showJoint:c(f,"showJoint",!0),jointColor:c(f,"jointColor",14737474),jointLineOpacity:c(f,"jointLineOpacity",1),jointLineThickness:c(f,"jointLineThickness",2),pinSize:c(f,"pinSize",4),pinColor:c(f,"pinColor",4382944),springColor:c(f,"springColor",14697184),anchorColor:c(f,"anchorColor",15724527),anchorSize:c(f,"anchorSize",4),showConvexHulls:c(f,"showConvexHulls",!1),hullColor:c(f,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),c(e,"setBounds",!1)){var p=e.setBounds;if("boolean"==typeof p)this.setBounds();else{var g=c(p,"x",0),v=c(p,"y",0),m=c(p,"width",t.sys.scale.width),y=c(p,"height",t.sys.scale.height),x=c(p,"thickness",64),b=c(p,"left",!0),w=c(p,"right",!0),T=c(p,"top",!0),S=c(p,"bottom",!0);this.setBounds(g,v,m,y,x,b,w,T,S)}}},setCompositeRenderStyle:function(t){var e,i,r,n=t.bodies,s=t.constraints,o=t.composites;for(e=0;e<n.length;e++)r=(i=n[e]).render,this.setBodyRenderStyle(i,r.lineColor,r.lineOpacity,r.lineThickness,r.fillColor,r.fillOpacity);for(e=0;e<s.length;e++)r=(i=s[e]).render,this.setConstraintRenderStyle(i,r.lineColor,r.lineOpacity,r.lineThickness,r.pinSize,r.anchorColor,r.anchorSize);for(e=0;e<o.length;e++)i=o[e],this.setCompositeRenderStyle(i);return this},setBodyRenderStyle:function(t,e,i,r,n,s){var o=t.render,a=this.debugConfig;return o?(null==e&&(e=t.isStatic?a.staticLineColor:a.lineColor),null==i&&(i=a.lineOpacity),null==r&&(r=a.lineThickness),null==n&&(n=t.isStatic?a.staticFillColor:a.fillColor),null==s&&(s=a.fillOpacity),!1!==e&&(o.lineColor=e),!1!==i&&(o.lineOpacity=i),!1!==r&&(o.lineThickness=r),!1!==n&&(o.fillColor=n),!1!==s&&(o.fillOpacity=s),this):this},setConstraintRenderStyle:function(t,e,i,r,n,s,o){var a=t.render,h=this.debugConfig;if(!a)return this;if(null==e){var l=a.type;"line"===l?e=h.jointColor:"pin"===l?e=h.pinColor:"spring"===l&&(e=h.springColor)}return null==i&&(i=h.jointLineOpacity),null==r&&(r=h.jointLineThickness),null==n&&(n=h.pinSize),null==s&&(s=h.anchorColor),null==o&&(o=h.anchorSize),!1!==e&&(a.lineColor=e),!1!==i&&(a.lineOpacity=i),!1!==r&&(a.lineThickness=r),!1!==n&&(a.pinSize=n),!1!==s&&(a.anchorColor=s),!1!==o&&(a.anchorSize=o),this},setEventsProxy:function(){var t=this,e=this.engine,i=this.localWorld;this.drawDebug&&(p.on(i,"compositeModified",(function(e){t.setCompositeRenderStyle(e)})),p.on(i,"beforeAdd",(function(e){for(var i=[].concat(e.object),r=0;r<i.length;r++){var n=i[r],s=n.render;"body"===n.type?t.setBodyRenderStyle(n,s.lineColor,s.lineOpacity,s.lineThickness,s.fillColor,s.fillOpacity):"composite"===n.type?t.setCompositeRenderStyle(n):"constraint"===n.type&&t.setConstraintRenderStyle(n,s.lineColor,s.lineOpacity,s.lineThickness,s.pinSize,s.anchorColor,s.anchorSize)}}))),p.on(i,"beforeAdd",(function(e){t.emit(u.BEFORE_ADD,e)})),p.on(i,"afterAdd",(function(e){t.emit(u.AFTER_ADD,e)})),p.on(i,"beforeRemove",(function(e){t.emit(u.BEFORE_REMOVE,e)})),p.on(i,"afterRemove",(function(e){t.emit(u.AFTER_REMOVE,e)})),p.on(e,"beforeUpdate",(function(e){t.emit(u.BEFORE_UPDATE,e)})),p.on(e,"afterUpdate",(function(e){t.emit(u.AFTER_UPDATE,e)})),p.on(e,"collisionStart",(function(e){var i,r,n=e.pairs;n.length>0&&(i=n[0].bodyA,r=n[0].bodyB),t.emit(u.COLLISION_START,e,i,r)})),p.on(e,"collisionActive",(function(e){var i,r,n=e.pairs;n.length>0&&(i=n[0].bodyA,r=n[0].bodyB),t.emit(u.COLLISION_ACTIVE,e,i,r)})),p.on(e,"collisionEnd",(function(e){var i,r,n=e.pairs;n.length>0&&(i=n[0].bodyA,r=n[0].bodyB),t.emit(u.COLLISION_END,e,i,r)}))},setBounds:function(t,e,i,r,n,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===n&&(n=64),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),this.updateWall(s,"left",t-n,e-n,n,r+2*n),this.updateWall(o,"right",t+i,e-n,n,r+2*n),this.updateWall(a,"top",t,e-n,i,n),this.updateWall(h,"bottom",t,e+r,i,n),this},updateWall:function(t,e,i,r,n,s){var o=this.walls[e];t?(o&&v.remove(this.localWorld,o),i+=n/2,r+=s/2,this.walls[e]=this.create(i,r,n,s,{isStatic:!0,friction:0,frictionStatic:0})):(o&&v.remove(this.localWorld,o),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=e,void 0!==i&&(this.localWorld.gravity.scale=i),this},create:function(t,e,i,n,s){var o=r.rectangle(t,e,i,n,s);return v.add(this.localWorld,o),o},add:function(t){return v.add(this.localWorld,t),this},remove:function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i],n=r.body?r.body:r;a.remove(this.localWorld,n,e)}return this},removeConstraint:function(t,e){return a.remove(this.localWorld,t,e),this},convertTilemapLayer:function(t,e){var i=t.layer,r=t.getTilesWithin(0,0,i.width,i.height,{isColliding:!0});return this.convertTiles(r,e),this},convertTiles:function(t,e){if(0===t.length)return this;for(var i=0;i<t.length;i++)new g(this,t[i],e);return this},nextGroup:function(t){return f.nextGroup(t)},nextCategory:function(){return f.nextCategory()},pause:function(){return this.enabled=!1,this.emit(u.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(u.RESUME),this},update:function(t,e){if(this.enabled&&this.autoUpdate){var i=this.engine,r=this.runner,n=i.timing,s=this.correction;r.isFixed?e=this.getDelta(t,e):(e=t-r.timePrev||r.delta,r.timePrev=t,r.deltaHistory.push(e),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),s=(e=(e=(e=Math.min.apply(null,r.deltaHistory))<r.deltaMin?r.deltaMin:e)>r.deltaMax?r.deltaMax:e)/r.delta,r.delta=e),0!==r.timeScalePrev&&(s*=n.timeScale/r.timeScalePrev),0===n.timeScale&&(s=0),r.timeScalePrev=n.timeScale,r.correction=s,r.frameCounter+=1,t-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((t-r.counterTimestamp)/1e3),r.counterTimestamp=t,r.frameCounter=0),h.update(i,e,s)}},step:function(t,e){h.update(this.engine,t,e)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(t){var e=t.hasOwnProperty("body")?t.body:t;return null!==a.get(this.localWorld,e.id,e.type)},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var t=this.debugConfig,e=this.engine,i=this.debugGraphic,r=a.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&e.broadphase.controller&&this.renderGrid(e.broadphase,i,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(r,i,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(r),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(r,i,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(r,i,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(e.pairs.list,i,t.separationColor),t.showCollisions&&this.renderCollisions(e.pairs.list,i,t.collisionColor)}},renderGrid:function(t,e,i,r){e.lineStyle(1,i,r);for(var n=o.keys(t.buckets),s=0;s<n.length;s++){var a=n[s];if(!(t.buckets[a].length<2)){var h=a.split(/C|R/);e.strokeRect(parseInt(h[1],10)*t.bucketWidth,parseInt(h[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function(t,e,i){e.lineStyle(1,i,1);for(var r=0;r<t.length;r++){var n=t[r];if(n.isActive){var s=n.collision,o=s.bodyA,a=s.bodyB,h=o.position,l=a.position,u=s.penetration,c=o.isStatic||a.isStatic?1:4;a.isStatic&&(c=0),e.lineBetween(l.x,l.y,l.x-u.x*c,l.y-u.y*c),c=o.isStatic||a.isStatic?1:4,o.isStatic&&(c=0),e.lineBetween(h.x,h.y,h.x-u.x*c,h.y-u.y*c)}}return this},renderCollisions:function(t,e,i){var r,n;for(e.lineStyle(1,i,.5),e.fillStyle(i,1),r=0;r<t.length;r++)if((n=t[r]).isActive)for(var s=0;s<n.activeContacts.length;s++){var o=n.activeContacts[s].vertex;e.fillRect(o.x-2,o.y-2,5,5)}for(r=0;r<t.length;r++)if((n=t[r]).isActive){var a=n.collision,h=n.activeContacts;if(h.length>0){var l=h[0].vertex.x,u=h[0].vertex.y;2===h.length&&(l=(h[0].vertex.x+h[1].vertex.x)/2,u=(h[0].vertex.y+h[1].vertex.y)/2),a.bodyB===a.supports[0].body||a.bodyA.isStatic?e.lineBetween(l-8*a.normal.x,u-8*a.normal.y,l,u):e.lineBetween(l+8*a.normal.x,u+8*a.normal.y,l,u)}}return this},renderBodyBounds:function(t,e,i,r){e.lineStyle(1,i,r);for(var n=0;n<t.length;n++){var s=t[n];if(s.render.visible){var o=s.bounds;if(o)e.strokeRect(o.min.x,o.min.y,o.max.x-o.min.x,o.max.y-o.min.y);else for(var a=s.parts,h=a.length>1?1:0;h<a.length;h++){var l=a[h];e.strokeRect(l.bounds.min.x,l.bounds.min.y,l.bounds.max.x-l.bounds.min.x,l.bounds.max.y-l.bounds.min.y)}}}return this},renderBodyAxes:function(t,e,i,r,n){e.lineStyle(1,r,n);for(var s=0;s<t.length;s++){var o,a,h,l=t[s],u=l.parts;if(l.render.visible)if(i)for(a=u.length>1?1:0;a<u.length;a++)for(o=u[a],h=0;h<o.axes.length;h++){var c=o.axes[h];e.lineBetween(o.position.x,o.position.y,o.position.x+20*c.x,o.position.y+20*c.y)}else for(a=u.length>1?1:0;a<u.length;a++)for(o=u[a],h=0;h<o.axes.length;h++)e.lineBetween(o.position.x,o.position.y,(o.vertices[0].x+o.vertices[o.vertices.length-1].x)/2,(o.vertices[0].y+o.vertices[o.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(t,e,i,r,n){e.lineStyle(n,i,r);for(var s=0;s<t.length;s++){var o=t[s];o.render.visible&&e.lineBetween(o.position.x,o.position.y,o.position.x+2*(o.position.x-o.positionPrev.x),o.position.y+2*(o.position.y-o.positionPrev.y))}return this},renderBodies:function(t){for(var e=this.debugGraphic,i=this.debugConfig,r=i.showBody,n=i.showStaticBody,s=i.showSleeping,o=i.showInternalEdges,a=i.showConvexHulls,h=i.renderFill,l=i.renderLine,u=i.staticBodySleepOpacity,c=i.sleepFillColor,d=i.sleepLineColor,f=i.hullColor,p=0;p<t.length;p++){var g=t[p];if(g.render.visible&&(n||!g.isStatic)&&(r||g.isStatic)){var v=g.render.lineColor,m=g.render.lineOpacity,y=g.render.lineThickness,x=g.render.fillColor,b=g.render.fillOpacity;s&&g.isSleeping&&(g.isStatic?(m*=u,b*=u):(v=d,x=c)),h||(x=null),l||(v=null),this.renderBody(g,e,o,v,m,y,x,b);var w=g.parts.length;a&&w>1&&this.renderConvexHull(g,e,f,y)}}},renderBody:function(t,e,i,r,n,s,o,a){void 0===r&&(r=null),void 0===n&&(n=null),void 0===s&&(s=1),void 0===o&&(o=null),void 0===a&&(a=null);for(var h=this.debugConfig,l=h.sensorFillColor,u=h.sensorLineColor,c=t.parts,d=c.length,f=d>1?1:0;f<d;f++){var p=c[f],g=p.render,v=g.opacity;if(g.visible&&0!==v&&(!p.isSensor||h.showSensors)){var m=p.circleRadius;if(e.beginPath(),p.isSensor?(null!==o&&e.fillStyle(l,a*v),null!==r&&e.lineStyle(s,u,n*v)):(null!==o&&e.fillStyle(o,a*v),null!==r&&e.lineStyle(s,r,n*v)),m)e.arc(p.position.x,p.position.y,m,0,2*Math.PI);else{var y=p.vertices,x=y.length;e.moveTo(y[0].x,y[0].y);for(var b=1;b<x;b++){var w=y[b];if(!y[b-1].isInternal||i?e.lineTo(w.x,w.y):e.moveTo(w.x,w.y),b<x&&w.isInternal&&!i){var T=(b+1)%x;e.moveTo(y[T].x,y[T].y)}}e.closePath()}null!==o&&e.fillPath(),null!==r&&e.strokePath()}}if(h.showPositions&&!t.isStatic){var S=t.position.x,E=t.position.y,C=Math.ceil(h.positionSize/2);e.fillStyle(h.positionColor,1),e.fillRect(S-C,E-C,h.positionSize,h.positionSize)}return this},renderConvexHull:function(t,e,i,r){if(void 0===r&&(r=1),t.parts.length>1){var n=t.vertices;e.lineStyle(r,i),e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var s=1;s<n.length;s++)e.lineTo(n[s].x,n[s].y);e.lineTo(n[0].x,n[0].y),e.strokePath()}return this},renderJoints:function(){for(var t=this.debugGraphic,e=a.allConstraints(this.localWorld),i=0;i<e.length;i++){var r=e[i].render,n=r.lineColor,s=r.lineOpacity,o=r.lineThickness,h=r.pinSize,l=r.anchorColor,u=r.anchorSize;this.renderConstraint(e[i],t,n,s,o,h,l,u)}},renderConstraint:function(t,e,i,r,n,s,a,h){var l=t.render;if(!l.visible||!t.pointA||!t.pointB)return this;e.lineStyle(n,i,r);var u,c,d=t.bodyA,f=t.bodyB;if(u=d?m.add(d.position,t.pointA):t.pointA,"pin"===l.type)e.strokeCircle(u.x,u.y,s);else{if(c=f?m.add(f.position,t.pointB):t.pointB,e.beginPath(),e.moveTo(u.x,u.y),"spring"===l.type)for(var p,g=m.sub(c,u),v=m.perp(m.normalise(g)),y=Math.ceil(o.clamp(t.length/5,12,20)),x=1;x<y;x+=1)p=x%2==0?1:-1,e.lineTo(u.x+g.x*(x/y)+v.x*p*4,u.y+g.y*(x/y)+v.y*p*4);e.lineTo(c.x,c.y)}return e.strokePath(),l.anchors&&h>0&&(e.fillStyle(a),e.fillCircle(u.x,u.y,h),e.fillCircle(c.x,c.y,h)),this},resetCollisionIDs:function(){return n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),v.clear(this.localWorld,!1),h.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=y},function(t,e,i){t.exports={BasePlugin:i(540),DefaultPlugins:i(197),PluginCache:i(24),PluginManager:i(414),ScenePlugin:i(1404)}},function(t,e,i){var r=i(540),n=i(0),s=i(20),o=new n({Extends:r,initialize:function(t,e,i){r.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=i,t.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},function(t,e,i){t.exports={Canvas:i(1406),Events:i(91),Snapshot:i(1407),WebGL:i(1408)}},function(t,e,i){t.exports={CanvasRenderer:i(368),GetBlendModes:i(370),SetTransform:i(30)}},function(t,e,i){t.exports={Canvas:i(369),WebGL:i(383)}},function(t,e,i){var r=i(107),n=i(17),s={PipelineManager:i(372),Pipelines:i(1409),RenderTarget:i(141),Utils:i(12),WebGLPipeline:i(58),WebGLRenderer:i(371),WebGLShader:i(375)};s=n(!1,s,r),t.exports=s},function(t,e,i){var r=i(92),n=i(17),s={BitmapMaskPipeline:i(373),Events:i(374),GraphicsPipeline:i(376),LightPipeline:i(377),MultiPipeline:i(108),PointLightPipeline:i(378),PostFXPipeline:i(1410),RopePipeline:i(379),SinglePipeline:i(380),UtilityPipeline:i(381)};s=n(!1,s,r),t.exports=s},function(t,e,i){var r=i(0),n=i(198),s=i(2),o=i(1411),a=i(382),h=i(58),l=new r({Extends:h,initialize:function(t){t.renderTarget=s(t,"renderTarget",1),t.fragShader=s(t,"fragShader",o),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],h.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new n,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){h.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(t){this.bindAndDraw(t)},copyFrame:function(t,e,i,r,n){this.manager.copyFrame(t,e,i,r,n)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,e,i){this.manager.drawFrame(t,e,i,this.colorMatrix)},blendFrames:function(t,e,i,r,n){this.manager.blendFrames(t,e,i,r,n)},blendFramesAdditive:function(t,e,i,r,n){this.manager.blendFramesAdditive(t,e,i,r,n)},clearFrame:function(t,e){this.manager.clearFrame(t,e)},blitFrame:function(t,e,i,r,n,s){this.manager.blitFrame(t,e,i,r,n,s)},copyFrameRect:function(t,e,i,r,n,s,o,a){this.manager.copyFrameRect(t,e,i,r,n,s,o,a)},bindAndDraw:function(t,e,i,r,n){void 0===i&&(i=!0),void 0===r&&(r=!0);var s=this.gl,o=this.renderer;this.bind(n),this.set1i("uMainSampler",0),e?(s.viewport(0,0,e.width,e.height),s.bindFramebuffer(s.FRAMEBUFFER,e.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e.texture,0),i&&(r?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT))):(o.popFramebuffer(!1,!1,!1),o.currentFramebuffer||s.viewport(0,0,o.width,o.height)),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),e?(s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,null)):o.resetTextures()}});t.exports=l},function(t,e){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,e,i){var r=i(17),n=i(201),s={Center:i(403),Events:i(104),Orientation:i(404),ScaleManager:i(415),ScaleModes:i(405),Zoom:i(406)};s=r(!1,s,n.CENTER),s=r(!1,s,n.ORIENTATION),s=r(!1,s,n.SCALE_MODE),s=r(!1,s,n.ZOOM),t.exports=s},function(t,e,i){var r=i(144),n=i(17),s={Events:i(20),GetPhysicsPlugins:i(419),GetScenePlugins:i(420),SceneManager:i(417),ScenePlugin:i(1414),Settings:i(421),Systems:i(204)};s=n(!1,s,r),t.exports=s},function(t,e,i){var r=i(18),n=i(0),s=i(20),o=i(2),a=i(24),h=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){void 0===t&&(t={});var e=o(t,"target",!1),i=this.manager.getScene(e);if(!e||!this.checkValidTransition(i))return!1;var r=o(t,"duration",1e3);this._elapsed=0,this._target=i,this._duration=r,this._willSleep=o(t,"sleep",!1),this._willRemove=o(t,"remove",!1);var n=o(t,"onUpdate",null);n&&(this._onUpdate=n,this._onUpdateScope=o(t,"onUpdateScope",this.scene));var a=o(t,"allowInput",!1);this.settings.transitionAllowInput=a;var h=i.sys.settings;return h.isTransition=!0,h.transitionFrom=this.scene,h.transitionDuration=r,h.transitionAllowInput=a,o(t,"moveAbove",!1)?this.manager.moveAbove(this.key,e):o(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,e),i.sys.isSleeping()?i.sys.wake(o(t,"data")):this.manager.start(e,o(t,"data")),this.systems.events.emit(s.TRANSITION_OUT,i,r),this.systems.events.on(s.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=r(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;this.systems.events.off(s.UPDATE,this.step,this),t.events.emit(s.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,i,r){return this.manager.add(t,e,i,r)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,e),this},setActive:function(t,e,i){void 0===e&&(e=this.key);var r=this.manager.getScene(e);return r&&r.sys.setActive(t,i),this},setVisible:function(t,e){void 0===e&&(e=this.key);var i=this.manager.getScene(e);return i&&i.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(s.SHUTDOWN,this.shutdown,this),t.off(s.POST_UPDATE,this.step,this),t.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",h,"scenePlugin"),t.exports=h},function(t,e,i){t.exports={Events:i(438),List:i(110),Map:i(102),ProcessQueue:i(211),RTree:i(531),Set:i(149),Size:i(416)}},function(t,e,i){var r=i(17),n=i(1417),s={CanvasTexture:i(423),Events:i(106),FilterMode:n,Frame:i(109),Parsers:i(425),Texture:i(206),TextureManager:i(422),TextureSource:i(424)};s=r(!1,s,n),t.exports=s},function(t,e){t.exports={LINEAR:0,NEAREST:1}},function(t,e,i){var r=i(17),n=i(1419),s={Components:i(251),Parsers:i(1452),Formats:i(40),ImageCollection:i(576),ParseToTilemap:i(262),Tile:i(85),Tilemap:i(580),TilemapCreator:i(1459),TilemapFactory:i(1460),Tileset:i(122),TilemapLayer:i(581),Orientation:i(29),LayerData:i(120),MapData:i(121),ObjectLayer:i(572)};s=r(!1,s,n.ORIENTATION),t.exports=s},function(t,e,i){var r={ORIENTATION:i(29)};t.exports=r},function(t,e,i){var r=i(26),n=i(63);t.exports=function(t,e,i,s,o,a,h,l){void 0===h&&(h=!0),t<0&&(t=0),e<0&&(e=0);for(var u=r(t,e,i,s,null,l),c=o-t,d=a-e,f=0;f<u.length;f++){var p=u[f].x+c,g=u[f].y+d;p>=0&&p<l.width&&g>=0&&g<l.height&&l.data[g][p]&&l.data[g][p].copy(u[f])}h&&n(o-1,a-1,i+2,s+2,l)}},function(t,e,i){var r=i(26),n=i(542);t.exports=function(t,e,i,s,o,a){i||(i={}),Array.isArray(t)||(t=[t]);var h=a.tilemapLayer;s||(s=h.scene),o||(o=s.cameras.main);var l,u=r(0,0,a.width,a.height,null,a),c=[];for(l=0;l<u.length;l++){var d=u[l];if(-1!==t.indexOf(d.index)){var f=h.tileToWorldXY(d.x,d.y,void 0,o,a);i.x=f.x,i.y=f.y,c.push(s.make.sprite(i))}}if("number"==typeof e)for(l=0;l<t.length;l++)n(t[l],e,0,0,a.width,a.height,a);else if(Array.isArray(e))for(l=0;l<t.length;l++)n(t[l],e[l],0,0,a.width,a.height,a);return c}},function(t,e,i){var r=i(26),n=i(63),s=i(72);t.exports=function(t,e,i,o,a,h,l){for(var u=-1!==l.collideIndexes.indexOf(t),c=r(e,i,o,a,null,l),d=0;d<c.length;d++)c[d].index=t,s(c[d],u);h&&n(e-1,i-1,o+2,a+2,l)}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a,h){return r(i,n,s,o,a,h).filter(t,e)}},function(t,e){t.exports=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=!1);var n,s,o,a=0;if(i){for(s=r.height-1;s>=0;s--)for(n=r.width-1;n>=0;n--)if((o=r.data[s][n])&&o.index===t){if(a===e)return o;a+=1}}else for(s=0;s<r.height;s++)for(n=0;n<r.width;n++)if((o=r.data[s][n])&&o.index===t){if(a===e)return o;a+=1}return null}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a,h){return r(i,n,s,o,a,h).find(t,e)||null}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a,h){r(i,n,s,o,a,h).forEach(t,e)}},function(t,e,i){var r=i(29),n=i(544),s=i(545),o=i(547),a=i(1),h=i(548);t.exports=function(t){return t===r.ORTHOGONAL?n:t===r.HEXAGONAL?s:t===r.STAGGERED?h:t===r.ISOMETRIC?o:a}},function(t,e,i){var r=i(158),n=new(i(3));t.exports=function(t,e,i,s,o){return o.tilemapLayer.worldToTileXY(t,e,!0,n,s),r(n.x,n.y,i,o)}},function(t,e,i){var r=i(483),n=i(26),s=i(484),o=i(1),a=i(3),h=function(t,e){return s.RectangleToTriangle(e,t)},l=new a,u=new a,c=new a;t.exports=function(t,e,i,a){if(void 0===t)return[];var d=o;t instanceof r.Circle?d=s.CircleToRectangle:t instanceof r.Rectangle?d=s.RectangleToRectangle:t instanceof r.Triangle?d=h:t instanceof r.Line&&(d=s.LineToRectangle),a.tilemapLayer.worldToTileXY(t.left,t.top,!0,u,i);var f=u.x,p=u.y;a.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,c,i);var g=Math.ceil(c.x),v=Math.ceil(c.y),m=Math.max(g-f,1),y=Math.max(v-p,1),x=n(f,p,m,y,e,a),b=a.tileWidth,w=a.tileHeight;a.tilemapLayer&&(b*=a.tilemapLayer.scaleX,w*=a.tilemapLayer.scaleY);for(var T=[],S=new r.Rectangle(0,0,b,w),E=0;E<x.length;E++){var C=x[E];a.tilemapLayer.tileToWorldXY(C.x,C.y,l,i),S.x=l.x,S.y=l.y,d(t,S)&&T.push(C)}return T}},function(t,e,i){var r=i(29),n=i(1),s=i(253);t.exports=function(t){return t===r.ORTHOGONAL?s:n}},function(t,e,i){var r=i(29),n=i(550),s=i(551),o=i(1),a=i(552),h=i(553);t.exports=function(t){return t===r.ORTHOGONAL?h:t===r.ISOMETRIC?s:t===r.HEXAGONAL?n:t===r.STAGGERED?a:o}},function(t,e,i){var r=i(29),n=i(554),s=i(1),o=i(555),a=i(254);t.exports=function(t){return t===r.ORTHOGONAL?a:t===r.HEXAGONAL?n:t===r.STAGGERED?o:s}},function(t,e,i){var r=i(29),n=i(1),s=i(255);t.exports=function(t){return t===r.ORTHOGONAL?s:n}},function(t,e,i){var r=i(29),n=i(556),s=i(557),o=i(1),a=i(558),h=i(559);t.exports=function(t){return t===r.ORTHOGONAL?h:t===r.ISOMETRIC?s:t===r.HEXAGONAL?n:t===r.STAGGERED?a:o}},function(t,e,i){var r=i(29),n=i(560),s=i(1),o=i(561),a=i(256);t.exports=function(t){return t===r.ORTHOGONAL?a:t===r.HEXAGONAL?n:t===r.STAGGERED?o:s}},function(t,e,i){var r=i(562),n=new(i(3));t.exports=function(t,e,i,s){s.tilemapLayer.worldToTileXY(t,e,!0,n,i);var o=n.x,a=n.y;return r(o,a,s)}},function(t,e,i){var r=i(257),n=new(i(3));t.exports=function(t,e,i,s,o,a){return a.tilemapLayer.worldToTileXY(e,i,!0,n,o,a),r(t,n.x,n.y,s,a)}},function(t,e,i){var r=i(63),n=i(257);t.exports=function(t,e,i,s,o){if(void 0===s&&(s=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var a=t.length,h=t[0].length,l=0;l<a;l++)for(var u=0;u<h;u++){var c=t[l][u];n(c,e+u,i+l,!1,o)}s&&r(e-1,i-1,h+2,a+2,o)}},function(t,e,i){var r=i(26),n=i(210);t.exports=function(t,e,i,s,o,a){var h,l=r(t,e,i,s,{},a);if(!o)for(o=[],h=0;h<l.length;h++)-1===o.indexOf(l[h].index)&&o.push(l[h].index);for(h=0;h<l.length;h++)l[h].index=n(o)}},function(t,e,i){var r=i(563),n=new(i(3));t.exports=function(t,e,i,s,o,a){return a.tilemapLayer.worldToTileXY(t,e,!0,n,o,a),r(n.x,n.y,i,s,a)}},function(t,e,i){var r=i(26),n=i(397),s=new n(105,210,231,150),o=new n(243,134,48,200),a=new n(40,39,37,150);t.exports=function(t,e,i){void 0===e&&(e={});var n=void 0!==e.tileColor?e.tileColor:s,h=void 0!==e.collidingTileColor?e.collidingTileColor:o,l=void 0!==e.faceColor?e.faceColor:a,u=r(0,0,i.width,i.height,null,i);t.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),t.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var c=0;c<u.length;c++){var d=u[c],f=d.width,p=d.height,g=d.pixelX,v=d.pixelY,m=d.collides?h:n;null!==m&&(t.fillStyle(m.color,m.alpha/255),t.fillRect(g,v,f,p)),g+=1,v+=1,f-=2,p-=2,null!==l&&(t.lineStyle(1,l.color,l.alpha/255),d.faceTop&&t.lineBetween(g,v,g+f,v),d.faceRight&&t.lineBetween(g+f,v,g+f,v+p),d.faceBottom&&t.lineBetween(g,v+p,g+f,v+p),d.faceLeft&&t.lineBetween(g,v,g,v+p))}}},function(t,e,i){var r=i(72),n=i(63),s=i(160);t.exports=function(t,e,i,o,a){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===a&&(a=!0),Array.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++)s(t[h],e,o);if(a)for(var l=0;l<o.height;l++)for(var u=0;u<o.width;u++){var c=o.data[l][u];c&&-1!==t.indexOf(c.index)&&r(c,e)}i&&n(0,0,o.width,o.height,o)}},function(t,e,i){var r=i(72),n=i(63),s=i(160);t.exports=function(t,e,i,o,a,h){if(void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===h&&(h=!0),!(t>e)){for(var l=t;l<=e;l++)s(l,i,a);if(h)for(var u=0;u<a.height;u++)for(var c=0;c<a.width;c++){var d=a.data[u][c];d&&d.index>=t&&d.index<=e&&r(d,i)}o&&n(0,0,a.width,a.height,a)}}},function(t,e,i){var r=i(72),n=i(63),s=i(160);t.exports=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var a=0;a<o.height;a++)for(var h=0;h<o.width;h++){var l=o.data[a][h];l&&-1===t.indexOf(l.index)&&(r(l,e),s(l.index,e,o))}i&&n(0,0,o.width,o.height,o)}},function(t,e,i){var r=i(72),n=i(63),s=i(126);t.exports=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=!0);for(var a=0;a<o.height;a++)for(var h=0;h<o.width;h++){var l=o.data[a][h];if(l)for(var u in t)if(s(l.properties,u)){var c=t[u];Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++)l.properties[u]===c[d]&&r(l,e)}}i&&n(0,0,o.width,o.height,o)}},function(t,e,i){var r=i(72),n=i(63);t.exports=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=!0);for(var s=0;s<i.height;s++)for(var o=0;o<i.width;o++){var a=i.data[s][o];if(a){var h=a.getCollisionGroup();h&&h.objects&&h.objects.length>0&&r(a,t)}}e&&n(0,0,i.width,i.height,i)}},function(t,e){t.exports=function(t,e,i,r){if("number"==typeof t)r.callbacks[t]=null!==e?{callback:e,callbackContext:i}:void 0;else for(var n=0,s=t.length;n<s;n++)r.callbacks[t[n]]=null!==e?{callback:e,callbackContext:i}:void 0}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a){for(var h=r(t,e,i,n,null,a),l=0;l<h.length;l++)h[l].setCollisionCallback(s,o)}},function(t,e,i){var r=i(26),n=i(131);t.exports=function(t,e,i,s,o){var a=r(t,e,i,s,null,o),h=a.map((function(t){return t.index}));n(h);for(var l=0;l<a.length;l++)a[l].index=h[l]}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o,a){for(var h=r(i,n,s,o,null,a),l=0;l<h.length;l++)h[l]&&(h[l].index===t?h[l].index=e:h[l].index===e&&(h[l].index=t))}},function(t,e,i){var r=i(26);t.exports=function(t,e,i,n,s,o){if(s){var a,h=r(t,e,i,n,null,o),l=0;for(a=0;a<s.length;a++)l+=s[a].weight;if(!(l<=0))for(a=0;a<h.length;a++){for(var u=Math.random()*l,c=0,d=-1,f=0;f<s.length;f++)if(u<=(c+=s[f].weight)){var p=s[f].index;d=Array.isArray(p)?p[Math.floor(Math.random()*p.length)]:p;break}h[a].index=d}}}},function(t,e,i){t.exports={FromOrientationString:i(258),Parse:i(564),Parse2DArray:i(259),ParseCSV:i(565),Impact:i(1454),Tiled:i(1455)}},function(t,e){t.exports=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=i;if(r.name&&""!==r.name&&(n=r.name),Array.isArray(r.wangtiles)&&r.wangtiles.length>0){var s,o,a,h={},l={};if(Array.isArray(r.edgecolors))for(s=0;s<r.edgecolors.length;s++)a=1+s,""!==(o=r.edgecolors[s]).name&&(h[a]=o.name);if(Array.isArray(r.cornercolors))for(s=0;s<r.cornercolors.length;s++)a=1+s,""!==(o=r.cornercolors[s]).name&&(l[a]=o.name);if(Array.isArray(r.colors))for(s=0;s<r.colors.length;s++)a=1+s,""!==(o=r.colors[s]).name&&(h[a]=l[a]=o.name);for(var u=[h,l,h,l,h,l,h,l],c=0;c<r.wangtiles.length;c++){var d=r.wangtiles[c],f=e[d.tileid]||(e[d.tileid]={});f=f.wangid||(f.wangid={});for(var p=[],g=0;g<Math.min(u.length,d.wangid.length);g++)if(0!==(o=d.wangid[g])){var v=u[g][o];void 0===v?p.push(o):p.push(v)}else p.push(void 0);f[n]=p}}}}},function(t,e,i){t.exports={ParseTileLayers:i(578),ParseTilesets:i(579),ParseWeltmeister:i(577)}},function(t,e,i){t.exports={AssignTileProperties:i(567),Base64Decode:i(574),BuildTilesetIndex:i(568),CreateGroupLayer:i(161),ParseGID:i(261),ParseImageLayers:i(569),ParseJSONTiled:i(566),ParseObject:i(260),ParseObjectLayers:i(570),ParseTileLayers:i(573),ParseTilesets:i(575)}},function(t,e,i){var r=i(1),n=i(1);r=i(1457),n=i(1458),t.exports={renderWebGL:r,renderCanvas:n}},function(t,e,i){var r=i(12);t.exports=function(t,e,i){var n=e.cull(i),s=n.length,o=i.alpha*e.alpha;if(!(0===s||o<=0)){var a=e.gidMap,h=t.pipelines.set(e.pipeline,e),l=r.getTintAppendFloatAlpha,u=e.scrollFactorX,c=e.scrollFactorY,d=e.x,f=e.y,p=e.scaleX,g=e.scaleY;t.pipelines.preBatch(e);for(var v=0;v<s;v++){var m=n[v],y=a[m.index];if(y){var x=y.getTileTextureCoordinates(m.index);if(null!==x){var b=y.glTexture,w=h.setTexture2D(b,e),T=y.tileWidth,S=y.tileHeight,E=x.x,C=x.y,_=.5*y.tileWidth,A=.5*y.tileHeight,M=l(m.tint,o*m.alpha);h.batchTexture(e,b,b.width,b.height,d+(_+m.pixelX)*p,f+(A+m.pixelY)*g,m.width,m.height,p,g,m.rotation,m.flipX,m.flipY,u,c,_,A,E,C,T,S,M,M,M,M,!1,0,0,i,null,!0,w)}}}t.pipelines.postBatch(e)}}},function(t,e,i){var r=i(25),n=new r,s=new r,o=new r;t.exports=function(t,e,i,r){var a=e.cull(i),h=a.length,l=i.alpha*e.alpha;if(!(0===h||l<=0)){var u=n,c=s,d=o;c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(i.matrix);var f=t.currentContext,p=e.gidMap;f.save(),r?(u.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y,u.multiply(c,d),d.copyToContext(f)):(c.e-=i.scrollX*e.scrollFactorX,c.f-=i.scrollY*e.scrollFactorY,c.copyToContext(f)),(!t.antialias||e.scaleX>1||e.scaleY>1)&&(f.imageSmoothingEnabled=!1);for(var g=0;g<h;g++){var v=a[g],m=p[v.index];if(m){var y=m.image.getSourceImage(),x=m.getTileTextureCoordinates(v.index);if(null!==x){var b=m.tileWidth,w=m.tileHeight,T=.5*b,S=.5*w;f.save(),f.translate(v.pixelX+T,v.pixelY+S),0!==v.rotation&&f.rotate(v.rotation),(v.flipX||v.flipY)&&f.scale(v.flipX?-1:1,v.flipY?-1:1),f.globalAlpha=l*v.alpha,f.drawImage(y,x.x,x.y,b,w,-T,-S,b,w),f.restore()}}}f.restore()}}},function(t,e,i){var r=i(16),n=i(262);r.register("tilemap",(function(t){var e=void 0!==t?t:{};return n(this.scene,e.key,e.tileWidth,e.tileHeight,e.width,e.height,e.data,e.insertNull)}))},function(t,e,i){var r=i(5),n=i(262);r.register("tilemap",(function(t,e,i,r,s,o,a){return null===t&&(t=void 0),null===e&&(e=void 0),null===i&&(i=void 0),null===r&&(r=void 0),null===s&&(s=void 0),n(this.scene,t,e,i,r,s,o,a)}))},function(t,e,i){t.exports={Clock:i(1462),TimerEvent:i(582)}},function(t,e,i){var r=i(0),n=i(24),s=i(20),o=i(582),a=i(93),h=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(s.PRE_UPDATE,this.preUpdate,this),t.on(s.UPDATE,this.update,this),t.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e;return t instanceof o?(e=t,this.removeEvent(e),e.elapsed=e.startAt,e.hasDispatched=!1,e.repeatCount=-1===e.repeat||e.loop?999999999999:e.repeat):e=new o(t),this._pendingInsertion.push(e),e},delayedCall:function(t,e,i,r){return this.addEvent({delay:t,callback:e,args:i,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];a(this._pendingRemoval,i),a(this._pendingInsertion,i),a(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){var i,r;for(i=0;i<t;i++){r=this._pendingRemoval[i];var n=this._active.indexOf(r);n>-1&&this._active.splice(n,1),r.destroy()}for(i=0;i<e;i++)r=this._pendingInsertion[i],this._active.push(r);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var i=0;i<this._active.length;i++){var r=this._active[i];if(!r.paused&&(r.elapsed+=e*r.timeScale,r.elapsed>=r.delay)){var n=r.elapsed-r.delay;r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0?(r.repeatCount--,r.elapsed=n,r.hasDispatched=!1):this._pendingRemoval.push(r)}}}},shutdown:function(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(s.PRE_UPDATE,this.preUpdate,this),e.off(s.UPDATE,this.update,this),e.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});n.register("Clock",h,"time"),t.exports=h},function(t,e,i){var r=i(100),n=i(17),s={Builders:i(1464),Events:i(267),TweenManager:i(1480),Tween:i(266),TweenData:i(268),Timeline:i(588)};s=n(!1,s,r),t.exports=s},function(t,e,i){t.exports={GetBoolean:i(99),GetEaseFunction:i(80),GetNewValue:i(162),GetProps:i(583),GetTargets:i(263),GetTweens:i(584),GetValueOp:i(264),NumberTweenBuilder:i(585),StaggerBuilder:i(586),TimelineBuilder:i(587),TweenBuilder:i(163)}},function(t,e){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="active"},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="repeat"},function(t,e){t.exports="start"},function(t,e){t.exports="stop"},function(t,e){t.exports="update"},function(t,e){t.exports="yoyo"},function(t,e,i){var r=i(93),n=i(0),s=i(585),o=i(24),a=i(20),h=i(586),l=i(587),u=i(100),c=i(163),d=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.preUpdate,this),t.on(a.UPDATE,this.update,this),t.once(a.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return l(this,t)},timeline:function(t){var e=l(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return c(this,t)},add:function(t){var e=c(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var e=s(this,t);return this._add.push(e),this._toProcess++,e},stagger:function(t,e){return h(t,e)},preUpdate:function(){if(0!==this._toProcess){var t,e,i=this._destroy,r=this._active,n=this._pending;for(t=0;t<i.length;t++){e=i[t];var s=r.indexOf(e);-1===s?(s=n.indexOf(e))>-1&&(e.state=u.REMOVED,n.splice(s,1)):(e.state=u.REMOVED,r.splice(s,1))}for(i.length=0,i=this._add,t=0;t<i.length;t++)(e=i[t]).state===u.PENDING_ADD&&(e.init()?(e.play(),this._active.push(e)):this._pending.push(e));i.length=0,this._toProcess=0}},update:function(t,e){var i,r=this._active;e*=this.timeScale;for(var n=0;n<r.length;n++)(i=r[n]).update(t,e)&&(this._destroy.push(i),this._toProcess++)},remove:function(t){return r(this._add,t),r(this._pending,t),r(this._active,t),r(this._destroy,t),t.state=u.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=u.PENDING_ADD,this._toProcess++,this},each:function(t,e){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var n in this.list)i[0]=this.list[n],t.apply(e,i)},getAllTweens:function(){for(var t=this._active,e=[],i=0;i<t.length;i++)e.push(t[i]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t,e){void 0===e&&(e=!1);var i,r,n,s=this._active,o=[];for(Array.isArray(t)||(t=[t]),r=0;r<s.length;r++)for(i=s[r],n=0;n<t.length;n++)i.hasTarget(t[n])&&o.push(i);if(e)for(s=this._pending,r=0;r<s.length;r++)for(i=s[r],n=0;n<t.length;n++)i.hasTarget(t[n])&&o.push(i);return o},isTweening:function(t){for(var e,i=this._active,r=0;r<i.length;r++)if((e=i[r]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),i=0;i<e.length;i++)e[i].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(a.PRE_UPDATE,this.preUpdate,this),t.off(a.UPDATE,this.update,this),t.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",d,"tweens"),t.exports=d},function(t,e,i){t.exports={Array:i(208),Base64:i(1482),Objects:i(1484),String:i(1488),NOOP:i(1)}},function(t,e,i){t.exports={ArrayBufferToBase64:i(1483),Base64ToArrayBuffer:i(433)}},function(t,e){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,e){for(var r=new Uint8Array(t),n=r.length,s=e?"data:"+e+";base64,":"",o=0;o<n;o+=3)s+=i[r[o]>>2],s+=i[(3&r[o])<<4|r[o+1]>>4],s+=i[(15&r[o+1])<<2|r[o+2]>>6],s+=i[63&r[o+2]];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s}},function(t,e,i){t.exports={Clone:i(77),DeepCopy:i(175),Extend:i(17),GetAdvancedValue:i(13),GetFastValue:i(2),GetMinMaxValue:i(1485),GetValue:i(6),HasAll:i(1486),HasAny:i(455),HasValue:i(126),IsPlainObject:i(7),Merge:i(127),MergeRight:i(1487),Pick:i(571),SetValue:i(478)}},function(t,e,i){var r=i(6),n=i(18);t.exports=function(t,e,i,s,o){void 0===o&&(o=i);var a=r(t,e,o);return n(a,i,s)}},function(t,e){t.exports=function(t,e){for(var i=0;i<e.length;i++)if(!t.hasOwnProperty(e[i]))return!1;return!0}},function(t,e,i){var r=i(77);t.exports=function(t,e){var i=r(t);for(var n in e)i.hasOwnProperty(n)&&(i[n]=e[n]);return i}},function(t,e,i){t.exports={Format:i(1489),Pad:i(186),RemoveAt:i(1490),Reverse:i(1491),UppercaseFirst:i(205),UUID:i(222)}},function(t,e){t.exports=function(t,e){return t.replace(/%([0-9]+)/g,(function(t,i){return e[Number(i)-1]}))}},function(t,e){t.exports=function(t,e){return 0===e?t.slice(1):t.slice(0,e-1)+t.slice(e)}},function(t,e){t.exports=function(t){return t.split("").reverse().join("")}},function(t,e,i){t.exports={SoundManagerCreator:i(426),Events:i(70),BaseSound:i(146),BaseSoundManager:i(145),WebAudioSound:i(434),WebAudioSoundManager:i(432),HTML5AudioSound:i(429),HTML5AudioSoundManager:i(427),NoAudioSound:i(431),NoAudioSoundManager:i(430)}},function(t,e,i){t.exports={Arcade:i(1366),Matter:i(1494)}},function(t,e,i){t.exports={BodyBounds:i(1392),Components:i(249),Events:i(272),Factory:i(1394),MatterGameObject:i(1395),Image:i(1396),Matter:i(594),MatterPhysics:i(1524),PolyDecomp:i(1393),Sprite:i(1397),TileBody:i(593),PhysicsEditorParser:i(589),PhysicsJSONParser:i(590),PointerConstraint:i(1398),World:i(1402)}},function(t,e){t.exports={setBounce:function(t){return this.body.restitution=t,this}}},function(t,e){var i={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var e=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)e|=t[i];else e=t;return this.body.collisionFilter.mask=e,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i].hasOwnProperty("body")?t[i].body:t[i];this.body.setOnCollideWith(r,e)}return this}};t.exports=i},function(t,e,i){var r=i(41),n={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),r.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,e){return r.applyForce(this.body,t,e),this},thrust:function(t){var e=this.body.angle;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var e=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var e=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var e=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=n},function(t,e){t.exports={setFriction:function(t,e,i){return this.body.friction=t,void 0!==e&&(this.body.frictionAir=e),void 0!==i&&(this.body.frictionStatic=i),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}}},function(t,e){t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},function(t,e,i){var r=i(41),n=i(3),s={setMass:function(t){return r.setMass(this.body,t),this},setDensity:function(t){return r.setDensity(this.body,t),this},centerOfMass:{get:function(){return new n(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=s},function(t,e){t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},function(t,e,i){var r=i(86),n=i(41),s=i(124),o=i(2),a=i(589),h=i(590),l=i(64),u={setRectangle:function(t,e,i){return this.setBody({type:"rectangle",width:t,height:e},i)},setCircle:function(t,e){return this.setBody({type:"circle",radius:t},e)},setPolygon:function(t,e,i){return this.setBody({type:"polygon",sides:e,radius:t},i)},setTrapezoid:function(t,e,i,r){return this.setBody({type:"trapezoid",width:t,height:e,slope:i},r)},setExistingBody:function(t,e){void 0===e&&(e=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var i=0;i<t.parts.length;i++)t.parts[i].gameObject=this;var r=this;if(t.destroy=function(){r.world.remove(r.body,!0),r.body.gameObject=null},e&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var n=t.render.sprite.xOffset,o=t.render.sprite.yOffset,a=t.centerOfMass.x,h=t.centerOfMass.y;if(s(a,.5)&&s(h,.5))this.setOrigin(n+.5,o+.5);else{var l=t.centerOffset.x,u=t.centerOffset.y;this.setOrigin(n+l/this.displayWidth,o+u/this.displayHeight)}}return this},setBody:function(t,e){if(!t)return this;var i;"string"==typeof t&&(t={type:t});var s=o(t,"type","rectangle"),u=o(t,"x",this._tempVec2.x),c=o(t,"y",this._tempVec2.y),d=o(t,"width",this.width),f=o(t,"height",this.height);switch(s){case"rectangle":i=r.rectangle(u,c,d,f,e);break;case"circle":var p=o(t,"radius",Math.max(d,f)/2),g=o(t,"maxSides",25);i=r.circle(u,c,p,e,g);break;case"trapezoid":var v=o(t,"slope",.5);i=r.trapezoid(u,c,d,f,v,e);break;case"polygon":var m=o(t,"sides",5),y=o(t,"radius",Math.max(d,f)/2);i=r.polygon(u,c,m,y,e);break;case"fromVertices":case"fromVerts":var x=o(t,"verts",null);if(x)if("string"==typeof x&&(x=l.fromPath(x)),this.body&&!this.body.hasOwnProperty("temp"))n.setVertices(this.body,x),i=this.body;else{var b=o(t,"flagInternal",!1),w=o(t,"removeCollinear",.01),T=o(t,"minimumArea",10);i=r.fromVertices(u,c,x,e,b,w,T)}break;case"fromPhysicsEditor":i=a.parseBody(u,c,t,e);break;case"fromPhysicsTracer":i=h.parseBody(u,c,t,e)}return i&&this.setExistingBody(i,t.addToWorld),this}};t.exports=u},function(t,e,i){var r=i(272),n=i(165),s=i(166),o={setToSleep:function(){return n.set(this.body,!0),this},setAwake:function(){return n.set(this.body,!1),this},setSleepThreshold:function(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function(t,e){return this.setSleepStartEvent(t),this.setSleepEndEvent(e),this},setSleepStartEvent:function(t){if(t){var e=this.world;s.on(this.body,"sleepStart",(function(t){e.emit(r.SLEEP_START,t,this)}))}else s.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var e=this.world;s.on(this.body,"sleepEnd",(function(t){e.emit(r.SLEEP_END,t,this)}))}else s.off(this.body,"sleepEnd");return this}};t.exports=o},function(t,e){t.exports="afteradd"},function(t,e){t.exports="afterremove"},function(t,e){t.exports="afterupdate"},function(t,e){t.exports="beforeadd"},function(t,e){t.exports="beforeremove"},function(t,e){t.exports="beforeupdate"},function(t,e){t.exports="collisionactive"},function(t,e){t.exports="collisionend"},function(t,e){t.exports="collisionstart"},function(t,e){t.exports="dragend"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="sleepend"},function(t,e){t.exports="sleepstart"},function(t,e,i){var r=i(41),n={setStatic:function(t){return r.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}};t.exports=n},function(t,e,i){var r=i(41),n=i(14),s=i(269),o=i(270),a={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),r.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),r.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var e=1/this._scaleX,i=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,e,i),r.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var e=1/this._scaleX,i=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,e,i),r.scale(this.body,this._scaleX,t)}},angle:{get:function(){return o(this.body.angle*n.RAD_TO_DEG)},set:function(t){this.rotation=o(t)*n.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=s(t),r.setAngle(this.body,this._rotation)}},setPosition:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._tempVec2.set(t,e),r.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return void 0===t&&(t=0),this._rotation=s(t),r.setAngle(this.body,t),this},setFixedRotation:function(){return r.setInertia(this.body,1/0),this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,r.setAngle(this.body,this.rotation),this},setScale:function(t,e,i){void 0===t&&(t=1),void 0===e&&(e=t);var n=1/this._scaleX,s=1/this._scaleY;return this._scaleX=t,this._scaleY=e,r.scale(this.body,n,s,i),r.scale(this.body,t,e,i),this}};t.exports=a},function(t,e,i){var r=i(41),n={setAngularVelocity:function(t){return r.setAngularVelocity(this.body,t),this},setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),r.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),r.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,e){return this._tempVec2.set(t,e),r.setVelocity(this.body,this._tempVec2),this}};t.exports=n},function(t,e,i){var r={};t.exports=r;var n=i(118),s=i(32);r.create=function(t){return s.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},r.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},r.update=function(t,e){if(t.extended){var i=e.world,r=n.allBodies(i);t.collisions=t.narrowDetections,t.pairs=e.pairs.list.length,t.bodies=r.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(r.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,e,i){var r=i(123),n=i(271),s=i(86),o=i(41),a=i(1392),h=i(84),l=i(0),u=i(118),c=i(591),d=i(128),f=i(273),p=i(50),g=i(1394),v=i(2),m=i(6),y=i(597),x=i(1525),b=i(1526),w=i(1399),T=i(1527),S=i(127),E=i(250),C=i(598),_=i(595),A=i(24),M=i(1400),P=i(599),k=i(274),O=i(20),R=i(592),L=i(83),I=i(64),F=i(1402),D=new l({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=u,this.detector=f,this.grid=y,this.pair=E,this.pairs=C,this.query=M,this.resolver=P,this.sat=k,this.constraint=d,this.bodies=s,this.composites=c,this.axes=n,this.bounds=h,this.svg=R,this.vector=L,this.vertices=I,this.verts=I,this._tempVec2=L.create(),m(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),m(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),m(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),P._restingThresh=m(this.config,"restingThresh",4),P._restingThreshTangent=m(this.config,"restingThreshTangent",6),P._positionDampen=m(this.config,"positionDampen",.9),P._positionWarming=m(this.config,"positionWarming",.8),P._frictionNormalMultiplier=m(this.config,"frictionNormalMultiplier",5),t.sys.events.once(O.BOOT,this.boot,this),t.sys.events.on(O.START,this.start,this)},boot:function(){this.world=new F(this.scene,this.config),this.add=new g(this.world),this.bodyBounds=new a,this.systems.events.once(O.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new F(this.scene,this.config),this.add=new g(this.world));var t=this.systems.events;t.on(O.UPDATE,this.world.update,this.world),t.on(O.POST_UPDATE,this.world.postUpdate,this.world),t.once(O.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return S(v(e,"matter",{}),v(t,"matter",{}))},enableAttractorPlugin:function(){return _.register(x),_.use(w,x),this},enableWrapPlugin:function(){return _.register(T),_.use(w,T),this},enableCollisionEventsPlugin:function(){return _.register(b),_.use(w,b),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,e){this.world.step(t,e)},containsPoint:function(t,e,i){t=this.getMatterBodies(t);var r=L.create(e,i);return M.point(t,r).length>0},intersectPoint:function(t,e,i){i=this.getMatterBodies(i);var r=L.create(t,e),n=[];return M.point(i,r).forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n},intersectRect:function(t,e,i,r,n,s){void 0===n&&(n=!1),s=this.getMatterBodies(s);var o={min:{x:t,y:e},max:{x:t+i,y:e+r}},a=[];return M.region(s,o,n).forEach((function(t){-1===a.indexOf(t)&&a.push(t)})),a},intersectRay:function(t,e,i,r,n,s){void 0===n&&(n=1),s=this.getMatterBodies(s);for(var o=[],a=M.ray(s,L.create(t,e),L.create(i,r),n),h=0;h<a.length;h++)o.push(a[h].body);return o},intersectBody:function(t,e){e=this.getMatterBodies(e);for(var i=[],r=M.collides(t,e),n=0;n<r.length;n++){var s=r[n];s.bodyA===t?i.push(s.bodyB):i.push(s.bodyA)}return i},overlap:function(t,e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),e=this.getMatterBodies(e);for(var s=!1,o=0;o<t.length;o++)for(var a=t[o],h=M.collides(a,e),l=0;l<h.length;l++){var u=h[l],c=u.bodyA.id===a.id?u.bodyB:u.bodyA;if(!r||r.call(n,a,c,u))if(s=!0,i)i.call(n,a,c,u);else if(!r)return!0}return s},setCollisionCategory:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=e})),this},setCollisionGroup:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=e})),this},setCollidesWith:function(t,e){t=this.getMatterBodies(t);var i=0;if(Array.isArray(e))for(var r=0;r<e.length;r++)i|=e[r];else i=e;return t.forEach((function(t){t.collisionFilter.mask=i})),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var r=t[i].hasOwnProperty("body")?t[i].body:t[i];e.push(r)}return e},setVelocity:function(t,e,i){t=this.getMatterBodies(t);var r=this._tempVec2;return r.x=e,r.y=i,t.forEach((function(t){o.setVelocity(t,r)})),this},setVelocityX:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.x=e,t.forEach((function(t){i.y=t.velocity.y,o.setVelocity(t,i)})),this},setVelocityY:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.y=e,t.forEach((function(t){i.x=t.velocity.x,o.setVelocity(t,i)})),this},setAngularVelocity:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){o.setAngularVelocity(t,e)})),this},applyForce:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return t.forEach((function(t){i.x=t.position.x,i.y=t.position.y,o.applyForce(t,i,e)})),this},applyForceFromPosition:function(t,e,i,r){t=this.getMatterBodies(t);var n=this._tempVec2;return t.forEach((function(t){void 0===r&&(r=t.angle),n.x=i*Math.cos(r),n.y=i*Math.sin(r),o.applyForce(t,e,n)})),this},applyForceFromAngle:function(t,e,i){t=this.getMatterBodies(t);var r=this._tempVec2;return t.forEach((function(t){void 0===i&&(i=t.angle),r.x=e*Math.cos(i),r.y=e*Math.sin(i),o.applyForce(t,{x:t.position.x,y:t.position.y},r)})),this},getConstraintLength:function(t){var e=t.pointA.x,i=t.pointA.y,r=t.pointB.x,n=t.pointB.y;return t.bodyA&&(e+=t.bodyA.position.x,i+=t.bodyA.position.y),t.bodyB&&(r+=t.bodyB.position.x,n+=t.bodyB.position.y),p(e,i,r,n)},alignBody:function(t,e,i,n){var s;switch(t=t.hasOwnProperty("body")?t.body:t,n){case r.TOP_LEFT:case r.LEFT_TOP:s=this.bodyBounds.getTopLeft(t,e,i);break;case r.TOP_CENTER:s=this.bodyBounds.getTopCenter(t,e,i);break;case r.TOP_RIGHT:case r.RIGHT_TOP:s=this.bodyBounds.getTopRight(t,e,i);break;case r.LEFT_CENTER:s=this.bodyBounds.getLeftCenter(t,e,i);break;case r.CENTER:s=this.bodyBounds.getCenter(t,e,i);break;case r.RIGHT_CENTER:s=this.bodyBounds.getRightCenter(t,e,i);break;case r.LEFT_BOTTOM:case r.BOTTOM_LEFT:s=this.bodyBounds.getBottomLeft(t,e,i);break;case r.BOTTOM_CENTER:s=this.bodyBounds.getBottomCenter(t,e,i);break;case r.BOTTOM_RIGHT:case r.RIGHT_BOTTOM:s=this.bodyBounds.getBottomRight(t,e,i)}return s&&o.setPosition(t,s),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(O.UPDATE,this.world.update,this.world),t.off(O.POST_UPDATE,this.world.postUpdate,this.world)),t.off(O.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(O.START,this.start,this),this.scene=null,this.systems=null}});A.register("MatterPhysics",D,"matterPhysics"),t.exports=D},function(t,e,i){var r=i(594),n={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Body.create",(function(){n.Body.init(this)})),t.before("Engine.update",(function(t){n.Engine.update(t)}))},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var e=r.Composite.allBodies(t.world),i=0;i<e.length;i++){var n=e[i],s=n.plugin.attractors;if(s&&s.length>0)for(var o=0;o<e.length;o++){var a=e[o];if(i!==o)for(var h=0;h<s.length;h++){var l=s[h],u=l;r.Common.isFunction(l)&&(u=l(n,a)),u&&r.Body.applyForce(a,a.position,u)}}}}},Attractors:{gravityConstant:.001,gravity:function(t,e){var i=r.Vector.sub(e.position,t.position),s=r.Vector.magnitudeSquared(i)||1e-4,o=r.Vector.normalise(i),a=-n.Attractors.gravityConstant*(t.mass*e.mass/s),h=r.Vector.mult(o,a);r.Body.applyForce(t,t.position,r.Vector.neg(h)),r.Body.applyForce(e,e.position,h)}}};t.exports=n},function(t,e){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(e){e.pairs.map((function(e){var i=e.bodyA,r=e.bodyB;i.gameObject&&i.gameObject.emit("collide",i,r,e),r.gameObject&&r.gameObject.emit("collide",r,i,e),t.Events.trigger(i,"onCollide",{pair:e}),t.Events.trigger(r,"onCollide",{pair:e}),i.onCollideCallback&&i.onCollideCallback(e),r.onCollideCallback&&r.onCollideCallback(e),i.onCollideWith[r.id]&&i.onCollideWith[r.id](r,e),r.onCollideWith[i.id]&&r.onCollideWith[i.id](i,e)}))})),t.Events.on(this,"collisionActive",(function(e){e.pairs.map((function(e){var i=e.bodyA,r=e.bodyB;i.gameObject&&i.gameObject.emit("collideActive",i,r,e),r.gameObject&&r.gameObject.emit("collideActive",r,i,e),t.Events.trigger(i,"onCollideActive",{pair:e}),t.Events.trigger(r,"onCollideActive",{pair:e}),i.onCollideActiveCallback&&i.onCollideActiveCallback(e),r.onCollideActiveCallback&&r.onCollideActiveCallback(e)}))})),t.Events.on(this,"collisionEnd",(function(e){e.pairs.map((function(e){var i=e.bodyA,r=e.bodyB;i.gameObject&&i.gameObject.emit("collideEnd",i,r,e),r.gameObject&&r.gameObject.emit("collideEnd",r,i,e),t.Events.trigger(i,"onCollideEnd",{pair:e}),t.Events.trigger(r,"onCollideEnd",{pair:e}),i.onCollideEndCallback&&i.onCollideEndCallback(e),r.onCollideEndCallback&&r.onCollideEndCallback(e)}))}))}))}}},function(t,e,i){var r=i(594),n={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.update",(function(){n.Engine.update(this)}))},Engine:{update:function(t){for(var e=t.world,i=r.Composite.allBodies(e),s=r.Composite.allComposites(e),o=0;o<i.length;o+=1){var a=i[o];a.plugin.wrap&&n.Body.wrap(a,a.plugin.wrap)}for(o=0;o<s.length;o+=1){var h=s[o];h.plugin.wrap&&n.Composite.wrap(h,h.plugin.wrap)}}},Bounds:{wrap:function(t,e){var i=null,r=null;if(void 0!==e.min.x&&void 0!==e.max.x&&(t.min.x>e.max.x?i=e.min.x-t.max.x:t.max.x<e.min.x&&(i=e.max.x-t.min.x)),void 0!==e.min.y&&void 0!==e.max.y&&(t.min.y>e.max.y?r=e.min.y-t.max.y:t.max.y<e.min.y&&(r=e.max.y-t.min.y)),null!==i||null!==r)return{x:i||0,y:r||0}}},Body:{wrap:function(t,e){var i=n.Bounds.wrap(t.bounds,e);return i&&r.Body.translate(t,i),i}},Composite:{bounds:function(t){for(var e=r.Composite.allBodies(t),i=[],n=0;n<e.length;n+=1){var s=e[n];i.push(s.bounds.min,s.bounds.max)}return r.Bounds.create(i)},wrap:function(t,e){var i=n.Bounds.wrap(n.Composite.bounds(t),e);return i&&r.Composite.translate(t,i),i}}};t.exports=n},function(t,e,i){(function(e){var r=i(33),n=i(17),s={Actions:i(275),Animations:i(723),BlendModes:i(35),Cache:i(735),Cameras:i(738),Core:i(806),Class:i(0),Create:i(888),Curves:i(894),Data:i(896),Display:i(898),DOM:i(917),Events:i(918),Game:i(920),GameObjects:i(1011),Geom:i(483),Input:i(1308),Loader:i(1338),Math:i(193),Physics:i(1493),Plugins:i(1403),Renderer:i(1405),Scale:i(1412),ScaleModes:i(168),Scene:i(418),Scenes:i(1413),Structs:i(1415),Textures:i(1416),Tilemaps:i(1418),Time:i(1461),Tweens:i(1463),Utils:i(1481)};s.Sound=i(1492),s=n(!1,s,r),t.exports=s,e.Phaser=s}).call(this,i(600))}])},t.exports=e()},3758:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>l});const r=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,n=Phaser.Utils.Objects.GetValue,s=class extends r{constructor(t){super({name:"rexGrayScalePostFx",game:t,renderTarget:!0,fragShader:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n// Scene buffer\nuniform sampler2D uMainSampler; \nvarying vec2 outTexCoord;\n// Effect parameters\nuniform float intensity;\nvoid main (void) {\n  vec4 front = texture2D(uMainSampler, outTexCoord);\n  float gray = dot(front.rgb, vec3(0.299, 0.587, 0.114));\n  gl_FragColor = mix(front, vec4(gray, gray, gray, front.a), intensity);\n}\n"}),this.intensity=1}resetFromJSON(t){return this.setIntensity(n(t,"intensity",1)),this}onPreRender(){this.set1f("intensity",this.intensity)}setIntensity(t){return this.intensity=t,this}};var o=i(2074),a=i(8023);class h extends o.Z{constructor(t){super(t),this.setPostPipelineClass(s,"rexGrayScalePostFx")}}(0,a.Z)(window,"RexPlugins.Pipelines.GrayScalePostFx",s);const l=h},5807:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});const r=function(t){void 0===t&&(t=.1);var e=Math.max(100*t,1),i=(2*Math.PI/e).toFixed(7);return"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n\n// Scene buffer\nuniform sampler2D uMainSampler; \nvarying vec2 outTexCoord;\n\n// Effect parameters\nuniform vec2 texSize;\nuniform float thickness;\nuniform vec3 outlineColor;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main() {\n  vec4 front = texture2D(uMainSampler, outTexCoord);\n\n  if (thickness > 0.0) {\n    vec2 mag = vec2(thickness/texSize.x, thickness/texSize.y);\n    vec4 curColor;\n    float maxAlpha = front.a;\n    vec2 offset;\n    for (float angle = 0.; angle < DOUBLE_PI; angle += #{angleStep}) {\n        offset = vec2(mag.x * cos(angle), mag.y * sin(angle));        \n        curColor = texture2D(uMainSampler, outTexCoord + offset);\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    vec3 resultColor = front.rgb + (outlineColor.rgb * (1. - front.a)) * maxAlpha;\n    gl_FragColor = vec4(resultColor, maxAlpha);\n  } else {\n    gl_FragColor = front;\n  }\n}\n".replace(/\#\{angleStep\}/,i)},n=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,s=Phaser.Utils.Objects.GetValue,o=Phaser.Display.Color.IntegerToRGB,a=Phaser.Display.Color;var h=.1,l=r(h);const u=class extends n{constructor(t){super({name:"rexOutlinePostFx",game:t,renderTarget:!0,fragShader:l}),this.thickness=0,this._outlineColor=new a}resetFromJSON(t){return this.setThickness(s(t,"thickness",3)),this.setOutlineColor(s(t,"outlineColor",16777215)),this}onPreRender(){this.set1f("thickness",this.thickness),this.set3f("outlineColor",this._outlineColor.redGL,this._outlineColor.greenGL,this._outlineColor.blueGL),this.set2f("texSize",this.renderer.width,this.renderer.height)}setThickness(t){return this.thickness=t,this}get outlineColor(){return this._outlineColor}set outlineColor(t){"number"==typeof t&&(t=o(t)),this._outlineColor.setFromRGB(t)}setOutlineColor(t){return this.outlineColor=t,this}static setQuality(t){h!==t&&(h=t,l=r(t))}static getQuality(){return h}};var c=i(2074),d=i(8023);const f=Phaser.Utils.Objects.GetValue;class p extends c.Z{constructor(t){super(t),this.setPostPipelineClass(u,"rexOutlinePostFx")}add(t,e){return this.setQuality(f(e,"quality",this.quality)),super.add(t,e)}setQuality(t){return u.setQuality(t),this}set quality(t){this.setQuality(t)}get quality(){return u.getQuality()}}(0,d.Z)(window,"RexPlugins.Pipelines.OutlinePostFx",u);const g=p},8023:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=function(t){return null==t||""===t||0===t.length};const n=function(t,e,i){if("object"==typeof t){if(r(e)){if(null==i)return;"object"==typeof i&&(t=i)}else{"string"==typeof e&&(e=e.split("."));var n=e.pop(),s=function(t,e,i){var n=t;if(r(e));else{var s;"string"==typeof e&&(e=e.split("."));for(var o=0,a=e.length;o<a;o++){var h;null!=n[s=e[o]]&&"object"==typeof n[s]||(h={},n[s]=h),n=n[s]}}return n}(t,e);s[n]=i}return t}}},2074:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const r=Phaser.Utils.Array.SpliceOne;class n extends Phaser.Plugins.BasePlugin{setPostPipelineClass(t,e){return this.PostFxPipelineClass=t,this.postFxPipelineName=e,this}start(){this.game.events.once("destroy",this.destroy,this),this.game.renderer.pipelines.addPostPipeline(this.postFxPipelineName,this.PostFxPipelineClass)}add(t,e){void 0===e&&(e={}),t.setPostPipeline(this.PostFxPipelineClass);var i=t.postPipelines[t.postPipelines.length-1];return i.resetFromJSON(e),e.name&&(i.name=e.name),i}remove(t,e){var i=this.PostFxPipelineClass;if(void 0===e)for(var n=(s=t.postPipelines).length-1;n>=0;n--)(a=s[n])instanceof i&&(a.destroy(),r(s,n));else{n=0;for(var s,o=(s=t.postPipelines).length;n<o;n++){var a;(a=s[n])instanceof i&&a.name===e&&(a.destroy(),r(s,n))}}return this}get(t,e){var i,r=this.PostFxPipelineClass;if(void 0===e){for(var n=[],s=0,o=(i=t.postPipelines).length;s<o;s++)(a=i[s])instanceof r&&n.push(a);return n}for(s=0,o=(i=t.postPipelines).length;s<o;s++){var a;if((a=i[s])instanceof r&&a.name===e)return a}}}const s=n},4166:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>jb});class r{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,e){r.prototype[t]=e}}const n=r;var s=function(t){var e,i,r;if("object"!=typeof t||null===t)return t;for(r in e=Array.isArray(t)?[]:{},t)i=t[r],e[r]=s(i);return e};const o=s,a=function(t,e,i){return void 0===i&&(i="image"),t[e]||(t[e]=t.scene.make[i]({add:!1,origin:{x:0,y:0}}),t.once("destroy",(function(){t[e]&&(t[e].destroy(),t[e]=void 0)}))),t[e]},h=Phaser.Utils.Objects.IsPlainObject,l=Phaser.Utils.Objects.GetValue;var u=function(t){return"string"==typeof t&&(t=c[t]),t};const c={scale:0,repeat:1},d=function(t,e){return 0===t||t===this.columns.count-1||0===e||e===this.rows.count-1},f={setTexture:function(t,e,i,r){Array.isArray(e)&&(r=i,i=e,e=void 0),void 0===e&&(e="__BASE"),i=o(i),r=o(r),this.textureKey=t,this.baseFrameName=e,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=r,this.rows.count=r?r.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var n=this.scene.textures.get(t);if(!n)return this.clear(),this;if(!i||!r)return this.clear(),this;for(var s=n.frames[e],a=s.width,h=0,l=0,u=i.length;l<u;l++)void 0===i[l]?h++:"number"==typeof i[l]?a-=i[l]:a-=i[l].width;var c=a/h,d=s.height,f=0;for(l=0,u=r.length;l<u;l++)void 0===r[l]?f++:"number"==typeof r[l]?d-=r[l]:d-=r[l].width;for(var p,g,v,m,y,x=d/f,b=0,w=0,T=0,S=r.length;T<S;T++){void 0===r[T]&&(r[T]=x),"number"==typeof r[T]&&(r[T]={height:r[T],stretch:T%2}),v=(p=r[T]).height,this.rows.stretch+=0|p.stretch,this.rows.minHeight+=p.stretch>0?0:v,b=0,l=0;for(var E=i.length;l<E;l++){if(void 0===i[l]&&(i[l]=c),"number"==typeof i[l]&&(i[l]={width:i[l],stretch:l%2}),m=(g=i[l]).width,0===T&&(this.columns.stretch+=0|g.stretch,this.columns.minWidth+=g.stretch>0?0:m),m>=1&&v>=1){var C=typeof(y=this.getFrameNameCallback(l,T,e));"string"!==C&&"number"!==C||n.add(y,0,b+s.cutX,w+s.cutY,m,v)}b+=m}w+=v}return this.updateTexture(),this},updateTexture:function(){if(this.clear(),void 0===this.textureKey)return this;var t=this.scene.textures.get(this.textureKey);if(!t)return this;var e,i,r,n,s,o,h,l=this.columns.minWidth*this.maxFixedPartScaleX,u=this.rows.minHeight*this.maxFixedPartScaleY,c=this.width-l,d=this.height-u,f=c>=0?this.maxFixedPartScaleX:this.width/l,p=d>=0?this.maxFixedPartScaleY:this.height/u;if(this.preserveRatio){var g=Math.min(f,p);if(f>g){var v=(f-g)*l;c>=0?c+=v:c=v,f=g}if(p>g){var m=(p-g)*u;d>=0?d+=m:d=m,p=g}}this.columns.scale=f,this.rows.scale=p,e=c>0&&this.columns.stretch>0?c/this.columns.stretch:0,i=d>0&&this.rows.stretch>0?d/this.rows.stretch:0;for(var y,x=0,b=0,w=0,T=this.rows.count;w<T;w++){h=0===(s=this.rows.data[w]).stretch?s.height*p:i*s.stretch,x=0;for(var S=0,E=this.columns.count;S<E;S++)o=0===(n=this.columns.data[S]).stretch?n.width*f:e*n.stretch,r=this.getFrameNameCallback(S,w,this.baseFrameName),t.has(r)&&o>0&&h>0&&(0==(0===s.stretch&&0===n.stretch||0===this.getStretchMode(S,w)?0:1)?(y=a(this,"_image","image")).setTexture(this.textureKey,r).setDisplaySize(o,h):(y=a(this,"_tileSprite","tileSprite")).setTexture(this.textureKey,r).setSize(o,h)),y&&(this.draw(y,x,b),y=void 0),x+=o;b+=h}},setStretchMode:function(t){return h(t)?(this.stretchMode.edge=u(l(t,"edge",0)),this.stretchMode.internal=u(l(t,"internal",0))):(t=u(t),this.stretchMode.edge=t,this.stretchMode.internal=t),this},getStretchMode:function(t,e){return d.call(this,t,e)?this.stretchMode.edge:this.stretchMode.internal},setPreserveRatio:function(t){return null==t&&(t=!0),this.preserveRatio=t,this},setMaxFixedPartScale:function(t,e){return void 0===e&&(e=t),this.maxFixedPartScaleX=t,this.maxFixedPartScaleY=e,this}},p=function(t,e,i){return"__BASE"===i?`${t},${e}`:`${i}_${t},${e}`},g=Phaser.GameObjects.RenderTexture,v=Phaser.Utils.Objects.IsPlainObject,m=Phaser.Utils.Objects.GetValue;class y extends g{constructor(t,e,i,r,n,s,o,a,h,l){v(e)?(e=m(l=e,"x",0),i=m(l,"y",0),r=m(l,"width",1),n=m(l,"height",1),s=m(l,"key",void 0),o=m(l,"baseFrame",void 0),a=m(l,"columns",void 0),h=m(l,"rows",void 0)):v(r)?(r=m(l=r,"width",1),n=m(l,"height",1),s=m(l,"key",void 0),o=m(l,"baseFrame",void 0),a=m(l,"columns",void 0),h=m(l,"rows",void 0)):v(s)?(s=m(l=s,"key",void 0),o=m(l,"baseFrame",void 0),a=m(l,"columns",void 0),h=m(l,"rows",void 0)):v(o)?(o=m(l=o,"baseFrame",void 0),a=m(l,"columns",void 0),h=m(l,"rows",void 0)):Array.isArray(o)?(l=h,h=a,a=o,o=m(l,"baseFrame",void 0)):v(a)&&(a=m(l=a,"columns",void 0),h=m(l,"rows",void 0)),super(t,e,i,r,n),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setOrigin(.5,.5),this.setGetFrameNameCallback(m(l,"getFrameNameCallback",void 0)),this.setStretchMode(m(l,"stretchMode",0)),this.setPreserveRatio(m(l,"preserveRatio",!0));var u=m(l,"maxFixedPartScale",1),c=m(l,"maxFixedPartScaleX",u),d=m(l,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(c,d),this.setTexture(s,o,a,h)}setGetFrameNameCallback(t){return void 0===t&&(t=p),this.getFrameNameCallback=t,this}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(t,e){return this.width===t&&this.height===e||(super.resize(t,e),this.updateTexture()),this}}Object.assign(y.prototype,f);const x=y;var b=i(8023);n.register("ninePatch",(function(t,e,i,r,n,s,o,a){var h=new x(this.scene,t,e,i,r,n,s,o,a);return this.scene.add.existing(h),h})),(0,b.Z)(window,"RexPlugins.UI.NinePatch",x);const w=Phaser.Utils.Objects.GetValue;var T=function(t,e,i){return void 0===t?{x:e,y:i}:"number"==typeof t?{x:t,y:t}:t};const S=class{constructor(t,e,i,r,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,i,r,n)}setTo(t,e,i,r,n){return this.setPosition(t,e),this.setRadius(n),this.setSize(i,r),this}setPosition(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}setRadius(t){var e,i;void 0===t&&(t=0),"number"==typeof t?(e=t,i=t):(e=w(t,"x",0),i=w(t,"y",0));var r=this.cornerRadius;return r.tl=T(w(t,"tl",void 0),e,i),r.tr=T(w(t,"tr",void 0),e,i),r.bl=T(w(t,"bl",void 0),e,i),r.br=T(w(t,"br",void 0),e,i),this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}},E=function(t,e,i){var r=i.length;if(r>=2){var n=i[r-2],s=i[r-1];if(t===n&&e===s)return i}return i.push(t,e),i},C=Phaser.Math.DegToRad,_=function(t,e,i,r,n,s,o,a,h){o&&s>n?s-=360:!o&&s<n&&(s+=360);var l=C(s-n)/a;n=C(n);for(var u=0;u<=a;u++){var c=n+l*u,d=t+i*Math.cos(c),f=e+r*Math.sin(c);E(d,f,h)}return h};var A=Phaser.Renderer.WebGL.Utils;const M=function(t,e,i,r,n,s){for(var o=A.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),a=i.pathData,h=i.pathIndexes,l=0;l<h.length;l+=3){var u=2*h[l],c=2*h[l+1],d=2*h[l+2],f=a[u+0]-n,p=a[u+1]-s,g=a[c+0]-n,v=a[c+1]-s,m=a[d+0]-n,y=a[d+1]-s,x=e.getX(f,p),b=e.getY(f,p),w=e.getX(g,v),T=e.getY(g,v),S=e.getX(m,y),E=e.getY(m,y);t.batchTri(i,x,b,w,T,S,E,0,0,1,1,o,o,o,2)}};var P=Phaser.Renderer.WebGL.Utils;const k=function(t,e,i,r,n){var s=t.strokeTint,o=P.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i);s.TL=o,s.TR=o,s.BL=o,s.BR=o;var a=e.pathData,h=a.length-1,l=e.lineWidth,u=l/2,c=a[0]-r,d=a[1]-n;e.closePath||(h-=2);for(var f=2;f<h;f+=2){var p=a[f]-r,g=a[f+1]-n;t.batchLine(c,d,p,g,u,u,l,f-2,!!e.closePath&&f===h-1),c=p,d=g}},O=Phaser.GameObjects.Components.TransformMatrix;var R=new O,L=new O,I=new O,F={camera:R,sprite:L,calc:I};const D=function(t,e,i){var r=R,n=L,s=I;return n.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),r.copyFrom(e.matrix),i?(r.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),n.e=t.x,n.f=t.y):(n.e-=e.scrollX*t.scrollFactorX,n.f-=e.scrollY*t.scrollFactorY),r.multiply(n,s),F},B=function(t,e,i,r){var n=i||e.fillColor,s=r||e.fillAlpha,o=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.fillStyle="rgba("+o+","+a+","+h+","+s+")"},N=function(t,e,i,r){var n=i||e.strokeColor,s=r||e.strokeAlpha,o=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.strokeStyle="rgba("+o+","+a+","+h+","+s+")",t.lineWidth=e.lineWidth},z=Phaser.Renderer.Canvas.SetTransform,U={renderWebGL:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),s=D(e,i,r),o=n.calcMatrix.copyFrom(s.calc),a=e._displayOriginX,h=e._displayOriginY,l=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&M(n,o,e,l,a,h),e.isStroked&&k(n,e,l,a,h),t.pipelines.postBatch(e)},renderCanvas:function(t,e,i,r){e.dirty&&(e.updateData(),e.dirty=!1),i.addToRenderList(e);var n=t.currentContext;if(z(t,n,e,i,r)){var s=e._displayOriginX,o=e._displayOriginY,a=e.pathData,h=a.length-1,l=a[0]-s,u=a[1]-o;n.beginPath(),n.moveTo(l,u),e.closePath||(h-=2);for(var c=2;c<h;c+=2){var d=a[c]-s,f=a[c+1]-o;n.lineTo(d,f)}n.closePath(),e.isFilled&&(B(n,e),n.fill()),e.isStroked&&(N(n,e),n.stroke()),n.restore()}}},Y=Phaser.GameObjects.Shape,X=Phaser.Utils.Objects.GetValue,G=Phaser.Geom.Polygon.Earcut;class W extends Y{constructor(t,e,i,r,n,s,o,a){void 0===e&&(e=0),void 0===i&&(i=0);var h=new S;super(t,"rexRoundRectangleShape",h);var l=X(s,"radius",s);h.setTo(0,0,r,n,l);var u=X(s,"iteration",void 0);this.setIteration(u),this.setPosition(e,i),void 0!==o&&this.setFillStyle(o,a),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var i,r=t.cornerRadius,n=this.iteration+1;if(i=r.br,V(i)){var s=t.width-i.x,o=t.height-i.y;_(s,o,i.x,i.y,0,90,!1,n,e)}else E(t.width,t.height,e);return i=r.bl,V(i)?(s=i.x,o=t.height-i.y,_(s,o,i.x,i.y,90,180,!1,n,e)):E(0,t.height,e),i=r.tl,V(i)?(s=i.x,o=i.y,_(s,o,i.x,i.y,180,270,!1,n,e)):E(0,0,e),i=r.tr,V(i)?(s=t.width-i.x,o=i.y,_(s,o,i.x,i.y,270,360,!1,n,e)):E(t.width,0,e),e.push(e[0],e[1]),this.pathIndexes=G(e),this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){if(void 0===e&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),this.updateDisplayOrigin(),this.dirty=!0;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get iteration(){return this._iteration}set iteration(t){void 0!==this._iteration?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t}setIteration(t){return void 0===t&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}setRadius(t){return void 0===t&&(t=0),this.radius=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var V=function(t){return 0!==t.x&&0!==t.y};Object.assign(W.prototype,U);const j=W;n.register("roundRectangle",(function(t,e,i,r,n,s,o){var a=new j(this.scene,t,e,i,r,n,s,o);return this.scene.add.existing(a),a})),(0,b.Z)(window,"RexPlugins.UI.RoundRectangle",j);const H=Phaser.Renderer.WebGL.Utils,q={renderWebGL:function(t,e,i,r){if(e.dirty&&(e.updateTexture(),e.dirty=!1),0!==e.width&&0!==e.height){i.addToRenderList(e);var n=e.frame,s=n.width,o=n.height,a=H.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline,e),l=h.setTexture2D(n.glTexture,e);t.pipelines.preBatch(e),h.batchTexture(e,n.glTexture,s,o,e.x,e.y,s/e.resolution,o/e.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,s,o,a(e.tintTopLeft,i.alpha*e._alphaTL),a(e.tintTopRight,i.alpha*e._alphaTR),a(e.tintBottomLeft,i.alpha*e._alphaBL),a(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,r,!1,l),t.pipelines.postBatch(e)}},renderCanvas:function(t,e,i,r){e.dirty&&(e.updateTexture(),e.dirty=!1),0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,r))}},K=Phaser.Display.Color,Z={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(t){return this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(t,e){var i=this,r=new Image;return r.onload=function(){i.width!==r.width||i.height!==r.height?i.resize(r.width,r.height):i.clear(),i.context.drawImage(r,0,0),i.updateTexture(),e&&e(),r.onload=null,r.src="",r.remove()},r.src=t,this},loadFromURLPromise(t){var e=this;return new Promise((function(i,r){e.loadFromURL(t,i)}))},getDataURL(t,e){return this.canvas.toDataURL(t,e)},getPixel(t,e,i){void 0===i&&(i=new K);var r=this.context.getImageData(t,e,1,1);return i.setTo(r.data[0],r.data[1],r.data[2],r.data[3]),i},setPixel(t,e,i,r,n,s){if("number"!=typeof i){var o=i;i=o.red,r=o.green,n=o.blue,s=o.alpha}void 0===s&&(s=0!==i||0!==r||0!==n?255:0);var a=this.context.createImageData(1,1);return a.data[0]=i,a.data[1]=r,a.data[2]=n,a.data[3]=s,this.context.putImageData(a,t,e),this.dirty=!0,this}},J=function(t,e,i,r,n,s,o){var a,h=t.textures,l=t.renderer;void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=e.width),void 0===o&&(o=e.height);var u=(a=h.exists(i)?h.get(i):h.createCanvas(i,s,o)).getSourceImage();u.width!==s&&(u.width=s),u.height!==o&&(u.height=o);var c=u.getContext("2d");c.clearRect(0,0,s,o),c.drawImage(e,r,n,s,o),l.gl&&a&&l.canvasToTexture(u,a.source[0].glTexture,!0,0)},$={updateTexture(t,e){t&&(e?t.call(e,this.canvas,this.context):t(this.canvas,this.context)),this.canvas.width===this.frame.width&&this.canvas.height===this.frame.height||this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},generateTexture(t,e,i,r,n){var s=this.canvas;return void 0===r?r=s.width:r*=this.resolution,void 0===n?n=s.height:n*=this.resolution,J(this.scene,s,t,e,i,r,n),this},loadTexture(t,e){var i=this.scene.textures.getFrame(t,e);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.resize(i.cutWidth,i.cutHeight):this.clear(),this.context.drawImage(i.source.image,i.cutX,i.cutY,i.cutWidth,i.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}},Q=Phaser.Display.Canvas.CanvasPool,tt=Phaser.GameObjects.GameObject;class et extends tt{constructor(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=r,this._height=n,r=Math.max(Math.ceil(r*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=Q.create(this,r,n),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,i),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),Q.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setSize(t,e){return this._width===t&&this._height===e||(this._width=t,this._height=e,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=t,this.canvas.height=e,this.frame.setSize(t,e),this.dirty=!0),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,e){return this.displayWidth=t,this.displayHeight=e,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,e){return this.setSize(t,e),this}}const it=Phaser.GameObjects.Components;Phaser.Class.mixin(et,[it.Alpha,it.BlendMode,it.Crop,it.Depth,it.Flip,it.GetBounds,it.Mask,it.Origin,it.Pipeline,it.ScrollFactor,it.Tint,it.Transform,it.Visible,q,Z,$]);const rt=et,nt=Phaser.Utils.String.Pad,st=function(t,e,i){if(null==t)return t;switch(typeof t){default:return t;case"number":return`#${nt(Math.floor(t).toString(16),6,"0",1)}`;case"function":return t(e,i);case"object":return t.hasOwnProperty("r")?t.hasOwnProperty("a")?`rgba(${t.r},${t.g},${t.b},${t.a})`:`rgb(${t.r},${t.g},${t.b})`:t.hasOwnProperty("h")?t.hasOwnProperty("a")?`hsla(${t.h},${t.s},${t.l},${t.a})`:`hsl(${t.h},${t.s},${t.l})`:t}},ot=Phaser.Math.DegToRad,at=ot(0),ht=ot(90),lt=ot(180),ut=ot(270);var ct=function(t,e,i,r,n,s,o,a){if(null==a)t.ellipse(e,i,r,n,0,s,o);else for(var h,l,u,c=(o-s)/(a+=1),d=0;d<=a;d++)u=s+c*d,h=e+r*Math.cos(u),l=i+n*Math.sin(u),t.lineTo(h,l)};const dt=function(t,e,i,r,n,s,o){var a,h,l,u,c,d=new S(e,i,r,n,s),f=d.minWidth,p=d.minHeight,g=r>=f?1:r/f,v=n>=p?1:n/p,m=d.cornerRadius;t.save(),t.beginPath(),t.translate(e,i),u=r-(h=(a=m.br).x*g),c=n-(l=a.y*v),t.moveTo(r,c),h>0&&l>0?ct(t,u,c,h,l,at,ht,o):(t.lineTo(r,n),t.lineTo(u,n)),u=h=(a=m.bl).x*g,c=n-(l=a.y*v),t.lineTo(h,n),h>0&&l>0?ct(t,u,c,h,l,ht,lt,o):(t.lineTo(0,n),t.lineTo(0,c)),u=h=(a=m.tl).x*g,c=l=a.y*v,t.lineTo(0,c),h>0&&l>0?ct(t,u,c,h,l,lt,ut,o):(t.lineTo(0,0),t.lineTo(u,0)),u=r-(h=(a=m.tr).x*g),c=l=a.y*v,t.lineTo(u,0),h>0&&l>0?ct(t,u,c,h,l,ut,at,o):(t.lineTo(r,0),t.lineTo(r,c)),t.closePath(),t.restore()},ft=function(t,e,i,r,n,s,o,a){if(null!=e||null!=i){var h=t.canvas.width,l=t.canvas.height;null==i&&(r=0);var u=r/2;h-=r,l-=r,function(t,e,i,r,n,s,o,a,h,l,u,c,d){var f;dt(e,i,r,n,s,o,d),null!=a&&(null!=u&&((f=c?e.createLinearGradient(0,0,n,0):e.createLinearGradient(0,0,0,s)).addColorStop(0,a),f.addColorStop(1,u),a=f),e.fillStyle=a,e.fill()),null!=h&&l>0&&(e.strokeStyle=h,e.lineWidth=l,e.stroke())}(t.canvas,t.context,u,u,h,l,n,e,i,r,s,o,a)}},pt=function(){ft(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)},gt=Phaser.Utils.Objects.GetValue,vt=class extends rt{constructor(t,e,i,r,n,s,o,a,h,l,u){super(t,e,i,r,n),this.type="rexRoundRectangleCanvas";var c=gt(s,"radius",s),d=gt(s,"iteration",void 0);this.setRadius(c),this.setIteration(d),this.setFillStyle(o,l,u),this.setStrokeStyle(a,h)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=st(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=st(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,e,i){return void 0===i&&(i=!0),this.fillStyle=t,this.fillColor2=e,this.isHorizontalGradient=i,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=st(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,e){return this.strokeStyle=t,this.lineWidth=e,this}updateTexture(){return this.clear(),pt.call(this),super.updateTexture(),this}};n.register("roundRectangleCanvas",(function(t,e,i,r,n,s,o,a,h,l){var u=new vt(this.scene,t,e,i,r,n,s,o,a,h,l);return this.scene.add.existing(u),u})),(0,b.Z)(window,"RexPlugins.UI.RoundRectangleCanvas",vt);var mt=Phaser.Renderer.WebGL.Utils;const yt={renderWebGL:function(t,e,i,r){if(0!==e.width&&0!==e.height){i.addToRenderList(e);var n=e.frame,s=n.width,o=n.height,a=mt.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline,e),l=h.setTexture2D(n.glTexture,e);t.pipelines.preBatch(e),h.batchTexture(e,n.glTexture,s,o,e.x,e.y,s/e.style.resolution,o/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,s,o,a(e.tintTopLeft,i.alpha*e._alphaTL),a(e.tintTopRight,i.alpha*e._alphaTR),a(e.tintBottomLeft,i.alpha*e._alphaBL),a(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,r,!1,l),t.pipelines.postBatch(e)}},renderCanvas:function(t,e,i,r){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,r))}},xt=Phaser.Display.Canvas.CanvasPool,bt=function(t){var e=xt.create(this),i=e.getContext("2d");t.syncFont(e,i);var r=i.measureText(t.testString);if("actualBoundingBoxAscent"in r){var n=r.actualBoundingBoxAscent,s=r.actualBoundingBoxDescent,o={ascent:n,descent:s,fontSize:n+s};return xt.remove(e),o}var a=Math.ceil(r.width*t.baselineX),h=a,l=2*h;if(h=h*t.baselineY|0,e.width=a,e.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,h),o={ascent:0,descent:0,fontSize:0},!i.getImageData(0,0,a,l))return o.ascent=h,o.descent=h+6,o.fontSize=o.ascent+o.descent,xt.remove(e),o;var u,c,d=i.getImageData(0,0,a,l).data,f=d.length,p=4*a,g=0,v=!1;for(u=0;u<h;u++){for(c=0;c<p;c+=4)if(255!==d[g+c]){v=!0;break}if(v)break;g+=p}for(o.ascent=h-u,g=f-p,v=!1,u=l;u>h;u--){for(c=0;c<p;c+=4)if(255!==d[g+c]){v=!0;break}if(v)break;g-=p}return o.descent=u-h,o.fontSize=o.ascent+o.descent,xt.remove(e),o},wt=0,Tt=1,St=2,Et=0,Ct=1,_t=2,At=/(?:\r\n|\r|\n)/,Mt=Phaser.Utils.Objects.GetAdvancedValue,Pt=Phaser.Utils.Objects.GetValue;var kt={backgroundColor:["backgroundColor",null,st],backgroundColor2:["backgroundColor2",null,st],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,st],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",st],stroke:["stroke","#fff",st],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",st],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",st],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|MÃ‰qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};const Ot={none:Et,word:Ct,char:_t,character:_t},Rt=class{constructor(t,e){this.parent=t,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0);var i=Pt(e,"metrics",!1);this.metrics=i?{ascent:Pt(i,"ascent",0),descent:Pt(i,"descent",0),fontSize:Pt(i,"fontSize",0)}:bt(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Et&&0===this.wrapWidth}setStyle(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("wrap")){var r=t.wrap;if(r.hasOwnProperty("mode")){var n=r.mode;"string"==typeof n&&(r.mode=Ot[n])}else r.hasOwnProperty("width")&&(r.mode=1)}for(var s in t&&t.rtl&&i&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),kt){var o=kt[s],a=o[0],h=i?o[1]:this[s],l=o[2];if("wrapCallback"===s||"wrapCallbackScope"===s)this[s]=Pt(t,a,h);else{var u=Mt(t,a,h);l&&(u=l(u)),this[s]=u}}var c=Pt(t,"font",null);this._font=null===c?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:c;var d=Pt(t,"fill",null);null!==d&&(this.color=st(d));var f=Pt(t,"images",void 0);return f&&this.parent.addImage(f),e?this.update(!0):this.parent}syncFont(t,e){e.font=this._font}syncStyle(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=bt(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return"string"==typeof t?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Pt(t,"fontFamily","Courier"),this.fontSize=Pt(t,"fontSize","16px"),this.fontStyle=Pt(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,e,i){return void 0===i&&(i=!0),this.backgroundColor=st(t,this.canvas,this.context),this.backgroundColor2=st(e,this.canvas,this.context),this.backgroundHorizontalGradient=i,this.update(!1)}setBackgroundStrokeColor(t,e){return this.backgroundStrokeColor=st(t,this.canvas,this.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(t,e){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=e,this.update(!1)}setFill(t){return this.color=st(t,this.canvas,this.context),this.update(!1)}setColor(t){return this.color=st(t,this.canvas,this.context),this.update(!1)}setStroke(t,e){return void 0===t?this.strokeThickness=0:(void 0===e&&(e=this.strokeThickness),this.stroke=st(t,this.canvas,this.context),this.strokeThickness=e),this.update(!0)}setShadow(t,e,i,r,n,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===r&&(r=0),void 0===n&&(n=!1),void 0===s&&(s=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=st(i,this.canvas,this.context),this.shadowBlur=r,this.shadowStroke=n,this.shadowFill=s,this.update(!1)}setShadowOffset(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}setShadowColor(t){return void 0===t&&(t="#000"),this.shadowColor=st(t,this.canvas,this.context),this.update(!1)}setShadowBlur(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,e,i){return void 0===t&&(t="#000"),void 0===e&&(e=0),void 0===i&&(i=0),this.underlineColor=st(t,this.canvas,this.context),this.underlineThickness=e,this.underlineOffset=i,this.update(!1)}setUnderlineColor(t){return void 0===t&&(t="#000"),this.underlineColor=st(t,this.canvas,this.context),this.update(!1)}setUnderlineThickness(t){return void 0===t&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return void 0===t&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return"string"==typeof t&&(t=Ot[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,e){return void 0===t&&(t="left"),void 0===e&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}setHAlign(t){return void 0===t&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return void 0===t&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,e){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,"string"==typeof e?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=Pt(e,"fontFamily",this.fontFamily),this.fontSize=Pt(e,"fontSize",this.fontSize),this.fontStyle=Pt(e,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={};for(var e in kt)t[e]=this[e];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}},Lt=Phaser.Display.Canvas.CanvasPool,It={draw(t,e,i,r){var n=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save();var o=this.defaultStyle;this.clear(),ft(this,o.backgroundColor,o.backgroundStrokeColor,o.backgroundStrokeLineWidth,o.backgroundCornerRadius,o.backgroundColor2,o.backgroundHorizontalGradient,o.backgroundCornerIteration),t+=this.startXOffset,e+=this.startYOffset;var a,h,l,u,c,d,f=o.halign,p=o.valign,g=o.lineHeight,v=n.lines,m=v.length,y=o.maxLines;y>0&&m>y?(h=y,l="center"===p?Math.floor((m-h)/2):"bottom"===p?m-h:0):(h=m,l=0),u=l+h;var x=this.rtl,b=x?this.parent.width:void 0;d="center"===p?Math.max((r-h*g)/2,0):"bottom"===p?Math.max(r-h*g-2,0):0,d+=e;for(var w=l;w<u;w++)if(0!==(a=n.getLineWidth(w))){for(var T=v[w],S=T.length,E=f,C=0;C<S;C++){var _=T[C].prop.align;if(_){E=_;break}}for(c="center"===E?(i-a)/2:"right"===E?x?0:i-a:x?i-a:0,c+=t,C=0;C<S;C++)this.drawPen(T[C],c,d,b)}s.restore()},drawPen(t,e,i,r){e+=t.x,i+=t.y+(t.prop.y||0),void 0!==r&&(e=r-e);var n=this.canvas,s=this.context;s.save();var o=this.parser.propToContextStyle(this.defaultStyle,t.prop);o.buildFont(),o.syncFont(n,s),o.syncStyle(n,s),o.underlineThickness>0&&t.width>0&&this.drawUnderline(e,i,t.width,o),t.isTextPen&&this.drawText(e,i,t.text,o),t.isImagePen&&this.drawImage(e,i,t.prop.img,o),s.restore(),t.hasAreaMarker&&t.width>0&&this.hitAreaManager.add(t.prop.area,e,i-this.startYOffset,t.width,this.defaultStyle.lineHeight)},clear(){var t=this.canvas;this.context.clearRect(0,0,t.width,t.height)},drawUnderline(t,e,i,r){e+=r.underlineOffset-r.underlineThickness/2,this.autoRound&&(t=Math.round(t),e=Math.round(e));var n=this.context,s=n.lineCap;n.lineCap="butt",n.strokeStyle=r.underlineColor,n.lineWidth=r.underlineThickness,n.beginPath(),n.moveTo(t,e),n.lineTo(t+i,e),n.stroke(),n.lineCap=s},drawText(t,e,i,r){this.autoRound&&(t=Math.round(t),e=Math.round(e));var n=this.context;r.stroke&&"none"!==r.stroke&&r.strokeThickness>0&&(r.syncShadow(n,r.shadowStroke),n.strokeText(i,t,e)),r.color&&"none"!==r.color&&(r.syncShadow(n,r.shadowFill),n.fillText(i,t,e))},drawImage(t,e,i,r){e-=this.startYOffset,this.parent.imageManager.draw(i,this.context,t,e,this.autoRound)}},Ft=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}},Dt=Phaser.Utils.Objects.GetValue,Bt=wt,Nt=Tt,zt=function(t){if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]},Ut=function(t,e){var i=Array.isArray(t);if(void 0===e?e=i?[]:{}:zt(e),i){e.length=t.length;for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}else for(var s in t)e[s]=t[s];return e},Yt=function(){},Xt=Phaser.Utils.Objects.GetFastValue,Gt=wt,Wt=St;var Vt=new Ft,jt=new Ft;class Ht{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=Xt(t,"pensPool",Vt),this.LinesPool=Xt(t,"linesPool",jt),this.tagToText=Xt(t,"tagToText",Yt),this.tagToTextScope=Xt(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,e,i,r,n,s){var o=this.PensPool.pop();return null==o&&(o=new class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=Dt(t,"text",""),this.x=Dt(t,"x",0),this.y=Dt(t,"y",0),this.width=Dt(t,"width",0);var e=Dt(t,"prop",null);null===e&&(e={}),this.prop=e,this.newLineMode=Dt(t,"newLineMode",0),this.startIndex=Dt(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===Nt&&(t+="\n"),t}get wrapText(){var t=this.text;return this.newLineMode!==Bt&&(t+="\n"),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===Nt&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return""!==this.text}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}),qt.text=t,qt.x=e,qt.y=i,qt.width=r,qt.prop=n,qt.newLineMode=s,o.resetFromJSON(qt),this.addPen(o),this}addImagePen(t,e,i,r){return this.addTextPen("",t,e,i,r,Gt),this}addNewLinePen(){var t=this.lastPen,e=t?t.lastX:0,i=t?t.y:0,r=t?Ut(t.prop):null;return this.addTextPen("",e,i,0,r,Wt),this}addPen(t){var e=this.lastPen;t.startIndex=null==e?0:e.endIndex,this.pens.push(t);var i=this.lastLine;null==i&&(i=this.LinesPool.pop()||[],this.lines.push(i)),i.push(t),t.newLineMode!==Gt&&(i=this.LinesPool.pop()||[],this.lines.push(i)),this.maxLinesWidth=void 0}clone(t){null==t&&(t=new Ht),t.clear();for(var e=0,i=this.lines.length;e<i;e++)for(var r=this.lines[e],n=0,s=r.length;n<s;n++){var o=r[n];t.addPen(o.text,o.x,o.y,o.width,Ut(o.prop),o.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var e,i,r=!1;for(e=t;e>=0&&!(r=null!=(i=this.lines[e])&&i.length>0);e--);return r?i[i.length-1].endIndex:0}getLineWidth(t){var e=this.lines[t];if(!e)return 0;var i=e[e.length-1];return null==i?0:i.lastX}getMaxLineWidth(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var t,e=0,i=0,r=this.lines.length;i<r;i++)(t=this.getLineWidth(i))>e&&(e=t);return this.maxLinesWidth=e,e}getLineWidths(){for(var t=[],e=0,i=this.lines.length;e<i;e++)t.push(this.getLineWidth(e));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",e=this.pens,i=0,r=e.length;i<r;i++)t+=e[i].plainText;return t}get rawTextLength(){for(var t=0,e=this.pens,i=0,r=this.pens.length;i<r;i++)t+=e[i].rawTextLength;return t}getSliceTagText(t,e,i){if(void 0===t&&(t=0),void 0===e){var r=this.lastPen;if(null==r)return"";e=r.endIndex}void 0===i&&(i=!1);for(var n,s,o,a,h,l,u="",c=0,d=this.pens.length;c<d&&((a=(n=this.pens[c]).endIndex)<=t||(n=this.pens[c],s=i?n.wrapText:n.plainText,h=n.prop,(o=n.startIndex)>=t&&a<=e||(s=s.substring(t-o,e-o)),this.tagToTextScope?u+=this.tagToText.call(this.tagToTextScope,s,h,l):u+=this.tagToText(s,h,l),l=h,!(a>=e)));c++);return u}get length(){return this.lines.length}set length(t){this.clear()}}var qt={};const Kt=Ht,Zt=Phaser.Geom.Rectangle;var Jt=new Ft;var $t=function(t,e,i,r){var n=this.hitAreaManager.getFirstHitArea(i,r);if(null!==n){var s=n.key;this.parent.emit(`${t}-${s}`,e,i,r),this.parent.emit(t,s,e,i,r)}};var Qt=new Ft,te=function(t){t&&Qt.push(t)},ee=function(t,e,i){var r=Qt.pop();return null===r&&(r={}),r.text=t,r.width=e,r.newLineMode=i,r};const ie=wt,re=Tt,ne=St,se=Et,oe=Ct,ae=_t,he=At;var le=function(t,e,i,r,n){r<=0&&(i=se);var s=[];if(!t||!t.length)return s;for(var o,a,h,l=i===se,u=i===oe,c=t.split(he),d=0,f=c.length;d<f;d++)if(o=c[d],h=d===f-1?ie:re,l){var p=e(o);s.push(ee(o,p,h))}else{var g,v,m,y,x;if(a=0===d?r-n:r,o.length<=100&&(p=e(o))<=a){s.push(ee(o,p,h));continue}u?(v=""===(g=o.split(" "))[g.length-1])&&(g.length-=1):g=o;for(var b,w="",T=0,S=u?e(" "):void 0,E=0,C=g.length;E<C;E++)if(y=e(m=g[E]),x=E===C-1,!u||x&&!v||(m+=" ",y+=S),u&&y>r){""!==w?s.push(ee(w,T,ne)):0===E&&n>0&&s.push(ee("",0,ne)),s.push(...le(m,e,ae,r,0));var _=s.pop();w=_.text,T=_.width,te(_)," "===w&&(w="",T=0)}else(b=T+y)>a?(s.push(ee(w,T,ne)),w=m,T=y,a=r):(w+=m,T=b),x&&s.push(ee(w,T,h))}return s};const ue=le,ce=Phaser.Utils.Objects.GetValue,de=Et,fe=wt;class pe{constructor(t){this.parent=t.parent,this.context=ce(t,"context",null),this.canvas=this.context.canvas,this.parser=ce(t,"parser",null),this.defaultStyle=ce(t,"style",null),this.autoRound=!0,this.pensPool=ce(t,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return Jt.pushMultiple(this.hitAreas),this}add(t,e,i,r,n){var s=Jt.pop();return null===s?s=new Zt(e,i,r,n):s.setTo(e,i,r,n),s.key=t,this.hitAreas.push(s),this}getFirstHitArea(t,e){for(var i,r=this.hitAreas,n=0,s=r.length;n<s;n++)if((i=r[n]).contains(t,e))return i;return null}drawBounds(t,e,i){void 0===e&&(e=16777215),i&&t.save().scaleCanvas(i.scaleX,i.scaleY).rotateCanvas(i.rotation).translateCanvas(i.x,i.y);for(var r,n=this.hitAreas,s=0,o=n.length;s<o;s++)r=n[s],t.lineStyle(1,e).strokeRect(r.x,r.y,r.width,r.height);return i&&t.restore(),this}};var e=this.context;this.getTextWidth=function(t){return e.measureText(t).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,e,i,r,n){if(void 0===n&&(n=this.penManager),n.clear(),""===t)return n;var s=this.parent.style;if(s.isWrapFitMode){var o=this.parent.padding;i=s.fixedWidth-o.left-o.right}for(var a,h,l,u,c,d,f=this.canvas,p=this.context,g=function(t){return p.measureText(t).width},v=0,m=0,y=s.wrapCallback,x=s.wrapCallbackScope,b=!0,w=this.parser.splitText(t),T=0,S=w.length;T<S;T++)if(a=(u=this.parser.tagTextToProp(w[T],h)).plainText,(h=u.prop).img){var E=this.imageManager.getOuterWidth(h.img);i>0&&e!==de&&i<v+E&&(n.addNewLinePen(),m+=r,v=0),n.addImagePen(v,m,E,Ut(h)),v+=E}else if(""!==a){if(p.save(),(l=this.parser.propToContextStyle(this.defaultStyle,h)).buildFont(),l.syncFont(f,p),l.syncStyle(f,p),y){"string"==typeof(c=y.call(x,a,g,i,v))&&(c=c.split("\n"));for(var C=0,_=c.length;C<_;C++)"string"==typeof(A=c[C])?c[C]=ee(A,g(A),C<_-1?2:0):b=!1}else c=ue(a,g,e,i,v);var A;for(C=0,_=c.length;C<_;C++)A=c[C],n.addTextPen(A.text,v,m,A.width,Ut(h),A.newLineMode),A.newLineMode!==fe?(v=0,m+=r):v+=A.width;b&&(d=c)&&Qt.pushMultiple(d),c=null,p.restore()}for(T=0,S=this.lines.length;T<S;T++){var M=this.lines[T],P=M[M.length-1];P&&(P.width+=this.parser.getStrokeThinkness(this.defaultStyle,P.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&t>e&&(t=e),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,e=this.defaultStyle.lineHeight*t;return t>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Kt({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return null===this._tmpPenManager&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,e,i){var r;if(null==t)r=this.penManager.plainText;else{var n=this.parser.splitText(t,1);r="";for(var s=0,o=n.length;s<o;s++)r+=n[s]}return null==e&&null==i||(null==e&&(e=0),null==i&&(i=r.length),r=r.substring(e,i)),r}getPenManager(t,e){if(void 0===t)return this.copyPenManager(e,this.penManager);void 0===e&&(e=this.newPenManager());var i=this.defaultStyle;return this.updatePenManager(t,i.wrapMode,i.wrapWidth,i.lineHeight,e),e}getText(t,e,i,r){if(null==t)return this.penManager.getSliceTagText(e,i,r);var n=this.tmpPenManager,s=this.defaultStyle;return this.updatePenManager(t,s.wrapMode,s.wrapWidth,s.lineHeight,n),n.getSliceTagText(e,i,r)}copyPenManager(t,e){return void 0===e&&(e=this.penManager),e.copy(t)}getTextWidth(t){return void 0===t&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return void 0===t&&(t=this.penManager),t.lastPen}}var ge={setInteractive:function(){this.parent.on("pointerdown",(function(t,e,i,r){$t.call(this,"areadown",t,e,i)}),this).on("pointerup",(function(t,e,i,r){$t.call(this,"areaup",t,e,i)}),this)}};Object.assign(pe.prototype,It,ge);const ve=pe,me=Phaser.Utils.Objects.GetValue,ye=function(t,e){void 0===e&&(e={key:t}),e.hasOwnProperty("key")||(e.key=t);var i=e.key,r=e.frame,n=e.width,s=e.height;if(void 0===n||void 0===s){var o=this.textureManager.getFrame(i,r),a=o?o.cutWidth:0,h=o?o.cutHeight:0;void 0===n&&void 0===s?(n=a,s=h):void 0===n?n=a*(s/h):void 0===s&&(s=h*(n/a))}this.images[t]={key:i,frame:r,width:n,height:s,y:me(e,"y",0),left:me(e,"left",0),right:me(e,"right",0)}};class xe{constructor(t){this.textureManager=t.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,e){if("string"==typeof t)ye.call(this,t,e);else if(Array.isArray(t))for(var i=0,r=(n=t).length;i<r;i++)ye.call(this,n[i]);else{var n=t;for(var t in n)ye.call(this,t,n[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var e=this.get(t);return e?e.width+e.left+e.right:0}getFrame(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var be={draw:function(t,e,i,r,n){var s=this.get(t);i+=s.left,r+=s.y,n&&(i=Math.round(i),r=Math.round(r));var o=this.textureManager.getFrame(s.key,s.frame);e.drawImage(o.source.image,o.cutX,o.cutY,o.cutWidth,o.cutHeight,i,r,s.width,s.height)}};Object.assign(xe.prototype,be);const we=xe,Te=Phaser.Utils.Objects.IsPlainObject,Se=Phaser.DOM.AddToDOM,Ee=Phaser.Display.Canvas.CanvasPool,Ce=Phaser.GameObjects.GameObject,_e=Phaser.Utils.Objects.GetValue,Ae=Phaser.DOM.RemoveFromDOM,Me=At;var Pe={};class ke extends Ce{constructor(t,e,i,r,n,s,o){if(Te(e)){var a=e;e=_e(a,"x",0),i=_e(a,"y",0),r=_e(a,"text",""),n=_e(a,"style","")}if(void 0===e&&(e=0),void 0===i&&(i=0),super(t,s),this.renderer=t.sys.game.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=Ee.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var h=n.align;delete n.align,n.halign=h}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new Rt(this,n),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Pe.hasOwnProperty(s)||(Pe[s]=new Ft),this.canvasText=new ve({parent:this,context:this.context,parser:o,style:this.style,pensPool:Pe[s]}),this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(r),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&Ae(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Ee.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Se(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return null==t&&(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this}appendText(t){return null==t||(Array.isArray(t)&&(t=t.join("\n")),this.setText(this.text+t.toString())),this}setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,e){return this.style.setFixedSize(t,e)}setBackgroundColor(t,e,i){return this.style.setBackgroundColor(t,e,i)}setBackgroundStrokeColor(t,e){return this.style.setBackgroundStrokeColor(t,e)}setBackgroundCornerRadius(t,e){return this.style.setBackgroundCornerRadius(t,e)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,e){return this.style.setStroke(t,e)}setShadow(t,e,i,r,n,s){return this.style.setShadow(t,e,i,r,n,s)}setShadowOffset(t,e){return this.style.setShadowOffset(t,e)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}setXOffset(t){return this.style.setXOffset(t)}setPadding(t,e,i,r){if("object"==typeof t){var n=t,s=_e(n,"x",null);null!==s?(t=s,i=s):(t=_e(n,"left",0),i=_e(n,"right",t));var o=_e(n,"y",null);null!==o?(e=o,r=o):(e=_e(n,"top",0),r=_e(n,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===r&&(r=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=r,this.updateText(!1)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}updateText(t){void 0===t&&(t=!0);var e=this.canvasText,i=this.style;t&&e.updatePenManager(this._text,i.wrapMode,i.wrapWidth,i.lineHeight);var r,n,s=this.padding,o=Math.ceil(e.linesWidth);0===i.fixedWidth?(this.width=o+s.left+s.right,r=o):(this.width=i.fixedWidth,(r=this.width-s.left-s.right)<o&&(r=o)),0===i.fixedHeight?(this.height=e.linesHeight+s.top+s.bottom,n=e.linesHeight):(this.height=i.fixedHeight,(n=this.height-s.top-s.bottom)<e.linesHeight&&(n=e.linesHeight));var a=this.width,h=this.height;this.updateDisplayOrigin();var l=i.resolution;a*=l,h*=l,a=Math.max(Math.ceil(a),1),h=Math.max(Math.ceil(h),1);var u=this.canvas,c=this.context;u.width!==a||u.height!==h?(u.width=a,u.height=h,this.frame.setSize(a,h)):c.clearRect(0,0,a,h),c.save(),c.scale(l,l);var d=this.style.rtl?s.right:s.left,f=s.top;e.draw(d,f,r,n),c.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(u,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,e){return this.style.setTextMetrics(t,e)}toJSON(){var t=Oe.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t}setInteractive(t,e,i){return Ce.prototype.setInteractive.call(this,t,e,i),this.canvasText.setInteractive(),this}getWrappedText(t,e,i){return(t=this.canvasText.getText(t,e,i,!0)).split(Me)}getPlainText(t,e,i){return this.canvasText.getPlainText(t,e,i)}getText(t,e,i,r){return void 0===r&&(r=!1),this.canvasText.getText(t,e,i,r)}getSubString(t,e,i){return this.getText(t,e,i)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,e){return this.canvasText.getPenManager(t,e)}setSize(t,e){return this.setFixedSize(t,e)}resize(t,e){return this.setFixedSize(t,e)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new we(this.scene)),this._imageManager}addImage(t,e){return this.imageManager.add(t,e),this}drawAreaBounds(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}measureTextMargins(t,e){return function(t,e,i){void 0===i&&(i={});var r=Lt.create(this),n=r.getContext("2d");t.syncFont(r,n);var s=n.measureText(e),o=Math.ceil(s.width*t.baselineX),a=o,h=2*a;if(a=a*t.baselineY|0,r.width=o,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,o,h),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,a),i.left=0,0===o||0===h||!n.getImageData(0,0,o,h))return Lt.remove(r),i;for(var l=n.getImageData(0,0,o,h).data,u=!1,c=0;c<o;c++){for(var d=0;d<h;d++)if(255!==l[4*(d*o+c)]){i.left=c,u=!0;break}if(u)break}return Lt.remove(r),i}(this.style,t,e)}generateTexture(t,e,i,r,n){var s=this.canvas;return void 0===r?r=s.width:r*=this.resolution,void 0===n?n=s.height:n*=this.resolution,J(this.scene,s,t,e,i,r,n),this}}const Oe=Phaser.GameObjects.Components;Phaser.Class.mixin(ke,[Oe.Alpha,Oe.BlendMode,Oe.ComputedSize,Oe.Crop,Oe.Depth,Oe.Flip,Oe.GetBounds,Oe.Mask,Oe.Origin,Oe.Pipeline,Oe.ScrollFactor,Oe.Tint,Oe.Transform,Oe.Visible,yt]);const Re=ke;var Le={plainText:null,prevProp:null},Ie=new Rt,Fe={},De={splitText:function(t,e){for(var i=[],r=0;;){var n=ze.exec(t);if(!n){var s=t.length;return r<s&&i.push(t.substring(r,s)),i}var o=n[0],a=ze.lastIndex-o.length;r<a&&i.push(t.substring(r,a)),void 0===e&&i.push(o),r=ze.lastIndex}},tagTextToProp:function(t,e){var i,r;null==e&&(e={}),e.img&&Be(e,ui,"img"),Ue.test(t)?(Be(e,ci,"b",!0),i=""):Ye.test(t)?(Be(e,ui,"b"),i=""):Xe.test(t)?(Be(e,ci,"i",!0),i=""):Ge.test(t)?(Be(e,ui,"i"),i=""):We.test(t)?(r=t.match(We),Be(e,ci,"size",`${r[1]}px`),i=""):Ve.test(t)?(Be(e,ui,"size"),i=""):je.test(t)?(r=t.match(je),Be(e,ci,"color",r[1]),i=""):He.test(t)?(Be(e,ui,"color"),i=""):qe.test(t)?(r=t.match(qe),Be(e,ci,"u",!0),i=""):Ke.test(t)?(r=t.match(Ke),Be(e,ci,"u",r[1]),i=""):Ze.test(t)?(Be(e,ui,"u"),i=""):Je.test(t)?(Be(e,ci,"shadow",!0),i=""):$e.test(t)?(Be(e,ui,"shadow"),i=""):Qe.test(t)?(Be(e,ci,"stroke",!0),i=""):ti.test(t)?(r=t.match(ti),Be(e,ci,"stroke",r[1]),i=""):ei.test(t)?(Be(e,ui,"stroke"),i=""):ii.test(t)?(r=t.match(ii),Be(e,ci,"y",parseFloat(r[1])),i=""):ri.test(t)?(Be(e,ui,"y"),i=""):ni.test(t)?(r=t.match(ni),Be(e,ci,"img",r[1]),i=""):si.test(t)?(Be(e,ui,"img"),i=""):oi.test(t)?(r=t.match(oi),Be(e,ci,"area",r[1]),i=""):ai.test(t)?(Be(e,ui,"area"),i=""):hi.test(t)?(r=t.match(hi),Be(e,ci,"align",r[1]),i=""):li.test(t)?(Be(e,ui,"align"),i=""):i=t;var n=Le;return n.plainText=i,n.prop=e,n},propToContextStyle:function(t,e){var i=Ie;if(e.hasOwnProperty("img"))i.image=e.img;else{if(i.image=null,e.hasOwnProperty("family")?i.fontFamily=e.family:i.fontFamily=t.fontFamily,e.hasOwnProperty("size")){var r=e.size;"number"==typeof r&&(r=`${r}px`),i.fontSize=r}else i.fontSize=t.fontSize;i.fontStyle=Ne(e.b,e.i),e.hasOwnProperty("color")?i.color=e.color:i.color=t.color,e.hasOwnProperty("stroke")?!0===e.stroke?(i.stroke=t.stroke,i.strokeThickness=t.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=t.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=0)}return e.hasOwnProperty("shadow")?!0===e.shadow?(i.shadowColor=t.shadowColor,i.shadowOffsetX=t.shadowOffsetX,i.shadowOffsetY=t.shadowOffsetY,i.shadowBlur=t.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=e.shadow,i.shadowOffsetX=t.shadowOffsetX,i.shadowOffsetY=t.shadowOffsetY,i.shadowBlur=t.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),e.hasOwnProperty("u")?!0===e.u?(i.underlineColor=t.underlineColor,i.underlineThickness=t.underlineThickness,i.underlineOffset=t.underlineOffset):(i.underlineColor=e.u,i.underlineThickness=t.underlineThickness,i.underlineOffset=t.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),i},getStrokeThinkness:(t,e)=>e.hasOwnProperty("stroke")?t.strokeThickness:0,propToTagText:function(t,e,i){null==i&&(i=Fe);var r=[];for(var n in i)e.hasOwnProperty(n)||r.push(`[/${n}]`);for(var n in e){var s=e[n];if(i[n]!==s)switch(n){case"size":r.push(`[size=${s.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":r.push(`[${n}=${s}]`);break;case"u":!0===s?r.push("[u]"):r.push(`[u=${s}]`);break;default:r.push(`[${n}]`)}}return r.push(t),r.join("")}},Be=function(t,e,i,r){return e===ci?t[i]=r:t.hasOwnProperty(i)&&delete t[i],t},Ne=function(t,e){return t&&e?"bold italic":t?"bold":e?"italic":""},ze=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[y=([-.0-9]+)\]|\[\/y\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]|\[align=([^\]]+)\]|\[\/align\]/gi,Ue=/\[b\]/i,Ye=/\[\/b\]/i,Xe=/\[i\]/i,Ge=/\[\/i\]/i,We=/\[size=(\d+)\]/i,Ve=/\[\/size\]/i,je=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,He=/\[\/color\]/i,qe=/\[u\]/i,Ke=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,Ze=/\[\/u\]/i,Je=/\[shadow\]/i,$e=/\[\/shadow\]/i,Qe=/\[stroke\]/i,ti=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,ei=/\[\/stroke\]/i,ii=/\[y=([-.0-9]+)\]/i,ri=/\[\/y\]/i,ni=/\[img=([^\]]+)\]/i,si=/\[\/img\]/i,oi=/\[area=([^\]]+)\]/i,ai=/\[\/area\]/i,hi=/\[align=([^\]]+)\]/i,li=/\[\/align\]/i;const ui=!1,ci=!0,di=De,fi=class extends Re{constructor(t,e,i,r,n){super(t,e,i,r,n,"rexBBCodeText",di)}};n.register("BBCodeText",(function(t,e,i,r){var n=new fi(this.scene,t,e,i,r);return this.scene.add.existing(n),n})),(0,b.Z)(window,"RexPlugins.UI.BBCodeText",fi);var pi={plainText:null,prevProp:null},gi=new Rt,vi=function(t){return 0===(t=t.replace(Ti,"")).length},mi=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,yi=/<\s*class=/i,xi=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,bi=/<\s*style=/i,wi=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,Ti=/^\s+|\s+$/;const Si=Phaser.Utils.Objects.GetValue,Ei=class extends Re{constructor(t,e,i,r,n){var s=Si(n,"tags",void 0),o=new class{constructor(t){void 0===t&&(t={}),this.tags=t}addTag(t,e){this.tags[t]=e}getTag(t){return this.tags[t]}splitText(t,e){for(var i=[],r=0;;){var n=mi.exec(t);if(!n){var s=t.length;return r<s&&i.push(t.substring(r,s)),i}var o=n[0],a=mi.lastIndex-o.length;if(r<a&&i.push(t.substring(r,a)),void 0===e)i.push(o);else if(1===e)if(yi.test(o)){var h=o.match(xi);i.push(h[2])}else bi.test(o)&&(h=o.match(wi),i.push(h[2]));r=mi.lastIndex}}tagTextToProp(t,e){var i,r;if(yi.test(t)){if(null!=(o=t.match(xi))){var n=o[1],s=this.tags;(r=s.hasOwnProperty(n)?s[n]:{})._class=n,i=o[2]}}else if(bi.test(t)){var o;if(null!=(o=t.match(wi))){var a=o[1];(r=function(t){for(var e,i,r,n={},s=0,o=(t=t.split(";")).length;s<o;s++)if(i=(e=t[s].split(":"))[0],r=e[1],!vi(i)&&!vi(r)){switch(i){case"stroke":var a=r.split(" ");r={},(l=a.length)>=1&&(r.color=a[0]),l>=2&&(r.thinkness=parseInt(a[1].replace("px","")));break;case"shadow":var h=r.split(" ");r={},(l=h.length)>=1&&(r.color=h[0]),l>=2&&(r.offsetX=parseInt(h[1].replace("px",""))),l>=3&&(r.offsetY=parseInt(h[2].replace("px",""))),l>=4&&(r.blur=parseInt(h[3].replace("px","")));break;case"u":case"underline":var l,u=r.split(" ");r={},(l=u.length)>=1&&(r.color=u[0]),l>=2&&(r.thinkness=parseInt(u[1].replace("px",""))),l>=3&&(r.offset=parseInt(u[2].replace("px","")));break;case"y":r=parseFloat(r)}n[i]=r}return n}(a))._style=a,i=o[2]}}null==i&&(i=t),null==r&&(r={});var h=pi;return h.plainText=i,h.prop=r,h}propToContextStyle(t,e){var i=gi;if(e.hasOwnProperty("img"))i.image=e.img;else{if(i.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var r=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];i.fontFamily=r}else i.fontFamily=t.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var n=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];"number"==typeof n&&(n=`${n}px`),i.fontSize=n}else i.fontSize=t.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var s=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];i.fontStyle=s}else i.fontStyle=t.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var o=e.hasOwnProperty("color")?e.color:e["font-color"];i.color=o}else i.color=t.color;if(e.hasOwnProperty("stroke")){var a=e.stroke;i.stroke=a.hasOwnProperty("color")?a.color:t.stroke,i.strokeThickness=a.hasOwnProperty("thinkness")?a.thinkness:t.strokeThickness}else i.stroke=t.stroke,i.strokeThickness=t.strokeThickness}if(e.hasOwnProperty("shadow")){var h=e.shadow;i.shadowColor=h.hasOwnProperty("color")?h.color:t.shadowColor,i.shadowOffsetX=h.hasOwnProperty("offsetX")?h.offsetX:t.shadowOffsetX,i.shadowOffsetY=h.hasOwnProperty("offsetY")?h.offsetY:t.shadowOffsetY,i.shadowBlur=h.hasOwnProperty("blur")?h.blur:t.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0}else i.shadowColor=t.shadowColor,i.shadowOffsetX=t.shadowOffsetX,i.shadowOffsetY=t.shadowOffsetY,i.shadowBlur=t.shadowBlur,i.shadowStroke=t.shadowStroke,i.shadowFill=t.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var l=e.hasOwnProperty("u")?e.u:e.underline;i.underlineColor=l.hasOwnProperty("color")?l.color:t.underlineColor,i.underlineThickness=l.hasOwnProperty("thinkness")?l.thinkness:t.underlineThickness,i.underlineOffset=l.hasOwnProperty("offset")?l.offset:t.underlineOffset}else i.underlineColor=t.underlineColor,i.underlineThickness=t.underlineThickness,i.underlineOffset=t.underlineOffset;return i}getStrokeThinkness(t,e){var i;if(e.hasOwnProperty("stroke")){var r=e.stroke;i=r.hasOwnProperty("thinkness")?r.thinkness:t.strokeThickness}else i=t.strokeThickness;return i}propToTagText(t,e,i){return e.hasOwnProperty("_class")?""===t&&this.isTextTag(e._class)?"":`<class='${e._class}'>${t}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var e=this.tags[t];return!!e&&null==e.img}}(s);super(t,e,i,r,n,"rexTagText",o),this.parser=o}addTag(t,e){return this.parser.addTag(t,e),this.updateText(!0)}addTags(t){for(var e in t)this.parser.addTag(e,t[e]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}};n.register("tagText",(function(t,e,i,r){var n=new Ei(this.scene,t,e,i,r);return this.scene.add.existing(n),n})),(0,b.Z)(window,"RexPlugins.UI.TagText",Ei);const Ci=Phaser.Utils.Objects.GetValue,_i=function(t,e,i){var r,n;for(var s in void 0===i&&(i={}),t)r=t[s],void 0!==(n=Ci(e,s,r[1]))&&(i[r[0]]=n);return i};var Ai=function(t){t.stopPropagation()};const Mi=Phaser.GameObjects.DOMElement,Pi=Phaser.Utils.Objects.IsPlainObject,ki=Phaser.Utils.Objects.GetValue;class Oi extends Mi{constructor(t,e,i,r,n,s){var o;Pi(e)?(e=ki(s=e,"x",0),i=ki(s,"y",0),r=ki(s,"width",0),n=ki(s,"height",0)):Pi(r)&&(r=ki(s=r,"width",0),n=ki(s,"height",0)),void 0===s&&(s={});var a=ki(s,"type","text");"textarea"===a?(o=document.createElement("textarea")).style.resize="none":(o=document.createElement("input")).type=a,_i(Li,s,o);var h=ki(s,"style",void 0);h=_i(Ii,s,h);var l=o.style;for(var u in s)u in Li||u in Ii||u in l&&(h[u]=s[u]);h["box-sizing"]="border-box",super(t,e,i,o,h),this.type="rexInputText",this.resize(r,n),function(t,e,i){for(let r in i)e.addEventListener(r,(function(e){t.emit(i[r],t,e)}))}(this,o,Fi),function(t){t.addEventListener("touchstart",Ai,!1),t.addEventListener("touchmove",Ai,!1),t.addEventListener("touchend",Ai,!1),t.addEventListener("mousedown",Ai,!1),t.addEventListener("mouseup",Ai,!1),t.addEventListener("mousemove",Ai,!1)}(o),ki(s,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",(function(){this._isFocused=!0}),this).on("blur",(function(){this._isFocused=!1}),this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return void 0===t?this.node.select():this.node.setSelectionRange(t,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return void 0===t&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node.style[t]=e,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return void 0===t&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var Ri={resize:function(t,e){if(this.scene.scale.autoRound&&(t=Math.floor(t),e=Math.floor(e)),this.width===t&&this.height===e)return this;var i=this.node.style;return i.width=`${t}px`,i.height=`${e}px`,this.updateSize(),this}};Object.assign(Oi.prototype,Ri);const Li={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Ii={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},Fi={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"},Di=Oi;var Bi=function(t,e){for(var i=t.scene,r=i.input.cameras.getCamerasBelowPointer(e),n=i.input.manager,s=[t],o=0,a=r.length;o<a;o++)if(n.hitTest(e,s,r[o]).length>0)return!0;return!1};const Ni=function(t,e,i,r){if(e)return!(i&&!i(t,e)||!Bi(t,e)||r&&!r(t,e));for(var n=t.scene.input.manager,s=n.pointersTotal,o=n.pointers,a=0;a<s;a++)if(e=o[a],(!i||i(t,e))&&Bi(t,e)&&(!r||r(t,e)))return!0;return!1},zi=Phaser.Utils.Objects.GetValue,Ui=Phaser.Math.Wrap,Yi=class extends Di{constructor(t,e){super(t.scene,e);var i=this.node.style;i.position="absolute",i.opacity=0,i.pointerEvents="none",i.zIndex=0,i.transform="scale(0)",this.setCursor(zi(e,"cursor","|")),this.setCursorFlashDuration(zi(e,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(zi(e,"enterClose",!0)),this.onOpenCallback=zi(e,"onOpen",void 0),this.onCloseCallback=zi(e,"onClose",void 0),this.onUpdateCallback=zi(e,"onUpdate",void 0),this.textObject=t,t.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",(function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)}),this).on("blur",(function(){this.updateText(),this.scene.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)}),this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(t){Ni(this.textObject,t)||this.setBlur()}updateText(){var t=this.text;if(this.onUpdateCallback){var e=this.onUpdateCallback(t,this.textObject,this);e&&(t=e)}if(this.isFocused&&this.hasCursor){var i=this.cursorPosition;t=t.substring(0,i)+this.cursor+t.substring(i)}return this.textObject.setText(t),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&""!==t,t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;t=this.cursorFlashTimer<this.cursorFlashDuration/2?this._cursor:" ";var e=this.cursorFlashTimer+this.scene.game.loop.delta;return this.cursorFlashTimer=Ui(e,0,this.cursorFlashDuration),t}setEnterClose(t){return void 0===t&&(t=!0),this.enterClose=t,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}};n.register("hiddenEdit",(function(t,e){return new Yi(t,e)})),(0,b.Z)(window,"RexPlugins.UI.HiddenEdit",Yi);const Xi=Phaser.GameObjects.Zone,Gi=Phaser.Utils.Array.Add,Wi=Phaser.Utils.Array.Remove;class Vi extends Xi{constructor(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=1),super(t,e,i,r,n),this.children=[]}destroy(t){if(this.scene){if(t)for(var e,i=this.children.length-1;i>=0;i--)(e=this.children[i]).parentContainer||e.displayList||e.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return-1!==this.children.indexOf(t)}add(t){var e=this;return Gi(this.children,t,0,(function(t){t.once("destroy",e.onChildDestroy,e)}),this),this}remove(t,e){var i=this;return Wi(this.children,t,(function(t){t.off("destroy",i.onChildDestroy,i),e&&t.destroy()})),this}onChildDestroy(t,e){this.remove(t,!1)}clear(t){for(var e,i=0,r=this.children.length;i<r;i++)(e=this.children[i]).off("destroy",this.onChildDestroy,this),t&&e.destroy();return this.children.length=0,this}}const ji=Phaser.GameObjects.Components;Phaser.Class.mixin(Vi,[ji.Alpha,ji.Flip]);const Hi=Vi;var qi=function(t){var e;return t.hasOwnProperty("rexContainer")&&(e=t.rexContainer.parent),e},Ki=function(t){for(var e=qi(t);e;)t=e,e=qi(e);return t};const Zi=Phaser.Math.DegToRad,Ji=Phaser.Math.RadToDeg,$i=function(t){if(!t.hasOwnProperty("rexContainer")){var e={parent:null,self:null,x:0,y:0,rotation:0,scaleX:0,scaleY:0,alpha:0,visible:!0,active:!0};Object.defineProperty(e,"angle",{get:function(){return Ji(this.rotation)},set:function(t){this.rotation=Zi(t)}}),Object.defineProperty(e,"displayWidth",{get:function(){return t.width*this.scaleX},set:function(e){this.scaleX=e/t.width}}),Object.defineProperty(e,"displayHeight",{get:function(){return t.height*this.scaleY},set:function(e){this.scaleY=e/t.height}}),t.rexContainer=e}return t.rexContainer},Qi={setParent(t,e){void 0===e&&(e=this);var i=$i(t);return e?(i.parent=e,i.self=t):(i.parent=null,i.self=null),this},getParent(t){return void 0===t&&(t=this),qi(t)},getTopmostParent(t){return void 0===t&&(t=this),Ki(t)}},tr=Hi.prototype.add;var er=function(t){return this.setParent(t),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),tr.call(this,t),this},ir=function(t){this.setParent(t);var e=$i(t);return e.x=t.x,e.y=t.y,e.rotation=t.rotation,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.alpha=t.alpha,e.visible=t.visible,e.active=t.active,this.updateChildPosition(t).updateChildAlpha(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),tr.call(this,t),this};const rr={add(t){return Array.isArray(t)?this.addMultiple(t):er.call(this,t),this},pin(t){return Array.isArray(t)?this.addMultiple(t):er.call(this,t),this},addMultiple(t){for(var e=0,i=t.length;e<i;e++)er.call(this,t[e]);return this},addLocal(t){return Array.isArray(t)?this.addMultiple(t):ir.call(this,t),this},addLocalMultiple(t){for(var e=0,i=t.length;e<i;e++)ir.call(this,t[e]);return this}},nr=Hi.prototype.remove,sr=Hi.prototype.clear,or={remove(t,e){return qi(t)!==this||(this.setParent(t,null),nr.call(this,t,e)),this},clear(t){for(var e=0,i=this.children.length;e<i;e++)this.setParent(this.children[e],null);return sr.call(this,t),this}},ar={getLocalState:t=>$i(t),resetChildState(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState(t){for(var e=0,i=t.length;e<i;e++)this.resetChildState(t[e]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},hr=Phaser.Math.RotateAround,lr={worldToLocal(t){return t.x-=this.x,t.y-=this.y,hr(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t},localToWorld(t){return t.x*=this.scaleX,t.y*=this.scaleY,hr(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}},ur=function(t,e){return t===e?1:t/e},cr={updateChildPosition(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var e=$i(t),i=e.parent;return t.x=e.x,t.y=e.y,i.localToWorld(t),t.scaleX=e.scaleX*i.scaleX,t.scaleY=e.scaleY*i.scaleY,t.rotation=e.rotation+i.rotation,t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(t){var e=$i(t),i=e.parent;return e.x=t.x,e.y=t.y,i.worldToLocal(e),e.scaleX=ur(t.scaleX,i.scaleX),e.scaleY=ur(t.scaleY,i.scaleY),e.rotation=t.rotation-i.rotation,this},setChildPosition(t,e,i){return t.x=e,t.y=i,this.resetChildPositionState(t),this},setChildLocalPosition(t,e,i){var r=$i(t);return r.x=e,r.y=i,this.updateChildPosition(t),this},resetLocalPositionState(){var t=$i(this).parent;return t&&t.resetChildPositionState(this),this}},dr={updateChildRotation(t){var e=$i(t),i=e.parent;return t.rotation=i.rotation+e.rotation,this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(t){var e=$i(t),i=e.parent;return e.rotation=t.rotation-i.rotation,this},setChildRotation(t,e){return t.rotation=e,this.resetChildRotationState(t),this},setChildAngle(t,e){return t.angle=e,this.resetChildRotationState(t),this},setChildLocalRotation(t,e){return $i(t).rotation=e,this.updateChildRotation(t),this},resetLocalRotationState(){var t=$i(this).parent;return t&&t.resetChildRotationState(this),this}},fr={updateChildScale(t){var e=$i(t),i=e.parent;return t.scaleX=i.scaleX*e.scaleX,t.scaleY=i.scaleY*e.scaleY,this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(t){var e=$i(t),i=e.parent;return e.scaleX=ur(t.scaleX,i.scaleX),e.scaleY=ur(t.scaleY,i.scaleY),this},setChildScale(t,e,i){return void 0===i&&(i=e),t.scaleX=e,t.scaleY=i,this.resetChildScaleState(t),this},setChildLocalScale(t,e,i){void 0===i&&(i=e);var r=$i(t);return r.scaleX=e,r.scaleY=i,this.updateChildScale(t),this},setChildDisplaySize(t,e,i){return t.setDisplaySize(e,i),this.resetChildScaleState(t),this},resetLocalScaleState(){var t=$i(this).parent;return t&&t.resetChildScaleState(this),this}},pr={updateChildVisible(t){var e=$i(t),i=e.parent,r=!e.hasOwnProperty("maskVisible")||e.maskVisible;return t.visible=i.visible&&e.visible&&r,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(t){var e=$i(t);return e.hasOwnProperty("maskVisible")&&delete e.maskVisible,e.visible=t.visible,this},setChildVisible(t,e){return this.setChildLocalVisible(t,e),this},setChildLocalVisible(t,e){return void 0===e&&(e=!0),$i(t).visible=e,this.updateChildVisible(t),this},setChildMaskVisible(t,e){return void 0===e&&(e=!0),$i(t).maskVisible=e,this.updateChildVisible(t),this},resetLocalVisibleState(){var t=$i(this).parent;return t&&t.resetChildVisibleState(this),this}},gr={updateChildAlpha(t){var e=$i(t),i=e.parent;return t.alpha=i.alpha*e.alpha,this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(t){var e=$i(t),i=e.parent;return e.alpha=ur(t.alpha,i.alpha),this},setChildAlpha(t,e){return t.alpha=e,this.resetChildAlphaState(t),this},setChildLocalAlpha(t,e){return $i(t).alpha=e,this.updateChildAlpha(t),this},resetLocalAlphaState(){var t=$i(this).parent;return t&&t.resetChildAlphaState(this),this}},vr={updateChildActive(t){var e=$i(t),i=e.parent;return t.active=i.active&&e.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(t){return $i(t).active=t.active,this},setChildActive(t,e){return t.active=e,this.resetChildActiveState(t),this},setChildLocalActive(t,e){return void 0===e&&(e=!0),$i(t).active=e,this.updateChildActive(t),this},resetLocalActiveState(){var t=$i(this).parent;return t&&t.resetChildActiveState(this),this}},mr={updateChildScrollFactor(t){var e=$i(t).parent;return t.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},yr={updateChildMask(t){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(t){return this.mask=t,this},clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}},xr=function(t,e){if(0===t.length)return t;void 0===e&&(e=!1);var i=t[0].scene.sys.displayList;return i.depthSort(),e?t.sort((function(t,e){return i.getIndex(e)-i.getIndex(t)})):t.sort((function(t,e){return i.getIndex(t)-i.getIndex(e)})),t},br={setDepth(t,e){if(this.depth=t,!e&&this.children)for(var i=this.getAllChildren(),r=0,n=i.length;r<n;r++)i[r].depth=t;return this},swapDepth(t){var e=this.depth,i=t.depth;return this.setDepth(i),t.setDepth(e),this},incDepth(t){if(this.depth+=t,this.children)for(var e=this.getAllChildren(),i=0,r=e.length;i<r;i++)e[i].depth+=t;return this},moveDepthBelow(t){var e=t.scene.children,i=this.getAllChildren([this]);xr(i);for(var r=0,n=i.length;r<n;r++){var s=i[r];if(e.exists(s)){e.moveBelow(t,s);break}}return this},moveDepthAbove(t){var e=t.scene.children,i=this.getAllChildren([this]);xr(i,!0);for(var r=0,n=i.length;r<n;r++){var s=i[r];if(e.exists(s)){e.moveAbove(t,s);break}}return this}};var wr=function(t,e){if(!e(t)&&t.isRexContainerLite)for(var i=t.children,r=0,n=i.length;r<n;r++)wr(i[r],e)},Tr=function(t,e){for(var i=[t];i.length>0;){var r=i.shift();!e(r)&&r.isRexContainerLite&&i.push(...r.children)}};const Sr=Phaser.Utils.Array,Er={getChildren(t){if(t)for(var e=0,i=this.children.length;e<i;e++)t.push(this.children[e]);else t=this.children;return t},getAllChildren(t){void 0===t&&(t=[]);var e=this;return Tr(e,(function(i){i!==e&&t.push(i)})),t},getAllVisibleChildren(t){void 0===t&&(t=[]);var e=this;return Tr(e,(function(i){if(i!==e)return!i.visible||void t.push(i)})),t},bfs(t,e){return void 0===e&&(e=this),Tr(e,t),this},dfs(t,e){return void 0===e&&(e=this),wr(e,t),this},contains(t){var e=qi(t);return!!e&&(e===this||this.contains(e))},getByName(t,e){if(e){for(var i,r,n=[this];n.length;)for(var s=0,o=(i=n.shift()).children.length;s<o;s++){if((r=i.children[s]).name===t)return r;r.isRexContainerLite&&n.push(r)}return null}return Sr.GetFirst(this.children,"name",t)},getRandom(t,e){return Sr.GetRandom(this.children,t,e)},getFirst(t,e,i,r){return Sr.GetFirstElement(this.children,t,e,i,r)},getAll(t,e,i,r){return Sr.GetAll(this.children,t,e,i,r)},count(t,e,i,r){return Sr.CountAllMatching(this.children,t,e,i,r)},swap(t,e){return Sr.Swap(this.children,t,e),this},setAll(t,e,i,r){return Sr.SetAll(this.children,t,e,i,r),this}},Cr=function(t){return"[object Array]"===Object.prototype.toString.call(t)},_r={tweenChild(t){var e=t.targets;Cr(e)||(e=[e]);for(var i,r,n=[],s=0,o=e.length;s<o;s++)(r=e[s]).hasOwnProperty("rexContainer")&&(i=r.scene,n.push(r.rexContainer));if(i){t.targets=n;var a=i.tweens.add(t);return a.on("update",(function(t,e,r){if(r.parent){var n=r.parent,s=r.self;switch(e){case"x":case"y":n.updateChildPosition(s);break;case"angle":case"rotation":n.updateChildRotation(s);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":n.updateChildScale(s);break;case"alpha":n.updateChildAlpha(s)}}else i.tweens.remove(t)})),a}},tween(t){var e=this.scene;return t.targets||(t.targets=this),e.tweens.add(t)}};var Ar=function(t){var e=this.getAllChildren([this]);return xr(e),t.add(e),this};const Mr={addToLayer:Ar,addToContainer:Ar},Pr=Phaser.Math.RotateAround;var kr={changeOrigin:function(t,e){this.syncChildrenEnable=!1,function(t,e,i){void 0===i&&(i=e);var r={x:(e-t.originX)*t.displayWidth,y:(i-t.originY)*t.displayHeight};Pr(r,0,0,t.rotation),t.originX=e,t.originY=i,t.x=t.x+r.x,t.y=t.y+r.y}(this,t,e),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),r=0,n=i.length;r<n;r++)this.resetChildPositionState(i[r]);return this}};Object.assign(kr,Qi,rr,or,ar,lr,cr,dr,fr,pr,gr,vr,mr,yr,br,Er,_r,Mr);const Or=kr;class Rr extends Hi{constructor(t,e,i,r,n,s){super(t,e,i,r,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,s&&this.add(s)}destroy(t){this.scene&&(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,e){return this.setSize(t,e),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return qi(t)}}Object.assign(Rr.prototype,Or);const Lr=Rr,Ir=Lr;n.register("container",(function(t,e,i,r,n){var s=new Ir(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.Container",Ir);const Fr=rt;n.register("canvas",(function(t,e,i,r){var n=new Fr(this.scene,t,e,i,r);return this.scene.add.existing(n),n})),(0,b.Z)(window,"RexPlugins.UI.Canvas",Fr);const Dr=Phaser.Utils.Objects.GetValue,Br={circle:0,ellipse:1,roundRectangle:2},Nr=class extends rt{constructor(t,e,i,r,n,s){super(t,e,i),this.type="rexCircleMaskImage",this.setTexture(r,n,s)}setTexture(t,e,i){var r,n;if("object"==typeof e&&(i=e,e=void 0),"string"==typeof i?(r=i,n=void 0):(r=Dr(i,"maskType",0),n=Dr(i,"backgroundColor",void 0)),void 0===r?r=0:"string"==typeof r&&(r=Br[r]),this._textureKey=t,this._frameName=e,null===r)return this.loadTexture(t,e),this.dirty=!0,this;var s=null!=n;s||this.loadTexture(t,e);var o=this.canvas,a=this.context,h=o.width,l=o.height;if(a.save(),a.globalCompositeOperation=s?"source-over":"destination-in",a.beginPath(),2===r){var u=Dr(i,"radius",0),c=Dr(i,"iteration",void 0);dt(a,0,0,h,l,u,c)}else{var d=Math.floor(h/2),f=Math.floor(l/2);0===r?a.arc(d,f,Math.min(d,f),0,2*Math.PI):a.ellipse(d,f,d,f,0,0,2*Math.PI)}return s&&(a.fillStyle=n),a.fill(),a.restore(),s&&(a.save(),a.globalCompositeOperation="destination-atop",this.loadTexture(t,e),a.restore()),this.dirty=!0,this}};n.register("circleMaskImage",(function(t,e,i,r,n){var s=new Nr(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.CircleMaskImage",Nr);const zr=function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var r=e.split("."),n=t,s=i,o=0;o<r.length;o++){if(!n.hasOwnProperty(r[o])){s=i;break}s=n[r[o]],n=n[r[o]]}return s}return i}return i},Ur={enableData(){return void 0===this.data&&(this.data={}),this},getData(t,e){return this.enableData(),void 0===t?this.data:zr(this.data,t,e)},setData(t,e){if(this.enableData(),1===arguments.length){var i=t;for(t in i)this.data[t]=i[t]}else this.data[t]=e;return this},incData(t,e,i){return void 0===i&&(i=0),this.enableData(),this.setData(t,this.getData(t,i)+e),this},mulData(t,e,i){return void 0===i&&(i=0),this.enableData(),this.setData(t,this.getData(t,i)*e),this},clearData(){return this.data&&zt(this.data),this},resetData(t){if(this.clearData(),t)for(var e in this.enableData(),t)this.data[e]=t[e];return this},cloneData(){return this.data?Ut(this.data):{}}},Yr=Phaser.Math.DegToRad,Xr=Phaser.Math.RadToDeg,Gr=Phaser.Utils.Objects.GetValue;class Wr{constructor(t,e){this.setParent(t),this.type=e,this.setActive().setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setDrawBelowCallback().setDrawAboveCallback(),this.originX=0,this.offsetX=0,this.offsetY=0}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return void 0===t&&(t=!0),this.active=t,this}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return void 0===t&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return Xr(this._rotation)}set angle(t){this.rotation=Yr(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,e){return void 0===e&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,e){return void 0===e&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Gr(t,"width",void 0),i=Gr(t,"height",void 0),r=Gr(t,"scaleX",void 0),n=Gr(t,"scaleY",void 0);return void 0!==e&&(void 0===i&&void 0===n?this.setWidth(e,!0):this.setWidth(e)),void 0!==i&&(void 0===e&&void 0===r?this.setHeight(i,!0):this.setHeight(i)),void 0!==r&&void 0===e&&this.setScaleX(r),void 0!==n&&void 0===i&&this.setScaleY(n),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setLeftSpace(t.rightSpace),this}setOrigin(t){return this.originX=t,this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}onFree(){this.setParent().setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setDrawBelowCallback().setDrawAboveCallback()}drawContent(){}draw(){var t=this.context;t.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,i=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),i=Math.round(i)),t.translate(e,i),t.globalAlpha=this.alpha,t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback.call(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback.call(this),t.restore()}}Object.assign(Wr.prototype,Ur);const Vr=Wr,jr=Phaser.Utils.Objects.GetValue,Hr=class extends Vr{constructor(t,e){super(t,"background"),this.setColor(jr(e,"color",null),jr(e,"color2",null),jr(e,"horizontalGradient",!0)),this.setStroke(jr(e,"stroke",null),jr(e,"strokeThickness",2)),this.setCornerRadius(jr(e,"cornerRadius",0),jr(e,"cornerIteration",null))}set color(t){t=st(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=st(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,i){return void 0===i&&(i=!0),this.color=t,this.color2=e,this.horizontalGradient=i,this}set stroke(t){t=st(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}setCornerRadius(t,e){return this.cornerRadius=t,this.cornerIteration=e,this}drawContent(){ft(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}},qr=Phaser.Utils.Objects.GetValue,Kr=class extends Vr{constructor(t,e){super(t,"background"),this.setColor(qr(e,"color",null),qr(e,"color2",null),qr(e,"horizontalGradient",!0)),this.setStroke(qr(e,"stroke",null),qr(e,"strokeThickness",2))}set color(t){t=st(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=st(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,i){return void 0===i&&(i=!0),this.color=t,this.color2=e,this.horizontalGradient=i,this}set stroke(t){t=st(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return this.stroke=t,this.strokeThickness=e,this}drawContent(){var t,e,i=this.parent.padding,r=i.left,n=i.top,s=this.parent.width-i.left-i.right,o=this.parent.height-i.top-i.bottom,a=this.context;null!=this.color&&(null!=this.color2?((e=this.horizontalGradient?a.createLinearGradient(0,0,s,0):a.createLinearGradient(0,0,0,o)).addColorStop(0,this.color),e.addColorStop(1,this.color2),t=e):t=this.color,a.fillStyle=t,a.fillRect(r,n,s,o));null!=this.stroke&&this.strokeThickness>0&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeThickness,a.strokeRect(r,n,s,o))}},Zr=function(t,e,i){return e.hasOwnProperty(t)?e[t]:i[t]},Jr=Phaser.Utils.Objects.GetValue,$r=class{constructor(t){this.set(t)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY}}set(t){this.setBold(Jr(t,"bold",!1)),this.setItalic(Jr(t,"italic",!1)),this.setFontSize(Jr(t,"fontSize","16px")),this.setFontFamily(Jr(t,"fontFamily","Courier")),this.setColor(Jr(t,"color","#fff")),this.setStrokeStyle(Jr(t,"stroke",null),Jr(t,"strokeThickness",0)),this.setShadow(Jr(t,"shadowColor",null),Jr(t,"shadowOffsetX",0),Jr(t,"shadowOffsetY",0),Jr(t,"shadowBlur",0)),this.setOffset(Jr(t,"offsetX",0),Jr(t,"offsetY",0))}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Zr("stroke",t,this),Zr("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Zr("shadowOffsetX",t,this),Zr("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),this}setBold(t){return void 0===t&&(t=!0),this.bold=t,this}setItalic(t){return void 0===t&&(t=!0),this.italic=t,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return"number"==typeof t&&(t=`${t}px`),this.fontSize=t,this}setFontFamily(t){return this.fontFamily=t,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=st(t),this}get hasFill(){return null!=this.color}setStrokeStyle(t,e){return this.stroke=st(t),void 0!==e&&(this.strokeThickness=e),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return null!=this.stroke&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=st(t),this}setShadowOffset(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.shadowOffsetX=t,this.shadowOffsetY=e,this}setShadowBlur(t){return void 0===t&&(t=0),this.shaodwBlur=t,this}setShadow(t,e,i,r){return this.setShadowColor(t).setShadowOffset(e,i).setShadowBlur(r),this}setOffsetX(t){return void 0===t&&(t=0),this.offsetX=t,this}setOffsetY(t){return void 0===t&&(t=0),this.offsetY=t,this}setOffset(t,e){return this.setOffsetX(t).setOffsetY(e),this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var e=this.hasFill,i=this.hasStroke;return t.fillStyle=e?this.color:"#000",t.strokeStyle=i?this.stroke:"#000",t.lineWidth=i?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){null!=t.shadowColor?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,e){return this.syncFont(t).syncStyle(t),t.measureText(e)}},Qr=Phaser.Utils.Objects.GetValue;var tn=function(t,e){return void 0===e?t:t[e]},en=function(t,e,i){var r=typeof e;"string"===r?t[e]=i:"number"===r?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=Qr(e,"left",0),t.right=Qr(e,"right",0),t.top=Qr(e,"top",0),t.bottom=Qr(e,"bottom",0))};const rn="text",nn="image",sn="command";var on=function(t){var e=t.type;return e===rn||e===nn},an=function(t){return t.type===rn&&"\n"===t.text};const hn=class extends Vr{constructor(t,e,i){super(t,rn),this.style=new $r(i),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){}get offsetY(){return this.style.offsetY}set offsetY(t){}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){if("\n"===this.text||""===this.text)this.textWidth=0,this.textHeight=0;else{var t,e,i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width,i.hasOwnProperty("actualBoundingBoxAscent")?(t=i.actualBoundingBoxAscent,e=i.actualBoundingBoxDescent):(t=0,e=0),this.textHeight=t+e}return this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}drawContent(){var t=this.style,e=t.hasFill,i=t.hasStroke;if(e||i){var r=this.context;t.syncFont(r).syncStyle(r),i&&(t.syncShadow(r),r.strokeText(this.text,0,0)),e&&(t.syncShadow(r),r.fillText(this.text,0,0))}}draw(){if(!this.visible||""===this.text||"\n"===this.text)return this;super.draw()}},ln=function(t,e){e&&this.textStyle.modify(e),this.lastAppendedChildren.length=0;for(var i=0,r=t.length;i<r;i++){var n=t.charAt(i),s=this.poolManager.allocate(rn);null===s?s=new hn(this,n,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(n),this.children.push(s),this.lastAppendedChildren.push(s)}return this},un=class extends Vr{constructor(t,e,i){super(t,nn),this.setTexture(e,i)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,e){return this.key=t,this.frame=e,this.frameObj=this.scene.textures.getFrame(t,e),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,e){return void 0===e&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}drawContent(){var t=this.context,e=this.frameObj;t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight)}draw(){if(!this.visible)return this;super.draw()}},cn=function(t,e,i){var r=this.poolManager.allocate(nn);return null===r?r=new un(this,t,e):r.setParent(this).setActive().setTexture(t,e),r.modifyPorperties(i),this.lastAppendedChildren.length=0,this.children.push(r),this.lastAppendedChildren.push(r),this},dn=class extends Vr{constructor(t,e,i,r,n){super(t,sn),this.setName(e).setParameter(r).setCallback(i,n)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,e){return this.callback=t,this.scope=e,this}exec(){return this.scope?this.callback.call(this.scope,this.param,this.name):this.callback(this.param,this.name)}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}},fn=function(t,e,i,r){var n=this.poolManager.allocate(sn);return null===n?n=new dn(this,t,e,i,r):n.setParent(this).setActive().setName(t).setCallback(e,r).setParameter(i),this.lastAppendedChildren.length=0,this.children.push(n),this.lastAppendedChildren.push(n),this},pn=function(t,e){if(!e)return t;for(var i in null==t&&(t={}),e)t.hasOwnProperty(i)||(t[i]=e[i]);return t},gn=function(t,e,i,r){void 0===r&&(r={word:[],width:0}),r.word.length=0;for(var n=t.length,s=e,o=r.word,a=0;s<n;){var h=t[s];if(h.type!==rn||" "===h.text||"\n"===h.text){s===e&&(o.push(h),a+=h.outerWidth);break}if(o.push(h),a+=h.outerWidth,s++,i)break}return r.width=a,r},vn={left:0,center:1,right:2},mn={top:0,center:1,bottom:2},yn=Phaser.Utils.Objects.GetValue,xn=function(t){var e,i=yn(t,"start",0),r=yn(t,"padding.top",0),n=yn(t,"padding.bottom",0),s=yn(t,"lineHeight",void 0);if(void 0===s)e=yn(t,"maxLines",0),s=this.fixedHeight>0?(o=this.fixedHeight-this.padding.top-this.padding.bottom-r-n)/e:0;else if(this.fixedHeight>0){if(void 0===(e=yn(t,"maxLines",void 0))){var o=this.fixedHeight-this.padding.top-this.padding.bottom-r-n;e=Math.floor(o/s)}}else e=yn(t,"maxLines",0);var a=0===e,h=yn(t,"wrapWidth",void 0);void 0===h&&(h=this.fixedWidth>0?this.fixedWidth-this.padding.left-this.padding.right:1/0);for(var l=yn(t,"letterSpacing",0),u=yn(t,"hAlign",0),c=yn(t,"vAlign",0),d=yn(t,"charWrap",!1),f={start:i,isLastPage:!1,padding:{top:r,bottom:n},lineHeight:s,maxLines:e,wrapWidth:h,letterSpacing:l,hAlign:u,vAlign:c,charWrap:d,children:[],lines:[],maxLineWidth:0,linesHeight:0},p=this.children,g=0,v=p.length;g<v;g++)p[g].setActive(!1);h+=l;for(var m,y=this.padding.left,x=y,b=this.padding.top+s+r,w=h,T=i,S=p.length,E=f.children,C=f.lines,_=[],A=0,M=0;T<S;){var P=p[T];if(on(P)){var k=(m=gn(p,T,d,m)).word,O=k.length,R=m.width+O*l;T+=O;var L=an(k[0]);if(w<R||L){if(L&&((I=k[0]).setActive().setPosition(x,b),E.push(I),_.push(I)),x=y,b+=s,w=h,C.push({children:_,width:A}),M=Math.max(M,A),A=0,_=[],!a&&C.length===e)break;if(L)continue}for(w-=R,A+=R,g=0,v=k.length;g<v;g++){var I;(I=k[g]).setActive().setPosition(x,b),E.push(I),_.push(I),x+=I.outerWidth+l}}else T++,P.setActive(),E.push(P),_.push(P)}_.length>0&&(C.push({children:_,width:A}),M=Math.max(M,A)),f.start+=E.length,f.isLastPage=f.start===S,f.maxLineWidth=M,f.linesHeight=C.length*s+r+n;var F=this.fixedWidth>0?this.fixedWidth:f.maxLineWidth+this.padding.left+this.padding.right,D=this.fixedHeight>0?this.fixedHeight:f.linesHeight+this.padding.top+this.padding.bottom;return function(t,e,i){var r=t.hAlign,n=t.vAlign;if("string"==typeof r&&(r=vn[r],t.hAlign=r),"string"==typeof n&&(n=mn[n],t.vAlign=n),0!==r)for(var s=t.lines,o=0,a=s.length;o<a;o++){var h,l=s[o],u=l.width,c=l.children;switch(r){case 1:h=(e-u)/2;break;case 2:h=e-u}for(var d=0,f=c.length;d<f;d++)c[d].x+=h}if(0!==n){var p,g=t.linesHeight;switch(n){case 1:p=(i-g)/2;break;case 2:p=i-g}for(d=0,f=(c=t.children).length;d<f;d++)c[d].y+=p}}(f,F-this.padding.left-this.padding.right,o=D-this.padding.top-this.padding.bottom-r-n),this.setSize(F,D),f},bn=Phaser.Utils.Objects.GetValue,wn=function(t){var e,i=bn(t,"start",0),r=bn(t,"padding.top",0),n=bn(t,"padding.bottom",0),s=bn(t,"padding.left",0),o=bn(t,"padding.right",0),a=bn(t,"lineWidth",void 0);if(void 0===a)e=bn(t,"maxLines",0),a=this.fixedWidth>0?(h=this.fixedWidth-this.padding.left-this.padding.right-s-o)/e:0;else if(this.fixedWidth>0){if(void 0===(e=bn(t,"maxLines",void 0))){var h=this.fixedWidth-this.padding.left-this.padding.right;e=Math.floor(h/a)}}else e=bn(t,"maxLines",0);var l=0===e,u=bn(t,"fixedChildHeight",void 0);if(void 0===u){var c=bn(t,"charPerLine",void 0);if(void 0!==c){var d=this.fixedHeight-this.padding.top-this.padding.bottom-r-n;u=Math.floor(d/c)}}var f=bn(t,"wrapHeight",void 0);void 0===f&&(f=this.fixedHeight>0?this.fixedHeight-this.padding.top-this.padding.bottom:1/0);for(var p=bn(t,"letterSpacing",0),g=bn(t,"rtl",!0),v={start:i,isLastPage:!1,padding:{top:r,bottom:n,left:s,right:o},lineWidth:a,maxLines:e,fixedChildHeight:u,wrapHeight:f,letterSpacing:p,hAlign:bn(t,"hAlign",g?2:0),vAlign:bn(t,"vAlign",0),rtl:g,children:[],lines:[],maxLineHeight:0,linesWidth:0},m=this.children,y=0,x=m.length;y<x;y++)m[y].setActive(!1);f+=p;for(var b=this.padding.left+s,w=this.padding.top+r,T=b,S=w,E=f,C=i,_=m.length,A=v.children,M=v.lines,P=[],k=0,O=0;C<_;){var R=m[C];if(C++,on(R)){var L=(void 0!==u?u:R.height)+p,I=an(R);if(E<L||I){if(I&&(R.setActive().setPosition(T,S).setOrigin(.5),A.push(R),P.push(R)),T=b,S=w,E=f,M.push({children:P,height:k}),O=Math.max(O,k),k=0,P=[],!l&&M.length===e)break;if(I)continue}E-=L,k+=L,R.setActive().setPosition(T,S).setOrigin(.5),A.push(R),P.push(R),S+=L}else R.setActive(),A.push(R),P.push(R)}P.length>0&&(M.push({children:P,height:k}),O=Math.max(O,k)),v.start+=A.length,v.isLastPage=v.start===_,v.maxLineHeight=O,v.linesWidth=M.length*a+s+o;var F=this.fixedWidth>0?this.fixedWidth:v.linesWidth+this.padding.left+this.padding.right,D=this.fixedHeight>0?this.fixedHeight:v.maxLineHeight+this.padding.top+this.padding.bottom;return function(t,e,i){var r=t.hAlign,n=t.vAlign;"string"==typeof r&&(r=vn[r],t.hAlign=r),"string"==typeof n&&(n=mn[n],t.vAlign=n);var s,o=t.rtl,a=t.lines,h=t.lineWidth,l=t.linesWidth;switch(r){case 0:s=0;break;case 1:s=(e-l)/2;break;case 2:s=e-l}o&&(s+=h);for(var u=0,c=a.length;u<c;u++){var d,f=a[o?c-u-1:u],p=f.children,g=f.height;switch(n){case 0:d=0;break;case 1:d=(i-g)/2;break;case 2:d=i-g}for(var v=0,m=p.length;v<m;v++){var y=p[v];y.x+=s,y.y+=d}s+=h}}(v,h=F-this.padding.left-this.padding.right-s-o,d=D-this.padding.top-this.padding.bottom-r-n),this.setSize(F,D),v},Tn=Phaser.Utils.Array.GetAll,Sn={setPadding:function(t,e){var i=this.padding,r=i.left,n=i.right,s=i.top,o=i.bottom;return en(this.padding,t,e),this.dirty=this.dirty||r!=this.padding.left||n!=this.padding.right||s!=this.padding.top||o!=this.padding.bottom,this},getPadding:function(t){return tn(this.padding,t)},modifyTextStyle:function(t){return this.textStyle.modify(t),this},removeChildren:function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},clearContent:function(){return this.setText(),this},setText:function(t,e){return void 0===t&&(t=""),this.removeChildren(),ln.call(this,t,e),this.dirty=!0,this},appendText:ln,appendImage:cn,appendCommand:fn,setWrapConfig:function(t){return this.wrapConfig=t,this},runWordWrap:function(t){return t=pn(t,this.wrapConfig),xn.call(this,t)},runVerticalWrap:function(t){return t=pn(t,this.wrapConfig),wn.call(this,t)},drawContent:function(){var t,e=this.fixedWidth>0?this.fixedWidth:this.width,i=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(e,i),this.background.active&&this.background.draw();for(var r=0,n=this.children.length;r<n;r++)(t=this.children[r]).active&&t.draw();this.innerBounds.active&&this.innerBounds.draw()},getChildren:function(){return this.children},getLastAppendedChildren:function(){return this.lastAppendedChildren},getActiveChildren:function(){return Tn(this.children,"active",!0)}},En=Phaser.Utils.Objects.GetFastValue;var Cn={};const _n=Phaser.Utils.Objects.IsPlainObject,An=Phaser.Utils.Objects.GetValue;class Mn extends rt{constructor(t,e,i,r,n,s){_n(e)?(e=An(s=e,"x",0),i=An(s,"y",0),r=An(s,"width",0),n=An(s,"height",0)):_n(r)&&(r=An(s=r,"width",0),n=An(s,"height",0)),super(t,e,i,0===r?1:r,0===n?1:n),this.type="rexDynamicText",this.autoRound=!0,this.padding={},this.textStyle=new $r(An(s,"style",void 0)),this.background=new Hr(this,An(s,"background",void 0)),this.innerBounds=new Kr(this,An(s,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new class{constructor(t){this.pools=En(t,"pools",Cn)}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Ft),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,i=t.length;e<i;e++)this.free(t[e]);return this}allocate(t){return this.pools&&this.pools.hasOwnProperty(t)?this.pools[t].pop():null}}(s),this.setFixedSize(r,n),this.setPadding(An(s,"padding",0)),this.setWrapConfig(An(s,"wrap",void 0));var o=An(s,"text",void 0);o&&this.setText(o)}setFixedSize(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>0&&e>0&&this.fixedWidth===t&&this.fixedHeight===e||(this.dirty=!0),this.fixedWidth=t,this.fixedHeight=e,this}updateTexture(){return this.clear(),this.drawContent(),super.updateTexture(),this}}Object.assign(Mn.prototype,Sn);const Pn=Mn,kn=Pn;n.register("dynamicText",(function(t,e,i,r,n){var s=new kn(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.DynamicText",kn);const On={setEventEmitter(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var Rn=/[|\\{}()[\]^$+*?.]/g,Ln=/-/g;const In=function(t){return t.replace(Rn,"\\$&").replace(Ln,"\\x2d")};var Fn=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;const Dn=function(t){return"string"!=typeof t||(""===t?t=null:Fn.test(t)?t=parseFloat(t):"false"===t?t=!1:"true"===t&&(t=!0)),t},Bn=function(t){return t};class Nn{constructor(t){this.setEventEmitter(zr(t,"eventEmitter",void 0)),this.setTagExpression(zr(t,"regex.tag","[a-z0-9-_.]+")),this.setValueExpression(zr(t,"regex.value","[ #a-z-_.0-9,|&]+")),this.setValueConverter(zr(t,"valueConvert",!0));var e=zr(t,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(t){return this.tagExpression=t,this}setValueExpression(t){return this.valueExpression=t,this}setValueConverter(t){return!0===t?t=Dn:t||(t=Bn),this.valueConverter=t,this}setDelimiters(t,e){void 0===e&&(e=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=e,t=In(t),e=In(e);var i=`${t}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,r=`${t}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(i,"i"),this.reTagOff=RegExp(r,"i"),this.reSplit=RegExp(`${i}|${r}`,"gi"),this}setSource(t){return this.source=t,this}resetIndex(t){return void 0===t&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume();var t=this.source,e=t.length;for(0===this.reSplit.lastIndex&&this.onStart();!this.isPaused;){var i=this.reSplit.exec(t);if(!i)return this.progressIndex<e&&this.onContent(t.substring(this.progressIndex,e)),void this.onComplete();var r=i[0],n=this.reSplit.lastIndex-r.length;this.progressIndex<n&&this.onContent(t.substring(this.progressIndex,n)),this.reTagOff.test(r)?this.onTagEnd(r):this.onTagStart(r),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(t){this.emit("content",t),this.lastContent=t}onTagStart(t){var e=t.match(this.reTagOn),i=e[1],r=function(t,e){if(null==t)return[];for(var i=t.split(","),r=0,n=i.length;r<n;r++)i[r]=e(i[r]);return i}(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${i}`,...r),this.skipEventFlag||this.emit("+",i,...r),this.lastTagStart=i}onTagEnd(t){var e=t.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}Object.assign(Nn.prototype,On);const zn=Nn,Un=Phaser.Utils.Objects.GetValue,Yn=Phaser.Utils.Objects.GetValue,Xn=Phaser.Utils.Objects.GetValue,Gn=Phaser.Utils.Objects.GetValue,Wn=Phaser.Utils.Objects.GetValue,Vn=Phaser.Utils.Objects.GetValue,jn=Phaser.Utils.Objects.GetValue,Hn=Phaser.Utils.Objects.GetValue,qn=Phaser.Utils.Objects.GetValue;var Kn=function(t){this.typeWriter.setSpeed(t)},Zn=function(t,e){fn.call(t,"speed",Kn,e,t)};const Jn=Phaser.Utils.Objects.GetValue;var $n=function(t){if(!this.skipSoundEffect){var e=t[0],i=t[1];this.soundManager.playSoundEffect(e),i&&this.soundManager.fadeInSoundEffect(i)}};const Qn=Phaser.Utils.Objects.GetValue;var ts=function(t){this.soundManager.fadeInSoundEffect(t)};const es=Phaser.Utils.Objects.GetValue;var is=function(t){this.soundManager.fadeOutSoundEffect(...t)};const rs=Phaser.Utils.Objects.GetValue;var ns=function(t){this.soundManager.setSoundEffectVolume(t)};const ss=Phaser.Utils.Objects.GetValue;var os=function(t){var e=t[0],i=t[1];this.soundManager.playBackgroundMusic(e),i&&this.soundManager.fadeInBackgroundMusic(i)},as=function(){this.soundManager.stopBackgroundMusic()};const hs=Phaser.Utils.Objects.GetValue;var ls=function(t){this.soundManager.fadeInBackgroundMusic(t)};const us=Phaser.Utils.Objects.GetValue;var cs=function(t){this.soundManager.fadeOutBackgroundMusic(...t)};const ds=Phaser.Utils.Objects.GetValue;var fs=function(t){this.soundManager.crossFadeBackgroundMusic(...t)};const ps=Phaser.Utils.Objects.GetValue;var gs=function(){this.soundManager.pauseBackgroundMusic()},vs=function(){this.soundManager.resumeBackgroundMusic()};const ms=Phaser.Utils.Objects.GetValue;var ys=function(t){this.camera.fadeIn(...t)};const xs=Phaser.Utils.Objects.GetValue;var bs=function(t){this.camera.fadeOut(...t)};const ws=Phaser.Utils.Objects.GetValue;var Ts=function(t){this.camera.shake(...t)};const Ss=Phaser.Utils.Objects.GetValue;var Es=function(t){this.camera.flash(...t)};const Cs=Phaser.Utils.Objects.GetValue;var _s=function(t){this.camera.setZoom(t)},As=function(t){this.camera.zoomTo(...t)};const Ms=Phaser.Utils.Objects.GetValue,Ps=Phaser.Math.DegToRad;var ks=function(t){this.camera.setRotation(t)},Os=function(t){var e=t[0],i=t[1],r=t[2];this.camera.rotateTo(e,!1,i,r)};const Rs=Phaser.Utils.Objects.GetValue;var Ls=function(t){this.camera.setScroll(...t)},Is=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=this.camera,o=s.scrollX,a=s.scrollY;s.setScroll(e,i),e+=s.centerX,i+=s.centerY,s.setScroll(o,a),s.pan(e,i,r,n)};const Fs=Phaser.Utils.Objects.GetValue;var Ds=function(t){this.typeWriter.wait(t)},Bs=function(t,e){fn.call(t,"wait",Ds,e,t)};const Ns=Phaser.Utils.Objects.GetValue;var zs=function(t,e){return 2===t.length&&t[0]===e},Us=function(t){this.spriteManager.add(...t)},Ys=function(t){this.spriteManager.remove(t)};const Xs=Phaser.Utils.Objects.GetValue;var Gs=function(){this.spriteManager.removeAll()};const Ws=Phaser.Utils.Objects.GetValue;var Vs=function(t){this.spriteManager.setTexture(...t)};const js=Phaser.Utils.Objects.GetValue;var Hs=function(t,e){return 3===t.length&&t[0]===e&&"play"===t[2]},qs=function(t){var e=t[0],i=t[1],r=i.shift();this.spriteManager.playAnimation(e,r),i.length>0&&this.spriteManager.chainAnimation(e,i)},Ks=function(t){this.spriteManager.stopAnimation(t)};const Zs=Phaser.Utils.Objects.GetValue;var Js=function(t,e){return 3===t.length&&t[0]===e&&"chain"===t[2]},$s=function(t){this.spriteManager.chainAnimation(...t)};const Qs=Phaser.Utils.Objects.GetValue;var to=function(t){this.spriteManager.pauseAnimation(t)};const eo=Phaser.Utils.Objects.GetValue;var io=function(t){this.spriteManager.setProperty(...t)};const ro=Phaser.Utils.Objects.GetValue;var no={to:!0,yoyo:!0},so=function(t){this.spriteManager.easeProperty(...t)};var oo=function(t,e){var i=`tag.${e}`;null==t?this.emit(i):this.emit(i,...t)},ao=function(t,e,i){fn.call(t,e,oo,i,t)};const ho=Phaser.Utils.Objects.GetValue,lo=[function(t,e,i){var r,n=Un(i,"tags.color","color");e.on("start",(function(){r=t.textStyle.color})).on(`+${n}`,(function(i){t.textStyle.setColor(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setColor(r),e.skipEvent()})).on("complete",(function(){t.textStyle.setColor(r)}))},function(t,e,i){var r,n=Yn(i,"tags.stroke","stroke");e.on("start",(function(){r=t.textStyle.stroke,t.textStyle.setStrokeStyle(null)})).on(`+${n}`,(function(i){void 0===i&&(i=r),t.textStyle.setStrokeStyle(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setStrokeStyle(null),e.skipEvent()})).on("complete",(function(){t.textStyle.setStrokeStyle(r)}))},function(t,e,i){var r=Xn(i,"tags.b","b");e.on("start",(function(){t.textStyle.setBold(!1)})).on(`+${r}`,(function(){t.textStyle.setBold(!0),e.skipEvent()})).on(`-${r}`,(function(){t.textStyle.setBold(!1),e.skipEvent()}))},function(t,e,i){var r=Gn(i,"tags.i","i");e.on("start",(function(){t.textStyle.setItalic(!1)})).on(`+${r}`,(function(){t.textStyle.setItalic(!0),e.skipEvent()})).on(`-${r}`,(function(){t.textStyle.setItalic(!1),e.skipEvent()}))},function(t,e,i){var r,n=Wn(i,"tags.size","size");e.on("start",(function(){r=t.textStyle.fontSize})).on(`+${n}`,(function(i){t.textStyle.setFontSize(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setFontSize(r),e.skipEvent()})).on("complete",(function(){t.textStyle.setFontSize(r)}))},function(t,e,i){var r,n=Vn(i,"tags.y","y");e.on("start",(function(){r=t.textStyle.offsetY,t.textStyle.setOffsetY(0)})).on(`+${n}`,(function(i){void 0===i&&(i=r),t.textStyle.setOffsetY(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setOffsetY(0),e.skipEvent()})).on("complete",(function(){t.textStyle.setOffsetY(0)}))},function(t,e,i){var r,n=jn(i,"tags.shadow","shadow");e.on("start",(function(){r=t.textStyle.shadowColor,t.textStyle.setShadowColor(null)})).on(`+${n}`,(function(i){void 0===i&&(i=r),t.textStyle.setShadowColor(i),e.skipEvent()})).on(`-${n}`,(function(){t.textStyle.setShadowColor(null),e.skipEvent()})).on("complete",(function(){t.textStyle.setShadowColor(r)}))},function(t,e,i){var r=Hn(i,"tags.img","img");e.on(`+${r}`,(function(i){var r=t.imageManager.get(i);cn.call(t,r.key,r.frame,{width:r.width,hieght:r.height,leftSpace:r.left,rightSpace:r.right}),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r,n=qn(i,"tags.speed","speed");e.on("start",(function(){r=t.typeWriter.speed})).on(`+${n}`,(function(i){Zn(t,i),e.skipEvent()})).on(`-${n}`,(function(){Zn(t,r),e.skipEvent()})).on("complete",(function(){t.typeWriter.speed=r}))},function(t,e,i){var r=Jn(i,"tags.se","se");e.on(`+${r}`,(function(i,r){fn.call(t,"se",$n,[i,r],t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=Qn(i,"tags.se.fadein","se.fadein");e.on(`+${r}`,(function(i){fn.call(t,"se.fadein",ts,i,t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=es(i,"tags.se.fadeout","se.fadeout");e.on(`+${r}`,(function(i,r){fn.call(t,"se.fadeout",is,[i,r="stop"===r],t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=rs(i,"tags.se.volume","se.volume");e.on(`+${r}`,(function(i){fn.call(t,"se.volume",ns,i,t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=ss(i,"tags.bgm","bgm");e.on(`+${r}`,(function(i,r){fn.call(t,"bgm",os,[i,r],t),e.skipEvent()})).on(`-${r}`,(function(){fn.call(t,"bgm.stop",as,void 0,t),e.skipEvent()}))},function(t,e,i){var r=hs(i,"tags.bgm.fadein","bgm.fadein");e.on(`+${r}`,(function(i){fn.call(t,"bgm.fadein",ls,i,t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=us(i,"tags.bgm.fadeout","bgm.fadeout");e.on(`+${r}`,(function(i,r){fn.call(t,"bgm.fadeout",cs,[i,r],t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=ds(i,"tags.bgm.cross","bgm.cross");e.on(`+${r}`,(function(i,r){fn.call(t,"bgm.cross",fs,[i,r],t),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){var r=ps(i,"tags.bgm.pause","bgm.pause");e.on(`+${r}`,(function(){fn.call(t,"bgm.pause",gs,void 0,t),e.skipEvent()})).on(`-${r}`,(function(){fn.call(t,"bgm.resume",vs,void 0,t),e.skipEvent()}))},function(t,e,i){var r=ms(i,"tags.camera.fadein","camera.fadein");e.on(`+${r}`,(function(i,r,n,s){fn.call(t,"camera.fadein",ys,[i,r,n,s],t),e.skipEvent()}))},function(t,e,i){var r=xs(i,"tags.camera.fadeout","camera.fadeout");e.on(`+${r}`,(function(i,r,n,s){fn.call(t,"camera.fadeout",bs,[i,r,n,s],t),e.skipEvent()}))},function(t,e,i){var r=ws(i,"tags.camera.shake","camera.shake");e.on(`+${r}`,(function(i,r){fn.call(t,"camera.shake",Ts,[i,r],t),e.skipEvent()}))},function(t,e,i){var r=Ss(i,"tags.camera.flash","camera.flash");e.on(`+${r}`,(function(i,r,n,s){fn.call(t,"camera.flash",Es,[i,r,n,s],t),e.skipEvent()}))},function(t,e,i){var r=Cs(i,"tags.camera.zoom","camera.zoom");e.on(`+${r}`,(function(i){fn.call(t,"camera.zoom",_s,i,t),e.skipEvent()})).on(`+${r}.to`,(function(i,r,n){fn.call(t,"camera.zoom.to",As,[i,r,n],t),e.skipEvent()}))},function(t,e,i){var r=Ms(i,"tags.camera.rotate","camera.rotate");e.on(`+${r}`,(function(i){i=Ps(i),fn.call(t,"camera.rotate",ks,i,t),e.skipEvent()})).on(`+${r}.to`,(function(i,r,n){i=Ps(i),fn.call(t,"camera.rotate.to",Os,[i,r,n],t),e.skipEvent()}))},function(t,e,i){var r=Rs(i,"tags.camera.scroll","camera.scroll");e.on(`+${r}`,(function(i,r){fn.call(t,"camera.scroll",Ls,[i,r],t),e.skipEvent()})).on(`+${r}.to`,(function(i,r,n,s){fn.call(t,"camera.scroll.to",Is,[i,r,n,s],t),e.skipEvent()}))},function(t,e,i){var r=Fs(i,"tags.wait","wait"),n=Fs(i,"tags.click","click");e.on(`+${r}`,(function(i){Bs(t,i),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()})).on(`+${n}`,(function(){Bs(t,"click"),e.skipEvent()})).on(`-${n}`,(function(){e.skipEvent()}))},function(t,e,i){var r=Ns(i,"sprite","sprite");r&&e.on("+",(function(i,...n){if(!e.skipEventFlag){var s=i.split(".");if(zs(s,r)){var o=s[1];fn.call(t,"sprite.add",Us,[o,...n],t),e.skipEvent()}}})).on("-",(function(i){if(!e.skipEventFlag){var n=i.split(".");if(zs(n,r)){var s=n[1];fn.call(t,"sprite.remove",Ys,s,t),e.skipEvent()}}}))},function(t,e,i){var r=Xs(i,"sprite","sprite");r&&e.on("-",(function(i){e.skipEventFlag||i===r&&(fn.call(t,"sprite.removeall",Gs,void 0,t),e.skipEvent())}))},function(t,e,i){var r=Ws(i,"sprite","sprite");r&&e.on("+",(function(i,n,s){if(!e.skipEventFlag){var o=i.split(".");if(function(t,e){return 3===t.length&&t[0]===e&&"texture"===t[2]}(o,r)){var a=o[1];fn.call(t,"sprite.texture",Vs,[a,n,s],t),e.skipEvent()}}}))},function(t,e,i){var r=js(i,"sprite","sprite");r&&e.on("+",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");if(Hs(s,r)){n=s[1];var o=Array.prototype.slice.call(arguments,1);fn.call(t,"sprite.play",qs,[n,o],t),e.skipEvent()}}})).on("+",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");(function(t,e){return 3===t.length&&t[0]===e&&"stop"===t[2]})(s,r)&&(n=s[1],fn.call(t,"sprite.stop",Ks,n,t),e.skipEvent())}})).on("-",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");Hs(s,r)&&(n=s[1],fn.call(t,"sprite.stop",Ks,n,t),e.skipEvent())}}))},function(t,e,i){var r=Zs(i,"sprite","sprite");r&&e.on("+",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");if(Js(s,r)){n=s[1];var o=Array.prototype.slice.call(arguments,1);fn.call(t,"sprite.chain",$s,[n,o],t),e.skipEvent()}}}))},function(t,e,i){var r=Qs(i,"sprite","sprite");r&&e.on("+",(function(i){if(!e.skipEventFlag){var n,s=i.split(".");(function(t,e){return 3===t.length&&t[0]===e&&"pause"===t[2]})(s,r)&&(n=s[1],fn.call(t,"sprite.pause",to,n,t),e.skipEvent())}}))},function(t,e,i){var r=eo(i,"sprite","sprite");r&&e.on("+",(function(i,n){if(!e.skipEventFlag){var s,o,a=i.split(".");(function(t,e){return 3===t.length&&t[0]===e})(a,r)&&(s=a[1],o=a[2],fn.call(t,"sprite.set",io,[s,o,n],t),e.skipEvent())}}))},function(t,e,i){var r=ro(i,"sprite","sprite");r&&e.on("+",(function(i,n,s,o){if(!e.skipEventFlag){var a,h,l,u=i.split(".");(function(t,e){return 4===t.length&&t[0]===e&&no[t[3]]})(u,r)&&(a=u[1],h=u[2],l="yoyo"===u[3],fn.call(t,"sprite.ease",so,[a,h,n,s,o,l],t),e.skipEvent())}}))},function(t,e,i){e.on("start",(function(){t.emit("parser.start",e)})).on("+",(function(i,...r){if(!e.skipEventFlag){var n=`+${i}`;t.emit(`parser.${n}`,e,...r),ao(t,n,r)}})).on("-",(function(i){if(!e.skipEventFlag){var r=`-${i}`;t.emit(`parser.${r}`,e),ao(t,r)}})).on("complete",(function(){t.emit("parser.complete",e)}))},function(t,e,i){var r=ho(i,"tags.r","r");e.on(`+${r}`,(function(){ln.call(t,"\n"),e.skipEvent()})).on(`-${r}`,(function(){e.skipEvent()}))},function(t,e,i){e.on("content",(function(e){ln.call(t,e)}))}],uo=Phaser.Utils.Objects.GetValue,co=class extends zn{constructor(t,e){void 0===e&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),function(t,e,i){for(var r=0,n=lo.length;r<n;r++)lo[r](t,e,i)}(t,this,e),this.setCommentLineStartSymbol(uo(e,"comment","//"))}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}start(t){return super.start(function(t,e){for(var i=t.commentLineStart,r=e.split("\n"),n=0,s=r.length;n<s;n++){var o=r[n];""===o||(0===o.trim().length||i&&o.startsWith(i))&&(r[n]="")}return r.join("")}(this,t)),this}};var fo=function(t,e){return new Promise((function(i,r){t.once(e,(function(){i()}))}))},po=function(t){return fo(t,"complete")};const go="anim";var vo=function(t){void 0===t&&(t=0);var e=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",(function(){this.isPageTyping=!1,this.emit("complete")}),this):(this.isPageTyping=!1,this.emit("complete"));break}if(on(i)){var r=this.animationConfig;if(r.duration>0){var n=this.timeline.addTimer({name:go,target:i,duration:r.duration,yoyo:r.yoyo,onStart:r.onStart,onProgress:r.onProgress,onComplete:r.onComplete});this.skipTypingAnimation&&n.seek(1)}else r.onStart&&r.onStart(i,0);this.textPlayer.emit("typing",i),e+=this.speed+t,t=0;var s=this.index===this.children.length;if(e>0&&!s){this.typingTimer=this.timeline.addTimer({name:"delay",target:this,duration:e,onComplete:function(t,e,i){t.typingTimer=void 0,vo.call(t,i.remainder)}});break}}else i.type===sn&&i.exec()}this.inTypingProcessLoop=!1};const mo=vo,yo="_remove.wait",xo="_remove.play",bo=[yo,xo],wo=function(t,e,i,r,n){return function(){t.emit(yo,n),e.apply(r,i)}},To=function(t,e,i,r,n){var s=wo(t,i,r,n,"custom"),o=e?`wait.${e}`:"wait";t.emit(o,s)},So=function(t,e,i,r,n){var s,o=wo(t,i,r,n,"time");t.once(yo,(function(){s&&(s.remove(),s=void 0)})),s=function(t,e,i,r,n){return t.typeWriter.timeline.delayCall(e,i,r,n)}(t,e,o),t.emit("wait.time",e)},Eo=function(t,e,i,r){var n=wo(t,e,i,r,"click"),s=t.clickEE;t.once(yo,(function(){s.off("pointerdown",n,t)})),s.once("pointerdown",n,t),t.emit("wait.click")},Co=function(t,e,i,r,n){var s=wo(t,i,r,n,"music");e&&(t.once(yo,(function(){e.off("complete",s,t)})),e.once("complete",s,t)),t.emit("wait.music",e),e||s()};var _o=function(t){switch(t){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},Ao=function(t,e,i,r,n){var s,o,a=wo(t,i,r,n,`camera.${e}`),h=t.camera;switch(e){case"camera.fadein":s=h.fadeEffect,o="camerafadeincomplete";break;case"camera.fadeout":s=h.fadeEffect,o="camerafadeoutcomplete";break;case"camera.flash":s=h.flashEffect,o="cameraflashcomplete";break;case"camera.shake":s=h.shakeEffect,o="camerashakecomplete";break;case"camera.zoom":s=h.zoomEffect,o="camerazoomcomplete";break;case"camera.rotate":s=h.rotateToEffect,o="camerarotatecomplete";break;case"camera.scroll":s=h.panEffect,o="camerapancomplete"}s.isRunning?(t.once(yo,(function(e){h.off(o,a,t)})),h.once(o,a,t),t.emit("wait.camera",e)):(t.emit("wait.camera",e),a())};const Mo=function(t,e,i,r,n){var s=wo(t,i,r,n,"keydown"),o=`keydown-${e.toUpperCase()}`,a=t.scene.input.keyboard;t.once(yo,(function(){a.off(o,s,t)})),a.once(o,s,t),t.emit("wait.keydown",e)};var Po=function(t){var e=t.split(".");return"sprite"===e[0]&&e.length<=3},ko=function(t,e,i,r,n){var s=wo(t,i,r,n),o=e.split("."),a=t.spriteManager;switch(o.length){case 1:a.isEmpty?(t.emit("wait.sprite"),s()):(t.once(yo,(function(e){a.off("empty",s,t)})),a.once("empty",s,t),t.emit("wait.sprite"));break;case 2:var h=o[1];if(a.has(h)){var l=t.spriteManager.get(h).sprite;t.once(yo,(function(){l.off("destroy",s,t)})),l.once("destroy",s,t),t.emit("wait.sprite",h)}else t.emit("wait.sprite",h),s();break;case 3:h=o[1];var u=o[2],c=t.spriteManager.getTweenTask(h,u);c?(t.once(yo,(function(){c.off("complete",s,t)})),c.once("complete",s,t),t.emit("wait.sprite",h,u)):(t.emit("wait.sprite",h,u),s())}};const Oo=Phaser.Input.Keyboard.KeyCodes,Ro=function(t,e,i,r,n){for(var s=0,o=(e="string"==typeof e&&e.length>1&&-1!==e.indexOf("|")?e.split("|"):[e]).length;s<o;s++){var a=e[s];if(null==a||"wait"===a)To(t,void 0,i,r,n);else if("number"!=typeof a&&isNaN(a))if("click"===a)Eo(t,i,r,n);else if("se"===a){var h=t.soundManager.getLastSoundEffect();Co(t,h,i,r,n)}else"bgm"===a?(h=t.soundManager.getBackgroundMusic(),Co(t,h,i,r,n)):Oo.hasOwnProperty(a.toUpperCase())?Mo(t,a,i,r,n):_o(a)?Ao(t,a,i,r,n):Po(a)?ko(t,a,i,r,n):To(t,a,i,r,n);else So(t,parseFloat(a),i,r,n)}},Lo={start:function(t){return this.children=t,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(t),this.typing(),po(this)},typing:mo,pause:function(){return this.timeline.pause(),this},resume:function(){return this.timeline.resume(),this},pauseTyping:function(){return this.isTypingPaused||(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0)),this},resumeTyping:function(t){return this.isTypingPaused?(void 0===t&&(t=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=t):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(t)),this):this},wait:function(t){return this.ignoreWait||(this.pauseTyping(),Ro(this.textPlayer,t,this.resumeTyping,[],this)),this},setTimeScale:function(t){return this.timeline.setTimeScale(t),this},setIgnoreWait:function(t){return void 0===t&&(t=!0),this.ignoreWait=t,this},setSkipTypingAnimation:function(t){if(void 0===t&&(t=!0),this.skipTypingAnimation=t,t)for(var e=this.timeline.getTimers(go),i=0,r=e.length;i<r;i++)e[i].seek(1);return this},setSkipSoundEffect:function(t){if(void 0===t&&(t=!0),this.skipSoundEffect=t,t){var e=this.textPlayer._soundManager;e&&e.fadeOutAllSoundEffects(100,!0)}return this},skipCurrentTypingDelay:function(){return this.typingTimer&&this.typingTimer.seek(1),this}},Io=Phaser.Scene,Fo=function(t){return t instanceof Io},Do=function(t){return null==t||"object"!=typeof t?null:Fo(t)?t:t.scene&&Fo(t.scene)?t.scene:t.parent&&t.parent.scene&&Fo(t.parent.scene)?t.parent.scene:void 0},Bo=Phaser.Utils.Objects.GetValue;class No{constructor(t,e){this.parent=t,this.scene=Do(t),this.isShutdown=!1,this.setEventEmitter(Bo(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}}Object.assign(No.prototype,On);const zo=No,Uo=Phaser.Utils.Objects.GetValue,Yo={no:0,lazy:1,always:2},Xo=class extends zo{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(Uo(e,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){"string"==typeof t&&(t=Yo[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}},Go=Phaser.Utils.Objects.GetValue,Wo=class extends Xo{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=Go(t,"isRunning",!1),this.timeScale=Go(t,"timeScale",1),this.now=Go(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return void 0===t&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}},Vo=class extends Wo{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}update(t,e){return this.isRunning&&0!==this.timeScale?(this.tick(e),this):this}},jo=Phaser.Math.Clamp,Ho=Phaser.Utils.Objects.GetValue,qo=new class extends Ft{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var e=0,i=t.length;e<i;e++)this.free(t[e]);return this}},Ko=class extends Vo{constructor(t,e){super(t,e),this.addedTimers=[],this.timers=[],this.timerPool=Ho(e,"pool",qo)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(t):e=new class{constructor(t,e){this.setTimeline(t).reset(e)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,e,i,r){return this.target=t,this.onStart=e,this.onProgress=i,this.onComplete=r,this}setDuration(t,e){return void 0===e&&(e=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=e,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t,e,i=1-this.remainder/this.duration;return i=jo(i,0,1),this.yoyo&&(void 0===e&&(e=.5),(t=i)<=e?t/=e:t=1-(t-e)/(1-e),i=t),i}setProgress(t){t=jo(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var i=this.remainder<=0;return i&&this.runCallback(this.onComplete),i}}(this,t),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(t,e,i,r){return this.addTimer({duration:t,onComplete:function(t,n,s){void 0===i&&(i=[]),i.push(s),e.apply(r,i)}})}getTimers(t){for(var e=[],i=[this.addedTimers,this.timers],r=0,n=i.length;r<n;r++)for(var s=i[r],o=0,a=s.length;o<a;o++){var h=s[o];h.name===t&&e.push(h)}return e}update(t,e){super.update(t,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var i=[],r=0,n=this.timers.length;r<n;r++){var s=this.timers[r];s.update(this.now,this.delta)?this.timerPool.free(s):i.push(s)}this.timers=i,0===this.timers.length&&0===this.addedTimers.length&&this.complete()}},Zo=Phaser.Utils.Objects.GetValue;class Jo{constructor(t,e){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.timeline=new Ko(t),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Zo(e,"onTypingStart",Qo)),this.setSpeed(Zo(e,"speed",250)),this.setAnimationConfig(Zo(e,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}setSpeed(t){return this.speed=t,this}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return void 0===t?t={}:!1===t&&(t={duration:0}),t.hasOwnProperty("duration")||(t.duration=1e3),t.hasOwnProperty("onStart")||(t.onStart=$o),this.animationConfig=t,this}getNextChild(){var t=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),t}}var $o=function(t){t.setVisible()},Qo=function(t){for(var e=0,i=t.length;e<i;e++)t[e].setVisible(!1)};Object.assign(Jo.prototype,On,Lo);const ta=Jo,ea=class extends Xo{startTicking(){super.startTicking(),this.scene.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.events.off("update",this.update,this)}},ia=Phaser.Utils.Objects.GetValue,ra=Phaser.Math.Clamp,na=class extends ea{constructor(t,e){super(t,e),this.timer=new class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=ia(t,"state",0),this.timeScale=ia(t,"timeScale",1),this.delay=ia(t,"delay",0),this.repeat=ia(t,"repeat",0),this.repeatCounter=ia(t,"repeatCounter",0),this.duration=ia(t,"duration",0),this.nowTime=ia(t,"nowTime",0),this.justRestart=ia(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return void 0===t&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?2:1,this.repeatCounter=0,this}stop(){return this.state=0,this}update(t,e){0!==this.state&&-1!==this.state&&0!==e&&0!==this.timeScale&&(this.nowTime+=e*this.timeScale,this.state=this.nowTime>=0?2:1,this.justRestart=!1,this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=-1)))}get t(){var t;switch(this.state){case 0:case 1:t=0;break;case 2:t=this.nowTime/this.duration;break;case-1:t=1}return ra(t,0,1)}set t(t){(t=ra(t,-1,1))<0?(this.state=1,this.nowTime=-this.delay*t):(this.state=2,this.nowTime=this.duration*t,1===t&&0!==this.repeat&&this.repeatCounter++)}get isIdle(){return 0===this.state}get isDelay(){return 1===this.state}get isCountDown(){return 2===this.state}get isRunning(){return 1===this.state||2===this.state}get isDone(){return-1===this.state}get isOddIteration(){return 1==(1&this.repeatCounter)}get isEvenIteration(){return 0==(1&this.repeatCounter)}}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}},sa=Phaser.Utils.Objects.GetValue,oa=Phaser.Utils.Objects.GetAdvancedValue,aa=Phaser.Tweens.Builders.GetEaseFunction,ha=class extends na{resetFromJSON(t){return this.timer.resetFromJSON(sa(t,"timer")),this.setEnable(sa(t,"enable",!0)),this.setDelay(oa(t,"delay",0)),this.setDuration(oa(t,"duration",1e3)),this.setEase(sa(t,"ease","Linear")),this.setRepeat(sa(t,"repeat",0)),this}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setEase(t){return void 0===t&&(t="Linear"),this.ease=t,this.easeFn=aa(t),this}setRepeat(t){return this.repeat=t,this}start(){return this.timer.isRunning||super.start(),this}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}update(t,e){if(!this.isRunning||!this.enable)return this;var i=this.parent;if(!i.active)return this;var r=this.timer;return r.update(t,e),r.isDelay||this.updateGameObject(i,r),this.emit("update",i,this),r.isDone&&this.complete(),this}updateGameObject(t,e){}},la=Phaser.Utils.Objects.GetValue,ua=Phaser.Utils.Objects.GetAdvancedValue,ca=Phaser.Math.Linear,da={stop:1,destroy:2},fa=class extends ha{constructor(t,e,i){e.scene=t,e.active=!0,super(e,i),this.volume={},this.resetFromJSON(i)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(la(t,"mode",0)),this.setEnable(la(t,"enable",!0)),this.setVolumeRange(ua(t,"volume.start",this.parent.volume),ua(t,"volume.end",0)),this}setMode(t){return"string"==typeof t&&(t=da[t]),this.mode=t,this}setVolumeRange(t,e){return this.volume.start=t,this.volume.end=e,this}start(){return this.timer.isRunning||(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start()),this}updateGameObject(t,e){t.volume=ca(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy()}return this}},pa=function(t,e,i,r,n){void 0===r&&(r=1),void 0===n&&(n=0);var s,o={mode:0,volume:{start:n,end:r},duration:i};return"string"==typeof e&&(e=t.sound.add(e)),e.hasOwnProperty("_fade")?(s=e._fade).stop().resetFromJSON(o):(s=new fa(t,e,o),e._fade=s),s.start(),e.isPlaying||e.setVolume(n).play(),e},ga=function(t,e,i,r){void 0===r&&(r=!0);var n,s={mode:r?2:1,volume:{start:e.volume,end:0},duration:i};return e.hasOwnProperty("_fade")?(n=e._fade).stop().resetFromJSON(s):(n=new fa(t,e,s),e._fade=n),n.start(),e.isPlaying||e.play(),e},va=Phaser.Utils.Objects.GetValue,ma=Phaser.Utils.Array.Remove,ya=class{constructor(t,e){this.scene=t,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(va(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(va(e,"bgm.fade",500));var i=va(e,"bgm.initial",void 0);i&&this.setCurrentBackgroundMusic(i)}destroy(t){if(this.soundEffects.length&&!t)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!t&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(t){return this.backgroundMusicLoopValue=t,this}setBackgroundMusicFadeTime(t){return this.backgroundMusicFadeTime=t,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(t){var e=this.scene.sound.add(t);return this.soundEffects.push(e),e.once("complete",(function(){e.destroy(),this.scene&&ma(this.soundEffects,e)}),this).once("destroy",(function(){this.scene&&ma(this.soundEffects,e)}),this).play(),this}setSoundEffectVolume(t){var e=this.getLastSoundEffect();return e&&e.setVolume(t),this}fadeInSoundEffect(t){var e=this.getLastSoundEffect();return e&&pa(this.scene,e,t),this}fadeOutSoundEffect(t,e){var i=this.getLastSoundEffect();return i&&ga(this.scene,i,t,e),this}fadeOutAllSoundEffects(t,e){for(var i=this.soundEffects.length-1;i>=0;i--)ga(this.scene,this.soundEffects[i],t,e);return this}setCurrentBackgroundMusic(t){this.backgroundMusic=t,t&&(t.setLoop(this.backgroundMusicLoopValue),t.once("complete",(function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0}),this).once("destroy",(function(){this.backgroundMusic=void 0}),this),t.isPlaying||t.play())}playBackgroundMusic(t){return this.backgroundMusic&&this.backgroundMusic.key===t||(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sound.add(t)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime)),this}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(t){return this.backgroundMusic&&pa(this.scene,this.backgroundMusic,t),this}fadeOutBackgroundMusic(t,e){return this.backgroundMusic&&ga(this.scene,this.backgroundMusic,t,e),this}crossFadeBackgroundMusic(t,e){var i=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(t).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=i,this}},xa=Phaser.Utils.Objects.GetValue,ba=Phaser.Utils.Array.Remove;class wa{constructor(t,e){this.scene=t,this.setEventEmitter(xa(e,"eventEmitter",void 0)),this.setCreateCallback(xa(e,"createCallback","sprite")),this.setSpriteFadeTime(xa(e,"fade",500)),this.sprites={},this.removedSprites=[]}destroy(t){this.clear(!t),this.createCallback=void 0,this.scene=void 0}setCreateCallback(t){return this.createCallback="sprite"===t?function(t,e,i){return t.add.sprite(0,0,e,i)}:"image"===t?function(t,e,i){return t.add.image(0,0,e,i)}:t,this}setSpriteFadeTime(t){return this.fadeTime=t,this}has(t){return this.sprites.hasOwnProperty(t)}get(t){return this.sprites[t]}getTweenTask(t,e){if(this.has(t)){var i=this.get(t).tweens;if(i.hasOwnProperty(e))return i[e]}return null}get isEmpty(){return function(t){for(var e in t)return!1;return!0}(this.sprites)&&0===this.removedSprites.length}clear(t){for(var e in void 0===t&&(t=!0),this.sprites)t&&this.sprites[e].destroy(),delete this.sprites[e];return this.removedSprites.length=0,this}add(t,e,i){var r;if(this.remove(t),3===arguments.length)r=this.createCallback(this.scene,e,i);else{var n=Array.prototype.slice.call(arguments,1);r=this.createCallback(this.scene,...n)}this.fadeTime>0&&function(t,e){t.hasOwnProperty("tintR")||(void 0===e&&(e=16777215),Object.defineProperty(t,"tint",{get:function(){return t._tintRGB},set:function(e){e=16777215&Math.floor(e),t.setTint(e),t._tintRGB!==e&&(t._tintRGB=e,t._tintR=e>>16&255,t._tintG=e>>8&255,t._tintB=255&e)}}),Object.defineProperty(t,"tintR",{get:function(){return t._tintR},set:function(e){e=255&Math.floor(e),t._tintR!==e&&(t._tintR=e,t._tintRGB=(255&e)<<16|65535&t._tintRGB,t.tint=t._tintRGB)}}),Object.defineProperty(t,"tintG",{get:function(){return t._tintG},set:function(e){e=255&Math.floor(e),t._tintG!==e&&(t._tintG=e,t._tintRGB=(255&e)<<8|16711935&t._tintRGB,t.tint=t._tintRGB)}}),Object.defineProperty(t,"tintB",{get:function(){return t._tintB},set:function(e){e=255&Math.floor(e),t._tintB!==e&&(t._tintB=e,t._tintRGB=255&e|16776960&t._tintRGB,t.tint=t._tintRGB)}}),Object.defineProperty(t,"tintGray",{get:function(){return Math.floor((t._tintR+t._tintG+t._tintB)/3)},set:function(e){e=255&Math.floor(e),t._tintR===e&&t._tintG===e&&t._tintB===e||(t._tintR=e,t._tintG=e,t._tintB=e,t._tintRGB=(t._tintRGB,(255&e)<<16|(255&e)<<8|255&e),t.tint=t._tintRGB)}}),t.tint=e)}(r),r.once("destroy",(function(){ba(this.removedSprites,r),this.isEmpty&&this.emit("empty")}),this);var s=new class{constructor(t,e,i){this.spriteManager=t,this.sprite=e.setName(i),this.tweens={},this.name=i}get scene(){return this.spriteManager.scene}destroy(){this.freeSprite().freeTweens(),this.spriteManager=void 0}freeSprite(){return this.sprite.destroy(),this.sprite=void 0,this}freeTweens(){var t=this.tweens;for(var e in t)t[e].remove(),delete t[e];return this}setProperty(t,e){return this.sprite[t]=e,this}easeProperty(t,e,i,r,n,s){var o=this.tweens;o.hasOwnProperty(t)&&o[t].remove();var a={targets:this.sprite,duration:i,ease:r,yoyo:n,onComplete:function(){o[t].remove(),delete o[t],s&&s()},onCompleteScope:this};return a[t]=e,o[t]=this.scene.tweens.add(a),this}setTexture(t,e){return this.sprite.setTexture(t,e),this}playAnimation(t){return this.sprite.play(t),this}stopAnimation(){return this.sprite.stop(),this}chainAnimation(t){return this.sprite.chain(t),this}pauseAnimation(){return this.sprite.anims.pause(),this}}(this,r,t);return this.sprites[t]=s,this.fadeTime>0&&s.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime),this}setProperty(t,e,i){return this.has(t)?(this.get(t).setProperty(e,i),this):this}easeProperty(t,e,i,r,n,s,o){return this.has(t)?(void 0===r&&(r=1e3),void 0===n&&(n="Linear"),this.get(t).easeProperty(e,i,r,n,s,o),this):this}remove(t){if(!this.has(t))return this;var e=this.get(t);return delete this.sprites[t],this.removedSprites.push(e.sprite),this.fadeTime>0?e.easeProperty("tintGray",0,this.fadeTime,"Linear",!1,(function(){e.destroy()})):e.destroy(),this}removeAll(){for(var t in this.sprites)this.remove(t);return this}setTexture(t,e,i){return this.has(t)?(this.get(t).setTexture(e,i),this):this}playAnimation(t,e){return this.has(t)||this.add(t),this.get(t).playAnimation(e),this}stopAnimation(t){return this.has(t)?(this.get(t).stopAnimation(),this):this}chainAnimation(t,e){return this.has(t)?(this.get(t).chainAnimation(e),this):this}pauseAnimation(t){return this.has(t)?(this.get(t).pauseAnimation(),this):this}}Object.assign(wa.prototype,On);const Ta=wa,Sa=Phaser.Utils.Objects.GetValue;var Ea=function(){if(!this.isPlaying||this.isPageTyping)return this;var t=Sa(this.wrapConfig,"callback",this.runWordWrap);"string"==typeof t&&(t=this[t]);var e=t.call(this,this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var i=function(){this.emit(xo),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.nextPageInput&&this.nextPageInput(Ea,[],this))};this.once(xo,(function(){this.typeWriter.off("complete",i,this)})),this.typeWriter.once("complete",i,this).start(e.children)};const Ca={setClickTarget:function(t){return Fo(t)?this.clickEE=t.input:this.clickEE=t.setInteractive(),this},setTargetCamera:function(t){return this.camera=t,this},setNextPageInput:function(t){var e=this;this.nextPageInput=t?"function"==typeof t?function(i,r,n){var s=wo(e,i,r,n);t.call(e,s)}:function(i,r,n){Ro(e,t,i,r,n)}:null},addImage:function(t,e){return this.imageManager.add(t,e),this},play:function(t){return this.isPlaying||(this.removeChildren(),this.parser.start(t),this.isPlaying=!0,this.once("complete",(function(){this.isPlaying=!1}),this),this.lastWrapResult=void 0,this.typingNextPage()),this},playPromise:function(t){var e=po(this);return this.play(t),e},typingNextPage:Ea,pause:function(){return this.typeWriter.pause(),this},resume:function(){return this.typeWriter.resume(),this},setTimeScale:function(t){return this.typeWriter.setTimeScale(t),this},setIgnoreWait:function(t){return this.typeWriter.setIgnoreWait(t),this},showPage:function(){if(!this.isPlaying||!this.isPageTyping)return this;var t=this.typeWriter.speed,e=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,r=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",(function(){this.typeWriter.setSpeed(t).setIgnoreWait(e).setSkipTypingAnimation(i).setSkipSoundEffect(r)}),this).setSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this}},_a=Phaser.Utils.Objects.IsPlainObject,Aa=Phaser.Utils.Objects.GetValue;class Ma extends Pn{constructor(t,e,i,r,n,s){_a(e)?s=e:_a(r)&&(s=r),void 0===s&&(s={});var o=s.text;delete s.text,super(t,e,i,r,n,s),this.type="rexTextPlayer",this.parser=new co(this,Aa(s,"parser",void 0)),this.typeWriter=new ta(this,Aa(s,"typing",void 0)),this._imageManager=void 0;var a=Aa(s,"images",void 0);a&&this.addImage(a),this._soundManager=void 0;var h=Aa(s,"sounds",void 0);h&&(this._soundManager=new ya(this.scene,h)),this.setTargetCamera(Aa(s,"camera",this.scene.cameras.main)),this._spriteManager=void 0;var l=Aa(s,"sprites",void 0);l&&(this._spriteManager=new Ta(this.scene,l)),this.setClickTarget(Aa(s,"clickTarget",this)),this.setNextPageInput(Aa(s,"nextPageInput",null)),this.isPlaying=!1,o&&this.play(o)}get imageManager(){return void 0===this._imageManager&&(this._imageManager=new we(this.scene)),this._imageManager}get soundManager(){return void 0===this._soundManager&&(this._soundManager=new ya(this.scene)),this._soundManager}get spriteManager(){return void 0===this._spriteManager&&(this._spriteManager=new Ta(this.scene)),this._spriteManager}destroy(t){this.scene&&(function(t){for(var e=0,i=bo.length;e<i;e++)t.emit(bo[e])}(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(t),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(t),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}}Object.assign(Ma.prototype,Ca);const Pa=Ma;n.register("textPlayer",(function(t,e,i,r,n){var s=new Pa(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.TextPlayer",Pa);const ka=function(t,e,i,r,n,s,o,a,h,l,u,c){void 0===l&&(l=0),void 0===u&&(u=2*Math.PI),void 0===c&&(c=!1),e.beginPath(),e.ellipse(i,r,n,s,0,l,u,c),null!=o&&(e.fillStyle=o,e.fill()),null!=a&&(e.strokeStyle=a,e.lineWidth=h,e.stroke())},Oa=function(){var t,e,i,r,n=this.radius,s=this.thickness*this.radius,o=this.radius-s/2,a=this.radius-s,h=(this.canvas,this.context);(this.trackColor&&s>0&&(h.save(),ka(0,h,n,n,o,o,void 0,this.trackColor,s),h.restore()),this.barColor&&o>0)&&(1===this.value?(e=!1,i=0,r=2*Math.PI):(e=this.anticlockwise,i=this.startAngle,r=2*Math.PI*(e?1-this.value:this.value)+i),h.save(),ka(0,h,n,n,o,o,void 0,this.barColor,s,i,r,e),h.restore());this.centerColor&&a>0&&(this.centerColor2?((t=this.context.createRadialGradient(n,n,0,n,n,a)).addColorStop(0,this.centerColor),t.addColorStop(1,this.centerColor2)):t=this.centerColor,h.save(),ka(0,h,n,n,a,a,t),h.restore()),this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(h.save(),function(t,e,i,r,n,s,o,a,h,l,u){void 0===h&&null!=a&&(h=2),void 0===l&&(l="start"),void 0===u&&(u="alphabetic"),e.font=s,e.textAlign=l,e.textBaseline=u,e.fillStyle=o,e.strokeStyle=a,e.lineWidth=h,e.lineCap="round",e.lineJoin="round",null!=a&&"none"!==a&&h>0&&e.strokeText(n,i,r),null!=o&&"none"!==o&&e.fillText(n,i,r)}(0,h,n,n,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),h.restore())},Ra=Phaser.Utils.Objects.GetValue,La=Phaser.Math.Linear,Ia=class extends ha{constructor(t,e){super(t,e),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var e=this.parent;this.propertyKey=Ra(t,"key","value");var i=e[this.propertyKey];return this.fromValue=Ra(t,"from",i),this.toValue=Ra(t,"to",i),this.setEase(Ra(t,"ease",this.ease)),this.setDuration(Ra(t,"duration",this.duration)),this.timer.setDuration(this.duration),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,e){var i=e.t;i=this.easeFn(i),t[this.propertyKey]=La(this.fromValue,this.toValue,i)}},Fa=Phaser.Math.Percent,Da={setEaseValuePropName:function(t){return this.easeValuePropName=t,this},setEaseValueDuration:function(t){return this.easeValueDuration=t,this},setEaseValueFunction:function(t){return this.easeFunction=t,this},stopEaseValue:function(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo:function(t,e,i){return null==t||(void 0!==e&&(t=Fa(t,e,i)),void 0===this.easeValueTask&&(this.easeValueTask=new Ia(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:t,duration:this.easeValueDuration,ease:this.easeFunction})),this}},Ba=Phaser.Utils.Objects.GetValue,Na=Phaser.Utils.Objects.IsPlainObject,za=Phaser.Math.Clamp,Ua=Phaser.Math.Linear,Ya=Phaser.Math.Percent,Xa=Phaser.Math.DegToRad(270);class Ga extends rt{constructor(t,e,i,r,n,s,o){Na(e)&&(e=Ba(o=e,"x",0),i=Ba(o,"y",0),r=Ba(o,"radius",1),n=Ba(o,"barColor",void 0),s=Ba(o,"value",0));var a=2*r;super(t,e,i,a,a),this.type="rexCircularProgressCanvas",this.eventEmitter=Ba(o,"eventEmitter",this),this.setRadius(r),this.setTrackColor(Ba(o,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(Ba(o,"centerColor",void 0)),this.setThickness(Ba(o,"thickness",.2)),this.setStartAngle(Ba(o,"startAngle",Xa)),this.setAnticlockwise(Ba(o,"anticlockwise",!1)),this.setTextColor(Ba(o,"textColor",void 0)),this.setTextStrokeColor(Ba(o,"textStrokeColor",void 0),Ba(o,"textStrokeThickness",void 0));var h=Ba(o,"textFont",void 0);h?this.setTextFont(h):this.setTextFont(Ba(o,"textSize","16px"),Ba(o,"textFamily","Courier"),Ba(o,"textStyle","")),this.setTextFormatCallback(Ba(o,"textFormatCallback",void 0),Ba(o,"textFormatCallbackScope",void 0));var l=Ba(o,"valuechangeCallback",null);if(null!==l){var u=Ba(o,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",l,u)}this.setEaseValuePropName("value").setEaseValueDuration(Ba(o,"easeValue.duration",0)).setEaseValueFunction(Ba(o,"easeValue.ease","Linear")),this.setValue(s)}resize(t,e){return(t=Math.floor(Math.min(t,e)))===this.width||(super.resize(t,t),this.setRadius(t/2)),this}get value(){return this._value}set value(t){t=za(t,0,1);var e=this._value,i=e!=t;this.dirty=this.dirty||i,this._value=t,i&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,i){return null==t||(void 0!==e&&(t=Ya(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=Ya(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=Ua(t,e,i)),i}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=2*t;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=st(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=st(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return void 0===t&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=za(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=st(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=st(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,e){return this.centerColor=t,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(t){t=st(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=st(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,e){return void 0===e&&(e=2),this.textStrokeColor=t,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,e,i){var r;return r=void 0===e?t:i+" "+t+" "+e,this.textFont=r,this}setTextFormatCallback(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),Oa.call(this),super.updateTexture(),this}getFormatText(t){return void 0===t&&(t=this.value),this.textFormatCallbackScope?this.textFormatCallback(t):this.textFormatCallback.call(this.textFormatCallbackScope,t)}}Object.assign(Ga.prototype,Da);const Wa=Ga;n.register("circularProgressCanvas",(function(t,e,i,r,n,s){var o=new Wa(this.scene,t,e,i,r,n,s);return this.scene.add.existing(o),o})),(0,b.Z)(window,"RexPlugins.UI.CircularProgressCanvas",Wa);const Va=Phaser.Renderer.Canvas.SetTransform,ja={renderWebGL:function(t,e,i,r){e.updateData(),i.addToRenderList(e);var n=t.pipelines.set(e.pipeline),s=D(e,i,r),o=n.calcMatrix.copyFrom(s.calc),a=e._displayOriginX,h=e._displayOriginY,l=i.alpha*e.alpha;t.pipelines.preBatch(e);for(var u=e.geom,c=0,d=u.length;c<d;c++)u[c].webglRender(n,o,l,a,h);t.pipelines.postBatch(e)},renderCanvas:function(t,e,i,r){e.updateData(),i.addToRenderList(e);var n=t.currentContext;if(Va(t,n,e,i,r)){for(var s=e._displayOriginX,o=e._displayOriginY,a=e.geom,h=0,l=a.length;h<l;h++)a[h].canvasRender(n,s,o);n.restore()}}},Ha=Phaser.GameObjects.Shape,qa=Phaser.Utils.Array.Remove;class Ka extends Ha{constructor(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=r),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,i),this.setSize(r,n),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return void 0===t&&(t=!0),this.dirty=t,this}setSize(t,e){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=e,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}setFillStyle(t,e){return void 0===e&&(e=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==e,this.fillColor=t,this.fillAlpha=e,this}setStrokeStyle(t,e,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==e||this.strokeAlpha!==i,this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,e=0,i=t.length;e<i;e++){var r=t[e];r.dirty&&r.updateData()}return this.dirty=!1,this.isSizeChanged=!1,this}clear(){return this.geom.length=0,zt(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var e=t.name;return e&&(this.shapes[e]=t),this.dirty=!0,this}deleteShape(t){var e=this.getShape(t);return e&&(delete this.shapes[t],qa(this.geom,e)),this}}Object.assign(Ka.prototype,ja);const Za=Ka;class Ja{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle(),this.lineStyle(),this}webglRender(t,e,i,r,n){}canvasRender(t,e,i){}updateData(){}}Object.assign(Ja.prototype,{fillStyle:function(t,e){return void 0===t?this.isFilled=!1:(void 0===e&&(e=1),this.isFilled=!0,this.fillColor=t,this.fillAlpha=e),this},lineStyle:function(t,e,i){return void 0===t||void 0===e?this.isStroked=!1:(void 0===i&&(i=1),this.isStroked=!0,this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i),this}},{setData:function(t,e){return void 0===this.data&&(this.data={}),this.data[t]=e,this},getData:function(t,e){return void 0===this.data&&(this.data={}),this.data.hasOwnProperty(t)||(this.data[t]=e),this.data[t]}});const $a=Ja,Qa=Phaser.Geom.Polygon.Earcut,th=class extends $a{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=Qa(this.pathData),this}webglRender(t,e,i,r,n){this.isFilled&&M(t,e,this,i,r,n),this.isStroked&&k(t,this,i,r,n)}canvasRender(t,e,i){var r=this.pathData,n=r.length-1,s=r[0]-e,o=r[1]-i;t.beginPath(),t.moveTo(s,o),this.closePath||(n-=2);for(var a=2;a<n;a+=2){var h=r[a]-e,l=r[a+1]-i;t.lineTo(h,l)}this.closePath&&t.closePath(),this.isFilled&&(B(t,this),t.fill()),this.isStroked&&(N(t,this),t.stroke())}},eh=Phaser.Math.DegToRad,ih=class extends th{constructor(t,e,i,r,n,s,o,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=360),void 0===o&&(o=!1),void 0===a&&(a=!1),super(),this.setCenterPosition(t,e),this.setRadius(i,r),this.setAngle(n,s,o),this.setPie(a),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,e){return void 0===e&&(e=t),this.radiusX=t,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,e,i){return void 0===i&&(i=!1),this.startAngle=t,this.endAngle=e,this.anticlockwise=i,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return void 0===t&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),_(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,e,i){t.beginPath();var r=this.x-e,n=this.y-i,s=eh(this.startAngle),o=eh(this.endAngle);this.pie&&(t.moveTo(r,n),t.lineTo(r+Math.cos(s)*this.radiusX,n+Math.sin(s)*this.radiusY)),t.ellipse(r,n,this.radiusX,this.radiusY,0,s,o,this.anticlockwise),this.pie&&t.lineTo(r,n),this.isFilled&&(B(t,this),t.fill()),this.isStroked&&(N(t,this),t.stroke())}},rh=class extends ih{constructor(t,e,i){super(t,e,i,i,0,360)}},nh=Phaser.Math.Interpolation.QuadraticBezier,sh=function(t,e,i,r,n,s){for(var o=s.length,a=s[o-2],h=s[o-1],l=1,u=n-1;l<=u;l++){var c=l/u;s.push(nh(c,a,t,i),nh(c,h,e,r))}return s},oh=Phaser.Math.RotateAround,ah=Phaser.Geom.Polygon,hh=Phaser.Math.DegToRad;Phaser.Math.Distance.Between,Phaser.Math.Linear;const lh=Phaser.Renderer.WebGL.Utils,uh=Phaser.Renderer.WebGL.Utils,ch=Phaser.Utils.Objects.GetValue,dh=Phaser.Utils.Objects.IsPlainObject,fh=Phaser.Math.Clamp,ph=Phaser.Math.Linear,gh=Phaser.Math.Percent,vh=Phaser.Math.DegToRad(270),mh=Phaser.Math.RadToDeg;class yh extends Za{constructor(t,e,i,r,n,s,o){dh(e)&&(e=ch(o=e,"x",0),i=ch(o,"y",0),r=ch(o,"radius",1),n=ch(o,"barColor",void 0),s=ch(o,"value",0));var a=2*r;super(t,e,i,a,a),this.type="rexCircularProgress",this.eventEmitter=ch(o,"eventEmitter",this),this.addShape((new rh).setName("track")).addShape((new ih).setName("bar")).addShape((new rh).setName("center")),this.setRadius(r),this.setTrackColor(ch(o,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(ch(o,"centerColor",void 0)),this.setThickness(ch(o,"thickness",.2)),this.setStartAngle(ch(o,"startAngle",vh)),this.setAnticlockwise(ch(o,"anticlockwise",!1));var h=ch(o,"valuechangeCallback",null);if(null!==h){var l=ch(o,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,l)}this.setEaseValuePropName("value").setEaseValueDuration(ch(o,"easeValue.duration",0)).setEaseValueFunction(ch(o,"easeValue.ease","Linear")),this.setValue(s)}resize(t,e){return(t=Math.floor(Math.min(t,e)))===this.width||(super.resize(t,t),this.setRadius(t/2)),this}get value(){return this._value}set value(t){t=fh(t,0,1);var e=this._value,i=e!=t;this.dirty=this.dirty||i,this._value=t,i&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,i){return null==t||(void 0!==e&&(t=gh(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=gh(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=ph(t,e,i)),i}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=2*t;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return void 0===t&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=fh(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}updateShapes(){var t=this.radius,e=this.thickness*this.radius,i=this.radius-e/2,r=this.radius-e,n=this.getShape("track");this.trackColor&&e>0?n.setCenterPosition(t,t).setRadius(i).lineStyle(e,this.trackColor):n.reset();var s,o,a,h=this.getShape("bar");this.barColor&&i>0?(1===this.value?(s=!1,o=0,a=360):(s=this.anticlockwise,o=mh(this.startAngle),a=360*(s?1-this.value:this.value)+o),h.setCenterPosition(t,t).setRadius(i).setAngle(o,a,s).lineStyle(e,this.barColor)):h.reset();var l=this.getShape("center");this.centerColor&&r>0?l.setCenterPosition(t,t).setRadius(r).fillStyle(this.centerColor):l.reset()}}Object.assign(yh.prototype,Da);const xh=yh;n.register("circularProgress",(function(t,e,i,r,n,s){var o=new xh(this.scene,t,e,i,r,n,s);return this.scene.add.existing(o),o})),(0,b.Z)(window,"RexPlugins.UI.CircularProgress",xh);const bh=function(t){return t.hasOwnProperty("rexSizer")||(t.rexSizer={}),t.rexSizer};var wh;const Th=function(t,e){void 0===e&&(void 0===wh&&(wh=new Phaser.Geom.Rectangle),e=wh);var i=t.game.config;return e.setTo(0,0,i.width,i.height),e},Sh=Phaser.Display.Align,Eh={center:Sh.CENTER,left:Sh.LEFT_CENTER,right:Sh.RIGHT_CENTER,top:Sh.TOP_CENTER,bottom:Sh.BOTTOM_CENTER,"left-top":Sh.TOP_LEFT,"left-center":Sh.LEFT_CENTER,"left-bottom":Sh.BOTTOM_LEFT,"center-top":Sh.TOP_CENTER,"center-center":Sh.CENTER,"center-bottom":Sh.BOTTOM_CENTER,"right-top":Sh.TOP_RIGHT,"right-center":Sh.RIGHT_CENTER,"right-bottom":Sh.BOTTOM_RIGHT};var Ch=new Phaser.GameObjects.Zone({sys:{queueDepthSort:Yt,events:{once:Yt}}},0,0,1,1);Ch.setOrigin(0);const _h=Ch,Ah=0,Mh=1,Ph=2,kh=4,Oh=6,Rh=8,Lh=10,Ih=12;var Fh=function(t){return void 0!==t.displayWidth?t.displayWidth:t.width},Dh=function(t){return void 0!==t.displayHeight?t.displayHeight:t.height};const Bh=function(t){var e=Dh(t);return t.y+e-e*t.originY},Nh=function(t){var e=Fh(t);return t.x-e*t.originX+.5*e},zh=function(t,e){var i=Dh(t);return t.y=e-i+i*t.originY,t},Uh=function(t,e){var i=Fh(t),r=i*t.originX;return t.x=e+r-.5*i,t},Yh=function(t){var e=Fh(t);return t.x-e*t.originX},Xh=function(t,e){var i=Fh(t);return t.x=e+i*t.originX,t},Gh=function(t){var e=Fh(t);return t.x+e-e*t.originX},Wh=function(t,e){var i=Fh(t);return t.x=e-i+i*t.originX,t},Vh=function(t,e){var i=Dh(t),r=i*t.originY;return t.y=e+r-.5*i,t},jh=function(t){var e=Dh(t);return t.y-e*t.originY+.5*e},Hh=function(t){var e=Dh(t);return t.y-e*t.originY},qh=function(t,e){var i=Dh(t);return t.y=e+i*t.originY,t};var Kh=[];Kh[11]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Uh(t,Nh(e)+i),zh(t,Bh(e)+r),t},Kh[Lh]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Xh(t,Yh(e)-i),zh(t,Bh(e)+r),t},Kh[Ih]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Wh(t,Gh(e)+i),zh(t,Bh(e)+r),t},Kh[Oh]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),function(t,e,i){Uh(t,e),Vh(t,i)}(t,Nh(e)+i,jh(e)+r),t},Kh[kh]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Xh(t,Yh(e)-i),Vh(t,jh(e)+r),t},Kh[Rh]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Wh(t,Gh(e)+i),Vh(t,jh(e)+r),t},Kh[Mh]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Uh(t,Nh(e)+i),qh(t,Hh(e)-r),t},Kh[Ah]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Xh(t,Yh(e)-i),qh(t,Hh(e)-r),t},Kh[Ph]=function(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),Wh(t,Gh(e)+i),qh(t,Hh(e)-r),t};const Zh=function(t,e,i,r,n){return Kh[i](t,e,r,n)},Jh=function(t,e,i,r,n,s){_h.setPosition(e,i).setSize(r,n),Zh(t,_h,s)},$h=Phaser.Utils.Objects.GetValue,Qh=Phaser.GameObjects.Group;var tl=function(t,e,i){return t.add.text(0,0,"")},el=new Phaser.Geom.Rectangle;const il=Phaser.Utils.Objects.GetValue,rl=function(t,e){return void 0===e&&(e={}),"number"==typeof t?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=il(t,"left",0),e.right=il(t,"right",0),e.top=il(t,"top",0),e.bottom=il(t,"bottom",0)),e},nl=Ir.prototype.add,sl=function(t){return nl.call(this,t),this.sizerEventsEnable&&(t.emit("sizer.add",t,this),this.emit("add",t,this)),this},ol={addBackground(t,e,i){return void 0===this.backgroundChildren&&(this.backgroundChildren=[]),"string"==typeof e&&(i=e,e=void 0),void 0===e&&(e=0),sl.call(this,t),this.backgroundChildren.push(t),this.getSizerConfig(t).padding=rl(e),void 0!==i&&this.addChildrenMap(i,t),this},isBackground(t){return void 0!==this.backgroundChildren&&-1!==this.backgroundChildren.indexOf(t)}},al={removeFromParentSizer(){var t=this.getParentSizer();return t&&t.remove(this),this}},hl=function(t,e){return void 0===this.childrenMap&&(this.childrenMap={}),this.childrenMap[t]=e,this},ll=/(\S+)\[(\d+)\]/i,ul={getInnerPadding(t){return tn(this.space,t)},setInnerPadding(t,e){return en(this.space,t,e),this},getOuterPadding(t){return tn(this.getSizerConfig(this).padding,t)},setOuterPadding(t,e){return en(this.getSizerConfig(this).padding,t,e),this},getChildOuterPadding(t,e){return"string"==typeof t&&(t=this.getElement(t)),tn(this.getSizerConfig(t).padding,e)},setChildOuterPadding(t,e,i){return"string"==typeof t&&(t=this.getElement(t)),en(this.getSizerConfig(t).padding,e,i),this}},cl=function(t){return void 0===t&&(t=Math.max(this.childrenWidth,this.minWidth)),t},dl=function(t){var e=Math.max(this.childrenHeight,this.minHeight);return void 0===t&&(t=e),t},fl={getShownChildren(t){void 0===t&&(t=[]);for(var e,i=this.children,r=0,n=i.length;r<n;r++)(e=i[r]).rexSizer&&e.rexSizer.hidden||t.push(e);return t},getAllShownChildren(t){void 0===t&&(t=[]);for(var e,i=this.children,r=0,n=i.length;r<n;r++)(e=i[r]).rexSizer&&e.rexSizer.hidden||(t.push(e),e.hasOwnProperty("isRexContainerLite")&&t.push(...e.getAllShownChildren()));return t}},pl=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var t,e=this.getChildrenSizers(),i=0,r=e.length;i<r;i++)(t=e[i]).ignoreLayout||t.preLayout()},gl=function(t){var e,i;for(var r in this.sizerChildren)!(e=this.sizerChildren[r])||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap||(i=this.getExpandedChildWidth(e,t),e.isRexSizer&&(i=e.resolveWidth(i)),e.runWidthWrap(i));return this},vl=Phaser.Geom.Rectangle;Phaser.Scale.Center;var ml=new vl;const yl=function(t,e){void 0===e?e=new vl:!0===e&&(e=ml);var i,r,n=t.scale,s=n.baseSize,o=n.parentSize,a=n.canvasBounds,h=n.displayScale,l=a.x>=0?0:-a.x*h.x,u=a.y>=0?0:-a.y*h.y;return i=o.width>=a.width?s.width:s.width-(a.width-o.width)*h.x,r=o.height>=a.height?s.height:s.height-(a.height-o.height)*h.y,e.setTo(l,u,i,r),e},xl=class extends zo{constructor(t,e){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){var e,i,r,n,s,o,a,h;void 0===t&&(t={}),void 0!==t.x?(e=null,i=t.x):void 0!==t.left?(e=0,i=t.left):void 0!==t.right?(e=1,i=t.right):void 0!==t.centerX&&(e=.5,i=t.centerX),void 0!==t.y?(r=null,n=t.y):void 0!==t.top?(r=0,n=t.top):void 0!==t.bottom?(r=1,n=t.bottom):void 0!==t.centerY&&(r=.5,n=t.centerY),void 0!==i&&(i=i.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),s=parseFloat(i[0])/100,o=""===i[1]?0:parseFloat(i[1])),void 0!==n&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),a=parseFloat(n[0])/100,h=""===n[1]?0:parseFloat(n[1]));var l,u,c=t.width;void 0!==c&&(c=c.split("%"),l=parseFloat(c[0])/100,u=""===c[1]?0:parseFloat(c[1]));var d,f,p=t.height;void 0!==p&&(p=p.split("%"),d=parseFloat(p[0])/100,f=""===p[1]?0:parseFloat(p[1])),this.setAlign(e,r),this.setPercentage(s,a),this.setOffset(o,h),this.setSizePercentage(l,d),this.setSizePadding(u,f);var g=t.onResizeCallback,v=t.onResizeCallbackScope;void 0!==g&&this.setResizeCallback(g,v);var m=t.onUpdateViewportCallback,y=t.onUpdateViewportCallbackScope;return void 0!==m&&this.setUpdateViewportCallback(m,y),this}boot(){this.scene.scale.on("resize",this.anchor,this),this.anchor()}shutdown(t){this.isShutdown||(this.scene.scale.off("resize",this.anchor,this),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}setAlign(t,e){return this.alignX=t,this.alignY=e,this}setPercentage(t,e){return this.percentageX=t,this.percentageY=e,this}setOffset(t,e){return this.offsetX=t,this.offsetY=e,this}setSizePercentage(t,e){return this.percentageWidth=t,this.percentageHeight=e,this}setSizePadding(t,e){return this.paddingWidth=t,this.paddingHeight=e,this}setResizeCallback(t,e){return this.onResizeCallback=t,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(t,e){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,e=this.onResizeCallbackScope,i=this.anchorWidth,r=this.anchorHeight;if((void 0!==i||void 0!==r)&&t){var n=this.parent;void 0===i&&(i=n.width),void 0===r&&(r=n.height),e?t.call(e,i,r,n,this):t(i,r,n,this)}}updatePosition(){var t=this.parent;return null===this.alignX?t.x=this.anchorX:void 0!==this.alignX&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),null===this.alignY?t.y=this.anchorY:void 0!==this.alignY&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(void 0!==this.percentageWidth)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(void 0!==this.percentageHeight)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){this.viewport=yl(this.scene,!this.viewport||this.viewport);var t=this.onUpdateViewportCallback,e=this.onUpdateViewportCallbackScope;t&&(e?t.call(e,this.viewport,this.parent,this):t(this.viewport,this.parent,this))}},bl=Phaser.Utils.Objects.GetValue,wl=Phaser.Utils.Objects.GetAdvancedValue,Tl=Phaser.Math.Linear,Sl={stop:0,destroy:1,yoyo:2},El=class extends ha{constructor(t,e){super(t,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(bl(t,"mode",0)),this.setScaleRange(wl(t,"start",void 0),wl(t,"end",0)),this}setMode(t){return"string"==typeof t&&(t=Sl[t]),this.mode=t,this}setScaleRange(t,e){return"number"==typeof t?(this.startX=t,this.startY=t):(this.startX=wl(t,"x",this.parent.scaleX),this.startY=wl(t,"y",this.parent.scaleY)),"number"==typeof e?(this.endX=e,this.endY=e):(this.endX=wl(e,"x",void 0),this.endY=wl(e,"y",void 0)),this.hasScaleX=void 0!==this.startX&&void 0!==this.endX,this.hasScaleY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start(),this}updateGameObject(t,e){var i=e.t;e.isOddIteration&&(i=1-i),i=this.easeFn(i),this.hasScaleX&&(t.scaleX=Tl(this.startX,this.endX,i)),this.hasScaleY&&(t.scaleY=Tl(this.startY,this.endY,i))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}},Cl=function(t,e,i,r,n){var s;switch(i){case 0:case"x":s={x:0};break;case 1:case"y":s={y:0};break;default:s=0}var o={mode:0,start:s,end:1,duration:e,ease:void 0===r?"Cubic":r};return void 0===n?n=new El(t,o):n.resetFromJSON(o),n.restart(),n},_l=function(t,e,i,r,n,s){n instanceof El&&(s=n,n=void 0),void 0===n&&(n=!0);var o={};switch(o.mode=n?1:0,i){case 0:case"x":o.end={x:0};break;case 1:case"y":o.end={y:0};break;default:o.end=0}return o.duration=e,o.ease=void 0===r?"Linear":r,void 0===s?s=new El(t,o):s.resetFromJSON(o),s.restart(),s},Al=Phaser.Utils.Objects.IsPlainObject;var Ml=function(t,e){e.completeEventName=void 0,e.on("complete",(function(){e.completeEventName&&(t.emit(e.completeEventName,t),e.completeEventName=void 0)})),e.on("update",(function(){var e=t.getParentSizer();e&&e.resetChildPositionState(t)}))};const Pl={popUp(t,e,i){if(Al(t)){var r=t;t=r.duration,e=r.orientation,i=r.ease}var n=void 0===this._scale;return this._scale=Cl(this,t,e,i,this._scale),n&&Ml(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(t,e,i){return this.popUp(t,e,i),po(this._scale)},scaleDownDestroy(t,e,i,r){if(Al(t)){var n=t;t=n.duration,e=n.orientation,i=n.ease,r=n.destroy}var s=void 0===this._scale;return this._scale=_l(this,t,e,i,r,this._scale),s&&Ml(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(t,e,i,r){return this.scaleDownDestroy(t,e,i,r),po(this._scale)},scaleDown(t,e,i){return this.scaleDownDestroy(t,e,i,!1),this},scaleDownPromise(t,e,i){return this.scaleDown(t,e,i),po(this._scale)}},kl=Phaser.Utils.Objects.GetValue,Ol=Phaser.Utils.Objects.GetAdvancedValue,Rl=Phaser.Math.Linear,Ll={stop:0,destroy:1,yoyo:2},Il=class extends ha{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(kl(t,"mode",0)),this.setAlphaRange(Ol(t,"start",this.parent.alpha),Ol(t,"end",0)),this}setMode(t){return"string"==typeof t&&(t=Ll[t]),this.mode=t,this}setAlphaRange(t,e){return this.alphaStart=t,this.alphaEnd=e,this}start(){return this.timer.isRunning||(this.parent.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start()),this}updateGameObject(t,e){var i=e.t;e.isOddIteration&&(i=1-i),t.alpha=Rl(this.alphaStart,this.alphaEnd,i)}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}},Fl=Phaser.Utils.Objects.IsPlainObject,Dl=function(t,e,i,r){var n,s;Fl(i)?(n=i.start,s=i.end):s=i,void 0===n&&(n=0),void 0===s&&(s=1);var o={mode:0,start:n,end:s,duration:e};return void 0===r?r=new Il(t,o):r.resetFromJSON(o),r.restart(),r},Bl=function(t,e,i,r){i instanceof Il&&(r=i,i=void 0),void 0===i&&(i=!0);var n={mode:i?1:0,end:0,duration:e};return void 0===r?r=new Il(t,n):r.resetFromJSON(n),r.restart(),r},Nl=Phaser.Utils.Objects.IsPlainObject;var zl=function(t,e){e.completeEventName=void 0,e.on("complete",(function(){e.completeEventName&&(t.emit(e.completeEventName,t),e.completeEventName=void 0)})),e.on("update",(function(){var e=t.getParentSizer();e&&e.resetChildAlphaState(t)}))};const Ul={fadeIn(t,e){Nl(t)&&(t=t.duration);var i=void 0===this._fade;return this._fade=Dl(this,t,e,this._fade),i&&zl(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromoise(t,e){return this.fadeIn(t,e),po(this._fade)},fadeOutDestroy(t,e){if(Nl(t)){var i=t;t=i.duration,e=i.destroy}var r=void 0===this._fade;return this._fade=Bl(this,t,e,this._fade),r&&zl(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(t,e){return this.fadeOutDestroy(t,e),po(this._fade)},fadeOut(t){return this.fadeOutDestroy(t,!1),this},fadeOutPromise(t){return this.fadeOut(t),po(this._fade)}},Yl=Phaser.Utils.Objects.GetValue,Xl=Phaser.Utils.Objects.GetAdvancedValue,Gl=Phaser.Math.Linear,Wl={stop:0,destroy:1,yoyo:2},Vl=class extends ha{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(Yl(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var e=Xl(t,"x",void 0),i=Xl(t,"y",void 0);this.setTargetPosition(e,i)}else this.setTargetPosition(t);return this}setMode(t){return"string"==typeof t&&(t=Wl[t]),this.mode=t,this}setTargetPosition(t,e){if("number"==typeof t||"number"==typeof e)this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=e;else{var i=t;this.startX=Xl(i,"startX",void 0),this.startY=Xl(i,"startY",void 0),this.endX=Xl(i,"endX",void 0),this.endY=Xl(i,"endY",void 0)}return this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start(),this}updateGameObject(t,e){var i=e.t;e.isOddIteration&&(i=1-i),i=this.easeFn(i),this.hasMoveX&&(t.x=Gl(this.startX,this.endX,i)),this.hasMoveY&&(t.y=Gl(this.startY,this.endY,i))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}},jl=function(t,e){if("number"==typeof t)return t;var i=t[0],r=parseFloat(t.substr(2));switch(i){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"/":return e/r}},Hl=function(t,e,i,r,n,s,o){s instanceof Vl&&(o=s,s=void 0),void 0===s&&(s=!1);var a={};return a.mode=s?1:0,void 0!==i&&(a.startX=t.x,a.endX=jl(i,t.x)),void 0!==r&&(a.startY=t.y,a.endY=jl(r,t.y)),a.duration=e,a.ease=void 0===n?"Linear":n,void 0===o?o=new Vl(t,a):o.resetFromJSON(a),o.restart(),o},ql=function(t,e,i,r,n,s,o){s instanceof Vl&&(o=s,s=void 0),void 0===s&&(s=!1);var a={};return a.mode=s?1:0,void 0!==i&&(a.startX=jl(i,t.x),a.endX=t.x),void 0!==r&&(a.startY=jl(r,t.y),a.endY=t.y),a.duration=e,a.ease=void 0===n?"Linear":n,void 0===o?o=new Vl(t,a):o.resetFromJSON(a),o.restart(),o},Kl=Phaser.Utils.Objects.IsPlainObject,Zl=Phaser.Math.Distance.Between;var Jl=function(t,e){e.completeEventName=void 0,e.on("complete",(function(){e.completeEventName&&(t.emit(e.completeEventName,t),e.completeEventName=void 0)})),e.on("update",(function(){var e=t.getParentSizer();e&&e.resetChildPositionState(t)}))};const $l={moveFrom(t,e,i,r,n){if(Kl(t)){var s=t;e=s.x,i=s.y,t=s.hasOwnProperty("speed")?1e3*Zl(e,i,this.x,this.y)/s.speed:s.duration,r=s.ease}var o=void 0===this._easeMove;return this._easeMove=ql(this,t,e,i,r,n,this._easeMove),o&&Jl(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(t,e,i,r,n){return this.moveFrom(t,e,i,r,n),po(this._easeMove)},moveFromDestroy(t,e,i,r){return this.moveFrom(t,e,i,r,!0),this},moveFromDestroyPromise(t,e,i,r){return this.moveFromDestroy(t,e,i,r),po(this._easeMove)},moveTo(t,e,i,r,n){if(Kl(t)){var s=t;e=s.x,i=s.y,t=s.hasOwnProperty("speed")?1e3*Zl(e,i,this.x,this.y)/s.speed:s.duration,r=s.ease}var o=void 0===this._easeMove;return this._easeMove=Hl(this,t,e,i,r,n,this._easeMove),o&&Jl(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(t,e,i,r,n){return this.moveTo(t,e,i,r,n),po(this._easeMove)},moveToDestroy(t,e,i,r){return this.moveTo(t,e,i,r,!0),this},moveToDestroyPromise(t,e,i,r){return this.moveToDestroy(t,e,i,r,!0),po(this._easeMove)}};var Ql=function(t){iu(t,!1)},tu=function(t){iu(t,!0)},eu=function(t){return!!t&&!bh(t).hidden},iu=function(t,e){t&&(bh(t).hidden=e,t.rexContainer.parent.setChildVisible(t,!e))};const ru={show(t){return void 0===t&&(t=this),Ql(t),this},hide(t){return void 0===t&&(t=this),tu(t),this},isShow(t){return void 0===t&&(t=this),eu(t)}};var nu=void 0;const su=function(t,e,i,r,n){return!(!t||!t.getBounds||r&&!r(t,e,i)||!(nu=t.getBounds(nu)).contains(e,i)||n&&!n(t,e,i))},ou=function(t,e,i,r){if(e)return su(t,e.x,e.y,i,r);for(var n=t.scene.input.manager,s=n.pointersTotal,o=n.pointers,a=0;a<s;a++)if(e=o[a],su(t,e.x,e.y,i,r))return!0;return!1},au=function(t){return t&&"function"==typeof t};var hu=function(t){return!(t.rexSizer&&t.rexSizer.hidden)};const lu=function(t,e,i,r,n){return su(t,e,i,function(t){return t?function(e,i,r){return!!hu(e)&&(t(e,i,r),!0)}:hu}(r),n)},uu={getParentSizer(t){return this.getParent(t)},getTopmostSizer(t){return this.getTopmostParent(t)}},cu=function(t,e,i){!t||void 0===e&&void 0===i||(t.resize?(void 0===e&&(e=t.width),void 0===i&&(i=t.height),t.resize(e,i)):(void 0!==e&&(t.displayWidth=e),void 0!==i&&(t.displayHeight=i)))};var du={};const fu=function(t){var e,i;this.sizerEventsEnable&&(e=t,void 0===(i=this.getChildPrevState(t))?i={}:!0===i&&(i=du),i.x=e.x,i.y=e.y,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.width=e.width,i.height=e.height,i.displayWidth=e.displayWidth,i.displayHeight=e.displayHeight,this.layoutedChildren.push(t))},pu=function(t,e,i,r,n,s,o,a){Jh(t,e,i,r,n,s),void 0!==o&&(t.x+=o),void 0!==a&&(t.y+=a),this.resetChildPositionState(t),this.sizerEventsEnable&&t.emit("sizer.postlayout",t,this)},gu=Phaser.Display.Align.CENTER,vu=Phaser.Utils.Objects.GetValue,mu={press:0,pointerdown:0,release:1,pointerup:1},yu=class extends zo{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(vu(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(vu(t,"enable",!0)),this.setMode(vu(t,"mode",1)),this.setClickInterval(vu(t,"clickInterval",100)),this.setDragThreshold(vu(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return"string"==typeof t&&(t=mu[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,e,i,r){void 0===this.pointer&&(this.pointer=t,0===this.mode&&this.click(t.downTime,t,r))}onRelease(t,e,i,r){this.pointer===t&&(1===this.mode&&this.click(t.upTime,t,r),this.pointer=void 0)}onPointOut(t,e){this.pointer===t&&this.cancel()}onMove(t,e,i,r){this.pointer===t&&void 0!==this.dragThreshold&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,e,i){if(!this.enable)return this;if(void 0===t)return this.emit("click",this,this.parent,e,i),this;this.pointer=void 0;var r=this.lastClickTime;return void 0!==r&&t-r<=this.clickInterval||(this.lastClickTime=t,this.emit("click",this,this.parent,e,i)),this}cancel(){return this.pointer=void 0,this}},xu=yu,bu={onClick(t,e,i){return t?(void 0===this._click&&(this._click=new xu(this,i)),this._click.on("click",t,e),this):this},offClick(t,e){return void 0===this._click||this._click.off("click",t,e),this},enableClick(t){return void 0===this._click||this._click.setEnable(t),this},disableClick(){return void 0===this._click||this._click.setEnable(!1),this}},wu=function(t,e,i){for(var r,n=0,s=t.length;n<s;n++)if(r=t[n],lu(r,e,i))return r.pointToChild(e,i);return null},Tu=function(t,e,i,r,n,s,o){var a;(a=void 0===n?r:wu(i,r,n))&&t.emit(e,a,s,o)},Su=Phaser.Utils.Objects.GetValue,Eu=function(t){var e=Su(t,"click",void 0);if(!1!==e){void 0===e&&(e={}),e.hasOwnProperty("threshold")||(e.threshold=10);var i=this._childrenInteractive;this._click=new yu(this,e),this._click.on("click",(function(t,e,r,n){Tu(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,r.x,r.y,r,n)}),this)}},Cu=Phaser.Utils.Objects.GetValue;var _u=function(t,e,i,r){var n=this._childrenInteractive,s=wu(n.targetSizers,t.x,t.y),o=n.lastOverChild;s&&o&&s===o||(n.lastOverChild=s,Tu(n.eventEmitter,`${n.eventNamePrefix}out`,n.targetSizers,o,void 0,t,r),Tu(n.eventEmitter,`${n.eventNamePrefix}over`,n.targetSizers,s,void 0,t,r))},Au=function(t,e){var i=this._childrenInteractive,r=i.lastOverChild;i.lastOverChild=null,Tu(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,r,void 0,t,e)};const Mu=function(t){!1!==Cu(t,"over",void 0)&&this.on("pointermove",_u,this).on("pointerover",_u,this).on("pointerout",Au,this)},Pu=Phaser.Utils.Objects.GetValue,ku=class extends Xo{constructor(t,e){var i=Do(t);i===t&&(t=void 0),super(i,e),this.gameObject=t,t&&t.setInteractive(Pu(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Pu(t,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(Pu(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,e){this.enable&&void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=1,void 0===this.gameObject&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}onPointerUp(t){this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=0,this.onDragEnd())}onPointerMove(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),i=this.pointer===t;!i&&e||(i&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return 1===this.tracerState&&this.onDragEnd(),this.pointer=void 0,this.tracerState=0,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,e){}postUpdate(t,e){}startTicking(){super.startTicking(),this.scene.events.on("preupdate",this.preUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.events.off("preupdate",this.preUpdate,this),this.scene.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state="IDLE",this}};class Ou{constructor(t){var e=zr(t,"states",void 0);e&&this.addStates(e);var i=zr(t,"extend",void 0);if(i)for(var r in i)this.hasOwnProperty(r)&&void 0!==this[r]||(this[r]=i[r]);var n=zr(t,"eventEmitter",void 0),s=zr(t,"EventEmitterClass",void 0);this.setEventEmitter(n,s),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(zr(t,"enable",!0)),this.start(zr(t,"start",void 0));var e=zr(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var e="exit_"+this._prevState,i=this[e];i&&i.call(this),this.emit(e,this)}if(this._stateLock=!1,null!=this._state){var r="enter_"+this._state,n=this[r];n&&n.call(this),this.emit(r,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return null!=t&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(t="string"==typeof e?e:e.call(this)),this.goto(t),this}addState(t,e){var i=zr(e,"next",void 0);i&&(this["next_"+t]=i);var r=zr(e,"exit",void 0);r&&(this["exit_"+t]=r);var n=zr(e,"enter",void 0);return n&&(this["enter_"+t]=n),this}addStates(t){for(var e in t)this.addState(e,t[e]);return this}update(t,e,i){void 0===i&&(i="update");var r=this[i+"_"+this.state];r&&r.call(this,t,e)}preupdate(t,e){this.update(t,e,"preupdate")}postupdate(t,e){this.update(t,e,"postupdate")}}Object.assign(Ou.prototype,On);const Ru=Ou,Lu=Phaser.Utils.Objects.GetValue,Iu=Phaser.Math.Distance.Between,Fu="IDLE",Du="BEGIN",Bu="RECOGNIZED",Nu=Phaser.Utils.Objects.GetValue,zu="IDLE",Uu="BEGIN",Yu="RECOGNIZED",Xu=Phaser.Utils.Objects.GetValue,Gu="IDLE",Wu="BEGIN",Vu="RECOGNIZED",ju=Phaser.Math.Distance.Between,Hu=Phaser.Math.Angle.Between,qu={getDt:function(){return this.scene.sys.game.loop.delta},getVelocity:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return ju(e.x,e.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Math.abs(t.x-e.x)/(.001*this.getDt())},getVelocityY:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Math.abs(t.y-e.y)/(.001*this.getDt())},getVelocityAngle:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Hu(e.x,e.y,t.x,t.y)}},Ku={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var Zu={};const Ju=Phaser.Utils.Objects.GetValue,$u=Phaser.Math.RadToDeg;class Qu extends ku{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.validDrag=!1}},RECOGNIZED:{enter:function(){i.start(),i.updateDirectionStates(),i.emit("swipe",i,i.gameObject,i.lastPointer)},exit:function(){i.stop(),i.clearDirectionStates()}}},init:function(){this.state=tc},eventEmitter:!1};this.setRecongizedStateObject(new Ru(r)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Ju(t,"threshold",10)),this.setVelocityThreshold(Ju(t,"velocityThreshold",1e3)),this.setDirectionMode(Ju(t,"dir","8dir")),this}onDragStart(){this.state=ec}onDragEnd(){this.state=tc}onDrag(){this.state===ec&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=ic))}postUpdate(t,e){this.isRunning&&this.enable&&this.state===ic&&(this.state=tc)}get isSwiped(){return this.state===ic}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return"string"==typeof t&&(t=Ku[t]),this.dirMode=t,this}updateDirectionStates(){return function(t,e,i){switch(void 0===i?i={}:!0===i&&(i=Zu),i.left=!1,i.right=!1,i.up=!1,i.down=!1,t=(t+360)%360,e){case 0:t<180?i.down=!0:i.up=!0;break;case 1:t>90&&t<=270?i.left=!0:i.right=!0;break;case 2:t>45&&t<=135?i.down=!0:t>135&&t<=225?i.left=!0:t>225&&t<=315?i.up=!0:i.right=!0;break;case 3:t>22.5&&t<=67.5?(i.down=!0,i.right=!0):t>67.5&&t<=112.5?i.down=!0:t>112.5&&t<=157.5?(i.down=!0,i.left=!0):t>157.5&&t<=202.5?i.left=!0:t>202.5&&t<=247.5?(i.left=!0,i.up=!0):t>247.5&&t<=292.5?i.up=!0:t>292.5&&t<=337.5?(i.up=!0,i.right=!0):i.right=!0}}($u(this.getVelocityAngle()),this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Qu.prototype,qu);const tc="IDLE",ec="BEGIN",ic="RECOGNIZED",rc=Qu,nc=Phaser.Utils.Objects.GetValue,sc=Phaser.Utils.Array.SpliceOne,oc=Phaser.Math.Distance.Between,ac=Phaser.Math.Angle.Between;class hc{constructor(t,e){var i=t.input.manager.pointersTotal-1;i<2&&t.input.addPointer(2-i),this.scene=t,this.setEventEmitter(nc(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(nc(t,"enable",!0)),this.bounds=nc(t,"bounds",void 0),this.tracerState=uc,this.pointers.length=0,zt(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,zt(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case uc:this.tracerState=cc,this.onDrag1Start();break;case cc:this.tracerState=dc,this.onDrag2Start()}}onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var e=this.pointers.indexOf(t);if(-1!==e)switch(delete this.movedState[t.id],sc(this.pointers,e),this.tracerState){case cc:this.tracerState=uc,this.onDrag1End();break;case dc:this.tracerState=cc,this.onDrag2End(),this.onDrag1Start()}}}onPointerMove(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),i=-1!==this.pointers.indexOf(t);if(!i&&e);else if(i&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case cc:this.onDrag1();break;case dc:this.onDrag2()}}}dragCancel(){return this.tracerState===dc&&this.onDrag2End(),this.pointers.length=0,zt(this.movedState),this.tracerState=uc,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==dc)return 0;var t=this.pointers[0],e=this.pointers[1];return oc(t.x,t.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==dc)return 0;var t=this.pointers[0],e=this.pointers[1];return ac(t.x,t.y,e.x,e.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,i=t.prevPosition;lc.x=e.x-i.x,lc.y=e.y-i.y}else lc.x=0,lc.y=0;return lc}get centerX(){if(this.tracerState!==dc)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}get centerY(){if(this.tracerState!==dc)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}get prevCenterX(){if(this.tracerState!==dc)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}get prevCenterY(){if(this.tracerState!==dc)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=fc,this}}Object.assign(hc.prototype,On);var lc={};const uc=0,cc=1,dc=2,fc="IDLE",pc=hc,gc=Phaser.Utils.Objects.GetValue,vc="IDLE",mc="BEGIN",yc="RECOGNIZED",xc=Phaser.Math.RotateAround,bc=function(t,e,i,r){return xc(t,e,i,r),t.rotation+=r,t};var wc={};const Tc=Phaser.Utils.Objects.GetValue,Sc=Phaser.Math.Angle.WrapDegrees,Ec=Phaser.Math.Angle.ShortestBetween,Cc=Phaser.Math.RadToDeg,_c=Phaser.Math.DegToRad;class Ac extends pc{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.prevAngle=void 0,i.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){i.emit("rotatestart",i)},exit:function(){i.emit("rotateend",i)}}},init:function(){this.state=Pc},eventEmitter:!1};this.setRecongizedStateObject(new Ru(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Tc(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Sc(Cc(this.angleBetween)),this.state=kc,0===this.dragThreshold&&(this.state=Oc)}onDrag2End(){this.state=Pc}onDrag2(){switch(this.state){case kc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Sc(Cc(this.angleBetween));this.angle=Ec(this.prevAngle,t),this.prevAngle=t,this.state=Oc}break;case Oc:t=Sc(Cc(this.angleBetween)),this.angle=Ec(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this)}}get isRotated(){return this.state===Oc}get rotation(){return _c(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var Mc={spinObject:function(t,e){if(!this.isRotation)return this;void 0===e&&(e=this.pointers[0].camera);var i=this.movementCenterX,r=this.movementCenterY;e.getWorldPoint(this.centerX,this.centerY,wc);var n=wc.x,s=wc.y,o=this.rotation;if(Array.isArray(t))for(var a=t,h=0,l=a.length;h<l;h++)(t=a[h]).x+=i,t.y+=r,bc(t,n,s,o);else t.x+=i,t.y+=r,bc(t,n,s,o);return this}};Object.assign(Ac.prototype,Mc);const Pc="IDLE",kc="BEGIN",Oc="RECOGNIZED",Rc=Ac,Lc=class extends ku{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.stop(),i.tapsCount=0,i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.start(),i.tapsCount=0,i.emit("tappingstart",i,i.gameObject,i.lastPointer)}},RECOGNIZED:{enter:function(){i.start(),i.emit("tap",i,i.gameObject,i.lastPointer),i.emit(`${i.tapsCount}tap`,i,i.gameObject,i.lastPointer)}}},init:function(){this.state=Fu},eventEmitter:!1};this.setRecongizedStateObject(new Ru(r))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Lu(t,"time",250)),this.setTapInterval(Lu(t,"tapInterval",200)),this.setDragThreshold(Lu(t,"threshold",9)),this.setTapOffset(Lu(t,"tapOffset",10));var e=Lu(t,"taps",void 0);return void 0!==e?this.setTaps(e):(this.setMaxTaps(Lu(t,"maxTaps",void 0)),this.setMinTaps(Lu(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Fu:case Bu:this.state=Du;break;case Du:var t=this.lastPointer;Iu(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=Bu,this.state=Du)}}onDragEnd(){this.state===Du&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=Bu))}onDrag(){this.state!==Fu&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Fu)}preUpdate(t,e){if(this.isRunning&&this.enable&&this.state===Du){var i=this.lastPointer;i.isDown?t-i.downTime>this.holdTime&&(this.state=Fu):t-i.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=Bu:this.state=Fu)}}postUpdate(t,e){this.isRunning&&this.enable&&this.state===Bu&&(this.state=Fu)}get isTapped(){return this.state===Bu}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,e){return void 0===e&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}},Ic=Phaser.Utils.Objects.GetValue,Fc=function(t){var e=Ic(t,"tap",void 0);if(!1!==e){var i=this._childrenInteractive;this._tap=new Lc(this,e),this._tap.on("tap",(function(t,e,r){Tu(i.eventEmitter,`${i.eventNamePrefix}${t.tapsCount}tap`,i.targetSizers,t.x,t.y,r)}),this)}},Dc=class extends ku{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.x=0,i.y=0,i.worldX=0,i.worldY=0},exit:function(){var t=i.lastPointer;i.x=t.x,i.y=t.y,i.worldX=t.worldX,i.worldY=t.worldY}},BEGIN:{enter:function(){i.start()},exit:function(){i.stop()}},RECOGNIZED:{enter:function(){i.emit("pressstart",i,i.gameObject,i.lastPointer)},exit:function(){i.emit("pressend",i,i.gameObject,i.lastPointer)}}},init:function(){this.state=zu},eventEmitter:!1};this.setRecongizedStateObject(new Ru(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Nu(t,"threshold",9)),this.setHoldTime(Nu(t,"time",251)),this}onDragStart(){this.state=Uu,0===this.holdTime&&(this.state=Yu)}onDragEnd(){this.state=zu}onDrag(){this.state!==zu&&this.pointer.getDistance()>this.dragThreshold&&(this.state=zu)}preUpdate(t,e){this.isRunning&&this.enable&&this.state===Uu&&t-this.pointer.downTime>=this.holdTime&&(this.state=Yu)}get isPressed(){return this.state===Yu}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}},Bc=Phaser.Utils.Objects.GetValue,Nc=function(t){var e=Bc(t,"press",void 0);if(!1!==e){var i=this._childrenInteractive;this._press=new Dc(this,e),this._press.on("pressstart",(function(t,e,r){Tu(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,t.x,t.y,r)}),this).on("pressend",(function(t,e,r){Tu(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,t.x,t.y,r)}),this)}},zc=rc,Uc=Phaser.Utils.Objects.GetValue,Yc=function(t){var e=Uc(t,"swipe",void 0);if(!1!==e){void 0===e&&(e={}),e.hasOwnProperty("dir")||(e.dir="4dir");var i=this._childrenInteractive;this._swipe=new zc(this,e),this._swipe.on("swipe",(function(t,e,r){var n=t.left?"left":t.right?"right":t.up?"up":"down";Tu(i.eventEmitter,`${i.eventNamePrefix}swipe${n}`,i.targetSizers,t.x,t.y,r)}),this)}},Xc=Phaser.Utils.Objects.GetValue,Gc=function(t,e){return t.setInteractive(),t._childrenInteractive={targetSizers:Xc(e,"targets",[t]),eventEmitter:Xc(e,"eventEmitter",t),eventNamePrefix:Xc(e,"inputEventPrefix","child.")},Eu.call(t,e),Mu.call(t,e),Fc.call(t,e),Nc.call(t,e),Yc.call(t,e),t};var Wc={getSizerConfig:bh,getChildPrevState:function(t){var e=bh(t);return e.hasOwnProperty("prevState")||(e.prevState={}),e.prevState},pushIntoBounds:function(t){return void 0===t&&(t=Th(this.scene)),this.left=Math.max(this.left,t.left),this.right=Math.min(this.right,t.right),this.top=Math.max(this.top,t.top),this.bottom=Math.min(this.bottom,t.bottom),this},drawBounds:function(t,e){var i,r,n,s,o=t.scene;if("number"==typeof e)i=e;else{i=$h(e,"color",16777215);var a=$h(e,"name",!1);a&&(r=$h(a,"createTextCallback",tl),n=$h(a,"createTextCallbackScope",void 0),"string"==typeof(s=$h(a,"align","left-top"))&&(s=Eh[s]))}if(r&&!t.children){t.children=new Qh(o),t.once("destroy",(function(t,e){t.children.destroy(!e),t.children=void 0}));var h=t.clear.bind(t);t.clear=function(){h(),t.children.clear(!1,!0)}}for(var l,u,c=this.getAllShownChildren([this]),d=0,f=c.length;d<f;d++)(l=c[d]).getBounds&&(i&&t.lineStyle(1,i).strokeRectShape(l.getBounds(el)),l.name&&r&&(u=n?r.call(n,o):r(o))&&(u.setText(l.name),t.children.add(u),Jh(u,el.x,el.y,el.width,el.height,s)));return this},resolveWidth:cl,resolveChildrenWidth:function(t){var e,i;for(var r in this.sizerChildren)(e=this.sizerChildren[r])&&e.isRexSizer&&!e.ignoreLayout&&(i=this.getExpandedChildWidth(e,t),i=e.resolveWidth(i),e.resolveChildrenWidth(i))},resolveHeight:dl,getChildWidth:function(t){return t.isRexSizer?Math.max(t.minWidth,t.childrenWidth):void 0!==t.minWidth?t.minWidth:Fh(t)},getChildHeight:function(t){return t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):void 0!==t.minHeight?t.minHeight:Dh(t)},getExpandedChildWidth:function(t,e){return e},getExpandedChildHeight:function(t,e){return e},getChildrenWidth:function(){return 0},getChildrenHeight:function(){return 0},addChildrenMap:hl,addElement:hl,getElement:function(t,e){if("string"==typeof t&&(t=t.split(".")),0!==t.length){var i=t.shift(),r=null;if("#"===i.charAt(0))i=i.substring(1),r=this.getByName(i,e);else if(-1===i.indexOf("["))this.childrenMap&&(r=this.childrenMap[i]);else{var n=i.match(ll);if(null!=n&&this.childrenMap){var s=this.childrenMap[n[1]];s&&(r=s[n[2]])}}return 0===t.length?r:r&&r.childrenMap?r.getElement(t):null}},getAllChildrenSizers:function(t){void 0===t&&(t=[]);for(var e=t.length,i=this.getChildrenSizers(t),r=t.length,n=e;n<r;n++)i[n].getAllChildrenSizers(t);return t},getChildrenSizers:function(t){return void 0===t&&(t=[]),t},preLayout:pl,layout:function(){return this.runLayout(),this},runLayout:function(t,e,i){if(this.ignoreLayout)return this;var r=!t;return r&&this.preLayout(),e=this.resolveWidth(e),r&&(this.resolveChildrenWidth(e),this.runWidthWrap(e)),i=this.resolveHeight(i),this.resize(e,i),this.sizerEventsEnable&&void 0===this.layoutedChildren&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},layoutChildren:function(){},runWidthWrap:gl,layoutBackgrounds:function(){if(void 0!==this.backgroundChildren)for(var t,e,i,r,n,s,o,a=this.backgroundChildren,h=this.left,l=this.top,u=this.width,c=this.height,d=0,f=a.length;d<f;d++)(e=(t=a[d]).rexSizer).hidden||(i=e.padding,fu.call(this,t),r=h+i.left,n=l+i.top,s=u-i.left-i.right,o=c-i.top-i.bottom,cu(t,s,o),pu.call(this,t,r,n,s,o,gu))},postLayout:function(t,e,i){return this._anchor&&this._anchor.updatePosition(),this},setAnchor:function(t){void 0===t&&(t={});var e=t.hasOwnProperty("width"),i=t.hasOwnProperty("height"),r=t.hasOwnProperty("onResizeCallback");return!e&&!i||r||(t.onResizeCallback=function(t,r,n){e&&n.setMinWidth(t),i&&n.setMinHeight(r),n.layout()}),void 0===this._anchor?this._anchor=new xl(this,t):this._anchor.resetFromJSON(t),this},isInTouching:function(t,e){return void 0===e&&(e=this),ou(e,t)},pointToChild:function(t,e,i,r,n){if(au(i)||(n=i,i=void 0,r=void 0),void 0===n&&(n=this.sizerChildren?this.sizerChildren:this.children),Cr(n)){for(var s,o=0,a=n.length;o<a;o++)if(s=n[o],lu(s,t,e,i,r))return s}else for(var h in n)if(s=n[h],lu(s,t,e,i,r))return s;return null},setDraggable:function(t,e){var i=typeof t;return"string"===i?t=this.getElement(t):void 0!==t&&"object"==i||(e=t,t=this),void 0===e&&(e=!0),t.input&&t.input.hasOwnProperty("draggable")?t.input.draggable=e:e&&(t.setInteractive(),t.scene.input.setDraggable(t),t.on("drag",(function(e,i,r){var n=this.getTopmostSizer();n.x+=i-t.x,n.y+=r-t.y}),this)),this},setChildrenInteractive:function(t){return Gc(this,t),this},broadcastEvent:function(){for(var t=this.getAllChildren([this]),e=0,i=t.length;e<i;e++){var r=t[e];r.emit.apply(r,arguments)}return this}};Object.assign(Wc,ul,ol,al,uu,Pl,Ul,$l,bu,ru,fl);const Vc=Wc,jc=Phaser.Utils.Objects.GetValue;class Hc extends Ir{constructor(t,e,i,r,n,s){super(t,e,i,2,2),this.isRexSizer=!0,this.setMinSize(r,n),this.setName(jc(s,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.layoutedChildren=void 0;var o=jc(s,"anchor",void 0);o&&this.setAnchor(o),this.setInnerPadding(jc(s,"space",0)),this.setDraggable(jc(s,"draggable",!1)),this.setSizerEventsEnable(jc(s,"sizerEvents",!1)),this.setDirty(!0)}destroy(t){if(this.scene){if(t)for(var e=this.getAllChildrenSizers([this]),i=0,r=e.length;i<r;i++)e[i].sizerEventsEnable=!1;super.destroy(t),this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,e){return this.setMinWidth(t).setMinHeight(e),this}setMinWidth(t){return null==t&&(t=0),this.minWidth=t,this}setMinHeight(t){return null==t&&(t=0),this.minHeight=t,this}setDirty(t){return void 0===t&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return void 0===t&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return void 0===this._childrenWidth&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return void 0===this._childrenHeight&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Fh(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Fh(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Fh(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-Dh(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+Dh(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+Dh(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(Hc.prototype,Vc);const qc=Hc,Kc=function(t,e){t.width<t.childrenWidth&&console.warn(`Layout width error: Parent=${e.constructor.name}, Child=${t.constructor.name}`),t.height<t.childrenHeight&&console.warn(`Layout height error: Parent=${e.constructor.name}, Child=${t.constructor.name}`)},Zc=Phaser.Utils.Objects.IsPlainObject,Jc=Phaser.Utils.Objects.GetValue,$c=Phaser.Display.Align.CENTER,Qc=Phaser.Utils.String.UUID,td={add:function(t,e,i,r,n,s,o,a,h){sl.call(this,t),Zc(e)&&(e=Jc(l=e,"key",void 0),i=Jc(l,"align",$c),a=Jc(l,"offsetX",0),h=Jc(l,"offsetY",0),r=Jc(l,"padding",0),n=Jc(l,"expand",!0),t.isRexSizer||(s=Jc(l,"minWidth",t._minWidth),o=Jc(l,"minHeight",t._minHeighted)));var l,u=void 0!==e;return u||(e=Qc()),"string"==typeof i&&(i=Eh[i]),void 0===i&&(i=$c),void 0===a&&(a=0),void 0===h&&(h=0),void 0===r&&(r=0),void 0===n&&(n=!0),t.isRexSizer||(void 0===s&&(s=t._minWidth),void 0===o&&(o=t._minHeight)),(l=this.getSizerConfig(t)).align=i,l.alignOffsetX=a,l.alignOffsetY=h,l.padding=rl(r),Zc(n)?(l.expandWidth=Jc(n,"width",!1),l.expandHeight=Jc(n,"height",!1)):(l.expandWidth=n,l.expandHeight=n),t.isRexSizer||(l.expandWidth?t.minWidth=void 0===s?Fh(t):s:t.minWidth=void 0,l.expandHeight?t.minHeight=void 0===o?Dh(t):o:t.minHeight=void 0),this.sizerChildren.hasOwnProperty(e)&&this.sizerChildren[e].destroy(),this.sizerChildren[e]=t,u&&this.addChildrenMap(e,t),this}},ed=Phaser.Utils.Array.Remove,id=Ir.prototype.remove,rd=function(t,e){return this.isBackground(t)&&ed(this.backgroundChildren,t),id.call(this,t,e),!e&&this.sizerEventsEnable&&(t.emit("sizer.remove",t,this),this.emit("remove",t,this)),this},nd=Ir.prototype.clear,sd=function(t){this.backgroundChildren&&(this.backgroundChildren.length=0);var e,i=!t&&this.sizerEventsEnable;if(i&&(e=this.getChildren([])),nd.call(this,t),i)for(var r,n=0,s=e.length;n<s;n++)(r=e[n]).emit("sizer.remove",r,this),this.emit("remove",r,this);return this},od={remove(t,e){var i;if("string"==typeof t){if(i=t,!(t=this.sizerChildren[i]))return this}else{if(this.getParentSizer(t)!==this)return this;i=this.childToKey(t)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),rd.call(this,t,e),this},removeAll(t){for(var e in this.sizerChildren)this.remove(e,t);return this},clear(t){for(var e in this.sizerChildren)delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e];return sd.call(this,t),this}};var ad={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;var t,e,i,r=0,n=this.sizerChildren;for(var s in n)e=(t=n[s]).rexSizer.padding,i=this.getChildWidth(t)+e.left+e.right,r=Math.max(i,r);return r+this.space.left+this.space.right},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;var t,e,i,r=0,n=this.sizerChildren;for(var s in n)i=(t=n[s]).isRexSizer?Math.max(t.minHeight,t.childrenHeight):void 0!==t.minHeight?t.minHeight:Dh(t),i+=(e=t.rexSizer.padding).top+e.bottom,r=Math.max(i,r);return r+this.space.top+this.space.bottom},getExpandedChildWidth:function(t,e){var i;void 0===e&&(e=this.width);var r=t.rexSizer;if(r.expandWidth){var n=e-this.space.left-this.space.right,s=r.padding;i=n-s.left-s.right}return i},getExpandedChildHeight:function(t,e){var i;void 0===e&&(e=this.height);var r=t.rexSizer;if(r.expandHeight){var n=e-this.space.top-this.space.bottom,s=r.padding;i=n-s.top-s.bottom}return i},getChildrenSizers:function(t){void 0===t&&(t=[]);var e,i=this.sizerChildren;for(var r in i)(e=i[r]).isRexSizer&&t.push(e);return t},layoutChildren:function(){var t,e,i,r,n,s,o,a,h,l=this.innerLeft,u=this.innerTop,c=this.innerWidth,d=this.innerHeight,f=this.sizerChildren;for(var p in f)(t=f[p]).rexSizer.hidden||(i=(e=t.rexSizer).padding,fu.call(this,t),t.isRexSizer?(t.runLayout(this,this.getExpandedChildWidth(t),this.getExpandedChildHeight(t)),Kc(t,this)):(a=void 0,h=void 0,e.expandWidth&&(a=c-i.left-i.right),e.expandHeight&&(h=d-i.top-i.bottom),cu(t,a,h)),r=l+i.left,s=c-i.left-i.right,n=u+i.top,o=d-i.top-i.bottom,pu.call(this,t,r,n,s,o,e.align,e.alignOffsetX,e.alignOffsetY))}};Object.assign(ad,td,od);const hd=ad,ld=function(t,e){if(Array.isArray(t))return t.indexOf(e);for(var i in t)if(t[i]===e)return i;return null},ud=Phaser.Utils.Objects.IsPlainObject,cd=Phaser.Utils.Objects.GetValue;class dd extends qc{constructor(t,e,i,r,n,s){ud(e)?(e=cd(s=e,"x",0),i=cd(s,"y",0),r=cd(s,"width",void 0),n=cd(s,"height",void 0)):ud(r)&&(r=cd(s=r,"width",void 0),n=cd(s,"height",void 0)),super(t,e,i,r,n,s),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if("string"!=typeof t)return ld(this.sizerChildren,t);var e=t;return this.sizerChildren.hasOwnPropery(e)?e:null}}Object.assign(dd.prototype,hd);const fd=dd;var pd=Phaser.Math.Distance.Between;const gd=function(t,e,i){var r=t.width/2;return pd(r,r,e,i)<=r},vd=Phaser.Math.Angle.Between,md=Phaser.Math.Angle.Normalize;var yd=function(t,e,i){if(this.enable&&t.isDown){var r=this.sizerChildren.knob;if(gd(r,e,i)){var n=r.width/2,s=r.startAngle,o=vd(n,n,e,i),a=r.anticlockwise?s-o:o-s,h=md(a)/(2*Math.PI);this.stopEaseValue(),0===this.easeValueDuration||Math.abs(this.value-h)<.1?this.value=h:this.easeValueTo(h)}}};const xd=function(){this.sizerChildren.knob.setInteractive().on("pointerdown",yd,this).on("pointermove",yd,this)},bd=Phaser.Math.Angle.Between,wd=Phaser.Math.Angle.Wrap;var Td=function(t,e,i){if(this.enable&&!this.panPointer){var r=this.sizerChildren.knob;gd(r,e,i)&&Cd.call(this,t)}},Sd=function(t,e,i){if(this.enable&&t.isDown){var r=this.sizerChildren.knob;switch(this.panState){case Md:gd(r,e,i)&&Cd.call(this,t);break;case Pd:gd(r,e,i)?Ad.call(this):_d.call(this)}}},Ed=function(t,e,i){this.enable&&this.panPointer===t&&_d.call(this)},Cd=function(t){this.panPointer=t,this.panState=Pd},_d=function(){this.panPointer=void 0,this.panState=Md},Ad=function(){var t=this.panPointer.prevPosition,e=this.panPointer.position,i=this.sizerChildren.knob,r=bd(i.x,i.y,t.x,t.y),n=bd(i.x,i.y,e.x,e.y),s=i.anticlockwise?r-n:n-r,o=wd(s)/(2*Math.PI);this.stopEaseValue(),this.value+=o};const Md=0,Pd=1,kd=function(){this.sizerChildren.knob.setInteractive().on("pointerdown",Td,this).on("pointermove",Sd,this).on("pointerup",Ed,this),this.panPointer=void 0,this.panState=Md};var Od=function(t){return void 0===t&&(t=this.value),this.textFormatCallbackScope?this.textFormatCallback(t):this.textFormatCallback.call(this.textFormatCallbackScope,t)};const Rd={setTextFormatCallback:function(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this},getFormatText:Od,updateText:function(){var t=this.sizerChildren.text;return t&&(t.setText(Od.call(this)),t.layout&&t.layout()),this}},Ld=Phaser.Utils.Objects.GetValue,Id=Phaser.Math.Linear,Fd=Phaser.Math.Percent,Dd=Phaser.Math.Snap.To;class Bd extends fd{constructor(t,e){void 0===e&&(e={}),super(t,e),this.type="rexKnob",this.eventEmitter=Ld(e,"eventEmitter",this);var i=Ld(e,"background",void 0),r=Ld(e,"text",void 0);i&&this.addBackground(i),r&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Ld(e,"textFormatCallback",void 0),Ld(e,"textFormatCallbackScope",void 0)));var n=new xh(t,e);n.setDepth(Ld(e,"knobDepth",0)),n._value=-1,t.add.existing(n),this.add(n,"knob"),r&&this.add(r,"text","center",0,!1),this.addChildrenMap("background",i),this.addChildrenMap("knob",n),this.addChildrenMap("text",r);var s=Ld(e,"valuechangeCallback",null);if(null!==s){var o=Ld(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",s,o)}this.setEnable(Ld(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Ld(e,"easeValue.duration",0)).setEaseValueFunction(Ld(e,"easeValue.ease","Linear")),this.setGap(Ld(e,"gap",void 0)),this.setValue(Ld(e,"value",0),Ld(e,"min",void 0),Ld(e,"max",void 0));var a=Ld(e,"input",0);switch("string"==typeof a&&(a=Nd[a]),a){case 0:kd.call(this);break;case 1:xd.call(this)}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){void 0!==this.gap&&(t=Dd(t,this.gap));var e=this.value;this.sizerChildren.knob.value=t;var i=this.value;e!==i&&(this.updateText(),this.eventEmitter.emit("valuechange",i,e,this.eventEmitter))}setValue(t,e,i){return null==t||(void 0!==e&&(t=Fd(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=Fd(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=Id(t,e,i)),i}}const Nd={pan:0,drag:0,click:1,none:-1};Object.assign(Bd.prototype,Rd,Da);const zd=Bd;n.register("knob",(function(t){var e=new zd(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Knob",zd);const Ud={arc:ih,circle:rh,curve:class extends th{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),e=0,i=t.length;e<i;e++)this.pathData.push(t[e].x,t[e].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}},ellipse:class extends ih{constructor(t,e,i,r){super(t,e,i,r,0,360)}},line:class extends th{constructor(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),super(),this.setP0(t,e),this.setP1(i,r)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}},lines:class extends th{constructor(){super(),this.builder=new class{constructor(t){void 0===t&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(t){return this.iterations=t,this}startAt(t,e){return function(t,e,i){i.length=0,i.push(t,e)}(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}lineTo(t,e,i){return void 0===i&&(i=!1),i&&(t+=this.lastPointX,e+=this.lastPointY),E(t,e,this.pathData),this.lastPointX=t,this.lastPointY=e,this}verticalLineTo(t,e){return this.lineTo(t,this.lastPointY,e),this}horizontalLineTo(t,e){return this.lineTo(this.lastPointX,t,e),this}ellipticalArc(t,e,i,r,n,s,o){void 0===o&&(o=!1),_(t,e,i,r,n,s,o,this.iterations,this.pathData);var a=this.pathData.length;return this.lastPointX=this.pathData[a-2],this.lastPointY=this.pathData[a-1],this}arc(t,e,i,r,n,s){return this.ellipticalArc(t,e,i,i,r,n,s),this}quadraticBezierTo(t,e,i,r){return sh(t,e,i,r,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=r,this.lastCX=t,this.lastCY=e,this}smoothQuadraticBezierTo(t,e){var i=2*this.lastPointX-this.lastCX,r=2*this.lastPointY-this.lastCY;return this.quadraticBezierTo(i,r,t,e),this}cubicBezierCurveTo(t,e,i,r,n,s){return sh(t,e,i,r,n,s,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=s,this.lastCX=i,this.lastCY=r,this}smoothCubicBezierCurveTo(t,e,i,r){var n=2*this.lastPointX-this.lastCX,s=2*this.lastPointY-this.lastCY;return this.cubicBezierCurveTo(n,s,t,e,i,r),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(t,e,i){if(0===this.pathData.length)return this;!function(t,e,i,r){for(var n={x:0,y:0},s=0,o=r.length-1;s<o;s+=2)n.x=r[s],n.y=r[s+1],oh(n,t,e,i),r[s]=n.x,r[s+1]=n.y}(t,e,i=hh(i),this.pathData);var r=this.pathData.length;if(this.lastPointX=this.pathData[r-2],this.lastPointY=this.pathData[r-1],void 0!==this.lastCX){var n={x:this.lastCX,y:this.lastCY};PointRotateAround(n,t,e,i),this.lastCX=n.x,this.lastCY=n.y}return this}offset(t,e){return function(t,e,i){for(var r=0,n=i.length-1;r<n;r+=2)i[r]+=t,i[r+1]+=e}(t,e,this.pathData),this}toPoints(){return function(t,e){void 0===e&&(e=[]);for(var i=0,r=t.length-1;i<r;i+=2)e.push({x:t[i],y:t[i+1]});return e}(this.pathData)}toPolygon(t){return function(t,e){return void 0===e&&(e=new ah),e.setTo(t),e}(this.pathData,t)}draw(t,e,i){var r=this.toPoints();return e&&t.fillPoints(r,this.closePath,this.closePath),i&&t.strokePoints(r,this.closePath,this.closePath),this}}(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}startAt(t,e){return this.builder.startAt(t,e),this.dirty=!0,this}lineTo(t,e,i){return this.builder.lineTo(t,e,i),this.dirty=!0,this}verticalLineTo(t,e){return this.builder.verticalLineTo(t,e),this.dirty=!0,this}horizontalLineTo(t,e){return this.builder.horizontalLineTo(t,e),this.dirty=!0,this}ellipticalArc(t,e,i,r,n,s,o){return this.builder.ellipticalArc(t,e,i,r,n,s,o),this.dirty=!0,this}arc(t,e,i,r,n,s){return this.builder.arc(t,e,i,r,n,s),this.dirty=!0,this}quadraticBezierTo(t,e,i,r){return this.builder.quadraticBezierTo(t,e,i,r),this.dirty=!0,this}smoothQuadraticBezierTo(t,e){return this.builder.smoothQuadraticBezierTo(t,e),this.dirty=!0,this}cubicBezierCurveTo(t,e,i,r,n,s){return this.builder.cubicBezierCurveTo(t,e,i,r,n,s),this.dirty=!0,this}smoothCubicBezierCurveTo(t,e,i,r){return this.builder.smoothCubicBezierCurveTo(t,e,i,r),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,e,i){return this.builder.rotateAround(t,e,i),this.dirty=!0,this}offset(t,e){return this.builder.offset(t,e),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}},rectangle:class extends $a{constructor(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=i),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,e),this.setSize(i,r)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}updateData(){this.pathData.length=0;var t=this.x,e=t+this.width,i=this.y,r=i+this.height;return this.pathData.push(t,i),this.pathData.push(e,i),this.pathData.push(e,r),this.pathData.push(t,r),this.pathData.push(t,i),this}webglRender(t,e,i,r,n){if(this.isFilled){var s=t.fillTint,o=lh.getTintAppendFloatAlpha(this.fillColor,this.fillAlpha*i);s.TL=o,s.TR=o,s.BL=o,s.BR=o,t.batchFillRect(-r+this.x,-n+this.y,this.width,this.height)}this.isStroked&&k(t,this,i,r,n)}canvasRender(t,e,i){this.isFilled&&(B(t,this),t.fillRect(-e,-i,this.width,this.height)),this.isStroked&&(N(t,this),t.beginPath(),t.rect(-e,-i,this.width,this.height),t.stroke())}},triangle:class extends $a{constructor(t,e,i,r,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,e),this.setP1(i,r),this.setP2(n,s)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,e){return this.dirty=this.dirty||this.x2!==t||this.y2!==e,this.x2=t,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),this}webglRender(t,e,i,r,n){if(this.isFilled){var s=uh.getTintAppendFloatAlpha(this.fillColor,this.fillAlpha*i),o=this.x0-r,a=this.y0-n,h=this.x1-r,l=this.y1-n,u=this.x2-r,c=this.y2-n,d=e.getX(o,a),f=e.getY(o,a),p=e.getX(h,l),g=e.getY(h,l),v=e.getX(u,c),m=e.getY(u,c);t.batchTri(d,f,p,g,v,m,s,s,s)}this.isStroked&&k(t,this,i,r,n)}canvasRender(t,e,i){var r=this.x1-e,n=this.y1-i,s=this.x2-e,o=this.y2-i,a=this.x3-e,h=this.y3-i;t.beginPath(),t.moveTo(r,n),t.lineTo(s,o),t.lineTo(a,h),t.closePath(),this.isFilled&&(B(t,this),t.fill()),this.isStroked&&(N(t,this),t.stroke())}}},Yd=Phaser.Utils.Objects.GetValue,Xd=Phaser.Utils.Objects.IsPlainObject,Gd=function(){for(var t=this.getShapes(),e=0,i=t.length;e<i;e++)t[e].lineStyle().fillStyle()},Wd={createShape(t,e){var i=new(0,Ud[t]);return e&&i.setName(e),i},buildShapes(t){var e=Yd(t,"create",void 0);if(Xd(e)){var i=e;for(var r in i){var n=i[r];switch(typeof n){case"number":for(var s=0;s<n;s++)this.addShape(this.createShape(r));break;case"string":this.addShape(this.createShape(r,n));break;default:for(var o=n,a=(s=0,o.length);s<a;s++)this.addShape(this.createShape(r,o[s]))}}}else if(Array.isArray(e))for(s=0,a=(i=e).length;s<a;s++){var h=i[s];this.addShape(this.createShape(h.type,h.name))}else"function"==typeof e&&e.call(this);this.setUpdateShapesCallback(Yd(t,"update"))},setUpdateShapesCallback(t){return void 0===t&&(t=Gd),this.dirty=this.dirty||this.updateCallback!==t,this.updateCallback=t,this},updateShapes(){this.updateCallback.call(this)}},Vd=Phaser.Utils.Objects.GetValue,jd=Phaser.Utils.Objects.IsPlainObject;class Hd extends Za{constructor(t,e,i,r,n,s){jd(e)&&(e=Vd(s=e,"x",0),i=Vd(s,"y",0),r=Vd(s,"width",2),n=Vd(s,"height",2)),super(t,e,i,r,n),this.type=Vd(s,"type","rexCustomShapes"),this.buildShapes(s)}}Object.assign(Hd.prototype,Wd);const qd=Hd,Kd=qd;n.register("customShapes",(function(t,e,i,r,n){var s=new Kd(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.CustomShapes",Kd);const Zd=Phaser.Utils.Objects.GetValue,Jd=Phaser.Utils.Objects.IsPlainObject,$d=Phaser.Math.Clamp,Qd=Phaser.Math.Linear,tf=Phaser.Math.Percent;class ef extends qd{constructor(t,e,i,r,n,s){Jd(e)&&(e=Zd(s=e,"x",0),i=Zd(s,"y",0),r=Zd(s,"width",2),n=Zd(s,"height",2)),void 0===s&&(s={}),s.type||(s.type="rexCustomProgress"),super(t,e,i,r,n,s),this.eventEmitter=Zd(s,"eventEmitter",this);var o=Zd(s,"valuechangeCallback",null);if(null!==o){var a=Zd(s,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,a)}this.setEaseValuePropName("value").setEaseValueDuration(Zd(s,"easeValue.duration",0)).setEaseValueFunction(Zd(s,"easeValue.ease","Linear")),this.setValue(Zd(s,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(t){t=$d(t,0,1);var e=this._value,i=e!=t;this.dirty=this.dirty||i,this._value=t,i&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(t,e,i){return null==t||(void 0!==e&&(t=tf(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=tf(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=Qd(t,e,i)),i}}Object.assign(ef.prototype,Da);const rf=ef;n.register("customProgress",(function(t,e,i,r,n){var s=new rf(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.CustomProgress",rf);const nf={setTransitionStartCallback(t,e){return this.onStartCallback=t,this.onStartCallbackScope=e,this},setTransitionProgressCallback(t,e){return this.onProgressCallback=t,this.onProgressCallbackScope=e,this},setTransitionCompleteCallback(t,e){return this.onCompleteCallback=t,this.onCompleteCallbackScope=e,this}},sf=Phaser.Utils.Objects.IsPlainObject,of=Phaser.Utils.Objects.GetValue;var af={out:0,in:1};const hf={setTransitionDirection(t){return"string"==typeof t&&(t=af[t]),this.dir=t,this},setDuration(t){return this.duration=t,this},setEaseFunction(t){return this.easeFunction=t,this},setNextTexture(t,e){return this.nextImage.setTexture(t,e),this},transit(t,e){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),sf(t)){var i=t;t=of(i,"key",void 0),e=of(i,"frame",void 0),this.setDuration(of(i,"duration",this.duration)).setEaseFunction(of(i,"ease",this.easeFunction)).setTransitionDirection(of(i,"dir",this.dir));var r=of(i,"mask",void 0);r&&this.setMaskGameObject(r),this.setMaskEnable(!0===r);var n=of(i,"onStart",void 0),s=of(i,"onProgress",void 0),o=of(i,"onComplete",void 0);void 0===n&&void 0===s&&void 0===o||this.setTransitionStartCallback(n,of(i,"onStartScope",void 0)).setTransitionProgressCallback(s,of(i,"onProgressScope",void 0)).setTransitionCompleteCallback(o,of(i,"onCompleteScope",void 0))}return this.setNextTexture(t,e),this.start(),this},start(){return void 0===this.easeValueTask&&(this.easeValueTask=new Ia(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},lf=function(t,e,i,r,n){if(this.clear().fillStyle(16777215),1===this.shape){var s=Math.min(t,e)/2;this.fillCircle(-t*(r-.5),-e*(n-.5),s+i)}else this.fillRect(-t*r-i,-e*n-i,t+2*i,e+2*i)},uf=Phaser.GameObjects.Graphics,cf={rectangle:0,circle:1},df=class extends uf{constructor(t,e,i){void 0===e&&(e=0),"string"==typeof e&&(e=cf[e]),void 0===i&&(i=0),super(t.scene),this.parent=t,this.shape=e,this.padding=i,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,e){var i=this.parent;return void 0===t&&(t=i.x),void 0===e&&(e=i.y),super.setPosition(t,e),this}resize(t,e,i){var r=this.parent;return void 0===t&&(t=r.width),void 0===e&&(e=r.height),void 0===i&&(i=this.padding),this.widthSave===t&&this.heightSave===e&&this.paddingSave===i||(this.widthSave=t,this.heightSave=e,this.paddingSave=i,this.originXSave=r.originX,this.originYSave=r.originY,lf.call(this,t,e,i,r.originX,r.originY)),this}setOrigin(t,e){void 0===e&&(e=t);var i=this.parent;return void 0===t&&(t=i.originX),void 0===e&&(e=i.originY),this.originXSave===t&&this.originYSave===e||(this.originXSave=t,this.originYSave=e,lf.call(this,this.widthSave,this.heightSave,this.paddingSave,t,e)),this}},ff={setMaskGameObject(t){if(!t)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(!0===t&&this.maskGameObject instanceof df)return this;if(this.maskGameObject===t)return this;this.removeMaskGameObject()}return!0===t&&(t=new df(this)),this.maskGameObject=t,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(t,e,i){return void 0===e&&(e=!0),this.childrenMask||this.setMaskGameObject(!0),e?(t.setMask(this.childrenMask),i&&this.childrenMask.setInvertAlpha()):t.clearMask(),this},setCurrentImageMaskEnable(t,e){return this.setImageMaskEnable(this.currentImage,t,e),this},setNextImageMaskEnable(t,e){return this.setImageMaskEnable(this.nextImage,t,e),this},setCellImagesMaskEnable(t,e){for(var i=this.getCellImages(),r=0,n=i.length;r<n;r++)this.setImageMaskEnable(i[r],t,e);return this},setMaskEnable(t,e){return this.setImageMaskEnable(this.backImage,t,e),this.setImageMaskEnable(this.frontImage,t,e),this.setCellImagesMaskEnable(t,e),this}},pf=Phaser.Utils.Objects.GetValue,gf=Phaser.GameObjects.Image,vf=Phaser.Utils.Objects.IsPlainObject,mf=Phaser.Math.RotateAround,yf=function(t,e,i,r){vf(e)&&(e=pf(r=e,"columns",1),i=pf(r,"rows",1));for(var n=pf(r,"ImageClass",gf),s=pf(r,"originX",.5),o=pf(r,"originY",.5),a=pf(r,"add",!0),h=pf(r,"align",a),l=pf(r,"objectPool",void 0),u=t.scene,c=t.texture.key,d=function(t,e,i,r,n,s){var o,a;null==i&&(i="__BASE"),au(s)||(void 0===(a=s)&&(a=","),s="__BASE"===(o=i)?function(t,e){return`${t}${a}${e}`}:function(t,e){return`${o}_${t}${a}${e}`});for(var h,l=t.textures.get(e),u=l.frames[i],c=u.width/r,d=u.height/n,f=0,p=0,g=0;g<n;g++){f=0;for(var v=0;v<r;v++)h=s(v,g),l.add(h,0,f+u.cutX,p+u.cutY,c,d),f+=c;p+=d}return{getFrameNameCallback:s,cellWidth:c,cellHeight:d,columns:r,rows:n}}(u,c,t.frame.name,e,i),f=d.getFrameNameCallback,p=t.scaleX,g=t.scaleY,v=t.rotation,m=t.getTopLeft(),y=m.x,x=m.y,b=[],w=d.cellWidth*p,T=d.cellHeight*g,S=0;S<i;S++)for(var E=0;E<e;E++){var C,_=f(E,S);C=l&&l.length>0?l.pop().setTexture(c,_):new n(u,0,0,c,_),a&&u.add.existing(C);var A=y+w*E+s*w,M=x+T*S+o*T;h&&(C.setOrigin(s,o).setPosition(A,M).setScale(p,g).setRotation(v),mf(C,y,x,v)),b.push(C)}return b},xf={gridCutImage(t,e,i,r){void 0===r&&(r={}),r.objectPool=this.imagesPool;for(var n,s=yf(t,e,i,r),o=0,a=s.length;o<a;o++)(n=s[o]).setVisible(!0),this.add(n);return this.cellImages=s,this.setChildLocalVisible(t,!1),s},gridCutCurrentImage(t,e,i){return this.gridCutImage(this.currentImage,t,e,i)},gridCutNextImage(t,e,i){return this.gridCutImage(this.nextImage,t,e,i)},getCellImages(){return this.cellImages},freeCellImages(){if(0===this.cellImages.length)return this;for(var t,e,i=this.cellImages[0].texture,r=this.cellImages,n=0,s=r.length;n<s;n++)t=r[n],this.setChildLocalAlpha(t,1).setChildLocalScale(t,1).setChildLocalVisible(t,!1),t.clearMask(),e=t.frame.name,t.setTexture(),i.remove(e);return this.imagesPool.push(...r),r.length=0,this}};var bf={};Object.assign(bf,nf,hf,ff,xf);const wf=bf;var Tf=function(t,e,i,r){},Sf=function(t,e,i,r){t.setChildLocalAlpha(e,1-r).setChildLocalAlpha(i,r)},Ef=function(t,e,i,r){t.setChildLocalAlpha(e,1)};const Cf=Phaser.Utils.Objects.IsPlainObject,_f=Phaser.Utils.Objects.GetValue,Af=Phaser.Math.Clamp;class Mf extends Lr{constructor(t,e,i,r,n,s){Cf(e)?(e=_f(s=e,"x",0),i=_f(s,"y",0),r=_f(s,"key",void 0),n=_f(s,"frame",void 0)):Cf(n)&&(s=n,n=void 0);var o=_f(s,"back",void 0),a=_f(s,"front",void 0);o||(o=t.add.image(e,i,r,n)),a||(a=t.add.image(e,i,r,n)),super(t,e,i,_f(s,"width",a.width),_f(s,"height",a.height)),o.setVisible(!1),this.addMultiple([o,a]),this.type="rexTransitionImage",this.backImage=o,this.frontImage=a,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var h=_f(s,"onStart",void 0),l=_f(s,"onProgress",void 0),u=_f(s,"onComplete",void 0),c=_f(s,"dir",0);void 0===h&&void 0===l&&void 0===u&&(h=Tf,l=Sf,u=Ef,c=0),this.setTransitionStartCallback(h,_f(s,"onStartScope",void 0)).setTransitionProgressCallback(l,_f(s,"onProgressScope",void 0)).setTransitionCompleteCallback(u,_f(s,"onCompleteScope",void 0)).setTransitionDirection(c).setDuration(_f(s,"duration",1e3)).setEaseFunction(_f(s,"ease","Linear"));var d=_f(s,"mask",void 0);d&&this.setMaskGameObject(d),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){this.scene&&(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return 0===this.dir?this.frontImage:this.backImage}get nextImage(){return 0===this.dir?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(t){if(t=Af(t,0,1),this._t!==t){this._t=t;var e=this.currentImage,i=this.nextImage;if(0===t&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Pf(this.onStartCallback,this.onStartCallbackScope,this,e,i,t)),Pf(this.onProgressCallback,this.onProgressCallbackScope,this,e,i,t),1===t){Pf(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,i,t);var r=i.texture.key,n=i.frame.name;this.frontImage.setTexture(r,n),this.backImage.setTexture(r,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}1!==t||this.ignoreCompleteEvent||this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return!!this.easeValueTask&&this.easeValueTask.isRunning}setOrigin(t,e){return super.setOrigin(t,e),this.backImage.setOrigin(t,e),this.frontImage.setOrigin(t,e),this.maskGameObject&&this.maskGameObject.setOrigin(t,e),this}setTexture(t,e){return this.frontImage.setTexture(t,e),this.backImage.setTexture(t,e).setVisible(!1),this}}var Pf=function(t,e,i,r,n,s){t&&(e?t.call(e,i,r,n,s):t(i,r,n,s))};Object.assign(Mf.prototype,wf);const kf=Mf;n.register("transitionImage",(function(t,e,i,r,n){var s=new kf(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.TransitionImage",kf);const Of=Phaser.GameObjects.Rectangle,Rf=class extends Of{constructor(t,e,i){super(t,0,0,2,2,e,1),this.setAlpha(i),this.setScrollFactor(0),this.boot()}boot(){this.scene.events.on("prerender",this.resize,this)}destroy(t){this.scene&&(this.scene.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,e=t.scale.gameSize,i=t.cameras.main,r=e.width,n=e.height,s=1/i.zoom,o=r/2,a=n/2,h=r*s,l=n*s;this.x===o&&this.y===a||this.setPosition(o,a),this.width===h&&this.height===l||this.setSize(h,l).setOrigin(.5)}},Lf=Rf;n.register("fullWindowRectangle",(function(t,e){var i=new Lf(this.scene,t,e);return this.scene.add.existing(i),i})),(0,b.Z)(window,"RexPlugins.UI.FullWindowRectangle",Lf);const If=Phaser.Utils.Objects.GetValue;var Ff={default:0,fullWindow:1};const Df=class extends zo{constructor(t,e){super(t,{eventEmitter:!1}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setHitAreaMode(If(t,"hitAreaMode",0)),this.setEnable(If(t,"enable",!0)),this}boot(){this.parent.on("pointerdown",(function(t,e,i,r){r.stopPropagation()})).on("pointerup",(function(t,e,i,r){r.stopPropagation()})).on("pointermove",(function(t,e,i,r){r.stopPropagation()})).on("pointerover",(function(t,e,i,r){r.stopPropagation()})).on("pointerout",(function(t,e){e.stopPropagation()}))}setHitAreaMode(t){"string"==typeof t&&(t=Ff[t]);var e=this.parent;return e.input&&e.removeInteractive(),0===t?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return void 0===t&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}},Bf=Phaser.Utils.Objects.GetValue,Nf=class extends Rf{constructor(t,e){super(t,Bf(e,"color",0),Bf(e,"alpha",.8)),this.touchEventStop=new Df(this,{hitAreaMode:1})}},zf=Nf;n.register("cover",(function(t){var e=new zf(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Cover",zf);class Uf extends Fr{constructor(t,e,i,r,n,s){super(t,e,i,r,n),this.type="rexChart",this.chart=void 0,void 0!==s&&this.setChart(s)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,e){if(t===this.width&&e===this.height)return this;if(super.resize(t,e),this.chart){var i=this.chart;i.height=this.canvas.height,i.width=this.canvas.width,i.aspectRatio=i.height?i.width/i.height:null,i.update()}return this}}var Yf={setChart:function(t){return window.Chart?(this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,function(t,e){void 0===e&&(e={}),void 0===e.options&&(e.options={});var i=e.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var r=!1;void 0===i.animation?i.animation={}:!1===i.animation&&(r=!0,i.animation={});var n=i.animation;r&&(n.duration=0);var s=n.onProgress;n.onProgress=function(e){s&&s(e),t.needRedraw()};var o=n.onComplete;return n.onComplete=function(e){o&&o(e),t.needRedraw()},e}(this,t)),this):(console.error("Can not find chartjs! Load chartjs in preload stage.\nscene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js');"),this)},getChartDataset:function(t){if(void 0!==this.chart){if("string"!=typeof t)return this.chart.data.datasets[t];for(var e,i=this.chart.data.datasets,r=0,n=i.length;r<n;r++)if((e=i[r]).label===t)return e}},getChartData:function(t,e){var i=this.getChartDataset(t);if(void 0!==i){if("string"==typeof e&&-1===(e=this.chart.data.labels.indexOf(e)))return;return i.data[e]}},setChartData:function(t,e,i){if(void 0===this.chart)return this;var r=this.getChartDataset(t);return"string"==typeof e&&-1===(e=this.chart.data.labels.indexOf(e))||(r.data[e]=i),this},updateChart:function(){if(void 0===this.chart)return this;this.chart.update()}};Object.assign(Uf.prototype,Yf);const Xf=Uf;n.register("chart",(function(t,e,i,r,n){var s=new Xf(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.Chart",Xf);const Gf=Phaser.GameObjects.Zone,Wf=class extends Gf{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}},Vf=Phaser.Utils.Objects.IsPlainObject,jf=Phaser.Utils.Objects.GetValue,Hf=Phaser.Display.Align.CENTER,qf={min:0,full:-1};var Kf=function(t,e,i,r,n,s,o,a){sl.call(this,t);var h=typeof e;if(null===e)return this;if("number"===h);else if("string"===h)e=qf[e];else if(Vf(e)){var l;e=jf(l=e,"proportion",0),i=jf(l,"align",Hf),r=jf(l,"padding",0),n=jf(l,"expand",!1),s=jf(l,"key",void 0),o=jf(l,"index",void 0),t.isRexSizer||(a=0===this.orientation?jf(l,"minWidth",void 0):jf(l,"minHeight",void 0))}return"string"==typeof i&&(i=Eh[i]),void 0===e&&(e=0),void 0===i&&(i=Hf),void 0===r&&(r=0),void 0===n&&(n=!1),t.isRexSizer||void 0!==a||(a=0===this.orientation?t._minWidth:t._minHeight),(l=this.getSizerConfig(t)).proportion=e,l.align=i,l.padding=rl(r),l.expand=n,void 0===o||o>=this.sizerChildren.length?this.sizerChildren.push(t):this.sizerChildren.splice(o,0,t),!t.isRexSizer&&e>0&&(0===this.orientation?(t.minWidth=void 0===a?Fh(t):a,t.minHeight=void 0):(t.minWidth=void 0,t.minHeight=void 0===a?Dh(t):a)),void 0!==s&&this.addChildrenMap(s,t),this};const Zf={add:Kf,addSpace(t){return this.insertSpace(void 0,t),this},insertSpace(t,e){return void 0===e&&(e=1),Kf.call(this,new Wf(this.scene),{proportion:e,minWidth:0,minHeight:0,index:t}),this},insert(t,e,i,r,n,s,o){return Kf.call(this,e,i,r,n,s,o,t),this}},Jf=Phaser.Utils.Array.Remove,$f={remove(t,e){return this.getParentSizer(t)!==this||(Jf(this.sizerChildren,t),rd.call(this,t,e)),this},removeAll(t){for(var e=this.sizerChildren.length-1;e>=0;e--)this.remove(this.sizerChildren[e],t);return this},clear(t){return this.sizerChildren.length=0,sd.call(this,t),this}};var Qf={getChildrenWidth:function(t){if(this.rexSizer.hidden)return 0;void 0===t&&(t=!0);var e,i,r,n=0,s=this.sizerChildren;if(0===this.orientation)for(var o=0,a=s.length;o<a;o++)(e=s[o]).rexSizer.hidden||(r=0===e.rexSizer.proportion||t&&e.rexSizer.proportion>0?this.getChildWidth(e):0,r+=(i=e.rexSizer.padding).left+i.right,o>0&&(r+=this.space.item),n+=r);else for(o=0,a=s.length;o<a;o++)(e=s[o]).hasOwnProperty("rexSizer")&&(e.rexSizer.hidden||(i=e.rexSizer.padding,r=this.getChildWidth(e)+i.left+i.right,n=Math.max(r,n)));return n+this.space.left+this.space.right},getChildrenHeight:function(t){if(this.rexSizer.hidden)return 0;void 0===t&&(t=!0);var e,i,r,n=0,s=this.sizerChildren;if(0===this.orientation)for(var o=0,a=s.length;o<a;o++)(e=s[o]).rexSizer.hidden||(i=e.rexSizer.padding,r=this.getChildHeight(e)+i.top+i.bottom,n=Math.max(r,n));else for(o=0,a=s.length;o<a;o++)(e=s[o]).hasOwnProperty("rexSizer")&&(e.rexSizer.hidden||(i=e.rexSizer.padding,r=0===e.rexSizer.proportion||t&&e.rexSizer.proportion>0?this.getChildHeight(e):0,r+=i.top+i.bottom,o>0&&(r+=this.space.item),n+=r));return n+this.space.top+this.space.bottom},getExpandedChildWidth:function(t,e){var i;void 0===e&&(e=this.width);var r=t.rexSizer,n=r.padding;return 0===this.orientation?r.proportion>0&&this.proportionLength>0&&(i=r.proportion*this.proportionLength):r.expand&&(i=e-this.space.left-this.space.right-n.left-n.right),i},getExpandedChildHeight:function(t,e){var i;void 0===e&&(e=this.height);var r=t.rexSizer,n=r.padding;return 0===this.orientation?r.expand&&(i=e-this.space.top-this.space.bottom-n.top-n.bottom):r.proportion>0&&this.proportionLength>0&&(i=r.proportion*this.proportionLength),i},getChildrenSizers:function(t){void 0===t&&(t=[]);for(var e,i=this.sizerChildren,r=0,n=i.length;r<n;r++)(e=i[r]).isRexSizer&&t.push(e);return t},preLayout:function(){return this._childrenProportion=void 0,this.proportionLength=void 0,pl.call(this),this},layoutChildren:function(){for(var t,e,i,r,n,s,o,a,h,l=this.sizerChildren,u=this.innerLeft,c=this.innerTop,d=this.innerWidth,f=this.innerHeight,p=u,g=c,v=0,m=l.length;v<m;v++)(t=this.rtl?l[m-v-1]:l[v]).rexSizer.hidden||(i=(e=t.rexSizer).padding,fu.call(this,t),t.isRexSpace?(a=0,h=0):(a=this.getExpandedChildWidth(t),h=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,a,h),Kc(t,this)):cu(t,a,h),void 0===a&&(a=Fh(t)),void 0===h&&(h=Dh(t)),0===this.orientation?(r=p+i.left,s=0===e.proportion||0===this.proportionLength?a:e.proportion*this.proportionLength,n=g+i.top,o=f-i.top-i.bottom):(r=p+i.left,s=d-i.left-i.right,n=g+i.top,o=0===e.proportion||0===this.proportionLength?h:e.proportion*this.proportionLength),pu.call(this,t,r,n,s,o,e.align),0===this.orientation?p+=s+i.left+i.right+this.space.item:g+=o+i.top+i.bottom+this.space.item)},resolveWidth:function(t){if(t=cl.call(this,t),void 0===this.proportionLength&&0===this.orientation){var e=t-this.childrenWidth;e>0?(e=t-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t},resolveHeight:function(t,e){if(e=dl.call(this,t,e),void 0===this.proportionLength&&1===this.orientation){var i=e-this.childrenHeight;i>0?(i=e-this.getChildrenHeight(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return e}};Object.assign(Qf,Zf,$f);const tp=Qf,ep=function(){for(var t,e,i=0,r=this.sizerChildren,n=0,s=r.length;n<s;n++)(t=r[n]).rexSizer.hidden||(e=t.rexSizer.proportion)>0&&(i+=e);return i};var ip={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1};const rp=function(t){return"string"==typeof t&&(t=ip[t]),t},np=Phaser.Utils.Objects.IsPlainObject,sp=Phaser.Utils.Objects.GetValue;class op extends qc{constructor(t,e,i,r,n,s,o){np(e)?(e=sp(o=e,"x",0),i=sp(o,"y",0),r=sp(o,"width",void 0),n=sp(o,"height",void 0),s=sp(o,"orientation",0)):np(r)?(r=sp(o=r,"width",void 0),n=sp(o,"height",void 0),s=sp(o,"orientation",0)):np(s)&&(s=sp(o=s,"orientation",0)),void 0===s&&(s=0),super(t,e,i,r,n,o),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(s),this.setItemSpacing(sp(o,"space.item",0)),this.setRTL(sp(o,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=rp(t),this}setItemSpacing(t){return this.space.item=t,this}setRTL(t){return void 0===t&&(t=!0),this.rtl=t,this}get childrenProportion(){return void 0===this._childrenProportion&&(this._childrenProportion=ep.call(this)),this._childrenProportion}}Object.assign(op.prototype,tp);const ap=op;n.register("sizer",(function(t,e,i,r,n,s){var o=new ap(this.scene,t,e,i,r,n,s);return this.scene.add.existing(o),o})),(0,b.Z)(window,"RexPlugins.UI.Sizer",ap);var hp=function(t,e){return t+e};const lp=function(){return Array.prototype.reduce.call(arguments,hp,0)},up=Phaser.Utils.Objects.IsPlainObject,cp=Phaser.Utils.Objects.GetValue,dp=Phaser.Display.Align.CENTER,fp={add:function(t,e,i,r,n,s,o){sl.call(this,t),up(e)&&(e=cp(a=e,"column",void 0),i=cp(a,"row",void 0),r=cp(a,"align",dp),n=cp(a,"padding",0),s=cp(a,"expand",!1),o=cp(a,"key",void 0));var a,h=function(t,e,i,r,n){if("number"==typeof t||"number"==typeof e){if(void 0===t){for(var s=0;s<r;s++)if(!i[o=e*r+s])return o}else if(void 0===e){for(s=0;s<n;s++)if(!i[o=s*r+t])return o}else if(!i[o=e*r+t])return o}else if(!0===e){var o;for(s=0;s<r;s++)for(var a=0;a<n;a++)if(!i[o=a*r+s])return o}else{s=0;for(var h=i.length;s<h;s++)if(!i[s])return s}return null}(e,i,this.sizerChildren,this.columnCount,this.rowCount);return null===h||("string"==typeof r&&(r=Eh[r]),void 0===r&&(r=dp),void 0===n&&(n=0),void 0===s&&(s=!0),(a=this.getSizerConfig(t)).align=r,a.padding=rl(n),a.expand=s,this.sizerChildren[h]=t,void 0!==o&&this.addChildrenMap(o,t)),this}},pp=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length-1);for(var n=i;n<=r;n++)t[n]=e;return t},gp={remove(t,e){if(this.getParentSizer(t)!==this)return this;var i=this.sizerChildren.indexOf(t);return-1!==i&&(this.sizerChildren[i]=null),rd.call(this,t,e),this},removeAt(t,e,i){var r=this.getChildAt(t,e);return r&&this.remove(r,i),this},removeAll(t){for(var e=this.sizerChildren.length-1;e>=0;e--){var i=this.sizerChildren[e];i&&this.remove(i,t)}return this},clear(t){return pp(this.sizerChildren,null),sd.call(this,t),this}},vp=Phaser.Utils.Objects.GetValue;var mp={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;for(var t,e,i,r,n=0,s=this.sizerChildren,o=0;o<this.columnCount;o++){if(t=0,0===this.columnProportions[o]){for(var a=0;a<this.rowCount;a++)(e=s[a*this.columnCount+o])&&(e.rexSizer.hidden||(i=e.rexSizer.padding,r=this.getChildWidth(e)+i.left+i.right,t=Math.max(t,r)));n+=t}this.columnWidth[o]=t}return n+lp(this.space.left,...this.space.column,this.space.right)},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;for(var t,e,i,r,n=0,s=this.sizerChildren,o=0;o<this.rowCount;o++){if(t=0,0===this.rowProportions[o]){for(var a=0;a<this.columnCount;a++)(e=s[o*this.columnCount+a])&&(e.rexSizer.hidden||(r=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:Dh(e),r+=(i=e.rexSizer.padding).top+i.bottom,t=Math.max(t,r)));n+=t}this.rowHeight[o]=t}return n+lp(this.space.top,...this.space.row,this.space.bottom)},getExpandedChildWidth:function(t,e){var i,r=t.rexSizer;if(r.expand){var n=r.padding;i=e-n.left-n.right}return i},getExpandedChildHeight:function(t,e){var i,r=t.rexSizer;if(r.expand){var n=r.padding;i=e-n.top-n.bottom}return i},getChildrenSizers:function(t){void 0===t&&(t=[]);for(var e,i=this.sizerChildren,r=0,n=i.length;r<n;r++)(e=i[r])&&e.isRexSizer&&t.push(e);return t},preLayout:function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,pl.call(this),this},layoutChildren:function(){for(var t,e,i,r,n,s,o,a,h,l,u,c=this.innerLeft,d=c,f=this.innerTop,p=this.space.column,g=this.space.row,v=0;v<this.rowCount;v++){u=this.getRowHeight(v),d=c;for(var m=0;m<this.columnCount;m++)l=this.getColumnWidth(m),(t=this.getChildAt(m,v))&&!t.rexSizer.hidden?(fu.call(this,t),a=this.getExpandedChildWidth(t,l),h=this.getExpandedChildHeight(t,u),t.isRexSizer?(t.runLayout(this,a,h),Kc(t,this)):cu(t,a,h),r=d+(i=(e=t.rexSizer).padding).left,s=l-i.left-i.right,n=f+i.top,o=u-i.top-i.bottom,pu.call(this,t,r,n,s,o,e.align),d+=l+p[m]):d+=l+p[m];f+=u+g[v]}},resolveWidth:function(t){if(t=cl.call(this,t),void 0===this.proportionWidthLength){var e=this.totalColumnProportions;if(e>0){var i=t-this.childrenWidth;i>=0&&(this.proportionWidthLength=i/e)}else this.proportionWidthLength=0}return t},resolveHeight:function(t,e){if(e=dl.call(this,t,e),void 0===this.proportionHeightLength){var i=this.totalRowProportions;if(i>0){var r=e-this.childrenHeight;r>=0&&(this.proportionHeightLength=r/i)}else this.proportionHeightLength=0}return e},resolveChildrenWidth:function(t){var e,i,r;for(var n in this.sizerChildren)(e=this.sizerChildren[n])&&e.isRexSizer&&!e.ignoreLayout&&(r=this.getColumnWidth(parseInt(n)%this.columnCount),i=this.getExpandedChildWidth(e,r),i=e.resolveWidth(i),e.resolveChildrenWidth(i))},runWidthWrap:function(t){var e,i,r;for(var n in this.sizerChildren)!(e=this.sizerChildren[n])||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap||(r=this.getColumnWidth(parseInt(n)%this.columnCount),i=this.getExpandedChildWidth(e,r),e.isRexSizer&&(i=e.resolveWidth(i)),e.runWidthWrap(i));return this},resetGrid:function(t,e,i,r,n){if(void 0===i&&(i=0),void 0===r&&(r=0),this.columnCount=t,this.rowCount=e,this.gridCount=t*e,void 0===this.sizerChildren?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=t*e,pp(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=t,"number"==typeof i)pp(this.columnProportions,i);else for(var s=0;s<t;s++)this.columnProportions[s]=i[s]||0;if(this.rowProportions=[],this.rowProportions.length=e,"number"==typeof r)pp(this.rowProportions,r);else for(s=0;s<e;s++)this.rowProportions[s]=r[s]||0;this.columnWidth=[],this.columnWidth.length=t,this.rowHeight=[],this.rowHeight.length=e,this.space.column=[],this.space.column.length=t-1;var o=vp(n,"column",0);if("number"==typeof o)pp(this.space.column,o);else{s=0;for(var a=this.space.column.length;s<a;s++)this.space.column[s]=o[s]||0}this.space.row=[],this.space.row.length=e-1;var h=vp(n,"row",0);if("number"==typeof h)pp(this.space.row,h);else for(s=0,a=this.space.row.length;s<a;s++)this.space.row[s]=h[s]||0;return this}};Object.assign(mp,fp,gp);const yp=mp,xp=function(){for(var t,e=0,i=0;i<this.columnCount;i++)(t=this.columnProportions[i])>0&&(e+=t);return e},bp=function(){for(var t,e=0,i=0;i<this.rowCount;i++)(t=this.rowProportions[i])>0&&(e+=t);return e},wp=Phaser.Utils.Objects.IsPlainObject,Tp=Phaser.Utils.Objects.GetValue;class Sp extends qc{constructor(t,e,i,r,n,s,o,a,h,l){wp(e)?(e=Tp(l=e,"x",0),i=Tp(l,"y",0),r=Tp(l,"width",void 0),n=Tp(l,"height",void 0),s=Tp(l,"column",0),o=Tp(l,"row",0),a=Tp(l,"columnProportions",0),h=Tp(l,"rowProportions",0)):wp(r)?(r=Tp(l=r,"width",void 0),n=Tp(l,"height",void 0),s=Tp(l,"column",0),o=Tp(l,"row",0),a=Tp(l,"columnProportions",0),h=Tp(l,"rowProportions",0)):wp(s)?(s=Tp(l=s,"column",0),o=Tp(l,"row",0),a=Tp(l,"columnProportions",0),h=Tp(l,"rowProportions",0)):wp(a)&&(a=Tp(l=a,"columnProportions",0),h=Tp(l,"rowProportions",0)),super(t,e,i,r,n,l),this.type="rexGridSizer",this.resetGrid(s,o,a,h,Tp(l,"space",void 0)),this.addChildrenMap("items",this.sizerChildren);var u=Tp(l,"createCellContainerCallback");if(u){i=0;for(var c=this.rowCount;i<c;i++){e=0;for(var d=this.columnCount;e<d;e++){var f={column:e,row:i},p=u(t,e,i,f);p&&this.add(p,f)}}}}destroy(t){this.scene&&(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setColumnProportion(t,e){return t>=this.columnProportions.length||(this.columnProportions[t]=e),this}setRowProportion(t,e){return t>=this.rowProportions.length||(this.rowProportions[t]=e),this}get totalColumnProportions(){return void 0===this._totalColumnProportions&&(this._totalColumnProportions=xp.call(this)),this._totalColumnProportions}get totalRowProportions(){return void 0===this._totalRowProportions&&(this._totalRowProportions=bp.call(this)),this._totalRowProportions}getChildAt(t,e){return this.sizerChildren[e*this.columnCount+t]}childToGridIndex(t,e){if(!t)return null;var i=this.sizerChildren.indexOf(t);return-1===i?null:(void 0===e&&(e={}),e.x=i%this.columnCount,e.y=Math.floor(i/this.columnCount),e)}getColumnWidth(t){var e=this.columnProportions[t];return 0===e?this.columnWidth[t]:e*this.proportionWidthLength}getRowHeight(t){var e=this.rowProportions[t];return 0===e?this.rowHeight[t]:e*this.proportionHeightLength}}Object.assign(Sp.prototype,yp);const Ep=Sp;n.register("gridSizer",(function(t,e,i,r,n,s,o,a,h){var l=new Ep(this.scene,t,e,i,r,n,s,o,a,h);return this.scene.add.existing(l),l})),(0,b.Z)(window,"RexPlugins.UI.GridSizer",Ep);var Cp=function(t,e,i,r){return e/t<=i?e/(r-1):0};var _p=function(t){var e=t.rexSizer.padding;return Fh(t)+e.left+e.right},Ap=function(t){var e=t.rexSizer.padding;return Dh(t)+e.top+e.bottom};const Mp=function(t,e){void 0===e?e={lines:[],width:0,height:0}:(e.lines.length=0,e.width=0,e.height=0);for(var i,r,n,s,o,a=this.sizerChildren,h=0,l=e.lines,u=0,c=a.length;u<c;u++){if("\n"===(i=a[u]))i=void 0,r=0,o=!0;else{if(i.rexSizer.hidden)continue;i.isRexSizer&&i.layout(),o=h<(r=_p(i))}o&&(s&&(s.width=t-(h+this.space.item),e.width=Math.max(e.width,s.width),e.height+=s.height+this.space.line),s={children:[],height:0},l.push(s),h=t),h-=r+this.space.item,i&&(s.children.push(i),n=Ap(i),s.height=Math.max(s.height,n))}return s&&(s.width=t-(h+this.space.item),e.width=Math.max(e.width,s.width),e.height+=s.height),e},Pp=Phaser.Utils.Objects.IsPlainObject,kp=Phaser.Utils.Objects.GetValue,Op=Phaser.Display.Align.CENTER;var Rp=function(t,e,i,r){return"\n"===t?(this.addNewLine(),this):(sl.call(this,t),Pp(e)&&(e=kp(n=e,"padding",0),i=kp(n,"key",void 0),r=kp(n,"index",void 0)),void 0===e&&(e=0),(n=this.getSizerConfig(t)).align=Op,n.padding=rl(e),void 0===r||r>=this.sizerChildren.length?this.sizerChildren.push(t):this.sizerChildren.splice(r,0,t),void 0!==i&&this.addChildrenMap(i,t),this);var n};const Lp={add(t,e,i){if(Cr(t))for(var r=t,n=0,s=r.length;n<s;n++)Rp.call(this,r[n],e);else Rp.call(this,t,e,i);return this},addNewLine(){return this.sizerChildren.push("\n"),this},insert(t,e,i,r){return Rp.call(this,e,i,r,t),this}},Ip=Phaser.Utils.Array.Remove,Fp={remove(t,e){return this.getParentSizer(t)!==this||(Ip(this.sizerChildren,t),rd.call(this,t,e)),this},removeAll(t){for(var e=this.sizerChildren.length-1;e>=0;e--)this.remove(this.sizerChildren[e],t);return this},clear(t){return this.sizerChildren.length=0,sd.call(this,t),this}};var Dp={getChildrenWidth:function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},getChildrenHeight:function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},getChildrenSizers:function(t){void 0===t&&(t=[]);for(var e,i=this.sizerChildren,r=0,n=i.length;r<n;r++)"\n"!==(e=i[r])&&e.isRexSizer&&t.push(e);return t},preLayout:function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,pl.call(this),this},layoutChildren:function(){for(var t,e,i,r,n,s,o,a,h,l,u=this.innerWidth,c=this.justifyPercentage,d=0,f=this.innerLeft,p=f,g=this.innerTop,v=this.widthWrapResult.lines,m=0,y=v.length;m<y;m++){switch(h=(a=v[m]).children,this.rtl&&h.reverse(),l=u-a.width,this.align){case 0:break;case 1:p+=l;break;case 2:p+=l/2;break;case 3:d=Cp(u,l,c,h.length);break;case 4:0===(d=Cp(u,l,c,h.length))&&(p+=l);break;case 5:0===(d=Cp(u,l,c,h.length))&&(p+=l/2)}for(var x=0,b=h.length;x<b;x++)(t=h[x]).rexSizer.hidden||(i=(e=t.rexSizer).padding,fu.call(this,t),r=p+i.left,x>0&&(r+=this.space.item),n=g+i.top,s=Fh(t),o=Dh(t),p=r+s+i.right+d,pu.call(this,t,r,n,s,o,e.align));p=f,g+=a.height+this.space.line}},runWidthWrap:function(t){var e=t-this.space.left-this.space.right;this.widthWrapResult=Mp.call(this,e,this.widthWrapResult),gl.call(this,t)}};Object.assign(Dp,Lp,Fp);const Bp=Dp,Np=function(t){void 0===t&&(t=this.sizerChildren);for(var e,i,r=0,n=0,s=t.length;n<s;n++)"\n"!==(e=t[n])&&(i=this.getChildWidth(e),r=Math.max(i,r));return r},zp=function(t){void 0===t&&(t=this.sizerChildren);for(var e,i,r=0,n=0,s=t.length;n<s;n++)"\n"!==(e=t[n])&&(i=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:Dh(e),r=Math.max(i,r));return r},Up=Phaser.Utils.Objects.IsPlainObject,Yp=Phaser.Utils.Objects.GetValue;class Xp extends qc{constructor(t,e,i,r,n,s){Up(e)?(e=Yp(s=e,"x",0),i=Yp(s,"y",0),r=Yp(s,"width",void 0),n=Yp(s,"height",void 0)):Up(r)&&(r=Yp(s=r,"width",void 0),n=Yp(s,"height",void 0)),super(t,e,i,r,n,s),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(Yp(s,"orientation",0)),this.setItemSpacing(Yp(s,"space.item",0)),this.setLineSpacing(Yp(s,"space.line",0)),this.setAlign(Yp(s,"align",0)),this.setJustifyPercentage(Yp(s,"justifyPercentage",.25)),this.setRTL(Yp(s,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=rp(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setAlign(t){return"string"==typeof t&&(t=Gp[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return void 0===t&&(t=!0),this.rtl=t,this}get maxChildWidth(){return void 0===this._maxChildWidth&&(this._maxChildWidth=Np.call(this)),this._maxChildWidth}get maxChildHeight(){return void 0===this._maxChildHeight&&(this._maxChildHeight=zp.call(this)),this._maxChildHeight}}const Gp={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Xp.prototype,Bp);const Wp=Xp;n.register("fixWidthSizer",(function(t,e,i,r,n){var s=new Wp(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.FixWidthSizer",Wp),n.register("overlapSizer",(function(t,e,i,r,n){var s=new fd(this.scene,t,e,i,r,n);return this.scene.add.existing(s),s})),(0,b.Z)(window,"RexPlugins.UI.OverlapSizer",fd),n.register("space",(function(){return new Wf(this.scene)})),(0,b.Z)(window,"RexPlugins.UI.Space",Wf);const Vp=function(t,e,i,r){var n=new df(e,i,r);if(t&&!t.isRexSizer){var s=n.createGeometryMask();t.setMask(s),this.once("destroy",(function(){t.setMask(),s.destroy()}))}return this.pin(n),n},jp=Phaser.Utils.Objects.GetValue,Hp=class extends ap{constructor(t,e){super(t,e),this.type="rexLabel";var i=jp(e,"background",void 0),r=jp(e,"icon",void 0),n=jp(e,"iconMask",void 0),s=jp(e,"text",void 0),o=jp(e,"action",void 0),a=jp(e,"actionMask",void 0),h=jp(e,"align",void 0),l=jp(e,"space.icon",0),u=jp(e,"space.text",0);if(i&&this.addBackground(i),"right"!==h&&"bottom"!==h&&"center"!==h||this.addSpace(),r&&(0===this.orientation?(s||o)&&(d={right:l}):(s||o)&&(d={bottom:l}),this.add(r,0,"center",d),n&&(n=Vp.call(this,r,r,1))),s){var c,d,f,p=jp(e,"expandTextWidth",!1),g=jp(e,"expandTextHeight",!1);0===this.orientation?(c=p?1:0,o&&(d={right:u}),f=g):(c=g?1:0,o&&(d={bottom:u}),f=p),this.add(s,c,"center",d,f)}o&&(this.add(o),a&&(a=Vp.call(this,o,o,1))),"center"===h&&this.addSpace(),this.addChildrenMap("background",i),this.addChildrenMap("icon",r),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",s),this.addChildrenMap("action",o),this.addChildrenMap("actionMask",a)}get text(){var t=this.childrenMap.text;return void 0===t?"":t.text}set text(t){var e=this.childrenMap.text;void 0!==e&&e.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,e){var i=this.childrenMap.icon;if(void 0!==i)return i.setTexture(t,e),this}get texture(){var t=this.childrenMap.icon;if(void 0!==t)return t.texture}get frame(){var t=this.childrenMap.icon;if(void 0!==t)return t.frame}runLayout(t,e,i){if(this.ignoreLayout)return this;super.runLayout(t,e,i);var r=this.childrenMap.iconMask;r&&(r.setPosition(),this.resetChildPositionState(r));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(t,e){super.resize(t,e);var i=this.childrenMap.iconMask;i&&i.resize();var r=this.childrenMap.actionMask;return r&&r.resize(),this}};n.register("label",(function(t){var e=new Hp(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Label",Hp);const qp=ap.prototype.add,Kp=ap.prototype.addSpace;var Zp=function(t){var e=!t.isRexSpace,i=!e||this.buttonsExpand?1:0;if(0===this.sizerChildren.length)if(e){!this.buttonsExpand&&("right"===this.buttonsAlign||"center"===this.buttonsAlign||"bottom"===this.buttonsAlign)&&Kp.call(this),qp.call(this,t,{proportion:i,expand:!0});var r=!this.buttonsExpand&&"center"===this.buttonsAlign;r&&Kp.call(this),this.hasTailSpace=r}else qp.call(this,t,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;qp.call(this,t,{index:n,proportion:i,expand:!0})}else qp.call(this,t,{proportion:i,expand:!0});return e&&this.buttonGroup.add(t),this};const Jp={addButton(t){if(Cr(t))for(var e=t,i=0,r=e.length;i<r;i++)Zp.call(this,e[i]);else Zp.call(this,t);return this},addButtons(t){for(var e=0,i=t.length;e<i;e++)Zp.call(this,t[e]);return this}},$p=Phaser.Utils.Array.Remove,Qp=ap.prototype.remove,tg=ap.prototype.clear;var eg=function(t,e){if(this.getParentSizer(t)!==this)return this;var i=this.buttonGroup.buttons;return $p(i,t),Qp.call(this,t,e),this};const ig={remove(t,e){if(Cr(t))for(var i=t,r=0,n=i.length;r<n;r++)eg.call(this,i[r],e);else eg.call(this,t,e);return this},clear(t){return this.buttonGroup.buttons.length=0,tg.call(this,t),this},removeButton(t,e){return(t=this.getButton(t))?(this.remove(t,e),this):this},clearButtons(t){for(var e=this.buttonGroup.buttons,i=e.length-1;i>=0;i--)eg.call(this,e[i],t);return this}},rg={add(t){return this.buttons.push(t),t._buttonBehavior=new xu(t,this.clickConfig),t._buttonBehavior.on("click",(function(t,e,i,r){this.fireEvent("button.click",e,i,r)}),this).on("enable",(function(t,e){this.fireEvent("button.enable",e)}),this).on("disable",(function(t,e){this.fireEvent("button.disable",e)}),this),t.on("pointerover",(function(e,i,r,n){this.fireEvent("button.over",t,e,n)}),this).on("pointerout",(function(e,i){this.fireEvent("button.out",t,e,i)}),this),this},addMultiple(t){for(var e=0,i=t.length;e<i;e++)this.add(gameObject[e]);return this}},ng=Phaser.Utils.Objects.GetValue;var sg=function(t,e){void 0===e&&(e=!1);var i,r,n=ng(t,"dataManager",void 0);if(i=ng(t,"setValueCallback",void 0),r=ng(t,"setValueCallbackScope",void 0),void 0===i&&(i=ng(t,"setButtonStateCallback",void 0),r=ng(t,"setButtonStateCallbackScope",void 0)),void 0===n){var s=this.parent;s.setDataEnabled(),n=s.data}this.buttons.forEach((function(t){var s=t.name;i&&n.events.on(`changedata-${s}`,(function(e,n,s){r?i.call(r,t,n,s):i(t,n,s)})),n.set(s,void 0),n.set(s,e)})),this.dataManager=n};const og={setType(t){var e=ng(t,"type",void 0);switch(this.buttonsType=e,e){case"radio":this.setRadioType(t);break;case"checkboxes":this.setCheckboxesType(t)}return this},setRadioType(t){sg.call(this,t);var e=void 0,i=this.parent,r=this.buttons,n=this.dataManager;return Object.defineProperty(i,"value",{get:function(){return e},set:function(t){t!==e&&(e=t,r.forEach((function(e){var i=e.name,r=n.get(i);i===t?r||n.set(i,!0):r&&n.set(i,!1)})))},enumerable:!0,configurable:!0}),i.on("button.click",(function(t){i.value=t.name})),this},setCheckboxesType(t){sg.call(this,t);var e=this.parent,i=this.dataManager;return e.on("button.click",(function(t){i.toggle(t.name)})),this},setSelectedButtonName(t){return this.parent.value=t,this},getSelectedButtonName(){return this.parent.value},setButtonState(t,e){return void 0===e&&(e=!0),this.dataManager.set(t,e),this},getButtonState(t){return this.dataManager.get(t)}};var ag=function(t,e){return t?t.hasOwnProperty("name")?t.name===e?t:null:GetElementByName(t,e):null};const hg={getButton(t){var e,i=this.buttons;switch(typeof t){case"number":e=i[t];break;case"string":e=function(t,e){if(!t)return null;if(Cr(t)){for(var i,r=0,n=t.length;r<n;r++)if(i=ag(t[r],e))return i}else for(var s in t)if(i=ag(t[s],e))return i}(i,t);break;default:e=t,-1===i.indexOf(e)&&(e=void 0)}return e},setButtonEnable(t,e){var i=this.buttons;if(void 0===t||"boolean"==typeof t){e=t;for(var r=0,n=i.length;r<n;r++)i[r]._buttonBehavior.setEnable(e)}else this.getButton(t)._buttonBehavior.setEnable(e);return this},toggleButtonEnable(t){var e=this.buttons;if(void 0===t||"boolean"==typeof t)for(var i=0,r=e.length;i<r;i++)e[i]._buttonBehavior.toggleEnable();else this.getButton(t)._buttonBehavior.toggleEnable();return this},getButtonEnable(t){return void 0===t&&(t=0),this.getButton(t)._buttonBehavior.enable},emitButtonClick(t){return(this.buttonGroup?this.buttonGroup:this).fireEvent("button.click",t),this},showButton(t){return Ql(this.getButton(t)),this},hideButton(t){return tu(this.getButton(t)),this},isButtonShown(t){return eu(this.getButton(t)),this},forEachButtton(t,e){for(var i=this.buttons,r=0,n=i.length;r<n;r++)e?t.call(e,i[r],r,i):t(i[r],r,i);return this}};class lg{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var ug={fireEvent:function(t,e,i,r){var n;if("number"==typeof e){if(n=e,!(e=this.buttons[n]))return}else if(-1===(n=this.buttons.indexOf(e)))return;this.eventEmitter!==this.parent&&this.parent.emit(t,e,n,i,r),void 0!==this.groupName?this.eventEmitter.emit(t,e,this.groupName,n,i,r):this.eventEmitter.emit(t,e,n,i,r)}};Object.assign(lg.prototype,rg,og,hg,ug);const cg=lg,dg={setSelectedButtonName(t){return this.buttonGroup.setSelectedButtonName(t),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(t,e){return this.buttonGroup.setButtonState(t,e),this},getButtonState(t){return this.buttonGroup.getButtonState(t)}},fg=Phaser.Utils.Objects.GetValue;class pg extends ap{constructor(t,e){void 0===e&&(e={});var i=e.space;"number"==typeof i&&(e.space={item:i}),super(t,e),this.type="rexButtons",this.buttonGroup=new cg({parent:this,eventEmitter:fg(e,"eventEmitter",this),groupName:fg(e,"groupName",void 0),clickConfig:fg(e,"click",void 0)});var r=fg(e,"background",void 0),n=fg(e,"buttons",void 0);this.buttonsExpand=fg(e,"expand",!1),this.buttonsAlign=fg(e,"align",void 0),r&&this.addBackground(r),n&&this.addButtons(n),this.buttonGroup.setType(e),this.addChildrenMap("background",r),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(pg.prototype,Jp,ig,hg,dg);const gg=pg;n.register("buttons",(function(t){var e=new gg(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Buttons",gg);const vg=Ep.prototype.add,mg={addButton(t,e,i){return vg.call(this,t,e,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(t),this},addButtons(t,e){for(var i=0,r=t;i<r;i++)this.addButton(t[i],void 0,e);return this}},yg=Phaser.Utils.Array.Remove,xg=Ep.prototype.remove,bg=Ep.prototype.clear;var wg=function(t,e){if(!(t=this.getButton(t)))return this;var i=this.buttonGroup.buttons;return yg(i,t),xg.call(this,t,e),this};const Tg={remove(t,e){if(Cr(t))for(var i=t,r=0,n=i.length;r<n;r++)wg.call(this,i[r],e);else wg.call(this,t,e);return this},clear(t){return this.buttonGroup.buttons.length=0,bg.call(this,t),this},removeButton(t,e){return this.remove(t,e),this},clearButtons(t){for(var e=this.buttonGroup.buttons,i=e.length-1;i>=0;i--)wg.call(this,e[i],t);return this}},Sg=Phaser.Utils.Objects.GetValue;class Eg extends Ep{constructor(t,e){void 0===e&&(e={});var i=Sg(e,"row",0),r=Sg(e,"col",0),n=Sg(e,"createCellContainerCallback"),s=Sg(e,"buttons",void 0),o=Sg(e,"expand",!0),a=o?1:0;if(n&&(e.createCellContainerCallback=void 0),void 0!==s){i=Math.max(i,s.length);for(var h=0,l=s.length;h<l;h++)r=Math.max(r,s[h].length)}e.row=i,e.column=r,e.columnProportions=a,e.rowProportions=a,super(t,e),this.type="rexGridButtons",this.buttonGroup=new cg({parent:this,eventEmitter:Sg(e,"eventEmitter",this),groupName:Sg(e,"groupName",void 0),clickConfig:Sg(e,"click",void 0)});var u=Sg(e,"background",void 0);this.buttonsExpand=o;var c=Sg(e,"space",void 0);if("number"==typeof c&&(c={itemX:c,itemY:c}),u&&this.addBackground(u),s)for(var d,f=0,p=s.length;f<p;f++)for(var g=0,v=(d=s[f]).length;g<v;g++)(x=d[g])&&this.addButton(x,g,f);else if(n)for(var m=0;m<i;m++)for(var y=0;y<r;y++){var x;(x=n(t,y,m))&&this.addButton(x,y,m)}this.buttonGroup.setType(e),this.addChildrenMap("background",u),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Eg.prototype,mg,Tg,hg,dg);const Cg=Eg;n.register("gridButtons",(function(t){var e=new Cg(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.GridButtons",Cg);const _g=Wp.prototype.add;var Ag=function(t){return _g.call(this,t),this.buttonGroup.add(t),this};const Mg={addButton(t){if(Cr(t))for(var e=t,i=0,r=e.length;i<r;i++)Ag.call(this,e[i]);else Ag.call(this,t);return this},addButtons(t){if(Cr(t[0]))for(var e,i=t,r=0,n=i.length-1;r<=n;r++){for(var s=0,o=(e=i[r]).length;s<o;s++)Ag.call(this,e[s]);r>n&&_g.addNewLine(this)}else for(s=0,o=t.length;s<o;s++)Ag.call(this,t[s]);return this}},Pg=Phaser.Utils.Array.Remove,kg=Wp.prototype.remove,Og=Wp.prototype.clear;var Rg=function(t,e){if(!(t=this.getButton(t)))return this;var i=this.buttonGroup.buttons;return Pg(i,t),kg.call(this,t,e),this};const Lg={remove(t,e){if(Cr(t))for(var i=t,r=0,n=i.length;r<n;r++)Rg.call(this,i[r],e);else Rg.call(this,t,e);return this},clear(t){return this.buttonGroup.buttons.length=0,Og.call(this,t),this},removeButton(t,e){return this.remove(t,e),this},clearButtons(t){for(var e=this.buttonGroup.buttons,i=e.length-1;i>=0;i--)Rg.call(this,e[i],t);return this}},Ig=Phaser.Utils.Objects.GetValue;class Fg extends Wp{constructor(t,e){void 0===e&&(e={});var i=e.space;"number"==typeof i&&(e.space={item:i,line:i}),super(t,e),this.type="rexFixWidthButtons",this.buttonGroup=new cg({parent:this,eventEmitter:Ig(e,"eventEmitter",this),groupName:Ig(e,"groupName",void 0),clickConfig:Ig(e,"click",void 0)});var r=Ig(e,"background",void 0),n=Ig(e,"buttons",void 0);this.buttonsAlign=Ig(e,"align",void 0),r&&this.addBackground(r),n&&this.addButtons(n),this.buttonGroup.setType(e),this.addChildrenMap("background",r),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Fg.prototype,Mg,Lg,hg,dg);const Dg=Fg;n.register("fixWidthButtons",(function(t){var e=new Dg(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.FixWidthButtons",Dg);const Bg={getChoice(t){return this.childrenMap.choicesSizer.getButton(t)},getAction(t){return this.childrenMap.actionsSizer.getButton(t)},getToolbar(t){return this.childrenMap.toolbarSizer.getButton(t)},getLeftToolbar(t){return this.childrenMap.leftToolbarSizer.getButton(t)},setChoiceEnable(t,e){return this.childrenMap.choicesSizer.setButtonEnable(t,e),this},setActionEnable(t,e){return this.childrenMap.actionsSizer.setButtonEnable(t,e),this},setToolbarEnable(t,e){return this.childrenMap.toolbarSizer.setButtonEnable(t,e),this},setLeftToolbarEnable(t,e){return this.childrenMap.leftToolbarSizer.setButtonEnable(t,e),this},toggleChoiceEnable(t){return this.childrenMap.choicesSizer.toggleButtonEnable(t),this},toggleActionEnable(t){return this.childrenMap.actionsSizer.toggleButtonEnable(t),this},toggleToolbarEnable(t){return this.childrenMap.toolbarSizer.toggleButtonEnable(t),this},toggleLeftToolbarEnable(t){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(t),this},getChoiceEnable(t){return this.childrenMap.choicesSizer.getButtonEnable(t)},getActionEnable(t){return this.childrenMap.actionsSizer.getButtonEnable(t)},getToolbarEnable(t){return this.childrenMap.toolbarSizer.getButtonEnable(t)},getLeftToolbarEnable(t){return this.childrenMap.leftToolbarSizer.getButtonEnable(t)},emitChoiceClick(t){return this.childrenMap.choicesSizer.emitButtonClick(t),this},emitActionClick(t){return this.childrenMap.actionsSizer.emitButtonClick(t),this},emitToolbarClick(t){return this.childrenMap.toolbarSizer.emitButtonClick(t),this},emitLeftToolbarClick(t){return this.childrenMap.leftToolbarSizer.emitButtonClick(t),this},showChoice(t){return this.childrenMap.choicesSizer.showButton(t),this},showAction(t){return this.childrenMap.actionsSizer.showButton(t),this},showToolbar(t){return this.childrenMap.toolbarSizer.showButton(t),this},showLeftToolbar(t){return this.childrenMap.leftToolbarSizer.showButton(t),this},hideChoice(t){return this.childrenMap.choicesSizer.hideButton(t),this},hideAction(t){return this.childrenMap.actionsSizer.hideButton(t),this},hideToolbar(t){return this.childrenMap.toolbarSizer.hideButton(t),this},hideLeftToolbar(t){return this.childrenMap.leftToolbarSizer.hideButton(t),this},addChoice(t){return this.childrenMap.choicesSizer.addButton(t),this},addAction(t){return this.childrenMap.actionsSizer.addButton(t),this},addToolbar(t){return this.childrenMap.toolbarSizer.addButton(t),this},addLeftToolbar(t){return this.childrenMap.leftToolbarSizer.addButton(t),this},removeChoice(t,e){return this.childrenMap.choicesSizer.removeButton(t,e),this},removeAction(t,e){return this.childrenMap.actionsSizer.removeButton(t,e),this},removeToolbar(t,e){return this.childrenMap.toolbarSizer.removeButton(t,e),this},removeLeftToolbar(t,e){return this.childrenMap.leftToolbarSizer.removeButton(t,e),this},clearChoices(t){return this.childrenMap.choicesSizer.clearButtons(t),this},clearActions(t){return this.childrenMap.actionsSizer.clearButtons(t),this},clearToolbar(t){return this.childrenMap.toolbarSizer.clearButtons(t),this},clearLeftToolbar(t){return this.childrenMap.leftToolbarSizer.clearButtons(t),this},forEachChoice(t,e){return this.childrenMap.choicesSizer.forEachButtton(t,e),this},forEachAction(t,e){return this.childrenMap.actionsSizer.forEachButtton(t,e),this},forEachToolbar(t,e){return this.childrenMap.toolbarSizer.forEachButtton(t,e),this},forEachLeftToolbar(t,e){return this.childrenMap.leftToolbarSizer.forEachButtton(t,e),this}},Ng=Phaser.Utils.Objects.GetValue;class zg extends ap{constructor(t,e){void 0===e&&(e={}),e.orientation=1,super(t,e),this.type="rexDialog",this.eventEmitter=Ng(e,"eventEmitter",this);var i,r,n,s,o=Ng(e,"background",void 0),a=Ng(e,"title",void 0),h=Ng(e,"toolbar",void 0),l=Ng(e,"toolbarBackground",void 0),u=Ng(e,"leftToolbar",void 0),c=Ng(e,"leftToolbarBackground",void 0),d=Ng(e,"content",void 0),f=Ng(e,"description",void 0),p=Ng(e,"choices",void 0),g=Ng(e,"choicesBackground",void 0),v=Ng(e,"actions",void 0),m=Ng(e,"actionsBackground",void 0),y=Ng(e,"click",void 0);if(o&&this.addBackground(o),h&&(n=new gg(t,{groupName:"toolbar",background:l,buttons:h,orientation:0,space:{item:Ng(e,"space.toolbarItem",0)},click:y,eventEmitter:this.eventEmitter})),u&&(s=new gg(t,{groupName:"leftToolbar",background:c,buttons:u,orientation:0,space:{item:Ng(e,"space.leftToolbarItem",0)},click:y,eventEmitter:this.eventEmitter})),a&&!h&&!u){var x=Ng(e,"align.title","center"),b=Ng(e,"space.title",0);(d||f||p||v)&&(S={bottom:b});var w=Ng(e,"expand.title",!0);this.add(a,{align:x,padding:S,expand:w})}if(!h||a||u||(b=Ng(e,"space.title",0),(d||f||p||v)&&(S={bottom:b}),w=Ng(e,"expand.toolbar",!0),this.add(n,{align:"right",padding:S,expand:w})),!u||a||h||(b=Ng(e,"space.title",0),(d||f||p||v)&&(S={bottom:b}),w=Ng(e,"expand.leftToolbar",!0),this.add(s,{align:"left",padding:S,expand:w})),a&&(h||u)){var T=new ap(t,{orientation:0});s&&T.add(s,{align:"right",expand:!1}),x=Ng(e,"align.title","left"),(w=Ng(e,"expand.title",!0))||"right"!==x&&"center"!==x||T.addSpace();var S={left:Ng(e,"space.titleLeft",0),right:Ng(e,"space.titleRight",0)},E=w?1:0;T.add(a,{proportion:E,align:"center",padding:S,expand:w}),w||"left"!==x&&"center"!==x||T.addSpace(),n&&T.add(n,{align:"right",expand:!1}),b=Ng(e,"space.title",0),(d||f||p||v)&&(S={bottom:b}),this.add(T,{align:"center",padding:S,expand:!0})}if(d){x=Ng(e,"align.content","center");var C=Ng(e,"space.content",0);S={left:Ng(e,"space.contentLeft",0),right:Ng(e,"space.contentRight",0),bottom:f||p||v?C:0},w=Ng(e,"expand.content",!0),this.add(d,{align:x,padding:S,expand:w})}if(f){x=Ng(e,"align.description","center");var _=Ng(e,"space.description",0);S={left:Ng(e,"space.descriptionLeft",0),right:Ng(e,"space.descriptionRight",0),bottom:p||v?_:0},w=Ng(e,"expand.description",!0),this.add(f,{align:x,padding:S,expand:w})}if(p){x=Ng(e,"align.choices","center"),i=new gg(t,{groupName:"choices",background:g,buttons:p,orientation:1,space:{item:Ng(e,"space.choice",0)},click:y,eventEmitter:this.eventEmitter,type:Ng(e,"choicesType",void 0),setValueCallback:Ng(e,"choicesSetValueCallback",void 0),setValueCallbackScope:Ng(e,"choicesSetValueCallbackScope",void 0)});var A=Ng(e,"space.choices",0);S={left:Ng(e,"space.choicesLeft",0),right:Ng(e,"space.choicesRight",0),bottom:v?A:0},w=Ng(e,"expand.choices",!0),this.add(i,{align:x,padding:S,expand:w})}v&&(r=new gg(t,{groupName:"actions",background:m,buttons:v,orientation:0,space:{item:Ng(e,"space.action",0)},expand:Ng(e,"expand.actions",!1),align:Ng(e,"align.actions","center"),click:y,eventEmitter:this.eventEmitter}),S={left:Ng(e,"space.actionsLeft",0),right:Ng(e,"space.actionsRight",0)},this.add(r,{align:"center",padding:S,expand:!0})),this.addChildrenMap("background",o),this.addChildrenMap("title",a),this.addChildrenMap("toolbar",h),this.addChildrenMap("leftToolbar",u),this.addChildrenMap("content",d),this.addChildrenMap("description",f),this.addChildrenMap("choices",p),this.addChildrenMap("actions",v),this.addChildrenMap("choicesSizer",i),this.addChildrenMap("actionsSizer",r),this.addChildrenMap("toolbarSizer",n),this.addChildrenMap("leftToolbarSizer",s)}}Object.assign(zg.prototype,Bg);const Ug=zg;n.register("dialog",(function(t){var e=new Ug(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Dialog",Ug);const Yg={getButtonsSizer(t){return this.childrenMap[`${t}ButtonsSizer`]},getButton(t,e){var i=this.getButtonsSizer(t);return i?i.getButton(e):void 0},setButtonEnable(t,e,i){return this.getButtonsSizer(t).setButtonEnable(e,i),this},setLeftButtonEnable(t,e){return this.childrenMap.leftButtonsSizer.setButtonEnable(t,e),this},setRightButtonEnable(t,e){return this.childrenMap.rightButtonsSizer.setButtonEnable(t,e),this},setTopButtonEnable(t,e){return this.childrenMap.topButtonsSizer.setButtonEnable(t,e),this},setBottomButtonEnable(t,e){return this.childrenMap.bottomButtonsSizer.setButtonEnable(t,e),this},toggleButtonEnable(t,e){return this.getButtonsSizer(t).toggleButtonEnable(e),this},toggleLeftButtonEnable(t){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(t),this},toggleRightButtonEnable(t){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(t),this},toggleTopButtonEnable(t){return this.childrenMap.topButtonsSizer.toggleButtonEnable(t),this},toggleBottomButtonEnable(t){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(t),this},getButtonEnable(t,e){return this.getButtonsSizer(t).getButtonEnable(e)},getLeftButtonEnable(t){return this.childrenMap.leftButtonsSizer.getButtonEnable(t)},getRightButtonEnable(t){return this.childrenMap.rightButtonsSizer.getButtonEnable(t)},getTopButtonEnable(t){return this.childrenMap.topButtonsSizer.getButtonEnable(t)},getBottomButtonEnable(t){return this.childrenMap.bottomButtonsSizer.getButtonEnable(t)},emitButtonClick(t,e){var i=this.getButtonsSizer(t);return i?(i.emitButtonClick(e),this):this},emitLeftButtonClick(t){return this.childrenMap.leftButtonsSizer.emitButtonClick(t),this},emitRightButtonClick(t){return this.childrenMap.rightButtonsSizer.emitButtonClick(t),this},emitTopButtonClick(t){return this.childrenMap.topButtonsSizer.emitButtonClick(t),this},emitBottomButtonClick(t){return this.childrenMap.bottomButtonsSizer.emitButtonClick(t),this},getLeftButton(t){return this.childrenMap.leftButtonsSizer.getButton(t)},getRightButton(t){return this.childrenMap.rightButtonsSizer.getButton(t)},getTopButton(t){return this.childrenMap.topButtonsSizer.getButton(t)},getBottomButton(t){return this.childrenMap.bottomButtonsSizer.getButton(t)},showButton(t,e){return Ql(this.getButton(t,e)),this},showLeftButton(t){return Ql(this.getLeftButton(t)),this},showRightButton(t){return Ql(this.getRightButton(t)),this},showTopButton(t){return Ql(this.getTopButton(t)),this},showBottomButton(t){return Ql(this.getBottomButton(t)),this},hideButton(t,e){return tu(this.getButton(t,e)),this},hideLeftButton(t){return tu(this.getLeftButton(t)),this},hideRightButton(t){return tu(this.getRightButton(t)),this},hideTopButton(t){return tu(this.getTopButton(t)),this},hideBottomButton(t){return tu(this.getBottomButton(t)),this},addButton(t,e){return this.getButtonsSizer(t).addButton(e),this},addLeftButton(t){return this.addButton("left",t),this},addRightButton(t){return this.addButton("right",t),this},addTopButton(t){return this.addButton("top",t),this},removeButton(t,e,i){return this.getButtonsSizer(t).removeButton(e,i),this},removeLeftButton(t,e){return this.removeButton("left",t,e),this},removeRightButton(t,e){return this.removeButton("right",t,e),this},removeTopButton(t,e){return this.removeButton("top",t,e),this},removeBottomButton(t,e){return this.removeButton("bottom",t,e),this},clearButtons(t,e){return this.getButtonsSizer(t).clearButtons(e),this},clearLeftButtons(t){return this.clearButtons("left",t),this},clearRightButtons(t){return this.clearButtons("right",t),this},clearTopButtons(t){return this.clearButtons("top",t),this},clearBottomButtonss(t){return this.clearButtons("bottom",t),this},forEachButton(t,e,i){return this.getButtonsSizer(t).forEachButtton(e,i),this},forEachLeftButton(t,e){return this.childrenMap.leftButtonsSizer.forEachButtton(t,e),this},forEachRightButton(t,e){return this.childrenMap.rightButtonsSizer.forEachButtton(t,e),this},forEachTopButton(t,e){return this.childrenMap.topButtonsSizer.forEachButtton(t,e),this},forEachBottomButton(t,e){return this.childrenMap.bottomButtonsSizer.forEachButtton(t,e),this}},Xg=Phaser.Utils.Objects.GetValue;class Gg extends Ep{constructor(t,e){void 0===e&&(e={}),e.column=3,e.row=3,super(t,e),this.type="rexTabs",this.eventEmitter=Xg(e,"eventEmitter",this);var i,r,n,s,o=Xg(e,"background",void 0),a=Xg(e,"panel",void 0),h=Xg(e,"leftButtons",void 0),l=Xg(e,"leftButtonsBackground",void 0),u=Xg(e,"rightButtons",void 0),c=Xg(e,"rightButtonsBackground",void 0),d=Xg(e,"topButtons",void 0),f=Xg(e,"topButtonsBackground",void 0),p=Xg(e,"bottomButtons",void 0),g=Xg(e,"bottomButtonsBackground",void 0),v=Xg(e,"click",void 0);if(o&&this.addBackground(o),a&&this.add(a,1,1,"center",0,!0),h){var m=Xg(e,"space.leftButtonsOffset",0),y=Xg(e,"space.leftButton",0);i=new gg(t,{groupName:"left",background:l,buttons:h,orientation:1,space:{item:y},align:Xg(e,"align.leftButtons",void 0),click:v,eventEmitter:this.eventEmitter});var x={top:m};this.add(i,0,1,"top",x,!1)}if(u){var b=Xg(e,"space.rightButtonsOffset",0),w=Xg(e,"space.rightButton",0);r=new gg(t,{groupName:"right",background:c,buttons:u,orientation:1,space:{item:w},align:Xg(e,"align.rightButtons",void 0),click:v,eventEmitter:this.eventEmitter}),x={top:b},this.add(r,2,1,"top",x,!1)}if(d){var T=Xg(e,"space.topButtonsOffset",0),S=Xg(e,"space.topButton",0);n=new gg(t,{groupName:"top",background:f,buttons:d,orientation:0,space:{item:S},align:Xg(e,"align.topButtons",void 0),click:v,eventEmitter:this.eventEmitter}),x={left:T},this.add(n,1,0,"left",x,!1)}if(p){var E=Xg(e,"space.bottomButtonsOffset",0),C=Xg(e,"space.bottomButton",0);s=new gg(t,{groupName:"bottom",background:g,buttons:p,orientation:0,space:{item:C},align:Xg(e,"align.bottomButtons",void 0),click:v,eventEmitter:this.eventEmitter}),x={left:E},this.add(s,1,2,"left",x,!1)}this.addChildrenMap("background",o),this.addChildrenMap("panel",a),this.addChildrenMap("leftButtons",h),this.addChildrenMap("rightButtons",u),this.addChildrenMap("topButtons",d),this.addChildrenMap("bottomButtons",p),this.addChildrenMap("leftButtonsSizer",i),this.addChildrenMap("rightButtonsSizer",r),this.addChildrenMap("topButtonsSizer",n),this.addChildrenMap("bottomButtonsSizer",s)}}Object.assign(Gg.prototype,Yg);const Wg=Gg;n.register("tabs",(function(t){var e=new Wg(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Tabs",Wg);const Vg=Phaser.Math.Percent,jg=function(t,e,i){var r,n,s;return t.y===e.y?(r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),s=Vg(i.x,r,n)):t.x===e.x&&(r=Math.min(t.y,e.y),n=Math.max(t.y,e.y),s=Vg(i.y,r,n)),s};var Hg={};const qg=function(t,e,i){this.enable&&(Hg.x=e,Hg.y=i,this.value=jg(this.getStartPoint(),this.getEndPoint(),Hg))};var Kg={};const Zg=function(t,e,i){if(this.enable&&t.isDown){Kg.x=t.worldX,Kg.y=t.worldY;var r=jg(this.getStartPoint(),this.getEndPoint(),Kg);this.stopEaseValue(),0===this.easeValueDuration||Math.abs(this.value-r)<.1?this.value=r:this.easeValueTo(r)}};var Jg={};const $g=function(t,e){void 0===e&&(e=Jg);var i=this.childrenMap.thumb,r=i.x,n=i.y;return Jh(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,t),e.x=i.x,e.y=i.y,i.x=r,i.y=n,e},Qg=Phaser.Display.Align.LEFT_CENTER,tv=Phaser.Display.Align.TOP_CENTER;var ev={};const iv=Phaser.Display.Align.RIGHT_CENTER,rv=Phaser.Display.Align.BOTTOM_CENTER;var nv={};const sv=Phaser.Math.Linear;var ov={};const av=Phaser.Display.Align.LEFT_CENTER,hv=Phaser.Display.Align.TOP_CENTER,lv=Phaser.Utils.Objects.GetValue,uv=Phaser.Math.Clamp,cv=Phaser.Math.Linear,dv=Phaser.Math.Percent,fv=Phaser.Math.Snap.To;class pv extends ap{constructor(t,e){super(t,e),this.type="rexSlider",this.eventEmitter=lv(e,"eventEmitter",this);var i=lv(e,"background",void 0),r=lv(e,"track",void 0),n=lv(e,"indicator",void 0),s=lv(e,"thumb",void 0);i&&this.addBackground(i),r&&this.add(r,{proportion:1,expand:!0,minWidth:0,minHeight:0}),n&&this.pin(n),s&&this.pin(s);var o=lv(e,"input",0);switch("string"==typeof o&&(o=gv[o]),o){case 0:s&&(s.setInteractive(),this.scene.input.setDraggable(s),s.on("drag",qg,this));break;case 1:this.setInteractive().on("pointerdown",Zg,this).on("pointermove",Zg,this)}this.addChildrenMap("background",i),this.addChildrenMap("track",r),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",s);var a=lv(e,"valuechangeCallback",null);if(null!==a){var h=lv(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,h)}this.setEnable(lv(e,"enable",void 0)),this.setGap(lv(e,"gap",void 0)),this.setValue(lv(e,"value",0),lv(e,"min",void 0),lv(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(lv(e,"easeValue.duration",0)).setEaseValueFunction(lv(e,"easeValue.ease","Linear"))}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this._value}set value(t){void 0!==this.gap&&(t=fv(t,this.gap));var e=this._value;this._value=uv(t,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(t,e,i){return null==t||(void 0!==e&&(t=dv(t,e,i)),this.value=t),this}addValue(t,e,i){return void 0!==e&&(t=dv(t,e,i)),this.value+=t,this}getValue(t,e){var i=this.value;return void 0!==t&&(i=cv(t,e,i)),i}runLayout(t,e,i){return this.ignoreLayout||(super.runLayout(t,e,i),this.updateThumb(),this.updateIndicator()),this}}const gv={pan:0,drag:0,click:1,none:-1};var vv={getStartPoint:function(t){if(void 0===t&&(t=ev),this.childrenMap.thumb){var e=0===this.orientation?Qg:tv;$g.call(this,e,t)}else 0===this.orientation?(t.x=this.innerLeft+1,t.y=this.centerY):(t.x=this.centerX,t.y=this.innerTop+1);return t},getEndPoint:function(t){if(void 0===t&&(t=nv),this.childrenMap.thumb){var e=0===this.orientation?iv:rv;$g.call(this,e,t)}else 0===this.orientation?(t.x=this.innerRight-1,t.y=this.centerY):(t.x=this.centerX,t.y=this.innerBottom-1);return t},updateThumb:function(t){var e=this.childrenMap.thumb;return void 0===e||(void 0===t&&(t=this.value),function(t,e,i,r){void 0===r&&(r=ov),r.x=sv(e.x,i.x,t),r.y=sv(e.y,i.y,t)}(t,this.getStartPoint(),this.getEndPoint(),e),this.resetChildPositionState(e)),this},updateIndicator:function(t){var e,i,r=this.childrenMap.indicator;if(void 0===r)return this;void 0===t&&(t=this.value);var n=this.childrenMap.thumb;if(n)if(0===this.orientation){var s=Fh(n);e=n.x-s*n.originX+s-this.left}else{var o=Dh(n);i=n.y-o*n.originY+o-this.top}else 0===this.orientation?e=this.width*t:i=this.height*t;cu(r,e,i);var a=0===this.orientation?av:hv;Zh(r,this,a),this.resetChildPositionState(r)}};Object.assign(pv.prototype,vv,Da);const mv=pv;n.register("slider",(function(t){var e=new mv(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Slider",mv);const yv={v:0,vertical:0,h:1,horizontal:1},xv=Phaser.Utils.Objects.GetValue,bv=function(t,e){var i=xv(t,"scrollMode",0);return"string"==typeof i&&(i=yv[i]),i},wv=class extends Ru{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,e=this.parent;return e.dragState.isDown&&(t=0===e.dragThreshold?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,e){this.next()}next_DRAGBEGIN(){var t=this.parent,e=t.dragState;return e.isDown?e.pointer.getDistance()>=t.dragThreshold?"DRAG":"DRAGBEGIN":"IDLE"}update_DRAGBEGIN(t,e){this.next()}next_DRAG(){var t,e=this.parent;return e.dragState.isUp&&(t=e.outOfBounds?"BACK":e.slidingEnable?"SLIDE":"IDLE"),t}update_DRAG(t,e){var i=this.parent;i.dragState.justMoved&&i.dragging(),this.next()}next_SLIDE(){var t,e=this.parent;return e.dragState.isDown?t="DRAG":e.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,e){this.parent.sliding(t,e),this.next()}next_BACK(){var t,e=this.parent;return e.dragState.isDown?t="DRAG":e.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,e){this.parent.pullBack(t,e),this.next()}},Tv=Phaser.Utils.Objects.GetValue,Sv=Phaser.Math.Distance.Between,Ev=class extends zo{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(Tv(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Tv(t,"enable",!0)),this.holdThreshold=Tv(t,"holdThreshold",50),this.pointerOutReleaseEnable=Tv(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return void 0===t&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){return this.scene.sys.game.loop.delta}get speed(){return this.x===this.preX&&this.y===this.preY?0:Sv(this.preX,this.preY,this.x,this.y)/(.001*this.dt)}get speedX(){return this.dx/(.001*this.dt)}get speedY(){return this.dy/(.001*this.dt)}onPointIn(t,e,i){this.enable&&t.isDown&&void 0===this.pointer&&(this.pointer=t,this.localX=e,this.localY=i)}onPointOut(t){this.enable&&this.pointer===t&&(this.pointer=void 0)}onPointerMove(t,e,i){this.enable&&t.isDown&&this.pointer===t&&(this.localX=e,this.localY=i)}preupdate(t,e){if(this.enable){var i=this.pointer;this.justMoved=!1,i&&!this.isInTouched?(this.x=i.x,this.y=i.y,this.preX=i.x,this.preY=i.y,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",i,this.localX,this.localY)):i&&this.isInTouched?this.x===i.x&&this.y===i.y?void 0===this.holdStartTime?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=i.x,this.y=i.y,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",i,this.localX,this.localY)):!i&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",i))}}},Cv=Phaser.Utils.Objects.GetValue,_v=Phaser.Utils.Objects.GetValue,Av=Phaser.Math.Clamp,Mv={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Pv=class extends zo{constructor(t,e){super(t,e);var i=_v(e,"enable",!0);this._state=new wv(this,{enable:i,eventEmitter:!1});var r={inputConfig:_v(e,"inputConfig",void 0),enable:i,pointerOutRelease:_v(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new Ev(t,r),this._enable=void 0,this._value=void 0,this._slowDown=new class{constructor(){this.value,this.dir,this.movement=new class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(Cv(t,"value",0)),this.setSpeed(Cv(t,"speed",0)),this.setAcceleration(Cv(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return 0!==this.acceleration&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}}init(t,e,i,r,n){return this.value=t,this.end=n,this.dir=void 0!==n?t<n:e,this.movement.setSpeed(i).setAcceleration(-r),this}stop(){this.movement.reset()}update(t){var e=this.movement.getDeltaValue(t);return this.dir||(e=-e),void 0===this.end?this.value+=e:0===e?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}};var n=_v(e,"valuechangeCallback",null);if(null!==n){var s=_v(e,"valuechangeCallbackScope",void 0);this.on("valuechange",n,s)}null!==(n=_v(e,"overmaxCallback",null))&&(s=_v(e,"overmaxCallbackScope",void 0),this.on("overmax",n,s)),null!==(n=_v(e,"overminCallback",null))&&(s=_v(e,"overminCallbackScope",void 0),this.on("overmin",n,s)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setOrientationMode(_v(t,"orientation",0)),this.setDragThreshold(_v(t,"threshold",10)),this.setSlidingDeceleration(_v(t,"slidingDeceleration",5e3)),this.setBackDeceleration(_v(t,"backDeceleration",2e3));var e=_v(t,"bounds",void 0);return e?this.setBounds(e):this.setBounds(_v(t,"max",0),_v(t,"min",0)),this.setValue(_v(t,"value",this.maxValue||0)),this.setEnable(_v(t,"enable",!0)),this}boot(){this.scene.events.on("update",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.events.off("update",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return"string"==typeof t&&(t=Mv[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setBounds(t,e){if(Array.isArray(t)){var i=t;t=i[0],e=i[1]}return t<e?(this.minValue=t,this.maxValue=e):(this.minValue=e,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var e=this._value,i=this.overMax(t),r=this.overMin(t);i&&this.emit("overmax",t,e),r&&this.emit("overmin",t,e),this.backEnable||(i&&(t=this.maxValue),r&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,e)}}setValue(t,e){return void 0===e&&(e=!1),e&&(t=Av(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,e){return this.setValue(this.value+t,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return null!=this.maxValue&&t>this.maxValue}overMin(t){return null!=this.minValue&&t<this.minValue}get backEnable(){return"number"==typeof this.backDeceleration}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return"number"==typeof this.slidingDeceleration}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return 0===this.orientationMode?this.dragState.dy:1===this.orientationMode?this.dragState.dx:0}get dragSpeed(){return 0===this.orientationMode?this.dragState.speedY:1===this.orientationMode?this.dragState.speedX:0}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,e=this.dragSpeed;if(0===e)return this._slowDown.stop(),void this._state.next();var i=this.slidingDeceleration;this._slowDown.init(t,e>0,Math.abs(e),i)}sliding(t,e){e*=.001;var i=this._slowDown.update(e).value;this.overMax(i)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(i)?(this.value=this.minValue,this._slowDown.stop()):this.value=i}onPullBack(){var t=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,i=Math.abs(e-t),r=this.backDeceleration,n=Math.sqrt(2*r*i);this._slowDown.init(t,void 0,n,r,e)}pullBack(t,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}},kv=Phaser.Utils.Objects.GetValue,Ov=class extends zo{constructor(t,e){super(t,e),this.parent!==this.scene?this.focusMode=kv(e,"focus",!1):this.focusMode=!1,this.setSpeed(kv(e,"speed",.1)),this.setEnable(kv(e,"enable",!0)),this.focusMode?(t=this.parent).setInteractive(kv(e,"inputConfig",void 0)).on("wheel",(function(t,e,i,r,n){this.enable&&this.scroll(i)}),this):this.scene.input.on("wheel",this.onSceneScroll,this)}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,e,i,r,n,s){this.enable&&this.scroll(r)}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}},Rv=Phaser.Utils.Objects.GetValue;var Lv={right:0,left:1,bottom:0,top:1};const Iv=Phaser.Utils.Objects.GetValue,Fv=Phaser.Math.Clamp;class Dv extends ap{constructor(t,e){void 0===e&&(e={});var i=bv(e);e.orientation=0===i?1:0,super(t,e),this.type=Iv(e,"type","rexScrollable");var r=Iv(e,"background",void 0),n=function(t,e){var i,r=t.scene,n=bv(e),s=new ap(r,{orientation:n}),o=Rv(e,"child.gameObject",void 0),a=Rv(e,"slider",void 0),h=Rv(a,"position",0);"string"==typeof h&&(h=Lv[h]);var l,u,c=0===h,d=Rv(e,"scroller",!0),f=Rv(e,"mouseWheelScroller",!1);if(o){var p=Rv(e,"space.child",0),g={};if(t.childMargin={},"number"!=typeof p){var v=p;0===n?(g.left=Rv(v,"left",0),g.right=Rv(v,"right",0),t.childMargin.top=Rv(v,"top",0),t.childMargin.bottom=Rv(v,"bottom",0)):(g.top=Rv(v,"top",0),g.bottom=Rv(v,"bottom",0),t.childMargin.top=Rv(v,"left",0),t.childMargin.bottom=Rv(v,"right",0))}else a&&(g=0===n?c?{right:p}:{left:p}:c?{bottom:p}:{top:p}),t.childMargin.top=0,t.childMargin.bottom=0;a&&(!0===a&&(a={}),a.orientation=0===s.orientation?1:0,i=new mv(r,a)),d&&(!0===d&&(d={}),d.orientation=n,l=new Pv(o,d)),f&&(u=new Ov(o,f)),i&&!c&&s.add(i,{proportion:0,align:"center",expand:!0});var m=Rv(e,"child.proportion",1),y=Rv(e,"child.expand",!0);s.add(o,{proportion:m,align:"center",padding:g,expand:y}),i&&c&&s.add(i,{proportion:0,align:"center",expand:!0})}return i&&i.on("valuechange",(function(e){t.t=e,t.emit("scroll",t)})),l&&l.on("valuechange",(function(e){t.childOY=e,t.emit("scroll",t)})),u&&u.on("scroll",(function(e){t.addChildOY(-e,!0)})),t.addChildrenMap("child",o),t.addChildrenMap("slider",i),t.addChildrenMap("scroller",l),t.addChildrenMap("mouseWheelScroller",u),s}(this,e),s=Iv(e,"header",void 0),o=Iv(e,"footer",void 0);if(r&&this.addBackground(r),s){var a=Iv(e,"align.header","center"),h=Iv(e,"space.header",0);u=0===i?{bottom:h}:{right:h};var l=Iv(e,"expand.header",!0);this.add(s,{proportion:0,align:a,padding:u,expand:l})}if(n&&this.add(n,{proportion:1,align:"center",padding:0,expand:!0}),o){a=Iv(e,"align.footer","center");var u,c=Iv(e,"space.footer",0);u=0===i?{top:c}:{left:c},l=Iv(e,"expand.footer",!0),this.add(o,{proportion:0,align:a,padding:u,expand:l})}this.addChildrenMap("background",r),this.addChildrenMap("header",s),this.addChildrenMap("footer",o)}runLayout(t,e,i){return this.ignoreLayout||(super.runLayout(t,e,i),this.resizeController()),this}set t(t){var e=this.childMargin;if(0!==e.top||0!==e.bottom){var i=this.childrenMap.child,r=i.topChildOY-i.bottomChildOY;t=((r+e.top+e.bottom)*t-e.top)/r}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,e=this.childMargin;if(0!==e.top||0!==e.bottom){var i=this.childrenMap.child,r=i.topChildOY-i.bottomChildOY,n=r+e.top+e.bottom;t=(r*t+e.top)/n}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return 0===this.orientation?1:0}setChildOY(t,e){return void 0===e&&(e=!1),e&&(t=Fv(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,e){return this.setChildOY(this.childOY+t,e),this}setT(t,e){return void 0===e&&(e=!1),e&&(t=Fv(t,0,1)),this.t=t,this}addT(t,e){return this.setT(this.t+t,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var t=this.childrenMap.slider;return!!t&&t.enable}set sliderEnable(t){var e=this.childrenMap.slider;e&&e.setEnable(t)}setSliderEnable(t){return void 0===t&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return!!t&&t.enable}set scrollerEnable(t){var e=this.childrenMap.scroller;e&&e.setEnable(t)}setScrollerEnable(t){return void 0===t&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return!!t&&t.enable}set mouseWheelScrollerEnable(t){var e=this.childrenMap.mouseWheelScrollerEnable;e&&e.setEnable(t)}setMouseWheelScrollerEnable(t){return void 0===t&&(t=!0),this.mouseWheelScrollerEnable=t,this}get interactiveChild(){return this.childrenMap.child}setDropZoneEnable(t){void 0===t&&(t=!0);var e=this.interactiveChild;return e.setInteractive(),e.input.dropZone=t,this}}var Bv={resizeController:function(){var t=this.topChildOY,e=this.bottomChildOY,i=this.childrenMap.scroller,r=this.childrenMap.slider;return i&&i.setBounds(e,t),r&&r.setEnable(e!==t),this.updateController(),this},updateController:function(){var t=this.childrenMap.scroller,e=this.childrenMap.slider;t&&t.setValue(this.childOY),e&&e.setValue(this.t)}};Object.assign(Dv.prototype,Bv);const Nv=Dv;class zv{constructor(t,e){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){void 0===t&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){null==t&&(t=0);var e=this.parent;0===this._deltaHeight&&0!==t?e.nonZeroDeltaHeightCount++:0!==this._deltaHeight&&0===t&&e.nonZeroDeltaHeightCount--;var i=this._deltaHeight!==t;if(this._deltaHeight=t,i){e.resetTotalRowsHeight();var r=0===this.scrollMode?"cellheightchange":"cellwidthchange";this.parentContainer.emit(r,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return 0===this.scrollMode?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){1!==this.scrollMode&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return 0===this.scrollMode?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){0!==this.scrollMode&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(zv.prototype,Ur);const Uv=zv,Yv=Phaser.Utils.Objects.GetValue,Xv=Phaser.Utils.Array.SpliceOne,Gv=function(t){return t.hasOwnProperty("geometryMask")?t.geometryMask:t.bitmapMask},Wv=Phaser.Geom.Intersects.RectangleToRectangle,Vv=Phaser.Geom.Rectangle.Overlaps;var jv=function(t){for(;;){var e=t.rexContainer;if(e){if(e.visible){var i=e.parent;if(i){t=i;continue}return!0}return!1}return t.visible}},Hv=function(t,e){var i=0,r=e.top,n=e.bottom,s=e.left,o=e.right;return i+=t.contains(s,r)?1:0,i+=t.contains(s,n)?1:0,(i+=t.contains(o,r)?1:0)+(t.contains(o,n)?1:0)},qv=function(t,e,i){t.setChildMaskVisible(e,!0),e.clearMask&&e.clearMask()},Kv=function(t,e,i){t.setChildMaskVisible(e,!0),e.setMask&&e.setMask(i)},Zv=function(t,e,i){t.setChildMaskVisible(e,!1),e.clearMask&&e.clearMask()};const Jv=Phaser.Utils.Objects.GetValue,$v={update:0,everyTick:1},Qv={setupChildrenMask(t){return!1===t||(this.setMaskUpdateMode(Jv(t,"updateMode",0)),this.enableChildrenMask(Jv(t,"padding",0)),this.setMaskLayer(Jv(t,"layer",void 0)),this.startMaskUpdate()),this},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(t){return"string"==typeof t&&(t=$v[t]),this.maskUpdateMode=t,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(t){var e=Vp.call(this,null,this,0,t);return this.childrenMask=e.createGeometryMask(),this},setMaskChildrenFlag(t){return void 0===t&&(t=!0),this.maskChildrenFlag=t,this},setMaskLayer(t){return this.maskLayer=t,this},maskChildren(){return this.childrenMask&&this.maskChildrenFlag&&0!==this.alpha&&this.visible?(this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):function(t,e,i){if(e){void 0===i&&(i=t.getAllChildren());for(var r,n,s=t.getBounds(),o=Gv(e),a=0,h=i.length;a<h;a++)if(!(r=i[a]).hasOwnProperty("isRexContainerLite")&&r!==o&&jv(r))if(r.getBounds)switch(n=r.getBounds(n),Hv(s,n)){case 4:qv(t,r);break;case 0:Wv(s,n)||Vv(s,n)?Kv(t,r,e):Zv(t,r);break;default:Kv(t,r,e)}else Kv(t,r,e)}}(this,this.childrenMask,this.getAllChildren(),this.maskLayer),0===this.maskUpdateMode&&(this.maskChildrenFlag=!1),this):this},layoutChildrenMask(){if(!this.childrenMask)return this;var t=Gv(this.childrenMask);return t.setPosition().resize(),this.resetChildPositionState(t),this}},tm=function(t){if(this.emit("cellinvisible",t),this.cellContainersPool){var e=t.popContainer();e&&this.cellContainersPool.killAndHide(e)}t.destroyContainer()},em=function(){var t=this.preVisibleCells,e=this.visibleCells;t.iterate((function(t){e.contains(t)||tm.call(this,t)}),this)},im=function(t){var e,i=null;(e=t.getContainer())?(i=e,t.popContainer()):this.cellContainersPool&&null!==(i=this.cellContainersPool.getFirstDead())&&i.setActive(!0).setVisible(!0),this.emit("cellvisible",t,i,this),this.cellContainersPool&&((e=t.getContainer())?null===i?this.cellContainersPool.add(e):i!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(i)):null!==i&&this.cellContainersPool.killAndHide(i))};var rm=function(t){var e=0===this.scrollMode?this.topLeftX:this.topLeftY;return this.tableOX+this.table.colIndexToWidth(0,t-1)+e},nm=function(t){var e=0===this.scrollMode?this.topLeftY:this.topLeftX;return this.tableOY+this.table.rowIndexToHeight(0,t-1)+e};const sm=function(){if(0!==this.cellsCount){var t=this.table,e=t.heightToRowIndex(-this.tableOY);e<=0&&(e=0);var i=e,r=t.widthToColIndex(-this.tableOX);r<=0&&(r=0);for(var n=r,s=t.colRowToCellIndex(n,i),o=this.bottomBound,a=this.rightBound,h=t.cellsCount-1,l=t.colCount-1,u=rm.call(this,n),c=u,d=nm.call(this,i);d<o&&s<=h;){if(this.table.isValidCellIdx(s)){var f=t.getCell(s,!0);this.visibleCells.set(f),this.preVisibleCells.contains(f)||im.call(this,f),0===this.scrollMode?f.setXY(c,d):f.setXY(d,c)}c<a&&n<l?(c+=t.getColWidth(n),n+=1):(c=u,d+=t.getRowHeight(i),n=r,i+=1),s=t.colRowToCellIndex(n,i)}}};var om=function(){var t=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=t,this.visibleCells.clear()};var am=function(t,e){e-=this.y+this.topLeftY,t-=this.x+this.topLeftX;var i=this.tableOY-(0===this.scrollMode?e:t),r=this.tableOX-(0===this.scrollMode?t:e),n=this.table,s=n.heightToRowIndex(-i),o=n.widthToColIndex(-r),a=n.colRowToCellIndex(o,s);return null===a?null:this.isCellVisible(a)?a:null};const hm=Phaser.Math.Clamp;var lm={setTableOY:function(t){var e=this.table,i=this.topTableOY,r=this.bottomTableOY,n=t>this.topTableOY,s=t<this.bottomTableOY;return this.clampTableOXY&&(e.rowCount<e.heightToRowIndex(this.instHeight,!0)?t=0:n?t=i:s&&(t=r)),this._tableOY!==t&&(this._tableOY=t),n&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=n,s&&(this.execeedBottomState||this.emit("execeedbottom",this,t,r)),this.execeedBottomState=s,this},setTableOX:function(t){var e=this.table,i=this.leftTableOX,r=this.rightTableOX,n=t>this.leftTableOX,s=t<this.rightTableOX;return this.clampTableOXY&&(e.colCount<e.widthToColIndex(this.instWidth,!0)?t=0:n?t=i:s&&(t=r)),this._tableOX!==t&&(this._tableOX=t),n&&(this.execeedLeftState||this.emit("execeedleft",this,t,i)),this.execeedLeftState=n,s&&(this.execeedRightState||this.emit("execeedright",this,t,r)),this.execeedRightState=s,this},updateTable:function(t){return void 0===t&&(t=!1),t&&(om.call(this),em.call(this)),om.call(this),sm.call(this),em.call(this),this.setMaskChildrenFlag(),this},isCellVisible:function(t){var e=this.table.getCell(t,!1);return e&&this.visibleCells.contains(e)},pointToCellIndex:am,pointToCellContainer:function(t,e){var i=am.call(this,t,e);if(null!==i)return this.getCellContainer(i)},eachVisibleCell:function(t,e){return this.visibleCells.each(t,e),this},iterateVisibleCell:function(t,e){return this.visibleCells.iterate(t,e),this},eachCell:function(t,e){return this.table.cells.slice().forEach(t,e),this},iterateCell:function(t,e){return this.table.cells.forEach(t,e),this},setCellsCount:function(t){var e=this.cellsCount;return e===t||(e>t?this.removeCells(t,e-t):this.insertNewCells(e,t-e)),this},insertNewCells:function(t,e){return"object"==typeof t&&(t=t.index),void 0===e&&(e=1),e<=0||(t=hm(t,0,this.cellsCount),this.table.insertNewCells(t,e)),this},removeCells:function(t,e){if("object"==typeof t&&(t=t.index),void 0===e&&(e=1),t<0&&(e+=t,t=0),e<=0)return this;if(t>this.cellsCount)return this;for(var i,r=t,n=t+e;r<n;r++)(i=this.getCell(r,!1))&&(this.visibleCells.contains(i)&&(tm.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(t,e),this},setColumnCount:function(t){return this.table.colCount===t||this.table.setColumnCount(t),this},setGridSize:function(t,e){return this.setCellsCount(t*e),this.table.setColumnCount(t),this},updateVisibleCell:function(t){var e=this.table.getCell(t,!1);return e&&e.container?(im.call(this,e),this):this}};Object.assign(lm,Qv);const um=lm,cm=Phaser.GameObjects.Group,dm=Phaser.Structs.Set,fm=Phaser.Utils.Objects.GetValue;class pm extends Lr{constructor(t,e,i,r,n,s){void 0===s&&(s={}),super(t,e,i,r,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new dm,this.preVisibleCells=new dm,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,fm(s,"reuseCellContainer",!1)&&(this.cellContainersPool=new cm(t));var o=fm(s,"cellVisibleCallback",null);if(null!==o){var a=fm(s,"cellVisibleCallbackScope",void 0);this.on("cellvisible",o,a)}if(null!==(o=fm(s,"cellInvisibleCallback",null))&&(a=fm(s,"cellInvisibleCallbackScope",void 0),this.on("cellinvisible",o,a)),this.setupChildrenMask(fm(s,"mask",void 0)),this.setScrollMode(fm(s,"scrollMode",0)),this.setClampMode(fm(s,"clamplTableOXY",!0)),0===this.scrollMode){var h=fm(s,"cellWidth",void 0);if(this.expandCellSize=void 0===h,void 0===h){var l=fm(s,"columns",1);s.cellWidth=this.width/l}}else{h=fm(s,"cellHeight",void 0);var u=fm(s,"cellWidth",void 0);this.expandCellSize=void 0===h,s.cellWidth=h,s.cellHeight=u}this.table=new class{constructor(t,e){this.parent=t,this.cells=[],this.cellPool=new Ft,this.resetFromJSON(e)}resetFromJSON(t){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(Yv(t,"cellHeight",30)),this.setDefaultCellWidth(Yv(t,"cellWidth",30)),this.initCells(Yv(t,"cellsCount",0)),this.setColumnCount(Yv(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return 0===this.nonZeroDeltaHeightCount}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var i=0;i<t;i++)e[i]=null;return this}insertNewCells(t,e){var i=this.cells;if(t===i.length){var r=t+e;i.legth=r;for(var n=t;n<r;n++)i[n]=null}else{var s=[];for(s.length=e,n=0;n<e;n++)s[n]=null;this.cells.splice(t,0,...s)}return this.resetTotalRowsHeight(),this}removeCells(t,e){for(var i=t+e,r=t;r<i;r++)this.freeCell(r);return i===this.cells.length?this.cells.length=t:(1===e?Xv(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var i=t/this.defaultCellHeight;return e?Math.ceil(i):Math.floor(i)}var r,n=this.rowCount,s=t;for(i=0;;){if(r=i>=0&&i<n,!((s-=this.getRowHeight(i))>0&&r)){if(0===s)return i;if(e){var o=i;(r=(i+=1)>=0&&i<n)||(i=o)}return i}i+=1}}widthToColIndex(t,e){var i=t/this.defaultCellWidth;return e?Math.ceil(i):Math.floor(i)}colRowToCellIndex(t,e){return t>=this.colCount?null:e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var i=0,r=t;r<=e;r++)i+=this.getRowHeight(r);return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var i,r=0,n=0;n<e;n++)r<(i=this.getCellHeight(this.colRowToCellIndex(n,t)))&&(r=i);return r}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var i=this.getCell(t,!1),r=i?i.deltaHeight:0;e=this.defaultCellHeight+r}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return null===this._totalRowsHeight&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(void 0===e&&(e=!0),null===this.cells[t]&&e){var i=this.newCell(t);this.cells[t]=i}return this.cells[t]}newCell(t){var e=this.cellPool.pop();return null===e?e=new Uv(this):e.setParent(this),e.index=t,e}buildCellIndex(t){void 0===t&&(t=0);for(var e,i=this.cells,r=t,n=i.length;r<n;r++)(e=i[r])&&(e.index=r);return this}getParentContainer(){return this.parent}freeCell(t){return"number"==typeof t&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}(this,s),this.updateTable()}destroy(t){this.scene&&(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return"string"==typeof t&&(t=gm[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return void 0===t&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,e){return this.setTableOY(e).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,e){return this.addTableOY(e).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return 0===t?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var e,i=this.table.getCell(t,!1);return i&&(e=i.getContainer()),e}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){return("number"==typeof t?this.table.getCell(t,!0):t).height=e,this}setCellWidth(t,e){return("number"==typeof t?this.table.getCell(t,!0):t).width=e,this}get instHeight(){return 0===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight,e=this.instHeight;return t>e?t-e:0}get tableVisibleWidth(){var t=this.tableWidth,e=this.instWidth;return t>e?t-e:0}get bottomLeftY(){return-this.displayHeight*this.originY+this.displayHeight}get topRightX(){return-this.displayWidth*this.originX+this.displayWidth}get topLeftX(){return-this.displayWidth*this.originX}get topLeftY(){return-this.displayHeight*this.originY}get bottomBound(){return 0===this.scrollMode?this.bottomLeftY:this.topRightX}get rightBound(){return 0===this.scrollMode?this.topRightX:this.bottomLeftY}resize(t,e){return this.width===t&&this.height===e||(super.resize(t,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren()),this}}Object.assign(pm.prototype,um);const gm={v:0,vertical:0,h:1,horizontal:1},vm=pm,mm=function(t){t.on("cellvisible",(function(t,e,i){var r=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;t.item=this.items[t.index],(e=n?r.call(n,t,e,i):r(t,e,i))&&(e.setOrigin&&e.setOrigin(0),e.isRexSizer&&e.layout()),t.item=void 0,t.setContainer(e)}),this)},ym=function(t,e,i,r,n,s,o){var a;if(null!=(a=void 0===n?r:i.pointToCellIndex(r,n))){var h=i.getCellContainer(a);h&&t.emit(e,h,a,s,o)}},xm=function(t,e){t.on("pointerdown",(function(e,i,r,n){ym(this.eventEmitter,"cell.down",t,e.x,e.y,e,n)}),this).on("pointerup",(function(e,i,r,n){ym(this.eventEmitter,"cell.up",t,e.x,e.y,e,n)}),this)};var bm=function(t,e,i,r){var n=this.childrenMap.child,s=n.pointToCellIndex(t.x,t.y);if(s!==n.input.lastOverCellIndex){var o=n.input.lastOverCellIndex;n.input.lastOverCellIndex=s,ym(this.eventEmitter,"cell.out",n,o,void 0,t,r),ym(this.eventEmitter,"cell.over",n,s,void 0,t,r)}},wm=function(t,e){var i=this.childrenMap.child,r=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,ym(this.eventEmitter,"cell.out",i,r,void 0,t,e)};const Tm=function(t,e){t.on("pointermove",bm,this).on("pointerover",bm,this).on("pointerout",wm,this)},Sm=Phaser.Utils.Objects.GetValue,Em=function(t,e){var i=Sm(e,"click",void 0);!1!==i&&(void 0===i&&(i={}),i.threshold=10,t._click=new yu(t,i),t._click.on("click",(function(t,e,i,r){ym(this.eventEmitter,"cell.click",e,i.x,i.y,i,r)}),this))},Cm=Phaser.Utils.Objects.GetValue,_m=function(t,e){var i=Cm(e,"tap",void 0);!1!==i&&(t._tap=new Lc(t,i),t._tap.on("tap",(function(t,e,i){var r=`cell.${t.tapsCount}tap`;ym(this.eventEmitter,r,t.gameObject,t.x,t.y,i)}),this))},Am=Phaser.Utils.Objects.GetValue,Mm=function(t,e){var i=Am(e,"press",void 0);!1!==i&&(t._press=new Dc(t,i),t._press.on("pressstart",(function(e,i,r){ym(this.eventEmitter,"cell.pressstart",t,e.x,e.y,r)}),this).on("pressend",(function(e,i,r){ym(this.eventEmitter,"cell.pressend",t,e.x,e.y,r)}),this))},Pm=Phaser.Utils.Objects.GetValue,km=function(t,e){var i=Pm(e,"swipe",void 0);!1!==i&&(void 0===i&&(i={}),i.dir="4dir",t._swipe=new zc(t,i),t._swipe.on("swipe",(function(e,i,r){var n=e.left?"left":e.right?"right":e.up?"up":"down";ym(this.eventEmitter,`cell.swipe${n}`,t,e.x,e.y,r)}),this))},Om=function(t,e){t.setInteractive(),xm.call(this,t,e),Tm.call(this,t,e),Em.call(this,t,e),_m.call(this,t,e),Mm.call(this,t,e),km.call(this,t,e)},Rm=Phaser.Utils.Objects.GetValue;class Lm extends Nv{constructor(t,e){void 0===e&&(e={});var i=bv(e),r=Rm(e,"table",void 0);void 0===r&&(r={}),r.scrollMode=i,r.clamplTableOXY=Rm(e,"clamplChildOY",!1);var n,s,o=Rm(r,"width",void 0),a=Rm(r,"height",void 0),h=new vm(t,0,0,o,a,r);t.add.existing(h),0===i?(n=void 0===o?1:0,s=void 0===a):(n=void 0===a?1:0,s=void 0===o),function(t){Object.defineProperty(t,"childOY",{configurable:!0,get:function(){return t.tableOY},set:function(e){t.tableOY=e}}),Object.defineProperty(t,"topChildOY",{get:function(){return t.topTableOY}}),Object.defineProperty(t,"bottomChildOY",{get:function(){return t.bottomTableOY}})}(h),e.type="rexGridTable",e.child={gameObject:h,proportion:n,expand:s};var l=Rm(e,"space",void 0);l&&(l.child=l.table),super(t,e),this.addChildrenMap("table",h),this.eventEmitter=Rm(e,"eventEmitter",this);var u=Rm(e,"createCellContainerCallback",Yt),c=Rm(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(u,c),mm.call(this,h),this.resizeControllerFlag=!1;var d=0===i?"cellheightchange":"cellwidthchange";h.on(d,(function(){this.resizeControllerFlag=!0}),this),Rm(r,"interactive",!0)&&Om.call(this,h,r),this.setItems(Rm(e,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){this.scene&&(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,e){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(t){return this.childrenMap.child.getCell(t)}getCellContainer(t){return this.childrenMap.child.getCellContainer(t)}updateVisibleCell(t){return this.childrenMap.child.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var Im={setItems:function(t){void 0===t?this.items.length=0:this.items=t;var e=this.childrenMap.child;return e.setCellsCount(this.items.length),e.updateTable(!0),this.resizeController(),this}};Object.assign(Lm.prototype,Im);const Fm=Lm;n.register("gridTable",(function(t){var e=new Fm(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.GridTable",Fm);const Dm=function(t,e){return t.sameOrientation?t.orientation=e.orientation:t.orientation=0===e.orientation?1:0,t},Bm={expandSubMenu:function(t,e){var i;this.collapseSubMenu(),i=this.root.toggleOrientation?0===this.orientation?1:0:this.orientation;var r=new this.constructor(this.scene,{items:e,orientation:i,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:t});return this.pin(r),this.childrenMap.subMenu=r,this.root.emit("expand",r,t,this),this},collapse:function(){return this.root.emit("collapse",this,this.parentButton,this.root),this.scaleDownDestroy(Dm(this.root.easeOut,this)),this.collapseSubMenu(),this},collapseSubMenu:function(){if(void 0===this.childrenMap.subMenu)return this;var t=this.childrenMap.subMenu;return this.childrenMap.subMenu=void 0,this.remove(t),t.collapse(),this}},Nm=Phaser.Utils.Objects.GetValue;class zm extends gg{constructor(t,e){void 0===e&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var i=e._rootMenu,r=e._parentMenu,n=e._parentButton,s=Nm(e,"items",void 0),o=Nm(e,"createBackgroundCallback",void 0),a=Nm(e,"createBackgroundCallbackScope",void 0);e.background=function(t,e,i,r){var n;return i&&(e.scene=t,n=r?i.call(r,e):i(e),e.scene=void 0),n}(t,s,o,a);var h=Nm(e,"createButtonCallback",void 0),l=Nm(e,"createButtonCallbackScope",void 0);e.buttons=function(t,e,i,r){var n,s,o=[];if(e&&i)for(var a=0,h=e.length;a<h;a++)(n=e[a]).scene=t,s=r?i.call(r,n,a,e):i(n,a,e),n.scene=void 0,o.push(s);return o}(t,s,h,l),super(t,e),this.type="rexMenu",this.items=s,this.root=void 0===i?this:i,this.parentMenu=r,this.parentButton=n;var u=this.root===this;if(u){var c=e.bounds;void 0===c&&(c=Th(t)),this.bounds=c,this.subMenuSide=[this.y<c.centerY?Wm:Gm,this.x<c.centerX?Xm:Ym],void 0!==(m=Nm(e,"subMenuSide",void 0))&&("string"==typeof m&&(m=Vm[m]),this.subMenuSide[this.orientation]=m),this.toggleOrientation=Nm(e,"toggleOrientation",!1),this.expandEventName=Nm(e,"expandEvent","button.click"),this.easeIn=Um(this,Nm(e,"easeIn",0)),this.easeOut=Um(this,Nm(e,"easeOut",0)),this.createBackgroundCallback=o,this.createBackgroundCallbackScope=a,this.createButtonCallback=h,this.createButtonCallbackScope=l,this._isPassedEvent=!1}var d,f=0,p=0;if(!this.root.easeIn.sameOrientation){var g=Dm(this.root.easeIn,this).orientation,v=r?r.orientation:this.orientation,m=this.root.subMenuSide[v];0===g&&m===Ym&&(f=1),1===g&&m===Gm&&(p=1)}if(this.setOrigin(f,p).layout(),!u)switch(m=this.root.subMenuSide[r.orientation]){case Ym:this.alignTop(n.top).alignRight(n.left);break;case Xm:this.alignTop(n.top).alignLeft(n.right);break;case Gm:this.alignLeft(n.left).alignBottom(n.top);break;case Wm:this.alignLeft(n.left).alignTop(n.bottom)}this.pushIntoBounds(this.root.bounds),(d=this).on(d.root.expandEventName,(function(t,e){if(!this._isPassedEvent){var i=this.items[e].children;i&&this.expandSubMenu(t,i)}}),d).on("button.click",(function(t,e,i,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,e,i,r),this.root._isPassedEvent=!1)}),d).on("button.over",(function(t,e,i,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,e,i,r),this.root._isPassedEvent=!1)}),d).on("button.out",(function(t,e,i,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,e,i,r),this.root._isPassedEvent=!1)}),d),this.popUp(Dm(this.root.easeIn,this)),this.once("popup.complete",(function(){this!==this.root&&this.root.emit("popup.complete",this)}),this)}isInTouching(t){return!!super.isInTouching(t)||!!this.childrenMap.subMenu&&this.childrenMap.subMenu.isInTouching(t)}}var Um=function(t,e){return"number"==typeof e&&(e={duration:e}),e.hasOwnProperty("orientation")&&void 0!==e.orientation?e.sameOrientation=rp(e.orientation)===t.orientation:e.sameOrientation=!0,e};const Ym=2,Xm=0,Gm=3,Wm=1,Vm={up:Gm,down:Wm,left:Ym,right:Xm};Object.assign(zm.prototype,Bm);const jm=zm;n.register("menu",(function(t){var e=new jm(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Menu",jm);const Hm=Phaser.GameObjects.Text,qm=function(t){return t instanceof Hm},Km=Phaser.GameObjects.BitmapText,Zm=function(t){return t instanceof Km},Jm=function(t){return Zm(t)?2:qm(t)?0:1},$m=function(t,e,i){switch(Jm(t)){case 0:i=t.getWrappedText(e);break;case 1:i=t.getPenManager(e,i);break;case 2:i=t.setText(e).getTextBounds().wrappedText.split("\n")}return i};var Qm=function(t){return Array.isArray(t)?t=t.join("\n"):"number"==typeof t&&(t=t.toString()),t};const ty={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(t){var e=this.totalLinesCount;this.sections.push(Qm(t)),t=this.sections.join("\n"),this.lines=$m(this.parent,t,this.lines);for(var i=this.totalLinesCount-e,r=Math.ceil(i/this.pageLinesCount),n=0;n<r;n++)this.pageStartIndexes.push(e+n*this.pageLinesCount);return this},setText(t,e){void 0===e&&(e=!0),e&&this.resetPageIdx(),this.clearText();for(var i=Qm(t).split(this.pageBreak),r=0,n=i.length;r<n;r++)this.appendPage(i[r]);return this},appendText(t){var e=this.content+Qm(t);return this.setText(e,!1),this}},ey=Phaser.Math.Clamp,iy={getPage(t){return void 0===t&&(t=this.pageIndex),this.setPageIndex(t).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(t){return t=ey(t,0,this.pageCount-1),this.pageIndex=t,this.startLineIndex=this.pageStartIndexes[t],this.endLineIndex=this.pageStartIndexes[t+1],this}},ry=function(t,e){switch(Jm(t)){case 0:var i=(n=t.style).wordWrapWidth,r=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,t.setText(e),n.wordWrapWidth=i,n.wordWrapCallback=r;break;case 1:var n,s=(n=t.style).wrapMode;n.wrapMode=0,t.setText(e),n.wrapMode=s;break;case 2:var o=t._maxWidth;t._maxWidth=0,t.setText(e),t._maxWidth=o}},ny={showPage(t){return this.displayText(this.getPage(t)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(t){ry(this.parent,t)}};var sy={getLines:function(t,e){var i;switch(void 0===t&&(t=this.startLineIndex),void 0===e&&(e=t+this.pageLinesCount),this.textObjectType){case 0:case 2:i=this.lines.slice(t,e).join("\n");break;case 1:var r=this.lines.getLineStartIndex(t),n=this.lines.getLineEndIndex(e-1);i=this.lines.getSliceTagText(r,n,!0)}return i}};Object.assign(sy,ty,iy,ny);const oy=sy,ay=Phaser.Utils.Objects.GetValue,hy=Phaser.Math.Clamp;class ly extends zo{constructor(t,e){super(t,{eventEmitter:!1}),this.textObjectType=Jm(this.parent),this.pageStartIndexes=[],this.lines=$m(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(t){return this.setMaxLines(ay(t,"maxLines",void 0)),this.setPageBreak(ay(t,"pageBreak","\f\n")),this.setText(ay(t,"text","")),this.setStartLineIndex(ay(t,"start",0)),this.setPageIndex(ay(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case 0:case 2:this.lines.length=0;break;case 1:this.lines.destroy()}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=hy(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(void 0!==this.maxLines)return this.maxLines;var t;switch(this.textObjectType){case 0:case 1:var e=this.parent.style.maxLines;t=e>0?e:this.totalLinesCount;break;case 2:t=this.totalLinesCount}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(ly.prototype,oy);const uy=ly,cy=Phaser.Utils.Objects.GetFastValue,dy=Phaser.Utils.Objects.GetValue;var fy=function(t){return Array.isArray(t)?t=t.join("\n"):"number"==typeof t&&(t=t.toString()),t};const py={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},gy=class extends zo{constructor(t,e){super(t,e),this.timer=null,this.resetFromJSON(e)}resetFromJSON(t){this.setTextWrapEnable(dy(t,"wrap",!1)),this.setTypeMode(dy(t,"typeMode",0)),this.setTypeSpeed(dy(t,"speed",333)),this.setTextCallback=cy(t,"setTextCallback",null),this.setTextCallbackScope=cy(t,"setTextCallbackScope",null),this.setTypingContent(cy(t,"text","")),this.typingIdx=cy(t,"typingIdx",0),this.insertIdx=cy(t,"insertIdx",null);var e=cy(t,"elapsed",null);return null!==e&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return"string"==typeof t&&(t=py[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return void 0===t&&(t=!0),this.textWrapEnable=t,this}set text(t){var e=fy(t);this.textWrapEnable&&(e=function(t,e){switch(Jm(t)){case 0:t.style.syncFont(t.canvas,t.context),e=t.runWordWrap(e);break;case 1:e=t.getText(e,void 0,void 0,!0);break;case 2:e=t.setText(e).getTextBounds().wrappedText}return e}(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return null!==this.getTimer()}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,i,r){return void 0!==t&&this.setTypingContent(t),void 0!==e&&(this.speed=e),void 0===i&&(i=0),this.typingIdx=i+1,0===this.speed?this.stop(!0):(this.setText(""),this.startTimer(r)),this}appendText(t){var e=this.text.concat(fy(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){return this.getTimer()&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,i,r){var n;if(0===r){var s=0,o=e;this.insertIdx=o,n=this.getSubString(t,s,o)}else if(1===r)s=(o=i)-e,this.insertIdx=0,n=this.getSubString(t,s,o);else if(2===r){var a=i/2;o=(s=Math.floor(a-e/2))+e,this.insertIdx=e%2?e:0,n=this.getSubString(t,s,o)}else if(3===r){var h,l=Math.floor(e/2);l>0?(s=(o=i)-l,h=this.getSubString(t,s,o)):h="";var u,c=e-l;c>0?(o=(s=0)+c,this.insertIdx=o,u=this.getSubString(t,s,o)):(u="",this.insertIdx=0),n=u+h}return n}startTimer(t){var e;return this.timer&&this.freeTimer(),void 0===t?e=0:(this.speed,e=t),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(t=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?ry(this.parent,t):this.parent.setText(t)}getTextLength(t){var e=this.parent;return e.getPlainText?e.getPlainText(t).length:t.length}getSubString(t,e,i){var r=this.parent;return r.getSubString?r.getSubString(t,e,i):t.slice(e,i)}},vy=Phaser.Utils.Objects.GetValue;var my=function(t){return t.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};const yy=class extends Hp{constructor(t,e){void 0===e&&(e={text:my(t)}),super(t,e),this.type="rexTextBox";var i=this.childrenMap.text;this.page=new uy(i,vy(e,"page",void 0)),this.typing=new gy(i,vy(e,"type",void 0)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=i.width,this.textHeight=i.height}start(t,e){return this.page.setText(t),void 0!==e&&this.setTypeSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypeSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;this.textWidth===t.width&&this.textHeight===t.height||(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}};n.register("textBox",(function(t){var e=new yy(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.TextBox",yy);const xy=Phaser.Utils.Objects.GetValue,by=class extends ap{constructor(t,e){super(t,e),this.type="rexNumberBar";var i,r,n,s=xy(e,"background",void 0),o=xy(e,"icon",void 0),a=xy(e,"iconMask",void 0),h=xy(e,"slider",void 0),l=xy(e,"text",void 0),u=xy(e,"space.icon",0),c=xy(e,"space.slider",0);(s&&this.addBackground(s),o&&(0===this.orientation?(h||l)&&(r={right:u}):(h||l)&&(r={bottom:u}),this.add(o,0,"center",r),a&&(a=Vp.call(this,o,o,1))),h)&&(h.orientation=this.orientation,h.eventEmitter=this,h.value=null,h.hasOwnProperty("input")||(h.input=-1),i=new mv(t,h),0===this.orientation?l&&(r={right:c}):l&&(r={bottom:c}),n=0===this.orientation?void 0===xy(h,"width",void 0)?1:0:void 0===xy(h,"height",void 0)?1:0,this.add(i,n,"center",r));l&&this.add(l),this.addChildrenMap("background",s),this.addChildrenMap("icon",o),this.addChildrenMap("iconMask",a),this.addChildrenMap("slider",i),this.addChildrenMap("text",l);var d=xy(e,"valuechangeCallback",null);if(null!==d){var f=xy(e,"valuechangeCallbackScope",void 0);this.on("valuechange",d,f)}this.setEnable(xy(e,"enable",void 0)),this.setValue(xy(e,"value",0))}get enable(){return!!this.childrenMap.slider&&this.childrenMap.slider.enable}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,i),this}addValue(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,i),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,i){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,i),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;return void 0===t?"":t.text?t.text:t.getData("text")}set text(t){var e=this.childrenMap.text;void 0!==e&&(e.setText?e.setText(t):e.setData("text",t))}setText(t){return this.text=t,this}};n.register("numberBar",(function(t){var e=new by(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.NumberBar",by);const wy=Phaser.Utils.Objects.GetValue,Ty={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"},Sy=class extends fd{constructor(t,e){super(t,e),this.type="rexBadge";var i=wy(e,"background",void 0);i&&this.addBackground(i),this.addChildrenMap("background",i);var r=wy(e,"main",void 0);for(var n in r&&this.add(r,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",r),Ty){var s=wy(e,n,void 0);s&&(this.add(s,{key:n,align:Ty[n],expand:!1}),this.addChildrenMap(n,s))}}};n.register("badgeLabel",(function(t){var e=new Sy(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.BadgeLabel",Sy);const Ey=fd.prototype.add;var Cy=function(t,e,i,r,n,s,o,a,h){return t.setVisible(!1),Ey.call(this,t,e,i,r,n,s,o,a,h),this};const _y={add:Cy,addPage:Cy},Ay=Ir.prototype.setChildVisible;var My={getPage:function(t){return void 0===t?null:this.sizerChildren.hasOwnProperty(t)?this.sizerChildren[t]:null},swapPage:function(t){this._previousKey=this._currentKey;var e=this.previousPage;e&&(0===this.swapMode?(Ay.call(this,e,!1),this.emit("pageinvisible",e,this._previousKey,this)):e.destroy()),t&&!this.sizerChildren.hasOwnProperty(t)&&this.emit("createpage",t,this),this._currentKey=t;var i=this.currentPage;return i&&(Ay.call(this,i,!0),this.emit("pagevisible",i,this._currentKey,this)),this}};Object.assign(My,_y);const Py=My,ky=Phaser.Utils.Objects.GetValue;class Oy extends fd{constructor(t,e){super(t,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(ky(e,"swapMode",0))}setSwapMode(t){return"string"==typeof t&&(t=Ry[t]),this.swapMode=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Oy.prototype,Py);const Ry={invisible:0,destroy:1},Ly=Oy;n.register("pages",(function(t){var e=new Ly(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Pages",Ly);const Iy=function(t){return(t-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Fy=function(t){return t*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},Dy=function(t){var e,i=t+this.visibleLinesCount;switch(this.textObjectType){case 0:case 2:e=this.lines.slice(t,i).join("\n");break;case 1:var r=this.lines.getLineStartIndex(t),n=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(r,n,!0)}return e},By=function(){var t=this.textObject.rexSizer;this.textObject.y+=t.offsetY-t.preOffsetY,t.preOffsetY=t.offsetY,this.resetChildPositionState(this.textObject)},Ny=function(t,e,i){if(i+=this.textLineHeight+this.textLineSpacing,this.textObjectWidth!==e||this.textObjectHeight!==i){switch(this.textObjectWidth=e,this.textObjectHeight=i,this.textObjectType){case 0:case 1:t.setFixedSize(e,i);var r=t.style,n=Math.max(e,0);0===this.textObjectType?r.wordWrapWidth=n:(0===r.wrapMode&&(r.wrapMode=1),r.wrapWidth=n);break;case 2:t.setMaxWidth(e)}this.setText()}},zy={setText:function(t){return void 0!==t&&(this.text=t),this.lines=$m(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},updateTextObject:function(){var t=Math.max(Math.floor(Iy.call(this,-this.textOY)),0),e=Fy.call(this,t)+this.textOY,i=Dy.call(this,t);return ry(this.textObject,i),this.textObject.rexSizer.offsetY=e,By.call(this),this},preLayout:function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,pl.call(this),this},layoutChildren:function(){var t,e,i,r,n,s,o,a=this.left,h=this.top;(t=this.textObject).rexSizer.hidden||(r=a+(i=(e=t.rexSizer).padding).left,n=h+i.top,s=this.width-i.left-i.right,o=this.height-i.top-i.bottom,Ny.call(this,t,s,o),Jh(t,r,n,s,o,e.align),e.preOffsetY=0,By.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))}},Uy=Phaser.Utils.Objects.IsPlainObject,Yy=Phaser.Utils.Objects.GetValue,Xy=Phaser.Display.Align.TOP_LEFT;class Gy extends qc{constructor(t,e,i,r,n,s){Uy(e)?(e=Yy(s=e,"x",0),i=Yy(s,"y",0),r=Yy(s,"width",void 0),n=Yy(s,"height",void 0)):Uy(r)&&(r=Yy(s=r,"width",void 0),n=Yy(s,"height",void 0)),super(t,e,i,r,n,s),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=Yy(s,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Yy(s,"clamplTextOY",!0));var o=Yy(s,"background",void 0),a=Yy(s,"text",void 0);void 0===a&&(a=Wy(t));var h=Yy(s,"textMask",!0);o&&this.addBackground(o),this.add(a),this.sizerChildren=[a];var l=this.getSizerConfig(a);l.align=Xy,l.padding=rl(0),l.expand=!0,this.textObject=a,this.textObjectType=Jm(a),l.preOffsetY=0,l.offsetY=0,h&&(this.textMask=Vp.call(this,this.textObject,this)),this.addChildrenMap("background",o),this.addChildrenMap("text",a)}destroy(t){if(this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case 0:case 2:this.lines.length=0;break;case 1:this.lines.destroy()}this.lines=void 0}super.destroy(t)}}setClampMode(t){return void 0===t&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(void 0===this._textLineHeight){var t;switch(this.textObjectType){case 0:case 1:var e=this.textObject.style;t=e.metrics.fontSize+e.strokeThickness;break;case 2:var i=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*i}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(void 0===this._textLineSpacing){var t;switch(this.textObjectType){case 0:case 1:t=this.textObject.lineSpacing;break;case 2:t=0}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return void 0===this._visibleLinesCount&&(this._visibleLinesCount=Math.floor(Iy.call(this,this.textObjectHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return void 0===this._textHeight&&(this._textHeight=Fy.call(this,this.linesCount)),this._textHeight}get textVisibleHeight(){if(void 0===this._textVisibleHeight){var t,e=this.textHeight,i=this.textObjectHeight-this.textLineHeight-this.textLineSpacing;t=e>i?e-i:0,this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return void 0===t&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return void 0===t&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var e=this.topTextOY,i=this.bottomTextOY,r=this.textOYExceedTop(t),n=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:r?t=e:n&&(t=i)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),r&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,i)),this.execeedBottomState=n}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return 0===t?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var Wy=function(t){return t.add.text(0,0,"")};Object.assign(Gy.prototype,zy);const Vy=Gy,jy=Phaser.Utils.Objects.GetValue;class Hy extends Nv{constructor(t,e){void 0===e&&(e={});var i=jy(e,"text",void 0),r=jy(e,"textWidth",void 0),n=jy(e,"textHeight",void 0),s=jy(e,"textMask",!0),o=jy(e,"content",""),a=new Vy(t,{width:r,height:n,text:i,textMask:s,content:o,clamplTextOY:jy(e,"clamplChildOY",!1)});t.add.existing(a);var h=void 0===r?1:0,l=void 0===n;(function(t){Object.defineProperty(t,"childOY",{configurable:!0,get:function(){return t.textOY},set:function(e){t.textOY=e}}),Object.defineProperty(t,"topChildOY",{get:function(){return t.topTextOY}}),Object.defineProperty(t,"bottomChildOY",{get:function(){return t.bottomTextOY}})})(a),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:a,proportion:h,expand:l};var u=jy(e,"space",void 0);u&&(u.child=u.text),super(t,e),this.addChildrenMap("text",i)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var qy={setText:function(t){return this.childrenMap.child.setText(t),this.resizeController(),this},appendText:function(t){return this.setText(this.text+t),this}};Object.assign(Hy.prototype,qy);const Ky=Hy;n.register("textArea",(function(t){var e=new Ky(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.TextArea",Ky);var Zy={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;var t=this.child;return t.rexSizer.hidden?0:0===this.scrollMode?this.getChildWidth(t):0},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;var t=this.child;return t.rexSizer.hidden||0===this.scrollMode?0:t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:Dh(t)},getChildrenSizers:function(t){return void 0===t&&(t=[]),this.child&&this.child.isRexSizer&&t.push(this.child),t},resetChildPosition:function(){var t=this.left,e=this.top;0===this.scrollMode?e+=this.childOY:t+=this.childOY,this.child.setPosition(t,e),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},layoutChildren:function(){var t,e,i=this.child;i.rexSizer.hidden||(0===this.scrollMode?t=this.width:e=this.height,i.isRexSizer?i.runLayout(this,t,e):cu(i,t,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())}};Object.assign(Zy,Qv);const Jy=Zy,$y=Phaser.Utils.Objects.IsPlainObject,Qy=Phaser.Utils.Objects.GetValue,tx=Phaser.Display.Align.TOP_LEFT;class ex extends qc{constructor(t,e,i,r,n,s){$y(e)?(e=Qy(s=e,"x",0),i=Qy(s,"y",0),r=Qy(s,"width",void 0),n=Qy(s,"height",void 0)):$y(r)&&(r=Qy(s=r,"width",void 0),n=Qy(s,"height",void 0)),super(t,e,i,r,n,s),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(Qy(s,"scrollMode",!0)),this.setClampMode(Qy(s,"clamplChildOY",!0));var o=Qy(s,"child",void 0),a=Qy(s,"expand",!0);o.setOrigin&&o.setOrigin(0),this.add(o),this.sizerChildren=[o];var h=this.getSizerConfig(o);h.align=tx,h.expand=a,this.child=o,this.setupChildrenMask(Qy(s,"mask",void 0))}destroy(t){this.scene&&(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return"string"==typeof t&&(t=yv[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return void 0===t&&(t=!0),this.clampChildOY=t,this}get instHeight(){return 0===this.scrollMode?this.height:this.width}get instWidth(){return 0===this.scrollMode?this.width:this.height}get childHeight(){return 0===this.scrollMode?Dh(this.child):Fh(this.child)}get childWidth(){return 0===this.scrollMode?Fh(this.child):Dh(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get visibleHeight(){var t=this.childHeight,e=this.instHeight;return t>e?t-e:0}childOYExceedTop(t){return void 0===t&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return void 0===t&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var e=this.topChildOY,i=this.bottomChildOY,r=this.childOYExceedTop(t),n=this.childOYExeceedBottom(t);this.clampChildOY&&(this.instHeight>this.childHeight?t=0:r?t=e:n&&(t=i)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),r&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,i)),this.execeedBottomState=n}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return 0===t?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(ex.prototype,Jy);const ix=ex,rx=Phaser.Utils.Objects.GetValue,nx=class extends Nv{constructor(t,e){void 0===e&&(e={});var i=bv(e),r=rx(e,"panel",void 0);void 0===r&&(r={}),r.scrollMode=i,r.clamplChildOY=rx(e,"clamplChildOY",!1);var n=new ix(t,r);t.add.existing(n);var s,o,a=rx(r,"width",void 0),h=rx(r,"height",void 0);0===i?(s=void 0===a?1:0,o=void 0===h):(s=void 0===h?1:0,o=void 0===a),e.type="rexScrollablePanel",e.child={gameObject:n,proportion:s,expand:o};var l=rx(e,"space",void 0);l&&(l.child=l.panel),super(t,e),this.addChildrenMap("panel",this.childrenMap.child.child)}setChildrenInteractive(t){return void 0===t&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),Gc(this.interactiveChild,t),this}};n.register("scrollablePanel",(function(t){var e=new nx(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.ScrollablePanel",nx);const sx=function(t,e){t.popUp(e)},ox=function(t,e){t.scaleDown(e)},ax=function(t,e){t.fadeIn(e)},hx=function(t,e){t.fadeOut(e)},lx=Vo,ux=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=e.length),t.length=r-i;for(var n=0,s=t.length;n<s;n++)t[n]=e[n+i];return t},cx=Phaser.Utils.Objects.GetValue;var dx=function(t,e,i){var r,n=cx(i,"reverse",!1);if(Cr(t[0]))if(n)for(s=(o=t.length)-1;s>=0;s--)r=dx(t[s],e,i);else for(var s=0,o=t.length;s<o;s++)r=dx(t[s],e,i);else r=fx(t,e,i);return r},fx=function(t,e,i){var r,n=cx(i,"argsConvert",void 0),s=cx(i,"argsConvertScope",void 0),o=t[0];if(px=ux(px,t,1),n){!0===n&&(n=Dn,s=void 0);for(var a=0,h=px.length;a<h;a++)px[a]=s?n.call(s,px[a],t):n(px[a],t)}return"string"==typeof o?null==(r=e[o])&&(r=cx(e,o,null)):r=o,r.apply(e,px)},px=[];const gx=dx,vx=Phaser.Utils.Objects.GetValue;var mx=[];const yx={ms:0,s:1,sec:1},xx={abs:0,absolute:0,inc:1,increment:1},bx=class extends zo{constructor(t,e){super(t,e);var i=vx(e,"clock",void 0);i||(i=new lx(t)),this.clock=i,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(t){return this.clock.resetFromJSON(vx(t,"clock",void 0)),this.state=vx(t,"state",0),this.commands=vx(t,"commands",[]),this.scope=vx(t,"scope",void 0),this.setTimeUnit(vx(t,"timeUnit",0)),this.setDtMode(vx(t,"dtMode",0)),this.index=vx(t,"index",0),this.nextTime=vx(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,e,i){this.stop();var r=vx(i,"timeUnit",void 0);void 0!==r&&this.setTimeUnit(r);var n=vx(i,"dtMode",void 0);return void 0!==n&&this.setDtMode(n),t=t.filter((function(t){var e=t[0];return!isNaN(e)})).map((function(t){return"string"==typeof t[0]&&(t[0]=parseFloat(t[0])),t})),0===this.dtMode&&t.sort((function(t,e){var i=t[0],r=e[0];return i>r?1:i<r?-1:0})),this.commands=t,this.scope=e,this}start(t){return void 0===t&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}get isPlaying(){return this.clock.isRunning}get completed(){return 2===this.state}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var e=this.commands.length-1;;){var i=this.commands[this.index],r=i[1];if(Cr(r)||(r=ux(mx,i,1)),gx(r,this.scope),this.emit("runcommand",r,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var e=this.commands[this.index][0];return 1===this.timeUnit&&(e*=1e3),1===this.dtMode&&(e+=t),e}setDtMode(t){return"string"==typeof t&&(t=xx[t]),this.dtMode=t,this}setTimeUnit(t){return"string"==typeof t&&(t=yx[t]),this.timeUnit=t,this}},wx=Phaser.Utils.Objects.GetValue,Tx={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},Sx=class extends Hp{constructor(t,e){void 0===e&&(e={text:createDefaultTextObject(t)}),super(t,e),this.type="rexToast",this.setTransitInTime(wx(e,"duration.in",200)),this.setDisplayTime(wx(e,"duration.hold",1200)),this.setTransitOutTime(wx(e,"duration.out",200)),this.setTransitInCallback(wx(e,"transitIn",Tx.popUp)),this.setTransitOutCallback(wx(e,"transitOut",Tx.scaleDown)),this.player=new bx(this,{dtMode:1}),this.messages=[],this.setVisible(!1)}destroy(t){this.scene&&(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch("string"==typeof t&&(t=Tx[t]),t){case Tx.popUp:t=sx;break;case Tx.fadeIn:t=ax}return this.transitInCallback=t,this}setTransitOutCallback(t){switch("string"==typeof t&&(t=Tx[t]),t){case Tx.scaleDown:t=ox;break;case Tx.fadeOut:t=hx}return this.transitOutCallback=t,this}showMessage(t){if(void 0===t){if(0===this.messages.length)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(1,1).setVisible(!0),"string"==typeof t?this.setText(t):t(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[Yt]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[Yt]]];return this.player.load(e,this).once("complete",(function(){this.showMessage()}),this).start(),this}};n.register("toast",(function(t){var e=new Sx(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Toast",Sx);var Ex=function(t,e){return function(i,r,n,s){"panel"!==r&&n.moveChild(i,s?0:t,e)}},Cx=function(t,e){return function(i,r,n,s){"panel"===r&&n.moveChild(i,s?0:t,e)}};const _x={visible:{show:function(){return function(t,e,i,r){"panel"!==e&&i.setChildVisible(t,!0)}},hide:function(){return function(t,e,i,r){"panel"!==e&&i.setChildVisible(t,!1)}}},fade:{show:function(t,e){return void 0===e&&(e=1),function(i,r,n,s){"panel"!==r&&n.fadeChild(i,s?0:t,e)}},hide:function(t,e){return void 0===e&&(e=0),function(i,r,n,s){"panel"!==r&&n.fadeChild(i,s?0:t,e)}}},move:{show:Ex,hide:Ex},"move-panel":{show:Cx,hide:Cx}},Ax={showChild(t,e){var i=this.sizerChildren[t];return i&&(this.emit("showchild",i,t,this,e),this.resetChildState(i)),this},hideChild(t,e){var i=this.sizerChildren[t];return i&&(this.emit("hidechild",i,t,this,e),this.resetChildState(i)),this},swapChild(t,e){return this.currentChildKey===t||("panel"===this.currentChildKey||"panel"===t?(this.previousChildKey=this.currentChildKey,this.currentChildKey=t,this.hideChild(this.previousChildKey,e),this.showChild(this.currentChildKey,e)):(this.swapChild("panel",e),this.swapChild(t,e))),this},showPanel(t){return this.swapChild("panel",t),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return"leftSide"==this.currentChildKey&&this.showPanel(),this},hideRightSide(){return"rightSide"==this.currentChildKey&&this.showPanel(),this},hideTopSide(){return"topSide"==this.currentChildKey&&this.showPanel(),this},hideBottomSide(){return"bottomSide"==this.currentChildKey&&this.showPanel(),this},toggleLeftSide(){var t="panel"!==this.currentChildKey?"panel":"leftSide";return this.swapChild(t),this},toggleRightSide(){var t="panel"!==this.currentChildKey?"panel":"rightSide";return this.swapChild(t),this},toggleTopSide(){var t="panel"!==this.currentChildKey?"panel":"topSide";return this.swapChild(t),this},toggleBottomSide(){var t="panel"!==this.currentChildKey?"panel":"bottomSide";return this.swapChild(t),this}},Mx=Ir.prototype.setChildVisible,Px={setChildVisible(t,e){if("string"==typeof t){var i=t;t=this.sizerChildren[i]}else i=ld(this.sizerChildren,t);return void 0===e&&(e=this.currentChildKey===i),Mx.call(this,t,e),this}},kx={fadeChild(t,e,i){var r;return"string"==typeof t?(r=t,t=this.sizerChildren[r]):r=ld(this.sizerChildren,t),void 0===e&&(e=500),void 0===i&&(i=this.currentChildKey===r?1:0),t.fadeIn(e,{start:t.alpha,end:i}),this},fadeChildPromise(t,e,i){return"string"==typeof t&&(t=this.sizerChildren[key]),this.fadeChild(t,e,i),t._fade?po(t._fade):Promise.resolve()}},Ox={moveChild(t,e,i,r){var n;"string"==typeof t?(n=t,t=this.sizerChildren[n]):n=ld(this.sizerChildren,t),void 0===e&&(e=500);var s,o,a,h,l=this.currentChildKey===n;if(void 0===r)switch(n){case"leftSide":case"rightSide":r=Fh(t);break;case"topSide":case"bottomSide":r=Dh(t);break;default:if(l)switch(this.previousChildKey){case"leftSide":case"rightSide":r=Fh(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":r=Dh(this.sizerChildren[this.previousChildKey]);break;default:r=0}else switch(this.currentChildKey){case"leftSide":case"rightSide":r=Fh(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":r=Dh(this.sizerChildren[this.currentChildKey]);break;default:r=0}}if(l)switch(n){case"panel":switch(this.previousChildKey){case"leftSide":s=!0;break;case"rightSide":o=!0;break;case"topSide":a=!0;break;case"bottomSide":h=!0}break;case"leftSide":o=!0;break;case"rightSide":s=!0;break;case"topSide":h=!0;break;case"bottomSide":a=!0}else switch(n){case"panel":switch(this.currentChildKey){case"leftSide":o=!0;break;case"rightSide":s=!0;break;case"topSide":h=!0;break;case"bottomSide":a=!0}break;case"leftSide":s=!0;break;case"rightSide":o=!0;break;case"topSide":a=!0;break;case"bottomSide":h=!0}return s?t.moveTo(e,`-=${r}`,void 0,i):o?t.moveTo(e,`+=${r}`,void 0,i):a?t.moveTo(e,void 0,`-=${r}`,i):h?t.moveTo(e,void 0,`+=${r}`,i):t.moveTo(0),this},moveChildPromise(t,e,i,r){return"string"==typeof t&&(t=this.sizerChildren[key]),this.moveChild(t,e,i,r),t._easeMove?po(t._easeMove):Promise.resolve()}};var Rx={};Object.assign(Rx,Px,kx,Ox);const Lx=Rx,Ix=Phaser.Utils.Objects.GetValue;class Fx extends fd{constructor(t,e){super(t,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var i=Ix(e,"showChildCallback",void 0);if(i)if(au(i)){var r=Ix(e,"showChildCallbackScope",void 0);this.on("showchild",i,r);var n=Ix(e,"hideChildCallback",void 0),s=Ix(e,"hideChildCallbackScope",void 0);this.on("hidechild",n,s)}else{var o=function(t){var e,i,r,n;return[e,...i]="string"==typeof t?[t]:t,_x.hasOwnProperty(e)?(r=_x[e].show.apply(null,i),n=_x[e].hide.apply(null,i)):(r=Yt,n=Yt),{show:r,hide:n}}(i);this.on("showchild",o.show),this.on("hidechild",o.hide)}var a=Ix(e,"background",void 0),h=Ix(e,"panel",void 0),l=Ix(e,"leftSide",void 0),u=Ix(e,"rightSide",void 0),c=Ix(e,"topSide",void 0),d=Ix(e,"bottomSide",void 0);if(a&&this.addBackground(a),h&&this.add(h,"panel","center",0,!0),l){var f=Ix(e,"expand.left",!0);this.add(l,"leftSide","left-top",0,{height:f})}u&&(f=Ix(e,"expand.right",!0),this.add(u,"rightSide","right-top",0,{height:f})),c&&(f=Ix(e,"expand.top",!0),this.add(c,"topSide","left-top",0,{width:f})),d&&(f=Ix(e,"expand.bottom",!0),this.add(d,"bottomSide","left-bottom",0,{width:f}))}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Fx.prototype,Ax,Lx);const Dx=Fx;n.register("sides",(function(t){var e=new Dx(this.scene,t);return this.scene.add.existing(e),e})),(0,b.Z)(window,"RexPlugins.UI.Sides",Dx);const Bx=Phaser.GameObjects.GameObject,Nx=function(t){return t instanceof Bx};n.register("click",(function(t,e){return Nx(t)||(e=t,t=this.scene),new xu(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Click",xu),n.register("tap",(function(t,e){return Nx(t)||(e=t,t=this.scene),new Lc(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Tap",Lc),n.register("press",(function(t,e){return Nx(t)||(e=t,t=this.scene),new Dc(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Press",Dc),n.register("swipe",(function(t,e){return Nx(t)||(e=t,t=this.scene),new zc(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Swipe",zc);const zx=class extends ku{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{},BEGIN:{enter:function(){var t=i.pointer;i.startX=t.x,i.startY=t.y,i.startWorldX=t.worldX,i.startWorldY=t.worldY}},RECOGNIZED:{enter:function(){i.emit("panstart",i,i.gameObject,i.lastPointer)},exit:function(){var t=i.lastPointer;i.endX=t.x,i.endY=t.y,i.endWorldX=t.worldX,i.endWorldY=t.worldY,i.emit("panend",i,i.gameObject,i.lastPointer)}}},init:function(){this.state=Gu},eventEmitter:!1};this.setRecongizedStateObject(new Ru(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Xu(t,"threshold",10)),this}onDragStart(){this.state=Wu,0===this.dragThreshold&&(this.state=Vu)}onDragEnd(){this.state=Gu}onDrag(){switch(this.state){case Wu:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Vu);break;case Vu:var t=this.pointer.position,e=this.pointer.prevPosition;this.dx=t.x-e.x,this.dy=t.y-e.y;var i=this.pointer;this.x=i.x,this.y=i.y,this.worldX=i.worldX,this.worldY=i.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}get isPanned(){return this.state===Vu}setDragThreshold(t){return this.dragThreshold=t,this}};n.register("pan",(function(t,e){return Nx(t)||(e=t,t=this.scene),new zx(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Pan",zx);const Ux=function(t){for(var e,i=t.scene.input,r=i.manager,n=r.pointersTotal,s=r.pointers,o=0;o<n;o++)if((e=s[o]).primaryDown&&0===i.getDragState(e)&&Ni(t,e))return i.setDragState(e,1),i._drag[e.id]=[t],0===i.dragDistanceThreshold||0===i.dragTimeThreshold?(i.setDragState(e,3),i.processDragStartList(e)):i.setDragState(e,2),!0;return!1},Yx=Phaser.Utils.Objects.GetValue,Xx=Phaser.Math.Distance.Between,Gx=Phaser.Math.RotateAroundDistance,Wx={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},Vx=class extends zo{constructor(t,e){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Yx(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Yx(t,"enable",!0)),this.setAxisMode(Yx(t,"axis",0)),this.setAxisRotation(Yx(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return"string"==typeof t&&(t=Wx[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return Ux(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,e,i){this.isDragging||(this.pointer=t)}onDrag(t,e,i){if(this.pointer===t){var r=this.parent;if(0===this.axisMode)r.x=e,r.y=i;else if(0===this.axisRotation)1===this.axisMode?r.x=e:2===this.axisMode&&(r.y=i);else{var n,s={x:e,y:i};n=Xx(s.x,s.y,r.x,r.y),s=Gx(s,r.x,r.y,-this.axisRotation,n),1===this.axisMode?s.y=r.y:2===this.axisMode&&(s.x=r.x),n=Xx(s.x,s.y,r.x,r.y),s=Gx(s,r.x,r.y,this.axisRotation,n),r.x=s.x,r.y=s.y}}}onDragEnd(t,e,i,r){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return void 0!==this.pointer}};n.register("drag",(function(t,e){return new Vx(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Drag",Vx);const jx=class extends pc{constructor(t,e){super(t,e);var i=this,r={states:{IDLE:{enter:function(){i.prevDistance=void 0,i.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){i.emit("pinchstart",i)},exit:function(){i.emit("pinchend",i)}}},init:function(){this.state=vc},eventEmitter:!1};this.setRecongizedStateObject(new Ru(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(gc(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=mc,0===this.dragThreshold&&(this.state=yc)}onDrag2End(){this.state=vc}onDrag2(){switch(this.state){case mc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=yc}break;case yc:t=this.distanceBetween,this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t}}get isPinched(){return this.state===yc}setDragThreshold(t){return this.dragThreshold=t,this}};n.register("pinch",(function(t){return new jx(this.scene,t)})),(0,b.Z)(window,"RexPlugins.UI.Pinch",jx);const Hx=Rc;n.register("rotate",(function(t){return new Hx(this.scene,t)})),(0,b.Z)(window,"RexPlugins.UI.Rotate",Hx);const qx=Phaser.Utils.Objects.IsPlainObject,Kx=Phaser.Utils.Objects.GetValue,Zx=function(t,e,i){var r;if(void 0===t)t=i.texture.key,e=i.frame.name;else if(qx(t)){var n=t;t=Kx(n,"key",i.texture.key),e=Kx(n,"frame",i.frame.name)}else"string"==typeof t||(r=t);return void 0===r&&(r=function(i){i.setTexture(t,e)}),r},Jx=Phaser.Utils.Objects.GetValue,$x=Phaser.Utils.Objects.GetAdvancedValue,Qx=Phaser.Math.Linear,tb={x:0,horizontal:0,y:1,vertical:1},eb={front:0,back:1},ib=class extends ha{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration($x(t,"duration",500)),this.setEase(Jx(t,"ease","Sine")),this.setOrientation(Jx(t,"orientation",0)),this.setFrontFace(Jx(t,"front",void 0)),this.setBackFace(Jx(t,"back",void 0)),this.setFace(Jx(t,"face",0)),this}setOrientation(t){return"string"==typeof t&&(t=tb[t]),this.orientation=t,this}get face(){return this._face}set face(t){"string"==typeof t&&(t=eb[t]),this._face=t,0===t&&this.frontFaceCallback?this.frontFaceCallback(this.parent):1===t&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=0===this.face?1:0;return this.setFace(t),this}setFrontFace(t,e){return this.frontFaceCallback=Zx(t,e,this.parent),this}setBackFace(t,e){return this.backFaceCallback=Zx(t,e,this.parent),this}start(){return this.timer.isRunning||(this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start()),this}flip(t){return this.isRunning||(void 0!==t&&this.setDuration(t),this.start()),this}updateGameObject(t,e){e.justRestart&&this.toggleFace();var i=e.t;e.isOddIteration&&(i=1-i),i=this.easeFn(i);var r=Qx(1,0,i);0===this.orientation?t.scaleX=r:t.scaleY=r}};n.register("flip",(function(t,e){return new ib(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Flip",ib);const rb=Df;n.register("touchEventStop",(function(t,e){return new rb(t,e)})),(0,b.Z)(window,"RexPlugins.UI.TouchEventStop",rb);const nb=Phaser.Math.Vector3,sb=Phaser.Math.Matrix4;var ob=new nb,ab=new nb,hb=new sb;const lb=Phaser.GameObjects.Mesh,ub=Phaser.Utils.Objects.IsPlainObject,cb=Phaser.Utils.Objects.GetValue,db=Phaser.Geom.Mesh.GenerateGridVerts,fb=Phaser.Math.RadToDeg,pb=Phaser.Math.DegToRad,gb=1+1/Math.sin(pb(45)),vb=class extends lb{constructor(t,e,i,r,n,s){ub(e)&&(e=cb(s=e,"x",0),i=cb(s,"y",0),r=cb(s,"key",null),n=cb(s,"frame",null)),super(t,e,i,r,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(gb),this.hideCCW=cb(s,"hideCCW",!0);var o=cb(s,"gridWidth",32),a=cb(s,"gridHeight",o);this.resetVerts(o,a)}resetPerspective(){return this.setPerspective(this.width,this.height,45),this}resetVerts(t,e){if(void 0!==t&&(this.gridWidth=t),void 0!==e&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,0===this.width||0===this.height)return this;var i=this.frame.cutWidth,r=this.frame.cutHeight;return db({mesh:this,texture:this.texture.key,frame:this.frame.name,width:i/this.height,height:r/this.height,widthSegments:Math.ceil(i/this.gridWidth),heightSegments:Math.ceil(r/this.gridHeight),flipY:this.frame.source.isRenderTexture}),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return fb(this.rotationX)}set angleX(t){this.rotationX=pb(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return fb(this.rotationY)}set angleY(t){this.rotationY=pb(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return fb(this.rotationZ)}set angleZ(t){this.rotationZ=pb(t)}transformVerts(t,e,i,r,n,s){return function(t,e,i,r,n,s,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),ob.set(e,i,r),ab.set(n,s,o),hb.fromRotationXYTranslation(ab,ob,!0);for(var a=0,h=t.vertices.length;a<h;a++)t.vertices[a].transformMat4(hb)}(this,t,e,i,r,n,s),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return 0===this.vertices.length?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,i=0,r=e.length;i<r;i++)e[i].color=t}setTint(t){return this.tint=t,this}},mb=Phaser.GameObjects.RenderTexture,yb=Phaser.Utils.Objects.IsPlainObject,xb=Phaser.Utils.Objects.GetValue,bb=class extends vb{constructor(t,e,i,r,n,s){yb(e)&&(e=xb(s=e,"x",0),i=xb(s,"y",0),r=xb(s,"width",32),n=xb(s,"height",32));var o=new mb(t,e,i,r,n).setOrigin(.5);super(t,e,i,o.texture.key,null,s),this.type="rexPerspectiveRenderTexture",this.rt=o}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}};Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Utils.Objects.IsPlainObject,(0,Phaser.Math.DegToRad)(180),Phaser.Utils.Objects.GetValue,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;const wb=Phaser.Geom.Rectangle,Tb=Phaser.Geom.Rectangle.Union;var Sb,Eb;var Cb=Phaser.Utils.Objects.GetValue;const _b=function(t){var e=t.gameObjects,i=t.renderTexture;if(0===e.length)return i&&i.setSize(1,1).clear(),i;var r,n,s=Cb(t,"x",void 0),o=Cb(t,"y",void 0),a=Cb(t,"width",void 0),h=Cb(t,"height",void 0),l=Cb(t,"originX",0),u=Cb(t,"originY",0);if(void 0===a||void 0===h||void 0===s||void 0===o){var c=function(t,e){var i;void 0===e?e=new wb:!0===e&&(void 0===Eb&&(Eb=new wb),e=Eb);for(var r=!0,n=0,s=t.length;n<s;n++)(i=t[n]).getBounds&&(Sb=i.getBounds(Sb),r?(e.setTo(Sb.x,Sb.y,Sb.width,Sb.height),r=!1):Tb(Sb,e,e));return e}(e,!0);void 0!==s&&void 0!==o?(a=2*Math.max(s-c.left,c.right-s),h=2*Math.max(o-c.top,c.bottom-o),l=.5,u=.5):(s=c.x,o=c.y,a=c.width,h=c.height,l=0,u=0),r=c.x,n=c.y}else r=s+(0-l)*a,n=o+(0-u)*h;return i?(i.setPosition(s,o),i.width===a&&i.height===h||i.setSize(a,h)):i=e[0].scene.add.renderTexture(s,o,a,h),i.setOrigin(l,u),i.camera.setScroll(r,n),e=xr(Ut(e)),i.draw(e),i},Ab=Lr.prototype.add,Mb=Phaser.Utils.Objects.GetValue,Pb=class extends bb{constructor(t,e){var i=t.scene;super(i,t.x,t.y,1,1,e),i.add.existing(this),this.setVisible(!1),Ab.call(t,this),this.visibleSibling=[],this.perspectiveState=!1,this.useParentBounds=Mb(e,"useParentBounds",!1),this.boot()}boot(){this.rexContainer.parent.once("destroy",this.onParentDestroy,this)}destroy(t){this.scene&&(this.exit(),this.rexContainer.parent.off("destroy",this.onParentDestroy,this),super.destroy(t))}onParentDestroy(t,e){this.destroy(e)}enter(){this.exit();var t=this.rexContainer.parent;return _b({gameObjects:t.getAllVisibleChildren(),renderTexture:this.rt,x:this.x,y:this.y,width:this.useParentBounds?t.displayWidth:void 0,height:this.useParentBounds?t.displayHeighth:void 0,originX:this.useParentBounds?t.originX:void 0,originY:this.useParentBounds?t.originY:void 0}),this.syncSize(),t.setChildVisible(this,!0),t.children.forEach((function(e){e!==this&&(t.setChildVisible(e,!1),this.visibleSibling.push(e))}),this),this.perspectiveState=!0,this}exit(){var t=this.rexContainer.parent;return this.visibleSibling.forEach((function(e){t.setChildVisible(e,!0)}),this),this.visibleSibling.length=0,t.setChildVisible(this,!1),this.perspectiveState=!1,this}};n.register("perspective",(function(t,e){return new Pb(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Perspective",Pb),n.register("anchor",(function(t,e){return new xl(t,e)})),(0,b.Z)(window,"RexPlugins.UI.Anchor",xl);const kb=Phaser.Utils.Objects.GetValue;const Ob=Phaser.Utils.Objects.GetValue;var Rb=void 0;const Lb=class extends zo{constructor(t){super(t,{eventEmitter:!1}),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(t){this.isShutdown||(this.close(),Rb===this&&(Rb=void 0),super.shutdown(t))}open(t,e){void 0!==Rb&&Rb.close(),Rb=this,au(t)&&(e=t,t=void 0),void 0===e&&(e=Ob(t,"onClose",void 0));var i=Ob(t,"onOpen",void 0),r=Ob(t,"onTextChanged",void 0);return this.inputText=function(t,e){void 0===e&&(e={});var i=t.scene,r=t.style,n=kb(e,"backgroundColor",r.backgroundColor);null===n&&(n="transparent"),e.text=kb(e,"text",t.text),e.fontFamily=kb(e,"fontFamily",r.fontFamily),e.fontSize=kb(e,"fontSize",r.fontSize),e.color=kb(e,"color",r.color),e.backgroundColor=n,e.direction=kb(e,"rtl",r.rtl)?"rtl":"ltr",e.align=kb(e,"align",function(t){return t.hasOwnProperty("align")?t.align:t.hasOwnProperty("halign")?t.halign:"left"}(r)),"rtl"===e.direction&&qm(t)&&(e.align="right");var s=new Di(i,t.x,t.y,kb(e,"width",t.width),kb(e,"height",t.height),e);return s.setOrigin(t.originX,t.originY),i.add.existing(s),s}(this.parent,t).on("textchange",(function(t){var e=t.text;r?r(this.parent,e):this.parent.text=e}),this).setFocus(),this.parent.setVisible(!1),this.onClose=e,Ob(t,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,(function(){this.scene.input.once("pointerdown",this.close,this),i&&i(this.parent)}),[],this),this}close(){return Rb=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return void 0!==this.inputText}get text(){return this.isOpened?this.inputText.text:this.parent.text}},Ib=function(t,e){Cl(t,e)},Fb=function(t,e){_l(t,e,void 0,void 0,!1)},Db=function(t,e){Dl(t,e)},Bb=function(t,e){Bl(t,e,!1)},Nb=class extends Ru{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;t.transitionIn(),t.delayCall(t.transitInTime,this.next,this)}exit_TRANS_OPNE(){this.parent.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent,e=t.displayTime;e>=0&&t.delayCall(e,t.requestClose,t),t.onOpen()}exit_OPEN(){this.parent.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;t.transitionOut(),t.delayCall(t.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){this.parent.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){this.parent.onClose()}exit_CLOSE(){}},zb=Phaser.Utils.Objects.GetValue,Ub=Phaser.Time.TimerEvent,Yb={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},Xb=class extends zo{constructor(t,e){super(t,e);var i=zb(e,"cover");this.cover=!1!==i?function(t,e){var i=t.scene,r=new Nf(i,e);return i.add.existing(r),t.isRexContainerLite?t.moveDepthBelow(r):i.children.moveBelow(r,t),r}(t,i):void 0,zb(e,"manualClose",!0)?this.setDisplayTime(-1):(this.setDisplayTime(zb(e,"duration.hold",2e3)),zb(e,"anyTouchClose",!0)&&this.anyTouchClose()),this.setTransitInTime(zb(e,"duration.in",200)),this.setTransitOutTime(zb(e,"duration.out",200)),this.setTransitInCallback(zb(e,"transitIn",Yb.popUp)),this.setTransitOutCallback(zb(e,"transitOut",Yb.scaleDown)),this.destroyParent=zb(e,"destroy",!0),this.timer=new Ub,this._state=new Nb(this,{eventEmitter:!1}),this.closeEventData=void 0,this._state.next()}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){var t=this.transitInTime;this.transitInCallback&&this.transitInCallback(this.parent,t);var e=this.cover;return e&&Dl(e,t,e.alpha),this}transitionOut(){var t=this.transitOutTime;this.transitOutCallback&&this.transitOutCallback(this.parent,t);var e=this.cover;return e&&Bl(e,t,!1),this}onOpen(){this.emit("open",this.parent,this)}onClose(){this.emit("close",this.closeEventData),this.destroyParent?this.parent.destroy():this.destroy()}delayCall(t,e,i,r){return this.timer=this.scene.time.delayedCall(t,e,r,i),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(t){return this.transitInTime=t,this}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInCallback(t){switch("string"==typeof t&&(t=Yb[t]),t){case Yb.popUp:t=Ib;break;case Yb.fadeIn:t=Db}return this.transitInCallback=t,this}setTransitOutCallback(t){switch("string"==typeof t&&(t=Yb[t]),t){case Yb.scaleDown:t=Fb;break;case Yb.fadeOut:t=Bb}return this.transitOutCallback=t,this}requestClose(t){return"OPEN"===this._state.state&&(this.closeEventData=arguments.length>0?t:this.parent,this._state.next()),this}};var Gb=function(t,e){var i=new Xb(t,e);return i.on("open",(function(){t.emit("modal.open",i)})),i.on("close",(function(e){t.emit("modal.close",e,i)})),t.on("modal.requestClose",i.requestClose,i),i.on("close",(function(){t.off("modal.requestClose",i.requestClose,i)})),i};class Wb extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new n(t)}start(){this.scene.events.on("destroy",this.destroy,this)}isInTouching(t,e,i,r){return!!t.visible&&ou(t,e,i,r)}get viewport(){return yl(this.scene,!0)}}var Vb={getParentSizer:qi,getTopmostSizer:Ki,hide:tu,show:Ql,isShown:eu,edit:function(t,e,i){return t._edit||(t._edit=new Lb(t)),t._edit.open(e,i),t._edit},wrapExpandText:function(t,e){return void 0===e&&(e=0),t._minWidth=e,t.runWidthWrap=function(t){return t instanceof kn}(t)?function(t){return function(e){return t.setFixedSize(e,0).runWordWrap(),t}}(t):Zm(t)?function(t){return function(e){return t.setMaxWidth(e),t}}(t):function(t){return function(e){var i=t.padding,r=e-i.left-i.right,n=t.style;return qm(t)?(n.wordWrapWidth=r,n.maxLines=0):(0===n.wrapMode&&(n.wrapMode=1),n.wrapWidth=r,n.maxLines=0),t.setFixedSize(e,0),t}}(t),t},waitEvent:fo,waitComplete:po,setChildrenInteractive:Gc,fadeIn:Dl,fadeOutDestroy:Bl,easeMoveTo:Hl,easeMoveFrom:ql,modal:Gb,modalPromise:function(t,e){var i=Gb(t,e);return new Promise((function(t,e){i.once("close",(function(e){t(e)}))}))},modalClose:function(t,e){t.emit("modal.requestClose",e)},requestDrag:Ux};Object.assign(Wb.prototype,Vb);const jb=Wb},9666:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ArgumentOutOfRangeError:()=>J.W,AsyncSubject:()=>m.c,BehaviorSubject:()=>g.X,ConnectableObservable:()=>n.c,EMPTY:()=>gt.E,EmptyError:()=>q.K,NEVER:()=>Bt,NotFoundError:()=>$.d,Notification:()=>X.P_,NotificationKind:()=>X.W7,ObjectUnsubscribedError:()=>Q.N,Observable:()=>r.y,ReplaySubject:()=>v.t,Scheduler:()=>U.b,SequenceError:()=>tt.c,Subject:()=>p.x,Subscriber:()=>Y.Lv,Subscription:()=>o.w0,TimeoutError:()=>et.W,UnsubscriptionError:()=>it.B,VirtualAction:()=>z,VirtualTimeScheduler:()=>N,animationFrame:()=>B,animationFrameScheduler:()=>D,animationFrames:()=>u,asap:()=>P,asapScheduler:()=>M,async:()=>k.P,asyncScheduler:()=>k.z,audit:()=>ee.U,auditTime:()=>ie.e,bindCallback:()=>ht,bindNodeCallback:()=>lt,buffer:()=>re.f,bufferCount:()=>ne.j,bufferTime:()=>se.e,bufferToggle:()=>oe.P,bufferWhen:()=>ae.R,catchError:()=>he.K,combineAll:()=>le.c,combineLatest:()=>ut.a,combineLatestAll:()=>ue.h,combineLatestWith:()=>ce.V,concat:()=>ct.z,concatAll:()=>de.u,concatMap:()=>fe.b,concatMapTo:()=>pe.w,concatWith:()=>ge.T,config:()=>te.v,connect:()=>ve.$,connectable:()=>pt,count:()=>me.Q,debounce:()=>ye.D,debounceTime:()=>xe.b,defaultIfEmpty:()=>be.d,defer:()=>dt.P,delay:()=>we.g,delayWhen:()=>Te.j,dematerialize:()=>Se.D,distinct:()=>Ee.E,distinctUntilChanged:()=>Ce.x,distinctUntilKeyChanged:()=>_e.g,elementAt:()=>Ae.T,empty:()=>gt.c,endWith:()=>Me.l,every:()=>Pe.y,exhaust:()=>ke.b,exhaustAll:()=>Oe.Y,exhaustMap:()=>Re.z,expand:()=>Le.j,filter:()=>Vt.h,finalize:()=>Ie.x,find:()=>Fe.s,findIndex:()=>De.c,first:()=>Be.P,firstValueFrom:()=>Z,flatMap:()=>je.V,forkJoin:()=>wt,from:()=>Tt.D,fromEvent:()=>Mt,fromEventPattern:()=>kt,generate:()=>Rt,groupBy:()=>Ne.v,identity:()=>V.y,ignoreElements:()=>ze.l,iif:()=>Lt,interval:()=>It.F,isEmpty:()=>Ue.x,isObservable:()=>H,last:()=>Ye.Z,lastValueFrom:()=>K,map:()=>Xe.U,mapTo:()=>Ge.h,materialize:()=>We.i,max:()=>Ve.F,merge:()=>Dt,mergeAll:()=>Ft.J,mergeMap:()=>St.z,mergeMapTo:()=>He.j,mergeScan:()=>qe.f,mergeWith:()=>Ke.b,min:()=>Ze.V,multicast:()=>Je.O,never:()=>Nt,noop:()=>W.Z,observable:()=>s.L,observeOn:()=>ot.Q,of:()=>zt.of,onErrorResumeNext:()=>Xt,pairs:()=>Gt,pairwise:()=>$e.G,partition:()=>jt,pipe:()=>G.z,pluck:()=>Qe.j,publish:()=>ti.n,publishBehavior:()=>ei.n,publishLast:()=>ii.C,publishReplay:()=>ri._,queue:()=>L,queueScheduler:()=>R,race:()=>Ht.S,raceWith:()=>ni.Q,range:()=>qt,reduce:()=>si.u,refCount:()=>ui.x,repeat:()=>oi.r,repeatWhen:()=>ai.a,retry:()=>hi.X,retryWhen:()=>li.a,sample:()=>ci.U,sampleTime:()=>di.b,scan:()=>fi.R,scheduled:()=>Qt.x,sequenceEqual:()=>pi.N,share:()=>gi.B,shareReplay:()=>vi.d,single:()=>mi.Z,skip:()=>yi.T,skipLast:()=>xi.W,skipUntil:()=>bi.u,skipWhile:()=>wi.n,startWith:()=>Ti.O,subscribeOn:()=>nt.R,switchAll:()=>Si.B,switchMap:()=>Ei.w,switchMapTo:()=>Ci.c,switchScan:()=>_i.w,take:()=>Ai.q,takeLast:()=>Mi.h,takeUntil:()=>Pi.R,takeWhile:()=>ki.o,tap:()=>Oi.b,throttle:()=>Ri.P,throttleTime:()=>Li.p,throwError:()=>Kt._,throwIfEmpty:()=>Ii.T,timeInterval:()=>Fi.J,timeout:()=>et.V,timeoutWith:()=>Di.L,timer:()=>Zt.H,timestamp:()=>Bi.A,toArray:()=>Ni.q,using:()=>Jt,window:()=>zi.u,windowCount:()=>Ui.r,windowTime:()=>Yi.I,windowToggle:()=>Xi.j,windowWhen:()=>Gi.Q,withLatestFrom:()=>Wi.M,zip:()=>$t.$,zipAll:()=>Vi.h,zipWith:()=>ji.y});var r=i(230),n=i(2537),s=i(6766),o=i(204),a={now:function(){return(a.delegate||performance).now()},delegate:void 0},h=i(5987),l={schedule:function(t){var e=requestAnimationFrame,i=cancelAnimationFrame,r=l.delegate;r&&(e=r.requestAnimationFrame,i=r.cancelAnimationFrame);var n=e((function(e){i=void 0,t(e)}));return new o.w0((function(){return null==i?void 0:i(n)}))},requestAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.delegate;return((null==i?void 0:i.requestAnimationFrame)||requestAnimationFrame).apply(void 0,(0,h.ev)([],(0,h.CR)(t)))},cancelAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.delegate;return((null==i?void 0:i.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,(0,h.ev)([],(0,h.CR)(t)))},delegate:void 0};function u(t){return t?c(t):f}function c(t){var e=l.schedule;return new r.y((function(i){var r=new o.w0,n=t||a,s=n.now(),h=function(o){var a=n.now();i.next({timestamp:t?a:o,elapsed:a-s}),i.closed||r.add(e(h))};return r.add(e(h)),r}))}var d,f=c(),p=i(9248),g=i(6515),v=i(3),m=i(2207),y=i(8337),x=1,b={};function w(t){return t in b&&(delete b[t],!0)}var T=function(t){var e=x++;return b[e]=!0,d||(d=Promise.resolve()),d.then((function(){return w(e)&&t()})),e},S=function(t){w(t)},E={setImmediate:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=E.delegate;return((null==i?void 0:i.setImmediate)||T).apply(void 0,(0,h.ev)([],(0,h.CR)(t)))},clearImmediate:function(t){var e=E.delegate;return((null==e?void 0:e.clearImmediate)||S)(t)},delegate:void 0},C=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r}return(0,h.ZT)(e,t),e.prototype.requestAsyncId=function(e,i,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,i,r):(e.actions.push(this),e._scheduled||(e._scheduled=E.setImmediate(e.flush.bind(e,void 0))))},e.prototype.recycleAsyncId=function(e,i,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,i,r);0===e.actions.length&&(E.clearImmediate(i),e._scheduled=void 0)},e}(y.o),_=i(597),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,h.ZT)(e,t),e.prototype.flush=function(t){this._active=!0,this._scheduled=void 0;var e,i=this.actions,r=-1;t=t||i.shift();var n=i.length;do{if(e=t.execute(t.state,t.delay))break}while(++r<n&&(t=i.shift()));if(this._active=!1,e){for(;++r<n&&(t=i.shift());)t.unsubscribe();throw e}},e}(_.v),M=new A(C),P=M,k=i(7991),O=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r}return(0,h.ZT)(e,t),e.prototype.schedule=function(e,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,i){return i>0||this.closed?t.prototype.execute.call(this,e,i):this._execute(e,i)},e.prototype.requestAsyncId=function(e,i,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,i,r):e.flush(this)},e}(y.o),R=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,h.ZT)(e,t),e}(_.v))(O),L=R,I=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r}return(0,h.ZT)(e,t),e.prototype.requestAsyncId=function(e,i,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,i,r):(e.actions.push(this),e._scheduled||(e._scheduled=l.requestAnimationFrame((function(){return e.flush(void 0)}))))},e.prototype.recycleAsyncId=function(e,i,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,i,r);0===e.actions.length&&(l.cancelAnimationFrame(i),e._scheduled=void 0)},e}(y.o),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,h.ZT)(e,t),e.prototype.flush=function(t){this._active=!0,this._scheduled=void 0;var e,i=this.actions,r=-1;t=t||i.shift();var n=i.length;do{if(e=t.execute(t.state,t.delay))break}while(++r<n&&(t=i.shift()));if(this._active=!1,e){for(;++r<n&&(t=i.shift());)t.unsubscribe();throw e}},e}(_.v),D=new F(I),B=D,N=function(t){function e(e,i){void 0===e&&(e=z),void 0===i&&(i=1/0);var r=t.call(this,e,(function(){return r.frame}))||this;return r.maxFrames=i,r.frame=0,r.index=-1,r}return(0,h.ZT)(e,t),e.prototype.flush=function(){for(var t,e,i=this.actions,r=this.maxFrames;(e=i[0])&&e.delay<=r&&(i.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=i.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(_.v),z=function(t){function e(e,i,r){void 0===r&&(r=e.index+=1);var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n.index=r,n.active=!0,n.index=e.index=r,n}return(0,h.ZT)(e,t),e.prototype.schedule=function(i,r){if(void 0===r&&(r=0),Number.isFinite(r)){if(!this.id)return t.prototype.schedule.call(this,i,r);this.active=!1;var n=new e(this.scheduler,this.work);return this.add(n),n.schedule(i,r)}return o.w0.EMPTY},e.prototype.requestAsyncId=function(t,i,r){void 0===r&&(r=0),this.delay=t.frame+r;var n=t.actions;return n.push(this),n.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,i){void 0===i&&(i=0)},e.prototype._execute=function(e,i){if(!0===this.active)return t.prototype._execute.call(this,e,i)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(y.o),U=i(5022),Y=i(6267),X=i(4029),G=i(2749),W=i(2967),V=i(278),j=i(8474);function H(t){return!!t&&(t instanceof r.y||(0,j.m)(t.lift)&&(0,j.m)(t.subscribe))}var q=i(8084);function K(t,e){var i="object"==typeof e;return new Promise((function(r,n){var s,o=!1;t.subscribe({next:function(t){s=t,o=!0},error:n,complete:function(){o?r(s):i?r(e.defaultValue):n(new q.K)}})}))}function Z(t,e){var i="object"==typeof e;return new Promise((function(r,n){var s=new Y.Hp({next:function(t){r(t),s.unsubscribe()},error:n,complete:function(){i?r(e.defaultValue):n(new q.K)}});t.subscribe(s)}))}var J=i(4192),$=i(2519),Q=i(9825),tt=i(3791),et=i(5211),it=i(5948),rt=i(4865),nt=i(8720),st=i(3211),ot=i(9526);function at(t,e,i,n){if(i){if(!(0,rt.K)(i))return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return at(t,e,n).apply(this,r).pipe((0,st.Z)(i))};n=i}return n?function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return at(t,e).apply(this,i).pipe((0,nt.R)(n),(0,ot.Q)(n))}:function(){for(var i=this,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var o=new m.c,a=!0;return new r.y((function(r){var s=o.subscribe(r);if(a){a=!1;var l=!1,u=!1;e.apply(i,(0,h.ev)((0,h.ev)([],(0,h.CR)(n)),[function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(t){var r=e.shift();if(null!=r)return void o.error(r)}o.next(1<e.length?e:e[0]),u=!0,l&&o.complete()}])),u&&o.complete(),l=!0}return s}))}}function ht(t,e,i){return at(!1,t,e,i)}function lt(t,e,i){return at(!0,t,e,i)}var ut=i(564),ct=i(6362),dt=i(9917),ft={connector:function(){return new p.x},resetOnDisconnect:!0};function pt(t,e){void 0===e&&(e=ft);var i=null,n=e.connector,s=e.resetOnDisconnect,o=void 0===s||s,a=n(),h=new r.y((function(t){return a.subscribe(t)}));return h.connect=function(){return i&&!i.closed||(i=(0,dt.P)((function(){return t})).subscribe(a),o&&i.add((function(){return a=n()}))),i},h}var gt=i(1545),vt=i(9061),mt=i(7878),yt=i(2457),xt=i(2566),bt=i(5210);function wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,yt.jO)(t),n=(0,vt.D)(t),s=n.args,o=n.keys,a=new r.y((function(t){var e=s.length;if(e)for(var i=new Array(e),r=e,n=e,a=function(e){var a=!1;(0,mt.Xf)(s[e]).subscribe(new xt.Q(t,(function(t){a||(a=!0,n--),i[e]=t}),(function(){return r--}),void 0,(function(){r&&a||(n||t.next(o?(0,bt.n)(o,i):i),t.complete())})))},h=0;h<e;h++)a(h);else t.complete()}));return i?a.pipe((0,st.Z)(i)):a}var Tt=i(52),St=i(3994),Et=i(5685),Ct=["addListener","removeListener"],_t=["addEventListener","removeEventListener"],At=["on","off"];function Mt(t,e,i,n){if((0,j.m)(i)&&(n=i,i=void 0),n)return Mt(t,e,i).pipe((0,st.Z)(n));var s=(0,h.CR)(function(t){return(0,j.m)(t.addEventListener)&&(0,j.m)(t.removeEventListener)}(t)?_t.map((function(r){return function(n){return t[r](e,n,i)}})):function(t){return(0,j.m)(t.addListener)&&(0,j.m)(t.removeListener)}(t)?Ct.map(Pt(t,e)):function(t){return(0,j.m)(t.on)&&(0,j.m)(t.off)}(t)?At.map(Pt(t,e)):[],2),o=s[0],a=s[1];if(!o&&(0,Et.z)(t))return(0,St.z)((function(t){return Mt(t,e,i)}))((0,mt.Xf)(t));if(!o)throw new TypeError("Invalid event target");return new r.y((function(t){var e=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.next(1<e.length?e:e[0])};return o(e),function(){return a(e)}}))}function Pt(t,e){return function(i){return function(r){return t[i](e,r)}}}function kt(t,e,i){return i?kt(t,e).pipe((0,st.Z)(i)):new r.y((function(i){var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.next(1===t.length?t[0]:t)},n=t(r);return(0,j.m)(e)?function(){return e(r,n)}:void 0}))}var Ot=i(8077);function Rt(t,e,i,r,n){var s,o,a,l;function u(){var t;return(0,h.Jh)(this,(function(r){switch(r.label){case 0:t=l,r.label=1;case 1:return e&&!e(t)?[3,4]:[4,a(t)];case 2:r.sent(),r.label=3;case 3:return t=i(t),[3,1];case 4:return[2]}}))}return 1===arguments.length?(l=(s=t).initialState,e=s.condition,i=s.iterate,o=s.resultSelector,a=void 0===o?V.y:o,n=s.scheduler):(l=t,!r||(0,rt.K)(r)?(a=V.y,n=r):a=r),(0,dt.P)(n?function(){return(0,Ot.Q)(u(),n)}:u)}function Lt(t,e,i){return(0,dt.P)((function(){return t()?e:i}))}var It=i(6697),Ft=i(4367);function Dt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,yt.yG)(t),r=(0,yt._6)(t,1/0),n=t;return n.length?1===n.length?(0,mt.Xf)(n[0]):(0,Ft.J)(r)((0,Tt.D)(n,i)):gt.E}var Bt=new r.y(W.Z);function Nt(){return Bt}var zt=i(2817),Ut=i(5873),Yt=i(8936);function Xt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,Ut.h)((0,Yt.k)(t))(gt.E)}function Gt(t,e){return(0,Tt.D)(Object.entries(t),e)}var Wt=i(414),Vt=i(4975);function jt(t,e,i){return[(0,Vt.h)(e,i)((0,mt.Xf)(t)),(0,Vt.h)((0,Wt.f)(e,i))((0,mt.Xf)(t))]}var Ht=i(7901);function qt(t,e,i){if(null==e&&(e=t,t=0),e<=0)return gt.E;var n=e+t;return new r.y(i?function(e){var r=t;return i.schedule((function(){r<n?(e.next(r++),this.schedule()):e.complete()}))}:function(e){for(var i=t;i<n&&!e.closed;)e.next(i++);e.complete()})}var Kt=i(3610),Zt=i(6625);function Jt(t,e){return new r.y((function(i){var r=t(),n=e(r);return(n?(0,mt.Xf)(n):gt.E).subscribe(i),function(){r&&r.unsubscribe()}}))}var $t=i(8234),Qt=i(5857),te=i(3912),ee=i(9070),ie=i(605),re=i(7567),ne=i(7229),se=i(5315),oe=i(4626),ae=i(4647),he=i(9878),le=i(3775),ue=i(9619),ce=i(2602),de=i(9834),fe=i(1313),pe=i(9536),ge=i(9527),ve=i(1704),me=i(4698),ye=i(2574),xe=i(2965),be=i(5700),we=i(7782),Te=i(5284),Se=i(5542),Ee=i(5631),Ce=i(3741),_e=i(6482),Ae=i(3212),Me=i(1491),Pe=i(4813),ke=i(865),Oe=i(9680),Re=i(6899),Le=i(9683),Ie=i(3286),Fe=i(4513),De=i(8582),Be=i(1458),Ne=i(6890),ze=i(533),Ue=i(6458),Ye=i(2487),Xe=i(9127),Ge=i(3833),We=i(5323),Ve=i(497),je=i(8796),He=i(8902),qe=i(8603),Ke=i(9423),Ze=i(5877),Je=i(5992),$e=i(6472),Qe=i(7606),ti=i(1145),ei=i(8372),ii=i(655),ri=i(8172),ni=i(2383),si=i(7270),oi=i(5696),ai=i(2101),hi=i(6371),li=i(2237),ui=i(218),ci=i(26),di=i(8622),fi=i(6542),pi=i(9033),gi=i(5583),vi=i(8515),mi=i(4621),yi=i(7753),xi=i(2510),bi=i(3424),wi=i(7603),Ti=i(6108),Si=i(5826),Ei=i(4978),Ci=i(8550),_i=i(6934),Ai=i(4727),Mi=i(1320),Pi=i(3505),ki=i(198),Oi=i(2006),Ri=i(5978),Li=i(9132),Ii=i(3815),Fi=i(5444),Di=i(3608),Bi=i(7185),Ni=i(62),zi=i(1804),Ui=i(5383),Yi=i(3051),Xi=i(1235),Gi=i(8737),Wi=i(3428),Vi=i(694),ji=i(6810)},2207:(t,e,i)=>{"use strict";i.d(e,{c:()=>n});var r=i(5987),n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._value=null,e._hasValue=!1,e._isComplete=!1,e}return(0,r.ZT)(e,t),e.prototype._checkFinalizedStatuses=function(t){var e=this,i=e.hasError,r=e._hasValue,n=e._value,s=e.thrownError,o=e.isStopped,a=e._isComplete;i?t.error(s):(o||a)&&(r&&t.next(n),t.complete())},e.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},e.prototype.complete=function(){var e=this,i=e._hasValue,r=e._value;e._isComplete||(this._isComplete=!0,i&&t.prototype.next.call(this,r),t.prototype.complete.call(this))},e}(i(9248).x)},6515:(t,e,i)=>{"use strict";i.d(e,{X:()=>n});var r=i(5987),n=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){var t=this,e=t.hasError,i=t.thrownError,r=t._value;if(e)throw i;return this._throwIfClosed(),r},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i(9248).x)},4029:(t,e,i)=>{"use strict";i.d(e,{W7:()=>r,P_:()=>h,kV:()=>l});var r,n=i(1545),s=i(2817),o=i(3610),a=i(8474);!function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"}(r||(r={}));var h=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){return l(this,t)},t.prototype.do=function(t,e,i){var r=this,n=r.kind,s=r.value,o=r.error;return"N"===n?null==t?void 0:t(s):"E"===n?null==e?void 0:e(o):null==i?void 0:i()},t.prototype.accept=function(t,e,i){var r;return(0,a.m)(null===(r=t)||void 0===r?void 0:r.next)?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){var t=this,e=t.kind,i=t.value,r=t.error,a="N"===e?(0,s.of)(i):"E"===e?(0,o._)((function(){return r})):"C"===e?n.E:0;if(!a)throw new TypeError("Unexpected notification kind "+e);return a},t.createNext=function(e){return new t("N",e)},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t}();function l(t,e){var i,r,n,s=t,o=s.kind,a=s.value,h=s.error;if("string"!=typeof o)throw new TypeError('Invalid notification, missing "kind"');"N"===o?null===(i=e.next)||void 0===i||i.call(e,a):"E"===o?null===(r=e.error)||void 0===r||r.call(e,h):null===(n=e.complete)||void 0===n||n.call(e)}},230:(t,e,i)=>{"use strict";i.d(e,{y:()=>u});var r=i(6267),n=i(204),s=i(6766),o=i(2749),a=i(3912),h=i(8474),l=i(8846),u=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var s,o=this,a=(s=t)&&s instanceof r.Lv||function(t){return t&&(0,h.m)(t.next)&&(0,h.m)(t.error)&&(0,h.m)(t.complete)}(s)&&(0,n.Nn)(s)?t:new r.Hp(t,e,i);return(0,l.x)((function(){var t=o,e=t.operator,i=t.source;a.add(e?e.call(a,i):i?o._subscribe(a):o._trySubscribe(a))})),a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=c(e))((function(e,r){var n;n=i.subscribe((function(e){try{t(e)}catch(t){r(t),null==n||n.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[s.L]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.U)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=c(t))((function(t,i){var r;e.subscribe((function(t){return r=t}),(function(t){return i(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function c(t){var e;return null!==(e=null!=t?t:a.v.Promise)&&void 0!==e?e:Promise}},3:(t,e,i)=>{"use strict";i.d(e,{t:()=>o});var r=i(5987),n=i(9248),s=i(4318),o=function(t){function e(e,i,r){void 0===e&&(e=1/0),void 0===i&&(i=1/0),void 0===r&&(r=s.l);var n=t.call(this)||this;return n._bufferSize=e,n._windowTime=i,n._timestampProvider=r,n._buffer=[],n._infiniteTimeWindow=!0,n._infiniteTimeWindow=i===1/0,n._bufferSize=Math.max(1,e),n._windowTime=Math.max(1,i),n}return(0,r.ZT)(e,t),e.prototype.next=function(e){var i=this,r=i.isStopped,n=i._buffer,s=i._infiniteTimeWindow,o=i._timestampProvider,a=i._windowTime;r||(n.push(e),!s&&n.push(o.now()+a)),this._trimBuffer(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),i=this._infiniteTimeWindow,r=this._buffer.slice(),n=0;n<r.length&&!t.closed;n+=i?1:2)t.next(r[n]);return this._checkFinalizedStatuses(t),e},e.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,i=t._timestampProvider,r=t._buffer,n=t._infiniteTimeWindow,s=(n?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!n){for(var o=i.now(),a=0,h=1;h<r.length&&r[h]<=o;h+=2)a=h;a&&r.splice(0,a+1)}},e}(n.x)},5022:(t,e,i)=>{"use strict";i.d(e,{b:()=>n});var r=i(4318),n=function(){function t(e,i){void 0===i&&(i=t.now),this.schedulerActionCtor=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(i,e)},t.now=r.l.now,t}()},9248:(t,e,i)=>{"use strict";i.d(e,{x:()=>l});var r=i(5987),n=i(230),s=i(204),o=i(9825),a=i(3699),h=i(8846),l=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return(0,r.ZT)(e,t),e.prototype.lift=function(t){var e=new u(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new o.N},e.prototype.next=function(t){var e=this;(0,h.x)((function(){var i,n;if(e._throwIfClosed(),!e.isStopped){var s=e.observers.slice();try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next())a.value.next(t)}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}}}))},e.prototype.error=function(t){var e=this;(0,h.x)((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var i=e.observers;i.length;)i.shift().error(t)}}))},e.prototype.complete=function(){var t=this;(0,h.x)((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,i=e.hasError,r=e.isStopped,n=e.observers;return i||r?s.Lc:(n.push(t),new s.w0((function(){return(0,a.P)(n,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,i=e.hasError,r=e.thrownError,n=e.isStopped;i?t.error(r):n&&t.complete()},e.prototype.asObservable=function(){var t=new n.y;return t.source=this,t},e.create=function(t,e){return new u(t,e)},e}(n.y),u=function(t){function e(e,i){var r=t.call(this)||this;return r.destination=e,r.source=i,r}return(0,r.ZT)(e,t),e.prototype.next=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)},e.prototype.error=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:s.Lc},e}(l)},6267:(t,e,i)=>{"use strict";i.d(e,{Hp:()=>p,Lv:()=>f});var r=i(5987),n=i(8474),s=i(204),o=i(3912),a=i(5),h=i(2967),l=u("C",void 0,void 0);function u(t,e,i){return{kind:t,value:e,error:i}}var c=i(8380),d=i(8846),f=function(t){function e(e){var i=t.call(this)||this;return i.isStopped=!1,e?(i.destination=e,(0,s.Nn)(e)&&e.add(i)):i.destination=y,i}return(0,r.ZT)(e,t),e.create=function(t,e,i){return new p(t,e,i)},e.prototype.next=function(t){this.isStopped?m(function(t){return u("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?m(u("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?m(l,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(s.w0),p=function(t){function e(e,i,r){var s,a=t.call(this)||this;if((0,n.m)(e))s=e;else if(e){var l;s=e.next,i=e.error,r=e.complete,a&&o.v.useDeprecatedNextContext?(l=Object.create(e)).unsubscribe=function(){return a.unsubscribe()}:l=e,s=null==s?void 0:s.bind(l),i=null==i?void 0:i.bind(l),r=null==r?void 0:r.bind(l)}return a.destination={next:s?g(s):h.Z,error:g(null!=i?i:v),complete:r?g(r):h.Z},a}return(0,r.ZT)(e,t),e}(f);function g(t,e){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{t.apply(void 0,(0,r.ev)([],(0,r.CR)(e)))}catch(t){o.v.useDeprecatedSynchronousErrorHandling?(0,d.O)(t):(0,a.h)(t)}}}function v(t){throw t}function m(t,e){var i=o.v.onStoppedNotification;i&&c.z.setTimeout((function(){return i(t,e)}))}var y={closed:!0,next:h.Z,error:v,complete:h.Z}},204:(t,e,i)=>{"use strict";i.d(e,{w0:()=>a,Lc:()=>h,Nn:()=>l});var r=i(5987),n=i(8474),s=i(5948),o=i(3699),a=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t,e,i,o,a;if(!this.closed){this.closed=!0;var h=this._parentage;if(h)if(this._parentage=null,Array.isArray(h))try{for(var l=(0,r.XA)(h),c=l.next();!c.done;c=l.next())c.value.remove(this)}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}else h.remove(this);var d=this.initialTeardown;if((0,n.m)(d))try{d()}catch(t){a=t instanceof s.B?t.errors:[t]}var f=this._teardowns;if(f){this._teardowns=null;try{for(var p=(0,r.XA)(f),g=p.next();!g.done;g=p.next()){var v=g.value;try{u(v)}catch(t){a=null!=a?a:[],t instanceof s.B?a=(0,r.ev)((0,r.ev)([],(0,r.CR)(a)),(0,r.CR)(t.errors)):a.push(t)}}}catch(t){i={error:t}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}if(a)throw new s.B(a)}},t.prototype.add=function(e){var i;if(e&&e!==this)if(this.closed)u(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(i=this._teardowns)&&void 0!==i?i:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&(0,o.P)(e,t)},t.prototype.remove=function(e){var i=this._teardowns;i&&(0,o.P)(i,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),h=a.EMPTY;function l(t){return t instanceof a||t&&"closed"in t&&(0,n.m)(t.remove)&&(0,n.m)(t.add)&&(0,n.m)(t.unsubscribe)}function u(t){(0,n.m)(t)?t():t.unsubscribe()}},3912:(t,e,i)=>{"use strict";i.d(e,{v:()=>r});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2537:(t,e,i)=>{"use strict";i.d(e,{c:()=>l});var r=i(5987),n=i(230),s=i(204),o=i(218),a=i(2566),h=i(6798),l=function(t){function e(e,i){var r=t.call(this)||this;return r.source=e,r.subjectFactory=i,r._subject=null,r._refCount=0,r._connection=null,(0,h.A)(e)&&(r.lift=e.lift),r}return(0,r.ZT)(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,null==t||t.unsubscribe()},e.prototype.connect=function(){var t=this,e=this._connection;if(!e){e=this._connection=new s.w0;var i=this.getSubject();e.add(this.source.subscribe(new a.Q(i,void 0,(function(){t._teardown(),i.complete()}),(function(e){t._teardown(),i.error(e)}),(function(){return t._teardown()})))),e.closed&&(this._connection=null,e=s.w0.EMPTY)}return e},e.prototype.refCount=function(){return(0,o.x)()(this)},e}(n.y)},564:(t,e,i)=>{"use strict";i.d(e,{a:()=>d,l:()=>f});var r=i(230),n=i(9061),s=i(52),o=i(278),a=i(3211),h=i(2457),l=i(5210),u=i(2566),c=i(7845);function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,h.yG)(t),u=(0,h.jO)(t),c=(0,n.D)(t),d=c.args,p=c.keys;if(0===d.length)return(0,s.D)([],i);var g=new r.y(f(d,i,p?function(t){return(0,l.n)(p,t)}:o.y));return u?g.pipe((0,a.Z)(u)):g}function f(t,e,i){return void 0===i&&(i=o.y),function(r){p(e,(function(){for(var n=t.length,o=new Array(n),a=n,h=n,l=function(n){p(e,(function(){var l=(0,s.D)(t[n],e),c=!1;l.subscribe(new u.Q(r,(function(t){o[n]=t,c||(c=!0,h--),h||r.next(i(o.slice()))}),(function(){--a||r.complete()})))}),r)},c=0;c<n;c++)l(c)}),r)}}function p(t,e,i){t?(0,c.f)(i,t,e):e()}},6362:(t,e,i)=>{"use strict";i.d(e,{z:()=>o});var r=i(9834),n=i(2457),s=i(52);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,r.u)()((0,s.D)(t,(0,n.yG)(t)))}},9917:(t,e,i)=>{"use strict";i.d(e,{P:()=>s});var r=i(230),n=i(7878);function s(t){return new r.y((function(e){(0,n.Xf)(t()).subscribe(e)}))}},1545:(t,e,i)=>{"use strict";i.d(e,{E:()=>n,c:()=>s});var r=i(230),n=new r.y((function(t){return t.complete()}));function s(t){return t?function(t){return new r.y((function(e){return t.schedule((function(){return e.complete()}))}))}(t):n}},52:(t,e,i)=>{"use strict";i.d(e,{D:()=>s});var r=i(5857),n=i(7878);function s(t,e){return e?(0,r.x)(t,e):(0,n.Xf)(t)}},7878:(t,e,i)=>{"use strict";i.d(e,{Xf:()=>g});var r=i(5987),n=i(5685),s=i(3841),o=i(230),a=i(1764),h=i(8430),l=i(8729),u=i(1837),c=i(8671),d=i(8474),f=i(5),p=i(6766);function g(t){if(t instanceof o.y)return t;if(null!=t){if((0,a.c)(t))return y=t,new o.y((function(t){var e=y[p.L]();if((0,d.m)(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((0,n.z)(t))return m=t,new o.y((function(t){for(var e=0;e<m.length&&!t.closed;e++)t.next(m[e]);t.complete()}));if((0,s.t)(t))return g=t,new o.y((function(t){g.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,f.h)}));if((0,h.D)(t))return v(t);if((0,u.T)(t))return i=t,new o.y((function(t){var e,n;try{for(var s=(0,r.XA)(i),o=s.next();!o.done;o=s.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}t.complete()}));if((0,c.L)(t))return e=t,v((0,c.Q)(e))}var e,i,g,m,y;throw(0,l.z)(t)}function v(t){return new o.y((function(e){(function(t,e){var i,n,s,o;return(0,r.mG)(this,void 0,void 0,(function(){var a,h;return(0,r.Jh)(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),i=(0,r.KL)(t),l.label=1;case 1:return[4,i.next()];case 2:if((n=l.sent()).done)return[3,4];if(a=n.value,e.next(a),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return h=l.sent(),s={error:h},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(o=i.return)?[4,o.call(i)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}},6697:(t,e,i)=>{"use strict";i.d(e,{F:()=>s});var r=i(7991),n=i(6625);function s(t,e){return void 0===t&&(t=0),void 0===e&&(e=r.z),t<0&&(t=0),(0,n.H)(t,t,e)}},2817:(t,e,i)=>{"use strict";i.d(e,{of:()=>s});var r=i(2457),n=i(52);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,r.yG)(t);return(0,n.D)(t,i)}},7901:(t,e,i)=>{"use strict";i.d(e,{S:()=>a,R:()=>h});var r=i(230),n=i(7878),s=i(8936),o=i(2566);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===(t=(0,s.k)(t)).length?(0,n.Xf)(t[0]):new r.y(h(t))}function h(t){return function(e){for(var i=[],r=function(r){i.push((0,n.Xf)(t[r]).subscribe(new o.Q(e,(function(t){if(i){for(var n=0;n<i.length;n++)n!==r&&i[n].unsubscribe();i=null}e.next(t)}))))},s=0;i&&!e.closed&&s<t.length;s++)r(s)}}},3610:(t,e,i)=>{"use strict";i.d(e,{_:()=>s});var r=i(230),n=i(8474);function s(t,e){var i=(0,n.m)(t)?t:function(){return t},s=function(t){return t.error(i())};return new r.y(e?function(t){return e.schedule(s,0,t)}:s)}},6625:(t,e,i)=>{"use strict";i.d(e,{H:()=>a});var r=i(230),n=i(7991),s=i(4865),o=i(1454);function a(t,e,i){void 0===t&&(t=0),void 0===i&&(i=n.P);var a=-1;return null!=e&&((0,s.K)(e)?i=e:a=e),new r.y((function(e){var r=(0,o.q)(t)?+t-i.now():t;r<0&&(r=0);var n=0;return i.schedule((function(){e.closed||(e.next(n++),0<=a?this.schedule(void 0,a):e.complete())}),r)}))}},8234:(t,e,i)=>{"use strict";i.d(e,{$:()=>u});var r=i(5987),n=i(230),s=i(7878),o=i(8936),a=i(1545),h=i(2566),l=i(2457);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,l.jO)(t),u=(0,o.k)(t);return u.length?new n.y((function(t){var e=u.map((function(){return[]})),n=u.map((function(){return!1}));t.add((function(){e=n=null}));for(var o=function(o){(0,s.Xf)(u[o]).subscribe(new h.Q(t,(function(s){if(e[o].push(s),e.every((function(t){return t.length}))){var a=e.map((function(t){return t.shift()}));t.next(i?i.apply(void 0,(0,r.ev)([],(0,r.CR)(a))):a),e.some((function(t,e){return!t.length&&n[e]}))&&t.complete()}}),(function(){n[o]=!0,!e[o].length&&t.complete()})))},a=0;!t.closed&&a<u.length;a++)o(a);return function(){e=n=null}})):a.E}},2566:(t,e,i)=>{"use strict";i.d(e,{Q:()=>n});var r=i(5987),n=function(t){function e(e,i,r,n,s){var o=t.call(this,e)||this;return o.onFinalize=s,o._next=i?function(t){try{i(t)}catch(t){e.error(t)}}:t.prototype._next,o._error=n?function(t){try{n(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,o._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,o}return(0,r.ZT)(e,t),e.prototype.unsubscribe=function(){var e,i=this.closed;t.prototype.unsubscribe.call(this),!i&&(null===(e=this.onFinalize)||void 0===e||e.call(this))},e}(i(6267).Lv)},9070:(t,e,i)=>{"use strict";i.d(e,{U:()=>o});var r=i(6798),n=i(7878),s=i(2566);function o(t){return(0,r.e)((function(e,i){var r=!1,o=null,a=null,h=!1,l=function(){if(null==a||a.unsubscribe(),a=null,r){r=!1;var t=o;o=null,i.next(t)}h&&i.complete()},u=function(){a=null,h&&i.complete()};e.subscribe(new s.Q(i,(function(e){r=!0,o=e,a||(0,n.Xf)(t(e)).subscribe(a=new s.Q(i,l,u))}),(function(){h=!0,(!r||!a||a.closed)&&i.complete()})))}))}},605:(t,e,i)=>{"use strict";i.d(e,{e:()=>o});var r=i(7991),n=i(9070),s=i(6625);function o(t,e){return void 0===e&&(e=r.P),(0,n.U)((function(){return(0,s.H)(t,e)}))}},7567:(t,e,i)=>{"use strict";i.d(e,{f:()=>o});var r=i(6798),n=i(2967),s=i(2566);function o(t){return(0,r.e)((function(e,i){var r=[];return e.subscribe(new s.Q(i,(function(t){return r.push(t)}),(function(){i.next(r),i.complete()}))),t.subscribe(new s.Q(i,(function(){var t=r;r=[],i.next(t)}),n.Z)),function(){r=null}}))}},7229:(t,e,i)=>{"use strict";i.d(e,{j:()=>a});var r=i(5987),n=i(6798),s=i(2566),o=i(3699);function a(t,e){return void 0===e&&(e=null),e=null!=e?e:t,(0,n.e)((function(i,n){var a=[],h=0;i.subscribe(new s.Q(n,(function(i){var s,l,u,c,d=null;h++%e==0&&a.push([]);try{for(var f=(0,r.XA)(a),p=f.next();!p.done;p=f.next())(m=p.value).push(i),t<=m.length&&(d=null!=d?d:[]).push(m)}catch(t){s={error:t}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}if(d)try{for(var g=(0,r.XA)(d),v=g.next();!v.done;v=g.next()){var m=v.value;(0,o.P)(a,m),n.next(m)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(c=g.return)&&c.call(g)}finally{if(u)throw u.error}}}),(function(){var t,e;try{for(var i=(0,r.XA)(a),s=i.next();!s.done;s=i.next()){var o=s.value;n.next(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}n.complete()}),void 0,(function(){a=null})))}))}},5315:(t,e,i)=>{"use strict";i.d(e,{e:()=>c});var r=i(5987),n=i(204),s=i(6798),o=i(2566),a=i(3699),h=i(7991),l=i(2457),u=i(7845);function c(t){for(var e,i,c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var f=null!==(e=(0,l.yG)(c))&&void 0!==e?e:h.z,p=null!==(i=c[0])&&void 0!==i?i:null,g=c[1]||1/0;return(0,s.e)((function(e,i){var s=[],h=!1,l=function(t){var e=t.buffer;t.subs.unsubscribe(),(0,a.P)(s,t),i.next(e),h&&c()},c=function(){if(s){var e=new n.w0;i.add(e);var r={buffer:[],subs:e};s.push(r),(0,u.f)(e,f,(function(){return l(r)}),t)}};null!==p&&p>=0?(0,u.f)(i,f,c,p,!0):h=!0,c();var d=new o.Q(i,(function(t){var e,i,n=s.slice();try{for(var o=(0,r.XA)(n),a=o.next();!a.done;a=o.next()){var h=a.value,u=h.buffer;u.push(t),g<=u.length&&l(h)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}}),(function(){for(;null==s?void 0:s.length;)i.next(s.shift().buffer);null==d||d.unsubscribe(),i.complete(),i.unsubscribe()}),void 0,(function(){return s=null}));e.subscribe(d)}))}},4626:(t,e,i)=>{"use strict";i.d(e,{P:()=>u});var r=i(5987),n=i(204),s=i(6798),o=i(7878),a=i(2566),h=i(2967),l=i(3699);function u(t,e){return(0,s.e)((function(i,s){var u=[];(0,o.Xf)(t).subscribe(new a.Q(s,(function(t){var i=[];u.push(i);var r=new n.w0;r.add((0,o.Xf)(e(t)).subscribe(new a.Q(s,(function(){(0,l.P)(u,i),s.next(i),r.unsubscribe()}),h.Z)))}),h.Z)),i.subscribe(new a.Q(s,(function(t){var e,i;try{for(var n=(0,r.XA)(u),s=n.next();!s.done;s=n.next())s.value.push(t)}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}}),(function(){for(;u.length>0;)s.next(u.shift());s.complete()})))}))}},4647:(t,e,i)=>{"use strict";i.d(e,{R:()=>a});var r=i(6798),n=i(2967),s=i(2566),o=i(7878);function a(t){return(0,r.e)((function(e,i){var r=null,a=null,h=function(){null==a||a.unsubscribe();var e=r;r=[],e&&i.next(e),(0,o.Xf)(t()).subscribe(a=new s.Q(i,h,n.Z))};h(),e.subscribe(new s.Q(i,(function(t){return null==r?void 0:r.push(t)}),(function(){r&&i.next(r),i.complete()}),void 0,(function(){return r=a=null})))}))}},9878:(t,e,i)=>{"use strict";i.d(e,{K:()=>o});var r=i(7878),n=i(2566),s=i(6798);function o(t){return(0,s.e)((function(e,i){var s,a=null,h=!1;a=e.subscribe(new n.Q(i,void 0,void 0,(function(n){s=(0,r.Xf)(t(n,o(t)(e))),a?(a.unsubscribe(),a=null,s.subscribe(i)):h=!0}))),h&&(a.unsubscribe(),a=null,s.subscribe(i))}))}},3775:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var r=i(9619).h},8980:(t,e,i)=>{"use strict";i.d(e,{a:()=>u});var r=i(5987),n=i(564),s=i(6798),o=i(8936),a=i(3211),h=i(2749),l=i(2457);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,l.jO)(t);return i?(0,h.z)(u.apply(void 0,(0,r.ev)([],(0,r.CR)(t))),(0,a.Z)(i)):(0,s.e)((function(e,i){(0,n.l)((0,r.ev)([e],(0,r.CR)((0,o.k)(t))))(i)}))}},9619:(t,e,i)=>{"use strict";i.d(e,{h:()=>s});var r=i(564),n=i(1410);function s(t){return(0,n.Z)(r.a,t)}},2602:(t,e,i)=>{"use strict";i.d(e,{V:()=>s});var r=i(5987),n=i(8980);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.a.apply(void 0,(0,r.ev)([],(0,r.CR)(t)))}},6038:(t,e,i)=>{"use strict";i.d(e,{z:()=>h});var r=i(5987),n=i(6798),s=i(9834),o=i(2457),a=i(52);function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,o.yG)(t);return(0,n.e)((function(e,n){(0,s.u)()((0,a.D)((0,r.ev)([e],(0,r.CR)(t)),i)).subscribe(n)}))}},9834:(t,e,i)=>{"use strict";i.d(e,{u:()=>n});var r=i(4367);function n(){return(0,r.J)(1)}},1313:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});var r=i(3994),n=i(8474);function s(t,e){return(0,n.m)(e)?(0,r.z)(t,e,1):(0,r.z)(t,1)}},9536:(t,e,i)=>{"use strict";i.d(e,{w:()=>s});var r=i(1313),n=i(8474);function s(t,e){return(0,n.m)(e)?(0,r.b)((function(){return t}),e):(0,r.b)((function(){return t}))}},9527:(t,e,i)=>{"use strict";i.d(e,{T:()=>s});var r=i(5987),n=i(6038);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.z.apply(void 0,(0,r.ev)([],(0,r.CR)(t)))}},1704:(t,e,i)=>{"use strict";i.d(e,{$:()=>h});var r=i(9248),n=i(52),s=i(6798),o=i(230),a={connector:function(){return new r.x}};function h(t,e){void 0===e&&(e=a);var i=e.connector;return(0,s.e)((function(e,r){var s,a=i();(0,n.D)(t((s=a,new o.y((function(t){return s.subscribe(t)}))))).subscribe(r),r.add(e.subscribe(a))}))}},4698:(t,e,i)=>{"use strict";i.d(e,{Q:()=>n});var r=i(7270);function n(t){return(0,r.u)((function(e,i,r){return!t||t(i,r)?e+1:e}),0)}},2574:(t,e,i)=>{"use strict";i.d(e,{D:()=>a});var r=i(6798),n=i(2967),s=i(2566),o=i(7878);function a(t){return(0,r.e)((function(e,i){var r=!1,a=null,h=null,l=function(){if(null==h||h.unsubscribe(),h=null,r){r=!1;var t=a;a=null,i.next(t)}};e.subscribe(new s.Q(i,(function(e){null==h||h.unsubscribe(),r=!0,a=e,h=new s.Q(i,l,n.Z),(0,o.Xf)(t(e)).subscribe(h)}),(function(){l(),i.complete()}),void 0,(function(){a=h=null})))}))}},2965:(t,e,i)=>{"use strict";i.d(e,{b:()=>o});var r=i(7991),n=i(6798),s=i(2566);function o(t,e){return void 0===e&&(e=r.z),(0,n.e)((function(i,r){var n=null,o=null,a=null,h=function(){if(n){n.unsubscribe(),n=null;var t=o;o=null,r.next(t)}};function l(){var i=a+t,s=e.now();if(s<i)return n=this.schedule(void 0,i-s),void r.add(n);h()}i.subscribe(new s.Q(r,(function(i){o=i,a=e.now(),n||(n=e.schedule(l,t),r.add(n))}),(function(){h(),r.complete()}),void 0,(function(){o=n=null})))}))}},5700:(t,e,i)=>{"use strict";i.d(e,{d:()=>s});var r=i(6798),n=i(2566);function s(t){return(0,r.e)((function(e,i){var r=!1;e.subscribe(new n.Q(i,(function(t){r=!0,i.next(t)}),(function(){r||i.next(t),i.complete()})))}))}},7782:(t,e,i)=>{"use strict";i.d(e,{g:()=>o});var r=i(7991),n=i(5284),s=i(6625);function o(t,e){void 0===e&&(e=r.z);var i=(0,s.H)(t,e);return(0,n.j)((function(){return i}))}},5284:(t,e,i)=>{"use strict";i.d(e,{j:()=>h});var r=i(6362),n=i(4727),s=i(533),o=i(3833),a=i(3994);function h(t,e){return e?function(i){return(0,r.z)(e.pipe((0,n.q)(1),(0,s.l)()),i.pipe(h(t)))}:(0,a.z)((function(e,i){return t(e,i).pipe((0,n.q)(1),(0,o.h)(e))}))}},5542:(t,e,i)=>{"use strict";i.d(e,{D:()=>o});var r=i(4029),n=i(6798),s=i(2566);function o(){return(0,n.e)((function(t,e){t.subscribe(new s.Q(e,(function(t){return(0,r.kV)(t,e)})))}))}},5631:(t,e,i)=>{"use strict";i.d(e,{E:()=>o});var r=i(6798),n=i(2566),s=i(2967);function o(t,e){return(0,r.e)((function(i,r){var o=new Set;i.subscribe(new n.Q(r,(function(e){var i=t?t(e):e;o.has(i)||(o.add(i),r.next(e))}))),null==e||e.subscribe(new n.Q(r,(function(){return o.clear()}),s.Z))}))}},3741:(t,e,i)=>{"use strict";i.d(e,{x:()=>o});var r=i(278),n=i(6798),s=i(2566);function o(t,e){return void 0===e&&(e=r.y),t=null!=t?t:a,(0,n.e)((function(i,r){var n,o=!0;i.subscribe(new s.Q(r,(function(i){var s=e(i);!o&&t(n,s)||(o=!1,n=s,r.next(i))})))}))}function a(t,e){return t===e}},6482:(t,e,i)=>{"use strict";i.d(e,{g:()=>n});var r=i(3741);function n(t,e){return(0,r.x)((function(i,r){return e?e(i[t],r[t]):i[t]===r[t]}))}},3212:(t,e,i)=>{"use strict";i.d(e,{T:()=>h});var r=i(4192),n=i(4975),s=i(3815),o=i(5700),a=i(4727);function h(t,e){if(t<0)throw new r.W;var i=arguments.length>=2;return function(h){return h.pipe((0,n.h)((function(e,i){return i===t})),(0,a.q)(1),i?(0,o.d)(e):(0,s.T)((function(){return new r.W})))}}},1491:(t,e,i)=>{"use strict";i.d(e,{l:()=>o});var r=i(5987),n=i(6362),s=i(2817);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return(0,n.z)(e,s.of.apply(void 0,(0,r.ev)([],(0,r.CR)(t))))}}},4813:(t,e,i)=>{"use strict";i.d(e,{y:()=>s});var r=i(6798),n=i(2566);function s(t,e){return(0,r.e)((function(i,r){var s=0;i.subscribe(new n.Q(r,(function(n){t.call(e,n,s++,i)||(r.next(!1),r.complete())}),(function(){r.next(!0),r.complete()})))}))}},865:(t,e,i)=>{"use strict";i.d(e,{b:()=>r});var r=i(9680).Y},9680:(t,e,i)=>{"use strict";i.d(e,{Y:()=>o});var r=i(6798),n=i(7878),s=i(2566);function o(){return(0,r.e)((function(t,e){var i=!1,r=null;t.subscribe(new s.Q(e,(function(t){r||(r=(0,n.Xf)(t).subscribe(new s.Q(e,void 0,(function(){r=null,i&&e.complete()}))))}),(function(){i=!0,!r&&e.complete()})))}))}},6899:(t,e,i)=>{"use strict";i.d(e,{z:()=>a});var r=i(9127),n=i(7878),s=i(6798),o=i(2566);function a(t,e){return e?function(i){return i.pipe(a((function(i,s){return(0,n.Xf)(t(i,s)).pipe((0,r.U)((function(t,r){return e(i,t,s,r)})))})))}:(0,s.e)((function(e,i){var r=0,s=null,a=!1;e.subscribe(new o.Q(i,(function(e){s||(s=new o.Q(i,void 0,(function(){s=null,a&&i.complete()})),(0,n.Xf)(t(e,r++)).subscribe(s))}),(function(){a=!0,!s&&i.complete()})))}))}},9683:(t,e,i)=>{"use strict";i.d(e,{j:()=>s});var r=i(6798),n=i(9007);function s(t,e,i){return void 0===e&&(e=1/0),e=(e||0)<1?1/0:e,(0,r.e)((function(r,s){return(0,n.p)(r,s,t,e,void 0,!0,i)}))}},4975:(t,e,i)=>{"use strict";i.d(e,{h:()=>s});var r=i(6798),n=i(2566);function s(t,e){return(0,r.e)((function(i,r){var s=0;i.subscribe(new n.Q(r,(function(i){return t.call(e,i,s++)&&r.next(i)})))}))}},3286:(t,e,i)=>{"use strict";i.d(e,{x:()=>n});var r=i(6798);function n(t){return(0,r.e)((function(e,i){try{e.subscribe(i)}finally{i.add(t)}}))}},4513:(t,e,i)=>{"use strict";i.d(e,{s:()=>s,U:()=>o});var r=i(6798),n=i(2566);function s(t,e){return(0,r.e)(o(t,e,"value"))}function o(t,e,i){var r="index"===i;return function(i,s){var o=0;i.subscribe(new n.Q(s,(function(n){var a=o++;t.call(e,n,a,i)&&(s.next(r?a:n),s.complete())}),(function(){s.next(r?-1:void 0),s.complete()})))}}},8582:(t,e,i)=>{"use strict";i.d(e,{c:()=>s});var r=i(6798),n=i(4513);function s(t,e){return(0,r.e)((0,n.U)(t,e,"index"))}},1458:(t,e,i)=>{"use strict";i.d(e,{P:()=>l});var r=i(8084),n=i(4975),s=i(4727),o=i(5700),a=i(3815),h=i(278);function l(t,e){var i=arguments.length>=2;return function(l){return l.pipe(t?(0,n.h)((function(e,i){return t(e,i,l)})):h.y,(0,s.q)(1),i?(0,o.d)(e):(0,a.T)((function(){return new r.K})))}}},8796:(t,e,i)=>{"use strict";i.d(e,{V:()=>r});var r=i(3994).z},6890:(t,e,i)=>{"use strict";i.d(e,{v:()=>l});var r=i(5987),n=i(230),s=i(7878),o=i(9248),a=i(6798),h=i(2566);function l(t,e,i,r){return(0,a.e)((function(a,l){var c;e&&"function"!=typeof e?(i=e.duration,c=e.element,r=e.connector):c=e;var d=new Map,f=function(t){d.forEach(t),t(l)},p=function(t){return f((function(e){return e.error(t)}))},g=new u(l,(function(e){try{var a=t(e),u=d.get(a);if(!u){d.set(a,u=r?r():new o.x);var f=function(t,e){var i=new n.y((function(t){g.activeGroups++;var i=e.subscribe(t);return function(){i.unsubscribe(),0==--g.activeGroups&&g.teardownAttempted&&g.unsubscribe()}}));return i.key=t,i}(a,u);if(l.next(f),i){var v=new h.Q(u,(function(){u.complete(),null==v||v.unsubscribe()}),void 0,void 0,(function(){return d.delete(a)}));g.add((0,s.Xf)(i(f)).subscribe(v))}}u.next(c?c(e):e)}catch(t){p(t)}}),(function(){return f((function(t){return t.complete()}))}),p,(function(){return d.clear()}));a.subscribe(g)}))}var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeGroups=0,e.teardownAttempted=!1,e}return(0,r.ZT)(e,t),e.prototype.unsubscribe=function(){this.teardownAttempted=!0,0===this.activeGroups&&t.prototype.unsubscribe.call(this)},e}(h.Q)},533:(t,e,i)=>{"use strict";i.d(e,{l:()=>o});var r=i(6798),n=i(2566),s=i(2967);function o(){return(0,r.e)((function(t,e){t.subscribe(new n.Q(e,s.Z))}))}},6458:(t,e,i)=>{"use strict";i.d(e,{x:()=>s});var r=i(6798),n=i(2566);function s(){return(0,r.e)((function(t,e){t.subscribe(new n.Q(e,(function(){e.next(!1),e.complete()}),(function(){e.next(!0),e.complete()})))}))}},1410:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var r=i(278),n=i(3211),s=i(2749),o=i(3994),a=i(62);function h(t,e){return(0,s.z)((0,a.q)(),(0,o.z)((function(e){return t(e)})),e?(0,n.Z)(e):r.y)}},2487:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var r=i(8084),n=i(4975),s=i(1320),o=i(3815),a=i(5700),h=i(278);function l(t,e){var i=arguments.length>=2;return function(l){return l.pipe(t?(0,n.h)((function(e,i){return t(e,i,l)})):h.y,(0,s.h)(1),i?(0,a.d)(e):(0,o.T)((function(){return new r.K})))}}},9127:(t,e,i)=>{"use strict";i.d(e,{U:()=>s});var r=i(6798),n=i(2566);function s(t,e){return(0,r.e)((function(i,r){var s=0;i.subscribe(new n.Q(r,(function(i){r.next(t.call(e,i,s++))})))}))}},3833:(t,e,i)=>{"use strict";i.d(e,{h:()=>n});var r=i(9127);function n(t){return(0,r.U)((function(){return t}))}},5323:(t,e,i)=>{"use strict";i.d(e,{i:()=>o});var r=i(4029),n=i(6798),s=i(2566);function o(){return(0,n.e)((function(t,e){t.subscribe(new s.Q(e,(function(t){e.next(r.P_.createNext(t))}),(function(){e.next(r.P_.createComplete()),e.complete()}),(function(t){e.next(r.P_.createError(t)),e.complete()})))}))}},497:(t,e,i)=>{"use strict";i.d(e,{F:()=>s});var r=i(7270),n=i(8474);function s(t){return(0,r.u)((0,n.m)(t)?function(e,i){return t(e,i)>0?e:i}:function(t,e){return t>e?t:e})}},2426:(t,e,i)=>{"use strict";i.d(e,{T:()=>l});var r=i(5987),n=i(6798),s=i(8936),o=i(4367),a=i(2457),h=i(52);function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,a.yG)(t),l=(0,a._6)(t,1/0);return t=(0,s.k)(t),(0,n.e)((function(e,n){(0,o.J)(l)((0,h.D)((0,r.ev)([e],(0,r.CR)(t)),i)).subscribe(n)}))}},4367:(t,e,i)=>{"use strict";i.d(e,{J:()=>s});var r=i(3994),n=i(278);function s(t){return void 0===t&&(t=1/0),(0,r.z)(n.y,t)}},9007:(t,e,i)=>{"use strict";i.d(e,{p:()=>o});var r=i(7878),n=i(7845),s=i(2566);function o(t,e,i,o,a,h,l,u){var c=[],d=0,f=0,p=!1,g=function(){!p||c.length||d||e.complete()},v=function(t){return d<o?m(t):c.push(t)},m=function(t){h&&e.next(t),d++;var u=!1;(0,r.Xf)(i(t,f++)).subscribe(new s.Q(e,(function(t){null==a||a(t),h?v(t):e.next(t)}),(function(){u=!0}),void 0,(function(){if(u)try{d--;for(var t=function(){var t=c.shift();l?(0,n.f)(e,l,(function(){return m(t)})):m(t)};c.length&&d<o;)t();g()}catch(t){e.error(t)}})))};return t.subscribe(new s.Q(e,v,(function(){p=!0,g()}))),function(){null==u||u()}}},3994:(t,e,i)=>{"use strict";i.d(e,{z:()=>h});var r=i(9127),n=i(7878),s=i(6798),o=i(9007),a=i(8474);function h(t,e,i){return void 0===i&&(i=1/0),(0,a.m)(e)?h((function(i,s){return(0,r.U)((function(t,r){return e(i,t,s,r)}))((0,n.Xf)(t(i,s)))}),i):("number"==typeof e&&(i=e),(0,s.e)((function(e,r){return(0,o.p)(e,r,t,i)})))}},8902:(t,e,i)=>{"use strict";i.d(e,{j:()=>s});var r=i(3994),n=i(8474);function s(t,e,i){return void 0===i&&(i=1/0),(0,n.m)(e)?(0,r.z)((function(){return t}),e,i):("number"==typeof e&&(i=e),(0,r.z)((function(){return t}),i))}},8603:(t,e,i)=>{"use strict";i.d(e,{f:()=>s});var r=i(6798),n=i(9007);function s(t,e,i){return void 0===i&&(i=1/0),(0,r.e)((function(r,s){var o=e;return(0,n.p)(r,s,(function(e,i){return t(o,e,i)}),i,(function(t){o=t}),!1,void 0,(function(){return o=null}))}))}},9423:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});var r=i(5987),n=i(2426);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.T.apply(void 0,(0,r.ev)([],(0,r.CR)(t)))}},5877:(t,e,i)=>{"use strict";i.d(e,{V:()=>s});var r=i(7270),n=i(8474);function s(t){return(0,r.u)((0,n.m)(t)?function(e,i){return t(e,i)<0?e:i}:function(t,e){return t<e?t:e})}},5992:(t,e,i)=>{"use strict";i.d(e,{O:()=>o});var r=i(2537),n=i(8474),s=i(1704);function o(t,e){var i=(0,n.m)(t)?t:function(){return t};return(0,n.m)(e)?(0,s.$)(e,{connector:i}):function(t){return new r.c(t,i)}}},9526:(t,e,i)=>{"use strict";i.d(e,{Q:()=>o});var r=i(7845),n=i(6798),s=i(2566);function o(t,e){return void 0===e&&(e=0),(0,n.e)((function(i,n){i.subscribe(new s.Q(n,(function(i){return(0,r.f)(n,t,(function(){return n.next(i)}),e)}),(function(){return(0,r.f)(n,t,(function(){return n.complete()}),e)}),(function(i){return(0,r.f)(n,t,(function(){return n.error(i)}),e)})))}))}},5873:(t,e,i)=>{"use strict";i.d(e,{h:()=>l});var r=i(5987),n=i(6798),s=i(7878),o=i(8936),a=i(2566),h=i(2967);function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,o.k)(t);return(0,n.e)((function(t,e){var n=(0,r.ev)([t],(0,r.CR)(i)),o=function(){if(!e.closed)if(n.length>0){var t=void 0;try{t=(0,s.Xf)(n.shift())}catch(t){return void o()}var i=new a.Q(e,void 0,h.Z,h.Z);e.add(t.subscribe(i)),i.add(o)}else e.complete()};o()}))}},6472:(t,e,i)=>{"use strict";i.d(e,{G:()=>s});var r=i(6798),n=i(2566);function s(){return(0,r.e)((function(t,e){var i,r=!1;t.subscribe(new n.Q(e,(function(t){var n=i;i=t,r&&e.next([n,t]),r=!0})))}))}},7606:(t,e,i)=>{"use strict";i.d(e,{j:()=>n});var r=i(9127);function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.length;if(0===i)throw new Error("list of properties cannot be empty.");return(0,r.U)((function(e){for(var r=e,n=0;n<i;n++){var s=null==r?void 0:r[t[n]];if(void 0===s)return;r=s}return r}))}},1145:(t,e,i)=>{"use strict";i.d(e,{n:()=>o});var r=i(9248),n=i(5992),s=i(1704);function o(t){return t?function(e){return(0,s.$)(t)(e)}:function(t){return(0,n.O)(new r.x)(t)}}},8372:(t,e,i)=>{"use strict";i.d(e,{n:()=>s});var r=i(6515),n=i(2537);function s(t){return function(e){var i=new r.X(t);return new n.c(e,(function(){return i}))}}},655:(t,e,i)=>{"use strict";i.d(e,{C:()=>s});var r=i(2207),n=i(2537);function s(){return function(t){var e=new r.c;return new n.c(t,(function(){return e}))}}},8172:(t,e,i)=>{"use strict";i.d(e,{_:()=>o});var r=i(3),n=i(5992),s=i(8474);function o(t,e,i,o){i&&!(0,s.m)(i)&&(o=i);var a=(0,s.m)(i)?i:void 0;return function(i){return(0,n.O)(new r.t(t,e,o),a)(i)}}},2383:(t,e,i)=>{"use strict";i.d(e,{Q:()=>a});var r=i(5987),n=i(7901),s=i(6798),o=i(278);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?(0,s.e)((function(e,i){(0,n.R)((0,r.ev)([e],(0,r.CR)(t)))(i)})):o.y}},7270:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});var r=i(1674),n=i(6798);function s(t,e){return(0,n.e)((0,r.U)(t,e,arguments.length>=2,!1,!0))}},218:(t,e,i)=>{"use strict";i.d(e,{x:()=>s});var r=i(6798),n=i(2566);function s(){return(0,r.e)((function(t,e){var i=null;t._refCount++;var r=new n.Q(e,void 0,void 0,void 0,(function(){if(!t||t._refCount<=0||0<--t._refCount)i=null;else{var r=t._connection,n=i;i=null,!r||n&&r!==n||r.unsubscribe(),e.unsubscribe()}}));t.subscribe(r),r.closed||(i=t.connect())}))}},5696:(t,e,i)=>{"use strict";i.d(e,{r:()=>o});var r=i(1545),n=i(6798),s=i(2566);function o(t){return void 0===t&&(t=1/0),t<=0?function(){return r.E}:(0,n.e)((function(e,i){var r,n=0,o=function(){var a=!1;r=e.subscribe(new s.Q(i,void 0,(function(){++n<t?r?(r.unsubscribe(),r=null,o()):a=!0:i.complete()}))),a&&(r.unsubscribe(),r=null,o())};o()}))}},2101:(t,e,i)=>{"use strict";i.d(e,{a:()=>o});var r=i(9248),n=i(6798),s=i(2566);function o(t){return(0,n.e)((function(e,i){var n,o,a=!1,h=!1,l=!1,u=function(){return l&&h&&(i.complete(),!0)},c=function(){l=!1,n=e.subscribe(new s.Q(i,void 0,(function(){l=!0,!u()&&(o||(o=new r.x,t(o).subscribe(new s.Q(i,(function(){n?c():a=!0}),(function(){h=!0,u()})))),o).next()}))),a&&(n.unsubscribe(),n=null,a=!1,c())};c()}))}},6371:(t,e,i)=>{"use strict";i.d(e,{X:()=>h});var r=i(6798),n=i(2566),s=i(278),o=i(6625),a=i(7878);function h(t){var e;void 0===t&&(t=1/0);var i=(e=t&&"object"==typeof t?t:{count:t}).count,h=void 0===i?1/0:i,l=e.delay,u=e.resetOnSuccess,c=void 0!==u&&u;return h<=0?s.y:(0,r.e)((function(t,e){var i,r=0,s=function(){var u=!1;i=t.subscribe(new n.Q(e,(function(t){c&&(r=0),e.next(t)}),void 0,(function(t){if(r++<h){var c=function(){i?(i.unsubscribe(),i=null,s()):u=!0};if(null!=l){var d="number"==typeof l?(0,o.H)(l):(0,a.Xf)(l(t,r)),f=new n.Q(e,(function(){f.unsubscribe(),c()}),(function(){e.complete()}));d.subscribe(f)}else c()}else e.error(t)}))),u&&(i.unsubscribe(),i=null,s())};s()}))}},2237:(t,e,i)=>{"use strict";i.d(e,{a:()=>o});var r=i(9248),n=i(6798),s=i(2566);function o(t){return(0,n.e)((function(e,i){var n,o,a=!1,h=function(){n=e.subscribe(new s.Q(i,void 0,void 0,(function(e){o||(o=new r.x,t(o).subscribe(new s.Q(i,(function(){return n?h():a=!0})))),o&&o.next(e)}))),a&&(n.unsubscribe(),n=null,a=!1,h())};h()}))}},26:(t,e,i)=>{"use strict";i.d(e,{U:()=>o});var r=i(6798),n=i(2967),s=i(2566);function o(t){return(0,r.e)((function(e,i){var r=!1,o=null;e.subscribe(new s.Q(i,(function(t){r=!0,o=t}))),t.subscribe(new s.Q(i,(function(){if(r){r=!1;var t=o;o=null,i.next(t)}}),n.Z))}))}},8622:(t,e,i)=>{"use strict";i.d(e,{b:()=>o});var r=i(7991),n=i(26),s=i(6697);function o(t,e){return void 0===e&&(e=r.z),(0,n.U)((0,s.F)(t,e))}},6542:(t,e,i)=>{"use strict";i.d(e,{R:()=>s});var r=i(6798),n=i(1674);function s(t,e){return(0,r.e)((0,n.U)(t,e,arguments.length>=2,!0))}},1674:(t,e,i)=>{"use strict";i.d(e,{U:()=>n});var r=i(2566);function n(t,e,i,n,s){return function(o,a){var h=i,l=e,u=0;o.subscribe(new r.Q(a,(function(e){var i=u++;l=h?t(l,e,i):(h=!0,e),n&&a.next(l)}),s&&function(){h&&a.next(l),a.complete()}))}}},9033:(t,e,i)=>{"use strict";i.d(e,{N:()=>s});var r=i(6798),n=i(2566);function s(t,e){return void 0===e&&(e=function(t,e){return t===e}),(0,r.e)((function(i,r){var s={buffer:[],complete:!1},o={buffer:[],complete:!1},a=function(t){r.next(t),r.complete()},h=function(t,i){var s=new n.Q(r,(function(r){var n=i.buffer,s=i.complete;0===n.length?s?a(!1):t.buffer.push(r):!e(r,n.shift())&&a(!1)}),(function(){t.complete=!0;var e=i.complete,r=i.buffer;e&&a(0===r.length),null==s||s.unsubscribe()}));return s};i.subscribe(h(s,o)),t.subscribe(h(o,s))}))}},5583:(t,e,i)=>{"use strict";i.d(e,{B:()=>l});var r=i(5987),n=i(52),s=i(4727),o=i(9248),a=i(6267),h=i(6798);function l(t){void 0===t&&(t={});var e=t.connector,i=void 0===e?function(){return new o.x}:e,r=t.resetOnError,s=void 0===r||r,l=t.resetOnComplete,c=void 0===l||l,d=t.resetOnRefCountZero,f=void 0===d||d;return function(t){var e=null,r=null,o=null,l=0,d=!1,p=!1,g=function(){null==r||r.unsubscribe(),r=null},v=function(){g(),e=o=null,d=p=!1},m=function(){var t=e;v(),null==t||t.unsubscribe()};return(0,h.e)((function(t,h){l++,p||d||g();var y=o=null!=o?o:i();h.add((function(){0!=--l||p||d||(r=u(m,f))})),y.subscribe(h),e||(e=new a.Hp({next:function(t){return y.next(t)},error:function(t){p=!0,g(),r=u(v,s,t),y.error(t)},complete:function(){d=!0,g(),r=u(v,c),y.complete()}}),(0,n.D)(t).subscribe(e))}))(t)}}function u(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return!0===e?(t(),null):!1===e?null:e.apply(void 0,(0,r.ev)([],(0,r.CR)(i))).pipe((0,s.q)(1)).subscribe((function(){return t()}))}},8515:(t,e,i)=>{"use strict";i.d(e,{d:()=>s});var r=i(3),n=i(5583);function s(t,e,i){var s,o,a,h=!1;return t&&"object"==typeof t?(a=null!==(s=t.bufferSize)&&void 0!==s?s:1/0,e=null!==(o=t.windowTime)&&void 0!==o?o:1/0,h=!!t.refCount,i=t.scheduler):a=null!=t?t:1/0,(0,n.B)({connector:function(){return new r.t(a,e,i)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}},4621:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var r=i(8084),n=i(3791),s=i(2519),o=i(6798),a=i(2566);function h(t){return(0,o.e)((function(e,i){var o,h=!1,l=!1,u=0;e.subscribe(new a.Q(i,(function(r){l=!0,t&&!t(r,u++,e)||(h&&i.error(new n.c("Too many matching values")),h=!0,o=r)}),(function(){h?(i.next(o),i.complete()):i.error(l?new s.d("No matching values"):new r.K)})))}))}},7753:(t,e,i)=>{"use strict";i.d(e,{T:()=>n});var r=i(4975);function n(t){return(0,r.h)((function(e,i){return t<=i}))}},2510:(t,e,i)=>{"use strict";i.d(e,{W:()=>o});var r=i(278),n=i(6798),s=i(2566);function o(t){return t<=0?r.y:(0,n.e)((function(e,i){var r=new Array(t),n=0;return e.subscribe(new s.Q(i,(function(e){var s=n++;if(s<t)r[s]=e;else{var o=s%t,a=r[o];r[o]=e,i.next(a)}}))),function(){r=null}}))}},3424:(t,e,i)=>{"use strict";i.d(e,{u:()=>a});var r=i(6798),n=i(2566),s=i(7878),o=i(2967);function a(t){return(0,r.e)((function(e,i){var r=!1,a=new n.Q(i,(function(){null==a||a.unsubscribe(),r=!0}),o.Z);(0,s.Xf)(t).subscribe(a),e.subscribe(new n.Q(i,(function(t){return r&&i.next(t)})))}))}},7603:(t,e,i)=>{"use strict";i.d(e,{n:()=>s});var r=i(6798),n=i(2566);function s(t){return(0,r.e)((function(e,i){var r=!1,s=0;e.subscribe(new n.Q(i,(function(e){return(r||(r=!t(e,s++)))&&i.next(e)})))}))}},6108:(t,e,i)=>{"use strict";i.d(e,{O:()=>o});var r=i(6362),n=i(2457),s=i(6798);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,n.yG)(t);return(0,s.e)((function(e,n){(i?(0,r.z)(t,e,i):(0,r.z)(t,e)).subscribe(n)}))}},8720:(t,e,i)=>{"use strict";i.d(e,{R:()=>n});var r=i(6798);function n(t,e){return void 0===e&&(e=0),(0,r.e)((function(i,r){r.add(t.schedule((function(){return i.subscribe(r)}),e))}))}},5826:(t,e,i)=>{"use strict";i.d(e,{B:()=>s});var r=i(4978),n=i(278);function s(){return(0,r.w)(n.y)}},4978:(t,e,i)=>{"use strict";i.d(e,{w:()=>o});var r=i(7878),n=i(6798),s=i(2566);function o(t,e){return(0,n.e)((function(i,n){var o=null,a=0,h=!1,l=function(){return h&&!o&&n.complete()};i.subscribe(new s.Q(n,(function(i){null==o||o.unsubscribe();var h=0,u=a++;(0,r.Xf)(t(i,u)).subscribe(o=new s.Q(n,(function(t){return n.next(e?e(i,t,u,h++):t)}),(function(){o=null,l()})))}),(function(){h=!0,l()})))}))}},8550:(t,e,i)=>{"use strict";i.d(e,{c:()=>s});var r=i(4978),n=i(8474);function s(t,e){return(0,n.m)(e)?(0,r.w)((function(){return t}),e):(0,r.w)((function(){return t}))}},6934:(t,e,i)=>{"use strict";i.d(e,{w:()=>s});var r=i(4978),n=i(6798);function s(t,e){return(0,n.e)((function(i,n){var s=e;return(0,r.w)((function(e,i){return t(s,e,i)}),(function(t,e){return s=e,e}))(i).subscribe(n),function(){s=null}}))}},4727:(t,e,i)=>{"use strict";i.d(e,{q:()=>o});var r=i(1545),n=i(6798),s=i(2566);function o(t){return t<=0?function(){return r.E}:(0,n.e)((function(e,i){var r=0;e.subscribe(new s.Q(i,(function(e){++r<=t&&(i.next(e),t<=r&&i.complete())})))}))}},1320:(t,e,i)=>{"use strict";i.d(e,{h:()=>a});var r=i(5987),n=i(1545),s=i(6798),o=i(2566);function a(t){return t<=0?function(){return n.E}:(0,s.e)((function(e,i){var n=[];e.subscribe(new o.Q(i,(function(e){n.push(e),t<n.length&&n.shift()}),(function(){var t,e;try{for(var s=(0,r.XA)(n),o=s.next();!o.done;o=s.next()){var a=o.value;i.next(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}i.complete()}),void 0,(function(){n=null})))}))}},3505:(t,e,i)=>{"use strict";i.d(e,{R:()=>a});var r=i(6798),n=i(2566),s=i(7878),o=i(2967);function a(t){return(0,r.e)((function(e,i){(0,s.Xf)(t).subscribe(new n.Q(i,(function(){return i.complete()}),o.Z)),!i.closed&&e.subscribe(i)}))}},198:(t,e,i)=>{"use strict";i.d(e,{o:()=>s});var r=i(6798),n=i(2566);function s(t,e){return void 0===e&&(e=!1),(0,r.e)((function(i,r){var s=0;i.subscribe(new n.Q(r,(function(i){var n=t(i,s++);(n||e)&&r.next(i),!n&&r.complete()})))}))}},2006:(t,e,i)=>{"use strict";i.d(e,{b:()=>a});var r=i(8474),n=i(6798),s=i(2566),o=i(278);function a(t,e,i){var a=(0,r.m)(t)||e||i?{next:t,error:e,complete:i}:t;return a?(0,n.e)((function(t,e){var i;null===(i=a.subscribe)||void 0===i||i.call(a);var r=!0;t.subscribe(new s.Q(e,(function(t){var i;null===(i=a.next)||void 0===i||i.call(a,t),e.next(t)}),(function(){var t;r=!1,null===(t=a.complete)||void 0===t||t.call(a),e.complete()}),(function(t){var i;r=!1,null===(i=a.error)||void 0===i||i.call(a,t),e.error(t)}),(function(){var t,e;r&&(null===(t=a.unsubscribe)||void 0===t||t.call(a)),null===(e=a.finalize)||void 0===e||e.call(a)})))})):o.y}},5978:(t,e,i)=>{"use strict";i.d(e,{d:()=>o,P:()=>a});var r=i(6798),n=i(2566),s=i(7878),o={leading:!0,trailing:!1};function a(t,e){var i=void 0===e?o:e,a=i.leading,h=i.trailing;return(0,r.e)((function(e,i){var r=!1,o=null,l=null,u=!1,c=function(){null==l||l.unsubscribe(),l=null,h&&(p(),u&&i.complete())},d=function(){l=null,u&&i.complete()},f=function(e){return l=(0,s.Xf)(t(e)).subscribe(new n.Q(i,c,d))},p=function(){if(r){r=!1;var t=o;o=null,i.next(t),!u&&f(t)}};e.subscribe(new n.Q(i,(function(t){r=!0,o=t,(!l||l.closed)&&(a?p():f(t))}),(function(){u=!0,(!(h&&r&&l)||l.closed)&&i.complete()})))}))}},9132:(t,e,i)=>{"use strict";i.d(e,{p:()=>o});var r=i(7991),n=i(5978),s=i(6625);function o(t,e,i){void 0===e&&(e=r.z),void 0===i&&(i=n.d);var o=(0,s.H)(t,e);return(0,n.P)((function(){return o}),i)}},3815:(t,e,i)=>{"use strict";i.d(e,{T:()=>o});var r=i(8084),n=i(6798),s=i(2566);function o(t){return void 0===t&&(t=a),(0,n.e)((function(e,i){var r=!1;e.subscribe(new s.Q(i,(function(t){r=!0,i.next(t)}),(function(){return r?i.complete():i.error(t())})))}))}function a(){return new r.K}},5444:(t,e,i)=>{"use strict";i.d(e,{J:()=>a});var r=i(7991),n=i(6542),s=i(9917),o=i(9127);function a(t){return void 0===t&&(t=r.P),function(e){return(0,s.P)((function(){return e.pipe((0,n.R)((function(e,i){var r=e.current;return{value:i,current:t.now(),last:r}}),{current:t.now(),value:void 0,last:void 0}),(0,o.U)((function(t){var e=t.current,i=t.last,r=t.value;return new h(r,e-i)})))}))}}var h=function(t,e){this.value=t,this.interval=e}},5211:(t,e,i)=>{"use strict";i.d(e,{W:()=>u,V:()=>c});var r=i(7991),n=i(1454),s=i(6798),o=i(7878),a=i(1819),h=i(2566),l=i(7845),u=(0,a.d)((function(t){return function(e){void 0===e&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}}));function c(t,e){var i=(0,n.q)(t)?{first:t}:"number"==typeof t?{each:t}:t,a=i.first,u=i.each,c=i.with,f=void 0===c?d:c,p=i.scheduler,g=void 0===p?null!=e?e:r.z:p,v=i.meta,m=void 0===v?null:v;if(null==a&&null==u)throw new TypeError("No timeout provided.");return(0,s.e)((function(t,e){var i,r,n=null,s=0,c=function(t){r=(0,l.f)(e,g,(function(){try{i.unsubscribe(),(0,o.Xf)(f({meta:m,lastValue:n,seen:s})).subscribe(e)}catch(t){e.error(t)}}),t)};i=t.subscribe(new h.Q(e,(function(t){null==r||r.unsubscribe(),s++,e.next(n=t),u>0&&c(u)}),void 0,void 0,(function(){(null==r?void 0:r.closed)||null==r||r.unsubscribe(),n=null}))),c(null!=a?"number"==typeof a?a:+a-g.now():u)}))}function d(t){throw new u(t)}},3608:(t,e,i)=>{"use strict";i.d(e,{L:()=>o});var r=i(7991),n=i(1454),s=i(5211);function o(t,e,i){var o,a,h;if(i=null!=i?i:r.P,(0,n.q)(t)?o=t:"number"==typeof t&&(a=t),!e)throw new TypeError("No observable provided to switch to");if(h=function(){return e},null==o&&null==a)throw new TypeError("No timeout provided.");return(0,s.V)({first:o,each:a,scheduler:i,with:h})}},7185:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(4318),n=i(9127);function s(t){return void 0===t&&(t=r.l),(0,n.U)((function(e){return{value:e,timestamp:t.now()}}))}},62:(t,e,i)=>{"use strict";i.d(e,{q:()=>o});var r=i(7270),n=i(6798),s=function(t,e){return t.push(e),t};function o(){return(0,n.e)((function(t,e){(0,r.u)(s,[])(t).subscribe(e)}))}},1804:(t,e,i)=>{"use strict";i.d(e,{u:()=>a});var r=i(9248),n=i(6798),s=i(2566),o=i(2967);function a(t){return(0,n.e)((function(e,i){var n=new r.x;i.next(n.asObservable());var a=function(t){n.error(t),i.error(t)};return e.subscribe(new s.Q(i,(function(t){return null==n?void 0:n.next(t)}),(function(){n.complete(),i.complete()}),a)),t.subscribe(new s.Q(i,(function(){n.complete(),i.next(n=new r.x)}),o.Z,a)),function(){null==n||n.unsubscribe(),n=null}}))}},5383:(t,e,i)=>{"use strict";i.d(e,{r:()=>a});var r=i(5987),n=i(9248),s=i(6798),o=i(2566);function a(t,e){void 0===e&&(e=0);var i=e>0?e:t;return(0,s.e)((function(e,s){var a=[new n.x],h=0;s.next(a[0].asObservable()),e.subscribe(new o.Q(s,(function(e){var o,l;try{for(var u=(0,r.XA)(a),c=u.next();!c.done;c=u.next())c.value.next(e)}catch(t){o={error:t}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(o)throw o.error}}var d=h-t+1;if(d>=0&&d%i==0&&a.shift().complete(),++h%i==0){var f=new n.x;a.push(f),s.next(f.asObservable())}}),(function(){for(;a.length>0;)a.shift().complete();s.complete()}),(function(t){for(;a.length>0;)a.shift().error(t);s.error(t)}),(function(){a=null})))}))}},3051:(t,e,i)=>{"use strict";i.d(e,{I:()=>c});var r=i(9248),n=i(7991),s=i(204),o=i(6798),a=i(2566),h=i(3699),l=i(2457),u=i(7845);function c(t){for(var e,i,c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var f=null!==(e=(0,l.yG)(c))&&void 0!==e?e:n.z,p=null!==(i=c[0])&&void 0!==i?i:null,g=c[1]||1/0;return(0,o.e)((function(e,i){var n=[],o=!1,l=function(t){var e=t.window,i=t.subs;e.complete(),i.unsubscribe(),(0,h.P)(n,t),o&&c()},c=function(){if(n){var e=new s.w0;i.add(e);var o=new r.x,a={window:o,subs:e,seen:0};n.push(a),i.next(o.asObservable()),(0,u.f)(e,f,(function(){return l(a)}),t)}};null!==p&&p>=0?(0,u.f)(i,f,c,p,!0):o=!0,c();var d=function(t){return n.slice().forEach(t)},v=function(t){d((function(e){var i=e.window;return t(i)})),t(i),i.unsubscribe()};return e.subscribe(new a.Q(i,(function(t){d((function(e){e.window.next(t),g<=++e.seen&&l(e)}))}),(function(){return v((function(t){return t.complete()}))}),(function(t){return v((function(e){return e.error(t)}))}))),function(){n=null}}))}},1235:(t,e,i)=>{"use strict";i.d(e,{j:()=>c});var r=i(5987),n=i(9248),s=i(204),o=i(6798),a=i(7878),h=i(2566),l=i(2967),u=i(3699);function c(t,e){return(0,o.e)((function(i,o){var c=[],d=function(t){for(;0<c.length;)c.shift().error(t);o.error(t)};(0,a.Xf)(t).subscribe(new h.Q(o,(function(t){var i=new n.x;c.push(i);var r,f=new s.w0;try{r=(0,a.Xf)(e(t))}catch(t){return void d(t)}o.next(i.asObservable()),f.add(r.subscribe(new h.Q(o,(function(){(0,u.P)(c,i),i.complete(),f.unsubscribe()}),l.Z,d)))}),l.Z)),i.subscribe(new h.Q(o,(function(t){var e,i,n=c.slice();try{for(var s=(0,r.XA)(n),o=s.next();!o.done;o=s.next())o.value.next(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}}),(function(){for(;0<c.length;)c.shift().complete();o.complete()}),d,(function(){for(;0<c.length;)c.shift().unsubscribe()})))}))}},8737:(t,e,i)=>{"use strict";i.d(e,{Q:()=>a});var r=i(9248),n=i(6798),s=i(2566),o=i(7878);function a(t){return(0,n.e)((function(e,i){var n,a,h=function(t){n.error(t),i.error(t)},l=function(){var e;null==a||a.unsubscribe(),null==n||n.complete(),n=new r.x,i.next(n.asObservable());try{e=(0,o.Xf)(t())}catch(t){return void h(t)}e.subscribe(a=new s.Q(i,l,l,h))};l(),e.subscribe(new s.Q(i,(function(t){return n.next(t)}),(function(){n.complete(),i.complete()}),h,(function(){null==a||a.unsubscribe(),n=null})))}))}},3428:(t,e,i)=>{"use strict";i.d(e,{M:()=>u});var r=i(5987),n=i(6798),s=i(2566),o=i(7878),a=i(278),h=i(2967),l=i(2457);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,l.jO)(t);return(0,n.e)((function(e,n){for(var l=t.length,u=new Array(l),c=t.map((function(){return!1})),d=!1,f=function(e){(0,o.Xf)(t[e]).subscribe(new s.Q(n,(function(t){u[e]=t,d||c[e]||(c[e]=!0,(d=c.every(a.y))&&(c=null))}),h.Z))},p=0;p<l;p++)f(p);e.subscribe(new s.Q(n,(function(t){if(d){var e=(0,r.ev)([t],(0,r.CR)(u));n.next(i?i.apply(void 0,(0,r.ev)([],(0,r.CR)(e))):e)}})))}))}},1823:(t,e,i)=>{"use strict";i.d(e,{$:()=>o});var r=i(5987),n=i(8234),s=i(6798);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.e)((function(e,i){n.$.apply(void 0,(0,r.ev)([e],(0,r.CR)(t))).subscribe(i)}))}},694:(t,e,i)=>{"use strict";i.d(e,{h:()=>s});var r=i(8234),n=i(1410);function s(t){return(0,n.Z)(r.$,t)}},6810:(t,e,i)=>{"use strict";i.d(e,{y:()=>s});var r=i(5987),n=i(1823);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.$.apply(void 0,(0,r.ev)([],(0,r.CR)(t)))}},8077:(t,e,i)=>{"use strict";i.d(e,{Q:()=>a});var r=i(230),n=i(9768),s=i(8474),o=i(7845);function a(t,e){return new r.y((function(i){var r;return(0,o.f)(i,e,(function(){r=t[n.h](),(0,o.f)(i,e,(function(){var t,e,n;try{e=(t=r.next()).value,n=t.done}catch(t){return void i.error(t)}n?i.complete():i.next(e)}),0,!0)})),function(){return(0,s.m)(null==r?void 0:r.return)&&r.return()}}))}},5857:(t,e,i)=>{"use strict";i.d(e,{x:()=>m});var r=i(7878),n=i(9526),s=i(8720),o=i(230),a=i(8077),h=i(7845);function l(t,e){if(!t)throw new Error("Iterable cannot be null");return new o.y((function(i){(0,h.f)(i,e,(function(){var r=t[Symbol.asyncIterator]();(0,h.f)(i,e,(function(){r.next().then((function(t){t.done?i.complete():i.next(t.value)}))}),0,!0)}))}))}var u=i(1764),c=i(3841),d=i(5685),f=i(1837),p=i(8430),g=i(8729),v=i(8671);function m(t,e){if(null!=t){if((0,u.c)(t))return function(t,e){return(0,r.Xf)(t).pipe((0,s.R)(e),(0,n.Q)(e))}(t,e);if((0,d.z)(t))return function(t,e){return new o.y((function(i){var r=0;return e.schedule((function(){r===t.length?i.complete():(i.next(t[r++]),i.closed||this.schedule())}))}))}(t,e);if((0,c.t)(t))return function(t,e){return(0,r.Xf)(t).pipe((0,s.R)(e),(0,n.Q)(e))}(t,e);if((0,p.D)(t))return l(t,e);if((0,f.T)(t))return(0,a.Q)(t,e);if((0,v.L)(t))return function(t,e){return l((0,v.Q)(t),e)}(t,e)}throw(0,g.z)(t)}},8337:(t,e,i)=>{"use strict";i.d(e,{o:()=>a});var r=i(5987),n=function(t){function e(e,i){return t.call(this)||this}return(0,r.ZT)(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(i(204).w0),s={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=s.delegate;return((null==i?void 0:i.setInterval)||setInterval).apply(void 0,(0,r.ev)([],(0,r.CR)(t)))},clearInterval:function(t){var e=s.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},o=i(3699),a=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r.pending=!1,r}return(0,r.ZT)(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),s.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return e;s.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i,r=!1;try{this.work(t)}catch(t){r=!0,i=t||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,i=this.scheduler,r=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,o.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(n)},597:(t,e,i)=>{"use strict";i.d(e,{v:()=>s});var r=i(5987),n=i(5022),s=function(t){function e(e,i){void 0===i&&(i=n.b.now);var r=t.call(this,e,i)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return(0,r.ZT)(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(n.b)},7991:(t,e,i)=>{"use strict";i.d(e,{z:()=>n,P:()=>s});var r=i(8337),n=new(i(597).v)(r.o),s=n},4318:(t,e,i)=>{"use strict";i.d(e,{l:()=>r});var r={now:function(){return(r.delegate||Date).now()},delegate:void 0}},8380:(t,e,i)=>{"use strict";i.d(e,{z:()=>n});var r=i(5987),n={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=n.delegate;return((null==i?void 0:i.setTimeout)||setTimeout).apply(void 0,(0,r.ev)([],(0,r.CR)(t)))},clearTimeout:function(t){var e=n.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0}},9768:(t,e,i)=>{"use strict";i.d(e,{h:()=>r});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6766:(t,e,i)=>{"use strict";i.d(e,{L:()=>r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},4192:(t,e,i)=>{"use strict";i.d(e,{W:()=>r});var r=(0,i(1819).d)((function(t){return function(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}))},8084:(t,e,i)=>{"use strict";i.d(e,{K:()=>r});var r=(0,i(1819).d)((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}}))},2519:(t,e,i)=>{"use strict";i.d(e,{d:()=>r});var r=(0,i(1819).d)((function(t){return function(e){t(this),this.name="NotFoundError",this.message=e}}))},9825:(t,e,i)=>{"use strict";i.d(e,{N:()=>r});var r=(0,i(1819).d)((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}))},3791:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var r=(0,i(1819).d)((function(t){return function(e){t(this),this.name="SequenceError",this.message=e}}))},5948:(t,e,i)=>{"use strict";i.d(e,{B:()=>r});var r=(0,i(1819).d)((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}))},2457:(t,e,i)=>{"use strict";i.d(e,{jO:()=>o,yG:()=>a,_6:()=>h});var r=i(8474),n=i(4865);function s(t){return t[t.length-1]}function o(t){return(0,r.m)(s(t))?t.pop():void 0}function a(t){return(0,n.K)(s(t))?t.pop():void 0}function h(t,e){return"number"==typeof s(t)?t.pop():e}},9061:(t,e,i)=>{"use strict";i.d(e,{D:()=>a});var r=Array.isArray,n=Object.getPrototypeOf,s=Object.prototype,o=Object.keys;function a(t){if(1===t.length){var e=t[0];if(r(e))return{args:e,keys:null};if((a=e)&&"object"==typeof a&&n(a)===s){var i=o(e);return{args:i.map((function(t){return e[t]})),keys:i}}}var a;return{args:t,keys:null}}},8936:(t,e,i)=>{"use strict";i.d(e,{k:()=>n});var r=Array.isArray;function n(t){return 1===t.length&&r(t[0])?t[0]:t}},3699:(t,e,i)=>{"use strict";function r(t,e){if(t){var i=t.indexOf(e);0<=i&&t.splice(i,1)}}i.d(e,{P:()=>r})},1819:(t,e,i)=>{"use strict";function r(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}i.d(e,{d:()=>r})},5210:(t,e,i)=>{"use strict";function r(t,e){return t.reduce((function(t,i,r){return t[i]=e[r],t}),{})}i.d(e,{n:()=>r})},8846:(t,e,i)=>{"use strict";i.d(e,{x:()=>s,O:()=>o});var r=i(3912),n=null;function s(t){if(r.v.useDeprecatedSynchronousErrorHandling){var e=!n;if(e&&(n={errorThrown:!1,error:null}),t(),e){var i=n,s=i.errorThrown,o=i.error;if(n=null,s)throw o}}else t()}function o(t){r.v.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=t)}},7845:(t,e,i)=>{"use strict";function r(t,e,i,r,n){void 0===r&&(r=0),void 0===n&&(n=!1);var s=e.schedule((function(){i(),n?t.add(this.schedule(null,r)):this.unsubscribe()}),r);if(t.add(s),!n)return s}i.d(e,{f:()=>r})},278:(t,e,i)=>{"use strict";function r(t){return t}i.d(e,{y:()=>r})},5685:(t,e,i)=>{"use strict";i.d(e,{z:()=>r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},8430:(t,e,i)=>{"use strict";i.d(e,{D:()=>n});var r=i(8474);function n(t){return Symbol.asyncIterator&&(0,r.m)(null==t?void 0:t[Symbol.asyncIterator])}},1454:(t,e,i)=>{"use strict";function r(t){return t instanceof Date&&!isNaN(t)}i.d(e,{q:()=>r})},8474:(t,e,i)=>{"use strict";function r(t){return"function"==typeof t}i.d(e,{m:()=>r})},1764:(t,e,i)=>{"use strict";i.d(e,{c:()=>s});var r=i(6766),n=i(8474);function s(t){return(0,n.m)(t[r.L])}},1837:(t,e,i)=>{"use strict";i.d(e,{T:()=>s});var r=i(9768),n=i(8474);function s(t){return(0,n.m)(null==t?void 0:t[r.h])}},3841:(t,e,i)=>{"use strict";i.d(e,{t:()=>n});var r=i(8474);function n(t){return(0,r.m)(null==t?void 0:t.then)}},8671:(t,e,i)=>{"use strict";i.d(e,{Q:()=>s,L:()=>o});var r=i(5987),n=i(8474);function s(t){return(0,r.FC)(this,arguments,(function(){var e,i,n;return(0,r.Jh)(this,(function(s){switch(s.label){case 0:e=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,(0,r.qq)(e.read())];case 3:return i=s.sent(),n=i.value,i.done?[4,(0,r.qq)(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,(0,r.qq)(n)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function o(t){return(0,n.m)(null==t?void 0:t.getReader)}},4865:(t,e,i)=>{"use strict";i.d(e,{K:()=>n});var r=i(8474);function n(t){return t&&(0,r.m)(t.schedule)}},6798:(t,e,i)=>{"use strict";i.d(e,{A:()=>n,e:()=>s});var r=i(8474);function n(t){return(0,r.m)(null==t?void 0:t.lift)}function s(t){return function(e){if(n(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}},3211:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var r=i(5987),n=i(9127),s=Array.isArray;function o(t){return(0,n.U)((function(e){return function(t,e){return s(e)?t.apply(void 0,(0,r.ev)([],(0,r.CR)(e))):t(e)}(t,e)}))}},2967:(t,e,i)=>{"use strict";function r(){}i.d(e,{Z:()=>r})},414:(t,e,i)=>{"use strict";function r(t,e){return function(i,r){return!t.call(e,i,r)}}i.d(e,{f:()=>r})},2749:(t,e,i)=>{"use strict";i.d(e,{z:()=>n,U:()=>s});var r=i(278);function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(t)}function s(t){return 0===t.length?r.y:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}},5:(t,e,i)=>{"use strict";i.d(e,{h:()=>s});var r=i(3912),n=i(8380);function s(t){n.z.setTimeout((function(){var e=r.v.onUnhandledError;if(!e)throw t;e(t)}))}},8729:(t,e,i)=>{"use strict";function r(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}i.d(e,{z:()=>r})},3232:(t,e,i)=>{"use strict";i.r(e),i.d(e,{audit:()=>r.U,auditTime:()=>n.e,buffer:()=>s.f,bufferCount:()=>o.j,bufferTime:()=>a.e,bufferToggle:()=>h.P,bufferWhen:()=>l.R,catchError:()=>u.K,combineAll:()=>c.c,combineLatest:()=>f.a,combineLatestAll:()=>d.h,combineLatestWith:()=>p.V,concat:()=>g.z,concatAll:()=>v.u,concatMap:()=>m.b,concatMapTo:()=>y.w,concatWith:()=>x.T,connect:()=>b.$,count:()=>w.Q,debounce:()=>T.D,debounceTime:()=>S.b,defaultIfEmpty:()=>E.d,delay:()=>C.g,delayWhen:()=>_.j,dematerialize:()=>A.D,distinct:()=>M.E,distinctUntilChanged:()=>P.x,distinctUntilKeyChanged:()=>k.g,elementAt:()=>O.T,endWith:()=>R.l,every:()=>L.y,exhaust:()=>I.b,exhaustAll:()=>F.Y,exhaustMap:()=>D.z,expand:()=>B.j,filter:()=>N.h,finalize:()=>z.x,find:()=>U.s,findIndex:()=>Y.c,first:()=>X.P,flatMap:()=>Q.V,groupBy:()=>G.v,ignoreElements:()=>W.l,isEmpty:()=>V.x,last:()=>j.Z,map:()=>H.U,mapTo:()=>q.h,materialize:()=>K.i,max:()=>Z.F,merge:()=>J.T,mergeAll:()=>$.J,mergeMap:()=>tt.z,mergeMapTo:()=>et.j,mergeScan:()=>it.f,mergeWith:()=>rt.b,min:()=>nt.V,multicast:()=>st.O,observeOn:()=>ot.Q,onErrorResumeNext:()=>at.h,pairwise:()=>ht.G,partition:()=>ut,pluck:()=>ct.j,publish:()=>dt.n,publishBehavior:()=>ft.n,publishLast:()=>pt.C,publishReplay:()=>gt._,race:()=>xt,raceWith:()=>yt.Q,reduce:()=>bt.u,refCount:()=>Ct.x,repeat:()=>wt.r,repeatWhen:()=>Tt.a,retry:()=>St.X,retryWhen:()=>Et.a,sample:()=>_t.U,sampleTime:()=>At.b,scan:()=>Mt.R,sequenceEqual:()=>Pt.N,share:()=>kt.B,shareReplay:()=>Ot.d,single:()=>Rt.Z,skip:()=>Lt.T,skipLast:()=>It.W,skipUntil:()=>Ft.u,skipWhile:()=>Dt.n,startWith:()=>Bt.O,subscribeOn:()=>Nt.R,switchAll:()=>zt.B,switchMap:()=>Ut.w,switchMapTo:()=>Yt.c,switchScan:()=>Xt.w,take:()=>Gt.q,takeLast:()=>Wt.h,takeUntil:()=>Vt.R,takeWhile:()=>jt.o,tap:()=>Ht.b,throttle:()=>qt.P,throttleTime:()=>Kt.p,throwIfEmpty:()=>Zt.T,timeInterval:()=>Jt.J,timeout:()=>$t.V,timeoutWith:()=>Qt.L,timestamp:()=>te.A,toArray:()=>ee.q,window:()=>ie.u,windowCount:()=>re.r,windowTime:()=>ne.I,windowToggle:()=>se.j,windowWhen:()=>oe.Q,withLatestFrom:()=>ae.M,zip:()=>he.$,zipAll:()=>le.h,zipWith:()=>ue.y});var r=i(9070),n=i(605),s=i(7567),o=i(7229),a=i(5315),h=i(4626),l=i(4647),u=i(9878),c=i(3775),d=i(9619),f=i(8980),p=i(2602),g=i(6038),v=i(9834),m=i(1313),y=i(9536),x=i(9527),b=i(1704),w=i(4698),T=i(2574),S=i(2965),E=i(5700),C=i(7782),_=i(5284),A=i(5542),M=i(5631),P=i(3741),k=i(6482),O=i(3212),R=i(1491),L=i(4813),I=i(865),F=i(9680),D=i(6899),B=i(9683),N=i(4975),z=i(3286),U=i(4513),Y=i(8582),X=i(1458),G=i(6890),W=i(533),V=i(6458),j=i(2487),H=i(9127),q=i(3833),K=i(5323),Z=i(497),J=i(2426),$=i(4367),Q=i(8796),tt=i(3994),et=i(8902),it=i(8603),rt=i(9423),nt=i(5877),st=i(5992),ot=i(9526),at=i(5873),ht=i(6472),lt=i(414);function ut(t,e){return function(i){return[(0,N.h)(t,e)(i),(0,N.h)((0,lt.f)(t,e))(i)]}}var ct=i(7606),dt=i(1145),ft=i(8372),pt=i(655),gt=i(8172),vt=i(5987),mt=i(8936),yt=i(2383);function xt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return yt.Q.apply(void 0,(0,vt.ev)([],(0,vt.CR)((0,mt.k)(t))))}var bt=i(7270),wt=i(5696),Tt=i(2101),St=i(6371),Et=i(2237),Ct=i(218),_t=i(26),At=i(8622),Mt=i(6542),Pt=i(9033),kt=i(5583),Ot=i(8515),Rt=i(4621),Lt=i(7753),It=i(2510),Ft=i(3424),Dt=i(7603),Bt=i(6108),Nt=i(8720),zt=i(5826),Ut=i(4978),Yt=i(8550),Xt=i(6934),Gt=i(4727),Wt=i(1320),Vt=i(3505),jt=i(198),Ht=i(2006),qt=i(5978),Kt=i(9132),Zt=i(3815),Jt=i(5444),$t=i(5211),Qt=i(3608),te=i(7185),ee=i(62),ie=i(1804),re=i(5383),ne=i(3051),se=i(1235),oe=i(8737),ae=i(3428),he=i(1823),le=i(694),ue=i(6810)},5987:(t,e,i)=>{"use strict";i.d(e,{ZT:()=>n,mG:()=>s,Jh:()=>o,XA:()=>a,CR:()=>h,ev:()=>l,qq:()=>u,FC:()=>c,KL:()=>d});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function s(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))}function o(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function a(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,s=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}function l(t,e){for(var i=0,r=e.length,n=t.length;i<r;i++,n++)t[n]=e[i];return t}function u(t){return this instanceof u?(this.v=t,this):new u(t)}function c(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){n[t]&&(r[t]=function(e){return new Promise((function(i,r){s.push([t,e,i,r])>1||a(t,e)}))})}function a(t,e){try{(i=n[t](e)).value instanceof u?Promise.resolve(i.value.v).then(h,l):c(s[0][2],i)}catch(t){c(s[0][3],t)}var i}function h(t){a("next",t)}function l(t){a("throw",t)}function c(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function d(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=a(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=t[i]&&function(e){return new Promise((function(r,n){!function(t,e,i,r){Promise.resolve(r).then((function(e){t({value:e,done:i})}),e)}(r,n,(e=t[i](e)).done,e.value)}))}}}Object.create,Object.create},3669:(t,e,i)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(n=r))})),e.splice(n,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=i(9231)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},9231:(t,e,i)=>{t.exports=function(t){function e(t){let i,n,s,o=null;function a(...t){if(!a.enabled)return;const r=a,n=Number(new Date),s=n-(i||n);r.diff=s,r.prev=i,r.curr=n,i=n,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((i,n)=>{if("%%"===i)return"%";o++;const s=e.formatters[n];if("function"==typeof s){const e=t[o];i=s.call(r,e),t.splice(o,1),o--}return i})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==e.namespaces&&(n=e.namespaces,s=e.enabled(t)),s),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,i){const r=e(this.namespace+(void 0===i?":":i)+t);return r.log=this.log,r}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(n),...e.skips.map(n).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let i;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(i=0;i<n;i++)r[i]&&("-"===(t=r[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let i,r;for(i=0,r=e.skips.length;i<r;i++)if(e.skips[i].test(t))return!1;for(i=0,r=e.names.length;i<r;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=i(4241),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((i=>{e[i]=t[i]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e}},4241:t=>{var e=1e3,i=60*e,r=60*i,n=24*r;function s(t,e,i,r){var n=e>=1.5*i;return Math.round(t/i)+" "+r+(n?"s":"")}t.exports=function(t,o){o=o||{};var a,h,l=typeof t;if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===l&&isFinite(t))return o.long?(a=t,(h=Math.abs(a))>=n?s(a,h,n,"day"):h>=r?s(a,h,r,"hour"):h>=i?s(a,h,i,"minute"):h>=e?s(a,h,e,"second"):a+" ms"):function(t){var s=Math.abs(t);return s>=n?Math.round(t/n)+"d":s>=r?Math.round(t/r)+"h":s>=i?Math.round(t/i)+"m":s>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},2281:t=>{"use strict";var e,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},n=0,s=0;function o(t){var e="";do{e=i[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function a(){var t=o(+new Date);return t!==e?(n=0,e=t):t+"."+o(n++)}for(;s<64;s++)r[i[s]]=s;a.encode=o,a.decode=function(t){var e=0;for(s=0;s<t.length;s++)e=64*e+r[t.charAt(s)];return e},t.exports=a},6242:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},4679:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.transports=e.Transport=e.protocol=e.Socket=void 0;const r=i(3481);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return r.Socket}}),e.protocol=r.Socket.protocol;var n=i(9870);Object.defineProperty(e,"Transport",{enumerable:!0,get:function(){return n.Transport}});var s=i(7385);Object.defineProperty(e,"transports",{enumerable:!0,get:function(){return s.transports}});var o=i(9622);Object.defineProperty(e,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}})},3481:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=i(7385),s=i(9622),o=r(i(1830)),a=r(i(4187)),h=r(i(4802)),l=i(3063),u=i(1373),c=(0,h.default)("engine.io-client:socket");class d extends l.Emitter{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=(0,a.default)(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=(0,a.default)(e.host).host),(0,s.installTimerFunctions)(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=o.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){c('creating transport "%s"',t);const e=function(t){const e={};for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}(this.opts.query);e.EIO=u.protocol,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return c("options: %j",i),new n.transports[t](i)}open(){let t;if(this.opts.rememberUpgrade&&d.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return c("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){c("setting transport %s",t.name),this.transport&&(c("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(t){c('probing transport "%s"',t);let e=this.createTransport(t),i=!1;d.priorWebsocketSuccess=!1;const r=()=>{i||(c('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(r=>{if(!i)if("pong"===r.type&&"probe"===r.data){if(c('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;d.priorWebsocketSuccess="websocket"===e.name,c('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{i||"closed"!==this.readyState&&(c("changing transport and sending upgrade packet"),l(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{c('probe transport "%s" failed',t);const i=new Error("probe error");i.transport=e.name,this.emitReserved("upgradeError",i)}})))};function n(){i||(i=!0,l(),e.close(),e=null)}const s=i=>{const r=new Error("probe error: "+i);r.transport=e.name,n(),c('probe transport "%s" failed because of error: %s',t,i),this.emitReserved("upgradeError",r)};function o(){s("transport closed")}function a(){s("socket closed")}function h(t){e&&t.name!==e.name&&(c('"%s" works - aborting "%s"',t.name,e.name),n())}const l=()=>{e.removeListener("open",r),e.removeListener("error",s),e.removeListener("close",o),this.off("close",a),this.off("upgrading",h)};e.once("open",r),e.once("error",s),e.once("close",o),this.once("close",a),this.once("upgrading",h),e.open()}onOpen(){if(c("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){c("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(c('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}else c('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(c("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof i&&(r=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const n={type:t,data:e,options:i};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),c("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?i():t()})):this.upgrading?i():t()),this}onError(t){c("socket error %j",t),d.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(c('socket close with reason: "%s"',t),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const r=t.length;for(;i<r;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}e.Socket=d,d.protocol=u.protocol},9870:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Transport=void 0;const n=i(1373),s=i(3063),o=i(9622),a=(0,r(i(4802)).default)("engine.io-client:transport");class h extends s.Emitter{constructor(t){super(),this.writable=!1,(0,o.installTimerFunctions)(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const i=new Error(t);return i.type="TransportError",i.description=e,super.emit("error",i),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):a("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const e=(0,n.decodePacket)(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}e.Transport=h},7385:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transports=void 0;const r=i(715),n=i(1308);e.transports={websocket:n.WS,polling:r.XHR}},715:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Request=e.XHR=void 0;const n=r(i(6666)),s=r(i(4802)),o=r(i(6242)),a=i(9622),h=i(3063),l=i(484),u=(0,s.default)("engine.io-client:polling-xhr");function c(){}const d=null!=new n.default({xdomain:!1}).responseType;class f extends l.Polling{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let i=location.port;i||(i=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=d&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(t=>{this.onError("xhr post error",t)}))}doPoll(){u("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t=>{this.onError("xhr poll error",t)})),this.pollXhr=t}}e.XHR=f;class p extends h.Emitter{constructor(t,e){super(),(0,a.installTimerFunctions)(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=(0,a.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new n.default(t);try{u("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},u("xhr data %s",this.data),e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=c,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}abort(){this.cleanup()}}if(e.Request=p,p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",g);else if("function"==typeof addEventListener){const t="onpagehide"in o.default?"pagehide":"unload";addEventListener(t,g,!1)}function g(){for(let t in p.requests)p.requests.hasOwnProperty(t)&&p.requests[t].abort()}},484:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Polling=void 0;const n=i(9870),s=r(i(4802)),o=r(i(2281)),a=r(i(1830)),h=i(1373),l=(0,s.default)("engine.io-client:polling");class u extends n.Transport{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{l("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(l("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){l("pre-pause polling complete"),--t||e()}))),this.writable||(l("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){l("pre-pause writing complete"),--t||e()})))}else e()}poll(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){l("polling got data %s",t),(0,h.decodePayload)(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{l("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,(0,h.encodePayload)(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let i="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port);const r=a.default.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}}e.Polling=u},5552:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultBinaryType=e.usingBrowserWebSocket=e.WebSocket=e.nextTick=void 0;const n=r(i(6242));e.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),e.WebSocket=n.default.WebSocket||n.default.MozWebSocket,e.usingBrowserWebSocket=!0,e.defaultBinaryType="arraybuffer"},1308:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WS=void 0;const n=i(9870),s=r(i(1830)),o=r(i(2281)),a=i(9622),h=i(5552),l=r(i(4802)),u=i(1373),c=(0,l.default)("engine.io-client:websocket"),d="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends n.Transport{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=d?{}:(0,a.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=h.usingBrowserWebSocket&&!d?e?new h.WebSocket(t,e):new h.WebSocket(t):new h.WebSocket(t,e,i)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||h.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],r=e===t.length-1;(0,u.encodePacket)(i,this.supportsBinary,(t=>{const e={};!h.usingBrowserWebSocket&&(i.options&&(e.compress=i.options.compress),this.opts.perMessageDeflate)&&("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1);try{h.usingBrowserWebSocket?this.ws.send(t):this.ws.send(t,e)}catch(t){c("websocket closed before onclose event")}r&&(0,h.nextTick)((()=>{this.writable=!0,this.emit("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let i="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||(t.b64=1);const r=s.default.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}check(){return!(!h.WebSocket||"__initialize"in h.WebSocket&&this.name===f.prototype.name)}}e.WS=f},6666:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(i(8058)),s=r(i(6242));e.default=function(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n.default))return new XMLHttpRequest}catch(t){}if(!e)try{return new(s.default[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},9622:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.pick=void 0;const n=r(i(6242));e.pick=function(t,...e){return e.reduce(((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e)),{})};const s=setTimeout,o=clearTimeout;e.installTimerFunctions=function(t,e){e.useNativeTimers?(t.setTimeoutFn=s.bind(n.default),t.clearTimeoutFn=o.bind(n.default)):(t.setTimeoutFn=setTimeout.bind(n.default),t.clearTimeoutFn=clearTimeout.bind(n.default))}},3087:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_PACKET=e.PACKET_TYPES_REVERSE=e.PACKET_TYPES=void 0;const i=Object.create(null);e.PACKET_TYPES=i,i.open="0",i.close="1",i.ping="2",i.pong="3",i.message="4",i.upgrade="5",i.noop="6";const r=Object.create(null);e.PACKET_TYPES_REVERSE=r,Object.keys(i).forEach((t=>{r[i[t]]=t})),e.ERROR_PACKET={type:"error",data:"parser error"}},7572:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(3087),n=i(8247),s="function"==typeof ArrayBuffer,o=(t,e)=>{if(s){const i=(0,n.decode)(t);return a(i,e)}return{base64:!0,data:t}},a=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;e.default=(t,e)=>{if("string"!=typeof t)return{type:"message",data:a(t,e)};const i=t.charAt(0);return"b"===i?{type:"message",data:o(t.substring(1),e)}:r.PACKET_TYPES_REVERSE[i]?t.length>1?{type:r.PACKET_TYPES_REVERSE[i],data:t.substring(1)}:{type:r.PACKET_TYPES_REVERSE[i]}:r.ERROR_PACKET}},3908:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(3087),n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,o=(t,e)=>{const i=new FileReader;return i.onload=function(){const t=i.result.split(",")[1];e("b"+t)},i.readAsDataURL(t)};e.default=({type:t,data:e},i,a)=>{return n&&e instanceof Blob?i?a(e):o(e,a):s&&(e instanceof ArrayBuffer||(h=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(h):h&&h.buffer instanceof ArrayBuffer))?i?a(e):o(new Blob([e]),a):a(r.PACKET_TYPES[t]+(e||""));var h}},1373:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodePayload=e.decodePacket=e.encodePayload=e.encodePacket=e.protocol=void 0;const r=i(3908);e.encodePacket=r.default;const n=i(7572);e.decodePacket=n.default;const s=String.fromCharCode(30);e.encodePayload=(t,e)=>{const i=t.length,n=new Array(i);let o=0;t.forEach(((t,a)=>{(0,r.default)(t,!1,(t=>{n[a]=t,++o===i&&e(n.join(s))}))}))},e.decodePayload=(t,e)=>{const i=t.split(s),r=[];for(let t=0;t<i.length;t++){const s=(0,n.default)(i[t],e);if(r.push(s),"error"===s.type)break}return r},e.protocol=4},7046:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const n=i(3084),s=i(4168);Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return s.Manager}});const o=i(8312);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=r(i(3669)).default("socket.io-client"),h={};function l(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const i=n.url(t,e.path||"/socket.io"),r=i.source,o=i.id,l=i.path,u=h[o]&&l in h[o].nsps;let c;return e.forceNew||e["force new connection"]||!1===e.multiplex||u?(a("ignoring socket cache for %s",r),c=new s.Manager(r,e)):(h[o]||(a("new io instance for %s",r),h[o]=new s.Manager(r,e)),c=h[o]),i.query&&!e.query&&(e.query=i.queryKey),c.socket(i.path,e)}e.io=l,e.connect=l,e.default=l,Object.assign(l,{Manager:s.Manager,Socket:o.Socket,io:l,connect:l});var u=i(7116);Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return u.protocol}}),t.exports=l},4168:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const a=i(4679),h=i(8312),l=s(i(7116)),u=i(7149),c=o(i(3010)),d=i(3063),f=o(i(3669)).default("socket.io-client:manager");class p extends d.Emitter{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,a.installTimerFunctions(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=e.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new c.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||l;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(f("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=u.on(e,"open",(function(){i.onopen(),t&&t()})),n=u.on(e,"error",(e=>{f("error"),i.cleanup(),i._readyState="closed",this.emitReserved("error",e),t?t(e):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;f("connect attempt will timeout after %d",t),0===t&&r();const i=this.setTimeoutFn((()=>{f("connect attempt timed out after %d",t),r(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}return this.subs.push(r),this.subs.push(n),this}connect(t){return this.open(t)}onopen(){f("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(u.on(t,"ping",this.onping.bind(this)),u.on(t,"data",this.ondata.bind(this)),u.on(t,"error",this.onerror.bind(this)),u.on(t,"close",this.onclose.bind(this)),u.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){f("error",t),this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new h.Socket(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const t of e)if(this.nsps[t].active)return void f("socket %s is still active, skipping close",t);this._close()}_packet(t){f("writing packet %j",t);const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){f("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){f("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){f("closed due to %s",t),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();f("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const i=this.setTimeoutFn((()=>{t.skipReconnect||(f("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(f("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(f("reconnect success"),t.onreconnect())})))}),e);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}e.Manager=p},7149:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,i){return t.on(e,i),function(){t.off(e,i)}}},8312:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=i(7116),s=i(7149),o=i(3063),a=r(i(3669)).default("socket.io-client:socket"),h=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class l extends o.Emitter{constructor(t,e,i){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[s.on(t,"open",this.onopen.bind(this)),s.on(t,"packet",this.onpacket.bind(this)),s.on(t,"error",this.onerror.bind(this)),s.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(h.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const i={type:n.PacketType.EVENT,data:e,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++;a("emitting packet with ack id %d",t);const r=e.pop();this._registerAckCallback(t,r),i.id=t}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||r&&this.connected?this.connected?this.packet(i):this.sendBuffer.push(i):a("discard packet as the transport is not currently writable"),this.flags={},this}_registerAckCallback(t,e){const i=this.flags.timeout;if(void 0===i)return void(this.acks[t]=e);const r=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&(a("removing packet with ack id %d from the buffer",t),this.sendBuffer.splice(e,1));a("event with ack id %d has timed out after %d ms",t,i),e.call(this,new Error("operation has timed out"))}),i);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(r),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:n.PacketType.CONNECT,data:t})})):this.packet({type:n.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){a("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case n.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(t);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(t);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];a("emitting event %j",e),null!=t.id&&(a("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...r){i||(i=!0,a("sending ack %j",r),e.packet({type:n.PacketType.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(a("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):a("bad ack %s",t.id)}onconnect(t){a("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}e.Socket=l},3084:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const n=r(i(4187)),s=r(i(3669)).default("socket.io-client:url");e.url=function(t,e="",i){let r=t;i=i||"undefined"!=typeof location&&location,null==t&&(t=i.protocol+"//"+i.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(s("protocol-less url %s",t),t=void 0!==i?i.protocol+"//"+t:"https://"+t),s("parse %s",t),r=n.default(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(i&&i.port===r.port?"":":"+r.port),r}},3155:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const r=i(790);function n(t,e){if(!t)return t;if(r.isBinary(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}if(Array.isArray(t)){const i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=n(t[r],e);return i}if("object"==typeof t&&!(t instanceof Date)){const i={};for(const r in t)t.hasOwnProperty(r)&&(i[r]=n(t[r],e));return i}return t}function s(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=s(t[i],e);else if("object"==typeof t)for(const i in t)t.hasOwnProperty(i)&&(t[i]=s(t[i],e));return t}e.deconstructPacket=function(t){const e=[],i=t.data,r=t;return r.data=n(i,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=s(t.data,e),t.attachments=void 0,t}},7116:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const r=i(3063),n=i(3155),s=i(790),o=i(3669).default("socket.io-parser");var a;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(a=e.PacketType||(e.PacketType={})),e.Encoder=class{encode(t){return o("encoding packet %j",t),t.type!==a.EVENT&&t.type!==a.ACK||!s.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==a.BINARY_EVENT&&t.type!==a.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),o("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=n.deconstructPacket(t),i=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(i),r}};class h extends r.Emitter{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===a.BINARY_EVENT||e.type===a.BINARY_ACK?(this.reconstructor=new l(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!s.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(void 0===a[i.type])throw new Error("unknown packet type "+i.type);if(i.type===a.BINARY_EVENT||i.type===a.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const n=t.substring(r,e);if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(n)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);i.nsp=t.substring(r,e)}else i.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!h.isPayloadValid(i.type,r))throw new Error("invalid payload");i.data=r}return o("decoded %s as %j",t,i),i}static isPayloadValid(t,e){switch(t){case a.CONNECT:return"object"==typeof e;case a.DISCONNECT:return void 0===e;case a.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=h;class l{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},790:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const i="function"==typeof ArrayBuffer,r=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function o(t){return i&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||n&&t instanceof Blob||s&&t instanceof File}e.isBinary=o,e.hasBinary=function t(e,i){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(t(e[i]))return!0;return!1}if(o(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0;return!1}}}]);